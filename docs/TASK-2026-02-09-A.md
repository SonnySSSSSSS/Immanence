# TASK-2026-02-09-A: GitHub Pages Stale Deploy Investigation

**Status**: PENDING  
**Assigned**: Copilot (planner)  
**Priority**: Investigation

---

## Goal

Identify why GitHub Pages serves stale content even though the deploy flow reports success.

---

## Component Analysis (Reuse First)

### Existing Tools Reviewed

1. **work-manager-open.cmd**
   - ✅ Reuse AS-IS for the primary deploy flow

2. **backup-and-deploy.bat**
   - ✅ Reuse AS-IS as the fallback deploy path

3. **check-immanence-load.ps1**
   - ✅ Reuse AS-IS for a post-deploy load check

4. **gh-pages/**
   - ✅ Reuse AS-IS for validating local deploy artifacts

**Decision**: No new scripts or components. Use existing deploy and verification tools.

---

## Files to Modify (ALLOWLIST)

- docs/TASK-2026-02-09-A.md
- build_output.txt
- dry_run_output.txt
- AUDIT_REPORTS.md

## Files NOT to Modify (DENYLIST)

- src/App.jsx
- package.json
- vite.config.js
- src/components/Avatar.jsx
- src/components/MoonOrbit.jsx
- src/components/MoonGlowLayer.jsx
- Any files under src/

---

## Constraints

- No application code changes and no version bump.
- Use only existing deploy scripts and verification utilities.
- Run everything from D:\Unity Apps\immanence-os.
- Record timestamps, commit SHA, branch name, and Pages URL in the audit notes.
- Do not alter GitHub Pages settings during investigation.

---

## Verification Steps

1. Run the primary deploy flow via work-manager-open.cmd and capture console output into build_output.txt.
2. Confirm local deploy artifacts exist in gh-pages/ and reflect the latest build time.
3. Validate GitHub Pages build status and timestamp in the repo settings.
4. Fetch the live Pages URL twice with cache-busting query strings and record response headers (Cache-Control, ETag, Age).
5. Compare the live index.html (via browser view-source or curl) against the local gh-pages index.html to confirm mismatch.
6. If mismatch persists, check that asset URLs and base path align with /Immanence/ in the deployed index.

---

## Commit Message

chore: document gh-pages investigation
