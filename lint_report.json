[{"filePath":"D:\\Unity Apps\\immanence-os\\src\\App.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'isCurriculumComplete' and 'shouldShowOnboarding'. Either include them or remove the dependency array.","line":194,"column":6,"nodeType":"ArrayExpression","endLine":194,"endColumn":49,"suggestions":[{"desc":"Update the dependencies array to be: [showWelcome, curriculumOnboardingComplete, shouldShowOnboarding, isCurriculumComplete]","fix":{"range":[8510,8553],"text":"[showWelcome, curriculumOnboardingComplete, shouldShowOnboarding, isCurriculumComplete]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, lazy, Suspense } from \"react\";\nimport { Avatar } from \"./components/avatar\";\nimport { StageTitle } from \"./components/StageTitle.jsx\";\nimport { PracticeSection } from \"./components/PracticeSection.jsx\";\nimport { HomeHub } from \"./components/HomeHub.jsx\";\n\n// Lazy load heavy sections for better initial performance\n// Named exports need to be wrapped for React.lazy\nconst WisdomSection = lazy(() => import(\"./components/WisdomSection.jsx\").then(m => ({ default: m.WisdomSection })));\nconst ApplicationSection = lazy(() => import(\"./components/ApplicationSection.jsx\").then(m => ({ default: m.ApplicationSection })));\nimport { NavigationSection } from \"./components/NavigationSection.jsx\";\nimport { Background } from \"./components/Background.jsx\";\nimport { IndrasNet } from \"./components/IndrasNet.jsx\";\nimport { WelcomeScreen } from \"./components/WelcomeScreen.jsx\";\nimport { CurriculumOnboarding } from \"./components/CurriculumOnboarding.jsx\";\nimport { CurriculumCompletionReport } from \"./components/CurriculumCompletionReport.jsx\";\nimport { useCurriculumStore } from \"./state/curriculumStore.js\";\nimport { AvatarPreview } from \"./components/AvatarPreview.jsx\";\nimport { DevPanel } from \"./components/DevPanel.jsx\";\nimport { DisplayModeToggle } from \"./components/DisplayModeToggle.jsx\";\nimport { WidthToggle } from \"./components/WidthToggle.jsx\";\nimport { useDisplayModeStore } from \"./state/displayModeStore.js\";\nimport { ThemeProvider } from \"./context/ThemeContext.jsx\";\nimport { startImagePreloading } from \"./utils/imagePreloader.js\";\nimport { InstallPrompt } from \"./components/InstallPrompt.jsx\";\nimport { SigilTracker } from \"./components/SigilTracker.jsx\";\nimport { HardwareGuide } from \"./components/HardwareGuide.jsx\";\nimport { useWakeLock } from \"./hooks/useWakeLock.js\";\nimport ErrorBoundary from \"./components/ErrorBoundary.jsx\";\nimport \"./App.css\";\n\nfunction SectionView({ section, isPracticing, onPracticingChange, breathState, onBreathStateChange, onStageChange, currentStage, previewPath, previewShowCore, previewAttention, showFxGallery, onNavigate, onOpenHardwareGuide }) {\n  // Navigation and Application sections handle their own avatars and stage titles\n  const showAvatar = section !== 'navigation' && section !== 'application';\n\n  return (\n    <div className=\"flex-1 flex flex-col items-center section-enter\" style={{ overflow: 'visible' }}>\n      {showAvatar && (\n        <div className=\"w-full flex flex-col items-center mt-6 mb-4 relative z-20\">\n          {/* Avatar with scale/fade during practice */}\n          <div\n            className=\"transition-all duration-500\"\n            style={{\n              transform: isPracticing ? 'scale(0.65)' : 'scale(1)',\n              opacity: isPracticing ? 0.5 : 1,\n            }}\n          >\n            <Avatar\n              mode={section}\n              breathState={breathState}\n              onStageChange={onStageChange}\n              stage={currentStage}\n              path={previewPath}\n              showCore={previewShowCore}\n              attention={previewAttention}\n            />\n          </div>\n        </div>\n      )}\n\n      <div className=\"w-full flex-1 relative z-10 px-4 transition-all duration-500\" style={{ overflow: 'visible' }}>\n        {section === \"practice\" && <PracticeSection onPracticingChange={onPracticingChange} onBreathStateChange={onBreathStateChange} avatarPath={previewPath} showCore={previewShowCore} showFxGallery={showFxGallery} />}\n\n        {section === \"wisdom\" && (\n          <Suspense fallback={\n            <div className=\"flex items-center justify-center p-12\">\n              <div className=\"text-white/50 font-bold text-sm tracking-wide\" style={{ fontFamily: 'var(--font-ui)' }}>Loading Wisdom...</div>\n            </div>\n          }>\n            <WisdomSection />\n          </Suspense>\n        )}\n\n        {section === \"application\" && (\n          <Suspense fallback={\n            <div className=\"flex items-center justify-center p-12\">\n              <div className=\"text-white/50 font-bold text-sm tracking-wide\" style={{ fontFamily: 'var(--font-ui)' }}>Loading Application...</div>\n            </div>\n          }>\n            <ApplicationSection onStageChange={onStageChange} currentStage={currentStage} previewPath={previewPath} previewShowCore={previewShowCore} previewAttention={previewAttention} onNavigate={onNavigate} />\n          </Suspense>\n        )}\n\n        {section === \"navigation\" && <NavigationSection onStageChange={onStageChange} currentStage={currentStage} previewPath={previewPath} previewShowCore={previewShowCore} previewAttention={previewAttention} onNavigate={onNavigate} onOpenHardwareGuide={onOpenHardwareGuide} />}\n      </div>\n    </div>\n  );\n}\n\n\nfunction App() {\n  // Display mode (sanctuary/hearth) and color scheme (dark/light)\n  const displayMode = useDisplayModeStore((s) => s.mode);\n  const colorScheme = useDisplayModeStore((s) => s.colorScheme);\n  const isLight = colorScheme === 'light';\n\n  // Curriculum state\n  const { \n    shouldShowOnboarding, \n    isCurriculumComplete,\n    onboardingComplete: curriculumOnboardingComplete,\n  } = useCurriculumStore();\n  const [showCurriculumOnboarding, setShowCurriculumOnboarding] = useState(false);\n  const [showCurriculumReport, setShowCurriculumReport] = useState(false);\n\n\n\n  // Check if user has seen welcome screen\n  const getHasSeenWelcome = () => {\n    try {\n      const stored = localStorage.getItem('immanenceOS.hasSeenWelcome');\n      return stored === 'true';\n    } catch {\n      return false;\n    }\n  };\n\n  // Load default view preference (defaulting to hub)\n  const getDefaultView = () => {\n    try {\n      const stored = localStorage.getItem('immanenceOS.defaultView');\n      return stored || 'hub'; // 'hub' or 'navigation'\n    } catch {\n      return 'hub';\n    }\n  };\n\n  const [showWelcome, setShowWelcome] = useState(!getHasSeenWelcome());\n  const [defaultView] = useState(getDefaultView());\n  const [activeSection, setActiveSection] = useState(() => {\n    // If default view is 'navigation', start there\n    return defaultView === 'navigation' ? 'navigation' : null;\n  });\n  const [isPracticing, setIsPracticing] = useState(false);\n  const [breathState, setBreathState] = useState({ phase: 'rest', progress: 0, isPracticing: false });\n  const [avatarStage, setAvatarStage] = useState(\"Seedling\"); // Track avatar stage name for theme\n  const [showAvatarPreview, setShowAvatarPreview] = useState(false);\n  const showFxGallery = true; // FX Gallery dev mode\n  const [showDevPanel, setShowDevPanel] = useState(false); // Dev Panel (≡ƒÄ¿ button)\n  const [isSigilTrackerOpen, setIsSigilTrackerOpen] = useState(false);\n  const [isHardwareGuideOpen, setIsHardwareGuideOpen] = useState(false);\n  const [isMinimized] = useState(false);\n  const lastTapRef = useRef(0);\n\n  // Screen Wake Lock when in Vigilance Mode\n  useWakeLock(isMinimized);\n\n  const handleDoubleTap = () => {\n    const now = Date.now();\n    const delay = now - lastTapRef.current;\n    if (delay < 300 && delay > 0) {\n      // Double tap detected\n      setIsSigilTrackerOpen(true);\n    }\n    lastTapRef.current = now;\n  };\n  // Preview state (lifted from AvatarPreview to persist and apply to all avatars)\n  const [previewStage, setPreviewStage] = useState('Seedling');\n  const [previewPath, setPreviewPath] = useState('Soma');\n  const [previewShowCore, setPreviewShowCore] = useState(true);\n  const [previewAttention, setPreviewAttention] = useState('none');\n\n  // Sync avatarStage with previewStage so theme colors update\n  useEffect(() => {\n    setAvatarStage(previewStage);\n  }, [previewStage]);\n\n  // Keyboard shortcut: Shift+P to open Avatar Preview\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.shiftKey && e.key === 'P') {\n        setShowAvatarPreview((v) => !v);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  // Preload critical images on app start\n  useEffect(() => {\n    startImagePreloading(import.meta.env.BASE_URL);\n  }, []);\n\n  // Check curriculum state (after showWelcome is declared)\n  useEffect(() => {\n    // Show onboarding if needed (after welcome screen is dismissed)\n    if (!showWelcome && shouldShowOnboarding()) {\n      setShowCurriculumOnboarding(true);\n    }\n    // Show completion report if curriculum complete and not dismissed\n    if (curriculumOnboardingComplete && isCurriculumComplete()) {\n      setShowCurriculumReport(true);\n    }\n  }, [showWelcome, curriculumOnboardingComplete]);\n\n  // Note: CSS variables now set by ThemeProvider based on avatarStage\n\n  const handleDismissWelcome = () => {\n    setShowWelcome(false);\n    try {\n      localStorage.setItem('immanenceOS.hasSeenWelcome', 'true');\n    } catch {\n      // ignore\n    }\n  };\n\n  const isHub = activeSection === null;\n  return (\n    <ThemeProvider currentStage={avatarStage}>\n\n      {/* Show welcome screen on first visit */}\n      {showWelcome && <WelcomeScreen onDismiss={handleDismissWelcome} />}\n\n      {/* Curriculum Onboarding (skippable) */}\n      {showCurriculumOnboarding && (\n        <CurriculumOnboarding \n          onDismiss={() => setShowCurriculumOnboarding(false)}\n          onComplete={() => setShowCurriculumOnboarding(false)}\n        />\n      )}\n\n      {/* Curriculum Completion Report */}\n      {showCurriculumReport && (\n        <CurriculumCompletionReport\n          onDismiss={() => setShowCurriculumReport(false)}\n        />\n      )}\n\n      {/* Avatar Preview Debug Panel */}\n      {showAvatarPreview && (\n        <AvatarPreview\n          onClose={() => setShowAvatarPreview(false)}\n          stage={previewStage}\n          path={previewPath}\n          showCore={previewShowCore}\n          onStageChange={setPreviewStage}\n          onPathChange={setPreviewPath}\n          onShowCoreChange={setPreviewShowCore}\n        />\n      )}\n\n      {/* Dev Panel (≡ƒÄ¿ button or Ctrl+Shift+D) */}\n      <DevPanel\n        isOpen={showDevPanel}\n        onClose={() => setShowDevPanel(false)}\n        avatarStage={previewStage}\n        setAvatarStage={setPreviewStage}\n        avatarPath={previewPath}\n        setAvatarPath={setPreviewPath}\n        showCore={previewShowCore}\n        setShowCore={setPreviewShowCore}\n        avatarAttention={previewAttention}\n        setAvatarAttention={setPreviewAttention}\n      />\n\n      {/* Outer Layout Container - Adapts to display mode */}\n      <div\n        className=\"min-h-screen w-full flex justify-center overflow-visible transition-colors duration-500 relative\"\n        style={{\n          background: isLight\n            ? 'linear-gradient(135deg, #F5F0E6 0%, #EDE5D8 100%)'\n            : (displayMode === 'sanctuary'\n              ? 'linear-gradient(135deg, #0a0a12 0%, #050508 100%)'\n              : '#000'),\n        }}\n      >\n        {/* Side mask - left side (dynamic based on display mode) */}\n        <div\n          className=\"fixed inset-y-0 left-0 pointer-events-none z-50 transition-all duration-500\"\n          style={{\n            width: displayMode === 'sanctuary'\n              ? 'calc((100vw - min(100vw, 820px)) / 2)'\n              : 'calc((100vw - min(100vw, 430px)) / 2)',\n            background: '#000',\n          }}\n        />\n\n        {/* Side mask - right side (dynamic based on display mode) */}\n        <div\n          className=\"fixed inset-y-0 right-0 pointer-events-none z-50 transition-all duration-500\"\n          style={{\n            width: displayMode === 'sanctuary'\n              ? 'calc((100vw - min(100vw, 820px)) / 2)'\n              : 'calc((100vw - min(100vw, 430px)) / 2)',\n            background: '#000',\n          }}\n        />\n\n        {/* Inner App Container */}\n        <div\n          className={`relative min-h-screen flex flex-col items-center overflow-visible transition-all duration-500 ${isLight ? 'text-[#3D3425]' : 'text-white'}`}\n          onPointerDown={handleDoubleTap}\n          style={displayMode === 'sanctuary' ? {\n            // Sanctuary: iPad width (820px)\n            width: '100%',\n            maxWidth: '820px',\n            boxShadow: 'none',\n          } : {\n            // Hearth: Phone width (430px)\n            width: '100%',\n            maxWidth: '430px',\n            boxShadow: '0 0 100px rgba(255, 120, 40, 0.15), 0 0 200px rgba(255, 80, 20, 0.08)',\n          }}\n        >\n          <Background stage={previewStage} />\n\n          {/* HAMBURGER MENU - Inside App Container, absolute positioned to stay within UI bounds */}\n          {displayMode === 'hearth' && (\n            <div className=\"absolute top-3 right-2 z-[9999]\">\n              <button\n                type=\"button\"\n                onClick={() => setShowDevPanel(v => !v)}\n                className={`p-2.5 rounded-xl transition-all shadow-lg ${showDevPanel\n                  ? (isLight ? 'bg-amber-100' : 'bg-white/20')\n                  : (isLight ? 'bg-white/90' : 'bg-black/70')\n                  }`}\n                style={{\n                  backdropFilter: 'blur(12px)',\n                  border: isLight\n                    ? '2px solid rgba(140, 120, 90, 0.4)'\n                    : '2px solid rgba(255, 255, 255, 0.2)',\n                }}\n                aria-label=\"Menu\"\n              >\n                <svg\n                  width=\"22\"\n                  height=\"22\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke={isLight ? 'rgba(90, 77, 60, 0.9)' : 'rgba(255, 255, 255, 0.8)'}\n                  strokeWidth=\"2.5\"\n                  strokeLinecap=\"round\"\n                >\n                  <line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\" />\n                  <line x1=\"4\" y1=\"12\" x2=\"20\" y2=\"12\" />\n                  <line x1=\"4\" y1=\"17\" x2=\"20\" y2=\"17\" />\n                </svg>\n              </button>\n\n              {/* Dropdown Menu */}\n              {showDevPanel && (\n                <div\n                  className=\"absolute right-0 top-full mt-2 rounded-xl overflow-hidden shadow-2xl\"\n                  style={{\n                    background: isLight\n                      ? 'rgba(255, 252, 245, 0.98)'\n                      : 'rgba(20, 18, 16, 0.98)',\n                    backdropFilter: 'blur(16px)',\n                    border: isLight\n                      ? '2px solid rgba(140, 120, 90, 0.35)'\n                      : '2px solid rgba(255, 255, 255, 0.15)',\n                    minWidth: '160px'\n                  }}\n                >\n                  <div className=\"flex flex-col gap-2 p-3\">\n                    <div className=\"flex items-center justify-between gap-2\">\n                      <span className={`text-xs font-medium ${isLight ? 'text-[#5A4D3C]' : 'text-white/80'}`}>Width</span>\n                      <WidthToggle />\n                    </div>\n                    <div className=\"flex items-center justify-between gap-2\">\n                      <span className={`text-xs font-medium ${isLight ? 'text-[#5A4D3C]' : 'text-white/80'}`}>Theme</span>\n                      <DisplayModeToggle />\n                    </div>\n                    <div\n                      className=\"h-px w-full\"\n                      style={{\n                        background: isLight\n                          ? 'rgba(90, 77, 60, 0.2)'\n                          : 'rgba(255, 255, 255, 0.1)'\n                      }}\n                    />\n                    <div className={`text-[9px] text-center ${isLight ? 'text-[#5A4D3C]/50' : 'text-white/40'}`}>v3.15.59</div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className=\"relative z-10 w-full flex-1 flex flex-col overflow-visible\">\n            {/* Fixed Dark Header Bar */}\n            <header\n              className=\"sticky top-0 z-50 w-full px-6 py-3 transition-colors duration-500\"\n              style={{\n                background: isLight\n                  ? 'linear-gradient(180deg, rgba(200,185,165,0.1) 0%, rgba(210,195,175,0.05) 60%, transparent 100%)'\n                  : 'linear-gradient(180deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0.2) 100%)',\n                backdropFilter: 'blur(8px)',\n                WebkitBackdropFilter: 'blur(8px)',\n                borderBottom: isLight\n                  ? '1px solid rgba(140,120,90,0.15)'\n                  : '1px solid rgba(255,255,255,0.05)',\n              }}\n            >\n              <div className=\"flex items-center justify-between w-full h-full relative\">\n                {/* Left: Branding (Sanctuary) or Empty (Hearth) */}\n                <div className=\"flex-1 flex items-center justify-start\">\n                  {displayMode === 'sanctuary' && (\n                    <div\n                      className={`text-[10px] text-suspended ${isLight ? 'text-[#5A4D3C]/70' : 'text-white/60'}`}\n                      style={{ fontFamily: 'var(--font-display)', fontWeight: 600, letterSpacing: '0.15em' }}\n                    >\n                      IMMANENCE OS\n                    </div>\n                  )}\n                </div>\n\n                {/* Center Element: StageTitle - Always visible, Absolutely positioned for true centering */}\n                {/* We use a container to ensure hit targets or relative positioning don't bleed */}\n                <div\n                  className=\"absolute left-1/2 top-1/2 flex justify-center items-center pointer-events-none\"\n                  style={{\n                    transform: 'translate(-50%, calc(-50% - 5px)) scaleX(0.65) scaleY(0.6)',\n                    width: 'min(50vw, 400px)',\n                    transformOrigin: 'center center'\n                  }}\n                >\n                  <div className=\"pointer-events-auto\">\n                    <StageTitle\n                      stage={previewStage}\n                      path={previewPath}\n                      attention={previewAttention}\n                      showWelcome={false}\n                    />\n                  </div>\n                </div>\n\n                {/* Right: Controls & Home Button */}\n                <div className=\"flex-1 flex items-center justify-end gap-3\">\n                  {displayMode === 'sanctuary' && (\n                    <div className=\"flex items-center gap-3\">\n                      <WidthToggle />\n                      <DisplayModeToggle />\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowDevPanel(v => !v)}\n                        className=\"text-lg opacity-60 hover:opacity-100 active:scale-95 transition-all\"\n                        title=\"Dev Panel (Ctrl+Shift+D)\"\n                        style={{ color: showDevPanel ? 'var(--accent-color)' : undefined }}\n                      >\n                        ≡ƒÄ¿\n                      </button>\n                      <div\n                        className={`text-[8px] uppercase tracking-[0.15em] ${isLight ? 'text-[#5A4D3C]/50' : 'text-white/40'}`}\n                        style={{ fontFamily: 'var(--font-display)' }}\n                      >\n                        v3.15.59\n                      </div>\n                    </div>\n                  )}\n\n                  {!isHub && (\n                    <button\n                      type=\"button\"\n                      onClick={() => setActiveSection(null)}\n                      className={`text-[11px] uppercase tracking-[0.15em] px-2 py-1 rounded-lg transition-colors ${isLight ? 'text-[#5A4D3C]/70 hover:text-[#3D3425] hover:bg-black/5' : 'text-white/70 hover:text-white hover:bg-white/5'}`}\n                      style={{ fontFamily: 'var(--font-display)', fontWeight: 500 }}\n                    >\n                      Home\n                    </button>\n                  )}\n                </div>\n              </div>\n            </header>\n\n            {/* Main content - hide when minimized */}\n            <div\n              style={{\n                opacity: isMinimized ? 0 : 1,\n                pointerEvents: isMinimized ? 'none' : 'auto',\n                transition: 'opacity 0.7s ease'\n              }}\n              inert={isMinimized ? \"\" : undefined}\n            >\n              {isHub ? (\n                <div key=\"hub\" className=\"section-enter\">\n                  <HomeHub\n                    onSelectSection={setActiveSection}\n                    onStageChange={(hsl, stageName) => {\n                      setAvatarStage(stageName);\n                      setPreviewStage(stageName);\n                    }}\n                    isPracticing={isPracticing}\n                    currentStage={previewStage}\n                    previewPath={previewPath}\n                    previewShowCore={previewShowCore}\n                    previewAttention={previewAttention}\n                    onOpenHardwareGuide={() => setIsHardwareGuideOpen(true)}\n                  />\n                </div>\n              ) : (\n                <SectionView\n                  key={activeSection}\n                  section={activeSection}\n                  isPracticing={isPracticing}\n                  onPracticingChange={setIsPracticing}\n                  breathState={breathState}\n                  onBreathStateChange={setBreathState}\n                  onStageChange={(hsl, stageName) => {\n                    setAvatarStage(stageName);\n                    setPreviewStage(stageName);\n                  }}\n                  currentStage={previewStage}\n                  previewPath={previewPath}\n                  previewShowCore={previewShowCore}\n                  previewAttention={previewAttention}\n                  showFxGallery={showFxGallery}\n                  onNavigate={setActiveSection}\n                  onOpenHardwareGuide={() => setIsHardwareGuideOpen(true)}\n                />\n              )}\n            </div>\n          </div>\n\n          <SigilTracker\n            isOpen={isSigilTrackerOpen}\n            onClose={() => setIsSigilTrackerOpen(false)}\n            stage={previewStage}\n          />\n\n          <HardwareGuide\n            isOpen={isHardwareGuideOpen}\n            onClose={() => setIsHardwareGuideOpen(false)}\n          />\n\n          <InstallPrompt />\n\n          {/* Indra's Net - animated web at bottom */}\n          <IndrasNet stage={previewStage} isPracticing={isPracticing} isLight={isLight} />\n        </div >\n      </div >\n    </ThemeProvider >\n  );\n}\n\nfunction AppWithBoundary() {\n  return (\n    <ErrorBoundary>\n      <App />\n    </ErrorBoundary>\n  );\n}\n\nexport default AppWithBoundary;\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\AccessibleModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ActivePathState.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ApplicationSection.jsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":64,"column":51,"nodeType":"Identifier","endLine":64,"endColumn":59}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/ApplicationSection.jsx\r\nimport { useState } from 'react';\nimport { useNavigationStore } from '../state/navigationStore.js';\r\nimport { Avatar } from './avatar';\r\nimport { StageTitle } from './StageTitle.jsx';\r\nimport { SigilSealingArea } from './SigilSealingArea.jsx';\r\nimport { FourModesHome } from './FourModesHome.jsx';\r\nimport { ModeDetail } from './ModeDetail.jsx';\r\n\r\nexport function ApplicationSection({ onStageChange, currentStage, previewPath, previewShowCore, onNavigate }) {\n  const { activePath } = useNavigationStore();\r\n  const [selectedModeId, setSelectedModeId] = useState(null);\r\n  const [showFourModes, setShowFourModes] = useState(false);\r\n\r\n  // No active path - show empty state\r\n  if (!activePath) {\r\n    return (\r\n      <div className=\"w-full max-w-4xl mx-auto space-y-8 pb-12\">\r\n        <div className=\"flex flex-col items-center pt-8\">\r\n          <div style={{ transform: 'scale(0.75)' }}>\r\n            <Avatar mode=\"application\" onStageChange={onStageChange} stage={currentStage} path={previewPath} showCore={previewShowCore} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Empty State */}\r\n        <div className=\"bg-[#0f0f1a] border rounded-3xl p-12 text-center border-[var(--accent-15)]\">\r\n          <h2\r\n            className=\"text-lg mb-4\"\r\n            style={{ fontFamily: 'var(--font-display)', fontWeight: 700, letterSpacing: 'var(--tracking-mythic)', color: 'var(--accent-color)' }}\r\n          >\r\n            Application\r\n          </h2>\r\n          <p\r\n            className=\"text-base text-[rgba(253,251,245,0.7)] mb-2 leading-relaxed\"\r\n            style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.02em' }}\r\n          >\r\n            This is where practice meets life.\r\n          </p>\r\n          <p\r\n            className=\"text-sm text-[rgba(253,251,245,0.6)] mb-6 leading-relaxed italic\"\r\n            style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.02em' }}\r\n          >\r\n            You'll track moments of awarenessΓÇöwhen you catch yourself in old patterns.\r\n          </p>\r\n          <button\r\n            onClick={() => {\r\n              console.log('≡ƒöÑ Go to Navigation clicked, onNavigate:', typeof onNavigate);\r\n              if (onNavigate) {\r\n                onNavigate('navigation');\r\n              } else {\r\n                console.error('Γ¥î onNavigate is undefined!');\r\n              }\r\n            }}\r\n            className=\"px-6 py-3 rounded-full text-[#050508] font-semibold text-sm\"\r\n            style={{ fontFamily: 'var(--font-display)', letterSpacing: 'var(--tracking-mythic)', background: 'var(--ui-button-gradient)' }}\r\n          >\r\n            GO TO NAVIGATION\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const [autoOpenTraining, setAutoOpenTraining] = useState(false);\r\n\r\n  // Handle mode detail view\r\n  const handleSelectMode = (modeId) => {\r\n    setSelectedModeId(modeId);\r\n    setAutoOpenTraining(false);\r\n  };\r\n\r\n  // Handle back or switch to another mode\r\n  const handleBackFromMode = (nextModeId = null) => {\r\n    if (nextModeId && typeof nextModeId === 'string') {\r\n      // Switch to next mode directly\r\n      setSelectedModeId(nextModeId);\r\n      setAutoOpenTraining(true);\r\n    } else {\r\n      // Just go back to mode list\r\n      setSelectedModeId(null);\r\n      setAutoOpenTraining(false);\r\n    }\r\n  };\r\n\r\n  // Active path - show permanent sigil sealing area\r\n  return (\r\n    <div className=\"w-full max-w-4xl mx-auto space-y-6 pb-12\">\r\n      {/* Avatar & Navigation Toggle */}\r\n      <div className=\"flex flex-col items-center pt-8 gap-6\">\r\n        <div style={{ transform: 'scale(0.65)' }}>\r\n          <Avatar mode=\"application\" onStageChange={onStageChange} stage={currentStage} path={previewPath} showCore={previewShowCore} />\r\n        </div>\r\n\r\n        {/* Four Modes Toggle Button - Moved below Avatar */}\r\n        {!selectedModeId && (\r\n          <button\r\n            onClick={() => setShowFourModes(!showFourModes)}\r\n            className=\"px-6 py-3 rounded-full transition-all duration-300\"\r\n            style={{\r\n              fontFamily: 'var(--font-display)',\r\n              fontWeight: 600,\r\n              fontSize: '13px',\r\n              letterSpacing: 'var(--tracking-mythic)',\r\n              color: showFourModes ? 'rgba(180, 120, 40, 1)' : 'rgba(100, 80, 60, 0.85)',\r\n              background: showFourModes\r\n                ? 'linear-gradient(135deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.04) 100%)'\r\n                : 'linear-gradient(135deg, rgba(255,255,255,0.08) 0%, transparent 100%)',\r\n              border: '1px solid rgba(180, 140, 90, 0.3)',\r\n              boxShadow: showFourModes\r\n                ? '0 0 30px rgba(251, 191, 36, 0.2), inset 0 0 25px rgba(251, 191, 36, 0.1)'\r\n                : '0 0 25px rgba(251, 191, 36, 0.15), inset 0 0 20px rgba(251, 191, 36, 0.08)',\r\n            }}\r\n          >\r\n            {showFourModes ? 'Hide Four Modes' : 'Explore Four Modes'}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Permanent Sigil Sealing Area */}\r\n      {!showFourModes && !selectedModeId && (\r\n        <SigilSealingArea />\r\n      )}\r\n\r\n      {/* Content based on active view */}\r\n      {showFourModes && !selectedModeId && (\r\n        <FourModesHome onSelectMode={handleSelectMode} onClose={() => setShowFourModes(false)} />\r\n      )}\r\n\r\n      {selectedModeId && (\r\n        <ModeDetail\r\n          key={selectedModeId}\r\n          modeId={selectedModeId}\r\n          onBack={handleBackFromMode}\r\n          autoStartTraining={autoOpenTraining}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ApplicationSelectionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ApplicationTrackingCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'displayMode' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"displayMode"},"fix":{"range":[883,936],"text":""},"desc":"Remove unused variable 'displayMode'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":18,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[942,967],"text":""},"desc":"Remove unused variable 'theme'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/ApplicationTrackingCard.jsx\r\n// Displays awareness tracking metrics on the Home Hub\r\n// Read-only information card showing Application section stats\r\n\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport { useApplicationStore } from '../state/applicationStore.js';\r\nimport { useNavigationStore } from '../state/navigationStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { getPathById } from '../data/navigationData.js';\r\nimport { useTheme } from '../context/ThemeContext.jsx';\r\nimport { calculateGradientAngle, getAvatarCenter, getDynamicGoldGradient } from '../utils/dynamicLighting.js';\r\n\r\nexport function ApplicationTrackingCard() {\r\n    const { getStats, intention } = useApplicationStore();\r\n    const { activePath } = useNavigationStore();\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const displayMode = useDisplayModeStore(s => s.mode);\r\n    const theme = useTheme();\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const cardRef = useRef(null);\r\n    const [gradientAngle, setGradientAngle] = useState(135);\r\n\r\n    useEffect(() => {\r\n        if (cardRef.current) {\r\n            const rect = cardRef.current.getBoundingClientRect();\r\n            setGradientAngle(calculateGradientAngle(rect, getAvatarCenter()));\r\n        }\r\n    }, [isLight]);\r\n\r\n    // Get week stats\r\n    const weekStats = getStats(7);\r\n\r\n    // Get path application items if available\r\n    const path = activePath ? getPathById(activePath.pathId) : null;\r\n    const applicationItems = path?.applicationItems || [];\r\n\r\n    // Map stats to directions (N/E/S/W)\r\n    const directionStats = {\r\n        north: {\r\n            label: applicationItems[0] || 'Awareness',\r\n            count: weekStats.byCategory?.[applicationItems[0]?.toLowerCase().replace(/\\s+/g, '-')] || 0,\r\n            color: '#FF6B35'\r\n        },\r\n        east: {\r\n            label: applicationItems[3] || 'Awareness',\r\n            count: weekStats.byCategory?.[applicationItems[3]?.toLowerCase().replace(/\\s+/g, '-')] || 0,\r\n            color: '#9B5DE5'\r\n        },\r\n        south: {\r\n            label: applicationItems[2] || 'Awareness',\r\n            count: weekStats.byCategory?.[applicationItems[2]?.toLowerCase().replace(/\\s+/g, '-')] || 0,\r\n            color: '#4ECDC4'\r\n        },\r\n        west: {\r\n            label: applicationItems[1] || 'Awareness',\r\n            count: weekStats.byCategory?.[applicationItems[1]?.toLowerCase().replace(/\\s+/g, 'minus')] || 0,\r\n            color: '#F7DC6F'\r\n        }\r\n    };\r\n\r\n    const totalGestures = weekStats.total || 0;\r\n\r\n    return (\r\n        <div\r\n            ref={cardRef}\r\n            className=\"w-full rounded-[32px] px-6 py-5 relative overflow-hidden transition-all duration-700 ease-in-out\"\r\n            style={{\r\n                maxWidth: '430px',\r\n                margin: '0 auto',\r\n                border: '2px solid transparent',\r\n                backgroundImage: isLight\r\n                    ? `linear-gradient(rgba(252, 248, 240, 0.98), rgba(248, 244, 235, 0.96)), \r\n                       ${getDynamicGoldGradient(gradientAngle, true)}`\r\n                    : `linear-gradient(135deg, rgba(20, 15, 25, 0.98), rgba(10, 8, 15, 0.98)), \r\n                       linear-gradient(rgba(255,255,255,0.12), rgba(255,255,255,0.02))`,\r\n                backgroundOrigin: 'padding-box, border-box',\r\n                backgroundClip: 'padding-box, border-box',\r\n                boxShadow: isLight\r\n                    ? `0 0 0 1px rgba(160, 120, 80, 0.3),\r\n                       0 12px 40px rgba(120, 90, 60, 0.12), \r\n                       inset 0 2px 0 rgba(255, 255, 255, 0.8)`\r\n                    : `0 30px 80px rgba(0, 0, 0, 0.7), \r\n                       inset 0 1px 0 rgba(255, 255, 255, 0.08)`,\r\n            }}\r\n        >\r\n            {/* Background Ambient */}\r\n            <div\r\n                className=\"absolute -top-32 -right-32 w-64 h-64 blur-[100px] rounded-full pointer-events-none opacity-20\"\r\n                style={{ background: isLight ? 'rgba(180, 120, 40, 0.4)' : 'var(--accent-color)' }}\r\n            />\r\n\r\n            {/* Header */}\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div\r\n                        className=\"w-9 h-9 rounded-xl flex items-center justify-center text-lg\"\r\n                        style={{\r\n                            background: isLight ? 'rgba(255, 250, 240, 0.6)' : 'rgba(10, 15, 25, 0.75)',\r\n                            border: `1px solid ${isLight ? 'rgba(180, 140, 90, 0.25)' : 'rgba(255, 255, 255, 0.08)'}`\r\n                        }}\r\n                    >\r\n                        ≡ƒº¡\r\n                    </div>\r\n                    <div>\r\n                        <div\r\n                            className=\"text-[12px] font-black uppercase tracking-[0.3em]\"\r\n                            style={{ color: isLight ? 'rgba(60, 45, 35, 0.95)' : 'rgba(253, 251, 245, 0.95)' }}\r\n                        >\r\n                            Awareness\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1.5 mt-0.5\">\r\n                            <div\r\n                                className=\"w-1.5 h-1.5 rounded-full animate-pulse\"\r\n                                style={{ background: isLight ? 'rgba(180, 120, 40, 0.9)' : 'var(--accent-color)' }}\r\n                            />\r\n                            <div\r\n                                className=\"text-[8px] font-black uppercase tracking-[0.1em] opacity-40\"\r\n                                style={{ color: isLight ? 'rgba(60, 45, 35, 0.95)' : 'rgba(253, 251, 245, 0.95)' }}\r\n                            >\r\n                                Week: {totalGestures}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Direction Breakdown (N/E/S/W) - Compact 2x2 Grid */}\r\n            <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                {Object.entries(directionStats).map(([dir, data]) => (\r\n                    <div\r\n                        key={dir}\r\n                        className=\"rounded-xl px-3 py-2 transition-all duration-300\"\r\n                        style={{\r\n                            background: isLight\r\n                                ? 'linear-gradient(135deg, rgba(255, 250, 240, 0.6), rgba(248, 244, 235, 0.5))'\r\n                                : 'rgba(10, 15, 25, 0.5)',\r\n                            border: `1px solid ${isLight ? 'rgba(180, 140, 90, 0.2)' : 'rgba(255, 255, 255, 0.05)'}`,\r\n                        }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <div\r\n                                    className=\"text-[9px] uppercase tracking-wider mb-0.5 opacity-50\"\r\n                                    style={{ color: isLight ? 'rgba(100, 80, 60, 0.75)' : 'rgba(253, 251, 245, 0.5)' }}\r\n                                >\r\n                                    {dir.charAt(0).toUpperCase()}\r\n                                </div>\r\n                                <div\r\n                                    className=\"text-[10px] leading-tight truncate\"\r\n                                    style={{\r\n                                        color: isLight ? 'rgba(60, 45, 35, 0.8)' : 'rgba(253, 251, 245, 0.7)',\r\n                                        fontFamily: 'var(--font-body)'\r\n                                    }}\r\n                                >\r\n                                    {data.label}\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                className=\"text-[20px] font-black tabular-nums ml-2\"\r\n                                style={{\r\n                                    color: data.count > 0\r\n                                        ? (isLight ? data.color : data.color)\r\n                                        : (isLight ? 'rgba(100, 80, 60, 0.2)' : 'rgba(253, 251, 245, 0.1)')\r\n                                }}\r\n                            >\r\n                                {data.count}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Current Intention - Compact inline */}\r\n            {intention && (\r\n                <div\r\n                    className=\"rounded-xl px-4 py-2.5 mb-3\"\r\n                    style={{\r\n                        background: isLight\r\n                            ? 'linear-gradient(135deg, rgba(255, 250, 240, 0.8), rgba(248, 244, 235, 0.7))'\r\n                            : 'rgba(10, 15, 25, 0.6)',\r\n                        border: `1px solid ${isLight ? 'rgba(180, 140, 90, 0.25)' : 'rgba(255, 255, 255, 0.08)'}`,\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"text-[8px] uppercase tracking-[0.2em] mb-1 opacity-50\"\r\n                        style={{ color: isLight ? 'rgba(100, 80, 60, 0.75)' : 'rgba(253, 251, 245, 0.5)' }}\r\n                    >\r\n                        Intention\r\n                    </div>\r\n                    <p\r\n                        className=\"text-[11px] italic leading-snug line-clamp-2\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(60, 45, 35, 0.85)' : 'rgba(253, 251, 245, 0.7)',\r\n                            fontFamily: 'var(--font-body)'\r\n                        }}\r\n                    >\r\n                        \"{intention}\"\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Footer */}\r\n            <div className=\"flex items-center justify-center px-2 opacity-20\">\r\n                <span\r\n                    className=\"text-[7px] font-black uppercase tracking-[0.6em]\"\r\n                    style={{ color: isLight ? 'rgba(60, 45, 35, 0.95)' : 'rgba(253, 251, 245, 0.95)' }}\r\n                >\r\n                    FIELD\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ApplicationTrackingCard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\MirrorSeal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[234,241],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  20 |                 opacity: 0,\n  21 |                 scale: 0.3,\n> 22 |                 x: (Math.random() - 0.5) * 200,\n     |                     ^^^^^^^^^^^^^ Cannot call impure function\n  23 |                 y: (Math.random() - 0.5) * 100 - 50,\n  24 |             }}\n  25 |             transition={{","line":22,"column":21,"nodeType":null,"endLine":22,"endColumn":34},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  21 |                 scale: 0.3,\n  22 |                 x: (Math.random() - 0.5) * 200,\n> 23 |                 y: (Math.random() - 0.5) * 100 - 50,\n     |                     ^^^^^^^^^^^^^ Cannot call impure function\n  24 |             }}\n  25 |             transition={{\n  26 |                 duration: 1.5,","line":23,"column":21,"nodeType":null,"endLine":23,"endColumn":34},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  29 |             }}\n  30 |             style={{\n> 31 |                 left: `${Math.random() * 100}%`,\n     |                          ^^^^^^^^^^^^^ Cannot call impure function\n  32 |                 top: `${Math.random() * 100}%`,\n  33 |             }}\n  34 |         />","line":31,"column":26,"nodeType":null,"endLine":31,"endColumn":39},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  30 |             style={{\n  31 |                 left: `${Math.random() * 100}%`,\n> 32 |                 top: `${Math.random() * 100}%`,\n     |                         ^^^^^^^^^^^^^ Cannot call impure function\n  33 |             }}\n  34 |         />\n  35 |     );","line":32,"column":25,"nodeType":null,"endLine":32,"endColumn":38},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  164 |                 delay: i * 0.03,\n  165 |             }));\n> 166 |             setParticles(newParticles);\n      |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  167 |\n  168 |             // Transition to sealed after animation\n  169 |             const timer = setTimeout(() => {","line":166,"column":13,"nodeType":null,"endLine":166,"endColumn":25}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/MirrorSeal.jsx\r\n// Mirror Seal - Ceremonial reveal and locking of the neutral sentence\r\n// Transforms messy input into a \"minted artifact\"\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\n// Particle component for dissolution effect\r\nfunction DissolutionParticle({ delay }) {\r\n    return (\r\n        <motion.div\r\n            className=\"absolute w-1 h-1 rounded-full bg-[var(--accent-color)]\"\r\n            initial={{\r\n                opacity: 0.8,\r\n                scale: 1,\r\n                x: 0,\r\n                y: 0,\r\n            }}\r\n            animate={{\r\n                opacity: 0,\r\n                scale: 0.3,\r\n                x: (Math.random() - 0.5) * 200,\r\n                y: (Math.random() - 0.5) * 100 - 50,\r\n            }}\r\n            transition={{\r\n                duration: 1.5,\r\n                delay,\r\n                ease: 'easeOut',\r\n            }}\r\n            style={{\r\n                left: `${Math.random() * 100}%`,\r\n                top: `${Math.random() * 100}%`,\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\n// The Minted Card - Final artifact appearance\r\nfunction MintedCard({ sentence, isSealed }) {\r\n    return (\r\n        <motion.div\r\n            className=\"relative max-w-md mx-auto\"\r\n            initial={{ scale: 0.8, opacity: 0, rotateX: -20 }}\r\n            animate={{\r\n                scale: 1,\r\n                opacity: 1,\r\n                rotateX: 0,\r\n            }}\r\n            transition={{\r\n                type: 'spring',\r\n                damping: 15,\r\n                stiffness: 100,\r\n                delay: 0.5,\r\n            }}\r\n        >\r\n            {/* Card glow */}\r\n            <div\r\n                className=\"absolute inset-0 rounded-2xl blur-xl pointer-events-none\"\r\n                style={{\r\n                    background: 'radial-gradient(ellipse at center, rgba(255,220,120,0.2) 0%, transparent 70%)',\r\n                    transform: 'scale(1.1)',\r\n                }}\r\n            />\r\n\r\n            {/* The Card */}\r\n            <motion.div\r\n                className=\"relative rounded-2xl p-8 overflow-hidden\"\r\n                animate={{\r\n                    boxShadow: isSealed\r\n                        ? '0 0 40px rgba(255,220,120,0.3), 0 20px 40px rgba(0,0,0,0.5)'\r\n                        : '0 0 20px rgba(255,220,120,0.15), 0 15px 30px rgba(0,0,0,0.4)',\r\n                }}\r\n                style={{\r\n                    background: 'linear-gradient(135deg, rgba(20,18,28,0.95) 0%, rgba(10,10,18,0.98) 100%)',\r\n                    border: '1px solid rgba(255,220,120,0.25)',\r\n                }}\r\n            >\r\n                {/* Subtle pattern overlay */}\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none opacity-10\"\r\n                    style={{\r\n                        backgroundImage: `radial-gradient(circle at 20% 20%, rgba(255,220,120,0.1) 0%, transparent 50%)`,\r\n                    }}\r\n                />\r\n\r\n                {/* Seal icon at top */}\r\n                <motion.div\r\n                    className=\"absolute top-3 right-3 text-xl\"\r\n                    animate={{\r\n                        rotate: isSealed ? [0, 360] : 0,\r\n                        scale: isSealed ? [1, 1.2, 1] : 1,\r\n                    }}\r\n                    transition={{ duration: 0.6 }}\r\n                >\r\n                    {isSealed ? '≡ƒöÉ' : '≡ƒô£'}\r\n                </motion.div>\r\n\r\n                {/* Header */}\r\n                <div className=\"text-center mb-4\">\r\n                    <div\r\n                        className=\"text-[9px] uppercase tracking-[0.3em]\"\r\n                        style={{ color: 'rgba(255,220,120,0.5)' }}\r\n                    >\r\n                        Neutral Observation\r\n                    </div>\r\n                </div>\r\n\r\n                {/* The Sentence */}\r\n                <motion.p\r\n                    className=\"text-center leading-relaxed\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontSize: '18px',\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.95)',\r\n                        lineHeight: 1.6,\r\n                    }}\r\n                >\r\n                    \"{sentence}\"\r\n                </motion.p>\r\n\r\n                {/* Sealed stamp effect */}\r\n                <AnimatePresence>\r\n                    {isSealed && (\r\n                        <motion.div\r\n                            initial={{ scale: 2, opacity: 0, rotate: -30 }}\r\n                            animate={{ scale: 1, opacity: 0.15, rotate: -15 }}\r\n                            className=\"absolute bottom-4 right-4 text-6xl pointer-events-none select-none\"\r\n                        >\r\n                            Γ¼í\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Timestamp */}\r\n                <div\r\n                    className=\"text-center mt-4 text-[10px]\"\r\n                    style={{ color: 'rgba(255,255,255,0.3)' }}\r\n                >\r\n                    Observed ┬╖ {new Date().toLocaleDateString()}\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n}\r\n\r\nexport function MirrorSeal({\r\n    originalSentence,\r\n    neutralSentence,\r\n    onLock,\r\n    isValidating = false,\r\n    validationResult = null,\r\n}) {\r\n    const [phase, setPhase] = useState('reveal'); // reveal | transforming | sealed\r\n    const [particles, setParticles] = useState([]);\r\n    const [isSealed, setIsSealed] = useState(false);\r\n\r\n    // Generate particles for dissolution effect\r\n    useEffect(() => {\r\n        if (phase === 'transforming') {\r\n            const newParticles = Array.from({ length: 30 }, (_, i) => ({\r\n                id: i,\r\n                delay: i * 0.03,\r\n            }));\r\n            setParticles(newParticles);\r\n\r\n            // Transition to sealed after animation\r\n            const timer = setTimeout(() => {\r\n                setPhase('sealed');\r\n            }, 1800);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [phase]);\r\n\r\n    const handleTransform = () => {\r\n        setPhase('transforming');\r\n    };\r\n\r\n    const handleLock = () => {\r\n        setIsSealed(true);\r\n        // Fire the callback slightly faster to feel more responsive\r\n        // but still allow the initial lock animation state to register\r\n        setTimeout(() => {\r\n            onLock?.();\r\n        }, 400);\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full py-8 px-4\">\r\n            {/* Phase: Original reveal */}\r\n            <AnimatePresence mode=\"wait\">\r\n                {phase === 'reveal' && (\r\n                    <motion.div\r\n                        key=\"reveal\"\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0, scale: 0.95 }}\r\n                        className=\"text-center\"\r\n                    >\r\n                        {/* Original sentence - styled as raw/impure */}\r\n                        <div\r\n                            className=\"text-[10px] uppercase tracking-[0.2em] mb-3\"\r\n                            style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                        >\r\n                            Your Description\r\n                        </div>\r\n\r\n                        <motion.p\r\n                            className=\"text-lg italic max-w-md mx-auto mb-8 leading-relaxed\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-body)\",\r\n                                fontWeight: 500,\r\n                                letterSpacing: '0.01em',\r\n                                color: 'rgba(255,255,255,0.6)',\r\n                            }}\r\n                        >\r\n                            \"{originalSentence}\"\r\n                        </motion.p>\r\n\r\n                        {/* Transform button */}\r\n                        <motion.button\r\n                            onClick={handleTransform}\r\n                            className=\"px-8 py-3 rounded-full\"\r\n                            whileHover={{ scale: 1.05, boxShadow: '0 0 30px rgba(255,220,120,0.3)' }}\r\n                            whileTap={{ scale: 0.95 }}\r\n                            style={{\r\n                                background: 'linear-gradient(135deg, rgba(255,220,120,0.2) 0%, rgba(255,220,120,0.1) 100%)',\r\n                                border: '1px solid var(--accent-40)',\r\n                                color: 'var(--accent-color)',\r\n                                fontFamily: 'var(--font-ui)',\r\n                                fontSize: '12px',\r\n                                letterSpacing: '0.15em',\r\n                            }}\r\n                        >\r\n                            Γ£¿ DISTILL TO FACT\r\n                        </motion.button>\r\n\r\n                        <p\r\n                            className=\"text-[10px] mt-3 italic\"\r\n                            style={{ color: 'rgba(255,255,255,0.3)' }}\r\n                        >\r\n                            Strip away narrative. See what remains.\r\n                        </p>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Phase: Transforming */}\r\n                {phase === 'transforming' && (\r\n                    <motion.div\r\n                        key=\"transforming\"\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"text-center py-12 relative\"\r\n                    >\r\n                        {/* Dissolution particles */}\r\n                        <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n                            {particles.map((p) => (\r\n                                <DissolutionParticle key={p.id} delay={p.delay} />\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Fading text */}\r\n                        <motion.p\r\n                            animate={{\r\n                                opacity: [0.6, 0.2, 0],\r\n                                filter: ['blur(0px)', 'blur(2px)', 'blur(5px)'],\r\n                            }}\r\n                            transition={{ duration: 1.5 }}\r\n                            className=\"text-lg italic max-w-md mx-auto\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-body)\",\r\n                                fontWeight: 500,\r\n                                letterSpacing: '0.01em',\r\n                                color: 'rgba(255,255,255,0.6)',\r\n                            }}\r\n                        >\r\n                            \"{originalSentence}\"\r\n                        </motion.p>\r\n\r\n                        {/* Status */}\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            transition={{ delay: 0.5 }}\r\n                            className=\"text-[11px] mt-6\"\r\n                            style={{ color: 'var(--accent-50)' }}\r\n                        >\r\n                            Distilling...\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Phase: Sealed card */}\r\n                {phase === 'sealed' && (\r\n                    <motion.div\r\n                        key=\"sealed\"\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        className=\"space-y-6\"\r\n                    >\r\n                        <MintedCard sentence={neutralSentence} isSealed={isSealed} />\r\n\r\n                        {/* Validation feedback */}\r\n                        {validationResult && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ delay: 0.8 }}\r\n                                className=\"text-center\"\r\n                            >\r\n                                {validationResult.clean ? (\r\n                                    <div className=\"text-[11px] text-green-400/80\">\r\n                                        Γ£ô Clean observation - no narrative detected\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"text-[11px] text-yellow-400/80\">\r\n                                        ΓÜá {validationResult.message || 'Consider: is this purely factual?'}\r\n                                    </div>\r\n                                )}\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Lock button */}\r\n                        {!isSealed && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                transition={{ delay: 1 }}\r\n                                className=\"flex justify-center\"\r\n                            >\r\n                                <motion.button\r\n                                    onClick={handleLock}\r\n                                    disabled={isValidating}\r\n                                    className=\"px-8 py-3 rounded-full\"\r\n                                    whileHover={{ scale: 1.05 }}\r\n                                    whileTap={{ scale: 0.95 }}\r\n                                    style={{\r\n                                        background: 'linear-gradient(135deg, var(--accent-30) 0%, var(--accent-20) 100%)',\r\n                                        border: '1px solid var(--accent-50)',\r\n                                        color: 'var(--accent-color)',\r\n                                        fontFamily: 'var(--font-ui)',\r\n                                        fontSize: '13px',\r\n                                        letterSpacing: '0.12em',\r\n                                        opacity: isValidating ? 0.5 : 1,\r\n                                    }}\r\n                                >\r\n                                    ≡ƒöÆ SEAL THIS TRUTH\r\n                                </motion.button>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Sealed confirmation */}\r\n                        {isSealed && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, scale: 0.9 }}\r\n                                animate={{ opacity: 1, scale: 1 }}\r\n                                className=\"text-center\"\r\n                            >\r\n                                <div\r\n                                    className=\"text-[12px] mb-1\"\r\n                                    style={{ color: 'var(--accent-color)' }}\r\n                                >\r\n                                    Mirror Locked\r\n                                </div>\r\n                                <div\r\n                                    className=\"text-[10px] italic\"\r\n                                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                                >\r\n                                    This fact now anchors your chain.\r\n                                </div>\r\n                            </motion.div>\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\ModeTraining.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n   96 |     useEffect(() => {\n   97 |         if (isOpen) {\n>  98 |             setShowChainTransition(false);\n      |             ^^^^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n   99 |             setCompletedMode(null);\n  100 |         }\n  101 |     }, [isOpen, mode]);","line":98,"column":13,"nodeType":null,"endLine":98,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/ModeTraining.jsx\r\n// Modal container for mode-based training practices\r\nimport { useEffect, useCallback, useState } from 'react';\nimport { useModeTrainingStore, PRACTICE_STATES } from '../../state/modeTrainingStore.js';\r\nimport { PRACTICE_DEFINITIONS, MODE_CHECK_OPTIONS } from '../../state/practiceConfig.js';\r\nimport { useChainStore } from '../../state/chainStore.js';\r\nimport { FOUR_MODES } from '../../data/fourModes.js';\r\n\r\n// Import practices (IE v1)\r\nimport { MirrorObservation } from './practices/MirrorObservation.jsx';\r\nimport { WaveRide } from './practices/WaveRide.jsx';\r\nimport { PrismSeparation } from './practices/PrismSeparation.jsx';\r\nimport { SwordCommitment } from './practices/SwordCommitment.jsx';\r\n\r\n// Get next mode in chain sequence\r\nconst MODE_SEQUENCE = ['mirror', 'prism', 'wave', 'sword'];\r\nconst getNextMode = (currentMode) => {\r\n    const currentIndex = MODE_SEQUENCE.indexOf(currentMode);\r\n    if (currentIndex === -1 || currentIndex === MODE_SEQUENCE.length - 1) return null;\r\n    return MODE_SEQUENCE[currentIndex + 1];\r\n};\r\n\r\n// Mode Check (Harmony) component\r\nfunction ModeCheck({ onComplete }) {\r\n    const { setModeCheckResponse } = useModeTrainingStore();\r\n\r\n    const handleResponse = (response) => {\r\n        setModeCheckResponse(response);\r\n        onComplete();\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center h-full text-center px-8\">\r\n            <p\r\n                className=\"text-xs uppercase tracking-[0.2em] mb-4\"\r\n                style={{\r\n                    fontFamily: \"var(--font-ui)\",\r\n                    fontWeight: 600,\r\n                    color: 'rgba(255, 255, 255, 0.4)',\r\n                }}\r\n            >\r\n                Harmony\r\n            </p>\r\n            <p\r\n                className=\"text-xl mb-8\"\r\n                style={{\r\n                    fontFamily: \"var(--font-body)\",\r\n                    fontWeight: 500,\r\n                    letterSpacing: '0.01em',\r\n                    fontStyle: 'italic',\r\n                    color: 'rgba(255, 255, 255, 0.9)',\r\n                }}\r\n            >\r\n                Was this still the right mode?\r\n            </p>\r\n            <div className=\"flex flex-col gap-3 w-full max-w-xs\">\r\n                {MODE_CHECK_OPTIONS.map((option) => (\r\n                    <button\r\n                        key={option.id}\r\n                        onClick={() => handleResponse(option.id)}\r\n                        className=\"w-full px-6 py-3 rounded border border-white/20 text-white/70 hover:text-white hover:border-white/40 transition-all\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-ui)\",\r\n                            fontSize: '12px',\r\n                            fontWeight: 600,\r\n                            letterSpacing: '0.05em',\r\n                        }}\r\n                    >\r\n                        {option.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Main ModeTraining modal\r\nexport function ModeTraining({ mode, isOpen, onClose, onSwitchMode }) {\r\n    const {\r\n        practiceState,\r\n        setPracticeState,\r\n        startSession,\r\n        endSession,\r\n        shouldTriggerHarmony,\r\n    } = useModeTrainingStore();\r\n\r\n    useChainStore();\n\r\n    // Chain transition state - shown after completing a chain mode\r\n    const [showChainTransition, setShowChainTransition] = useState(false);\r\n    const [completedMode, setCompletedMode] = useState(null);\r\n\r\n    const config = PRACTICE_DEFINITIONS[mode];\r\n\r\n    // Reset chain transition state when modal opens or mode changes\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setShowChainTransition(false);\r\n            setCompletedMode(null);\r\n        }\r\n    }, [isOpen, mode]);\r\n\r\n    // Start session when modal opens\r\n    // Also reset if stuck in HANDOFF state from previous session\r\n    useEffect(() => {\r\n        if (isOpen && !showChainTransition) {\r\n            if (practiceState === PRACTICE_STATES.HANDOFF || practiceState === PRACTICE_STATES.REFLECTION) {\r\n                // Reset stuck state\r\n                endSession();\r\n            }\r\n            if (practiceState === PRACTICE_STATES.IDLE) {\r\n                startSession(mode);\r\n            }\r\n        }\r\n    }, [isOpen, practiceState, mode, startSession, endSession, showChainTransition]);\r\n\r\n    // Handle practice complete ΓåÆ check for Harmony trigger\r\n    // Skip Harmony for chain-based modes (they use chainStore for progression)\r\n    const isChainMode = ['mirror', 'prism', 'wave', 'sword'].includes(mode);\r\n\r\n    const handlePracticeComplete = useCallback(() => {\r\n        if (isChainMode) {\r\n            // For chain modes: show transition screen\r\n            endSession();\r\n            setCompletedMode(mode);\r\n            setShowChainTransition(true);\r\n        } else if (shouldTriggerHarmony()) {\r\n            setPracticeState(PRACTICE_STATES.HANDOFF);\r\n        } else {\r\n            endSession();\r\n            onClose();\r\n        }\r\n    }, [isChainMode, shouldTriggerHarmony, setPracticeState, endSession, onClose, mode]);\r\n\r\n    // Handle proceeding to next mode\r\n    const handleProceedToNextMode = () => {\r\n        const nextMode = getNextMode(completedMode);\r\n        if (nextMode && onSwitchMode) {\r\n            onSwitchMode(nextMode);\r\n            // Don't close immediately here, the parent will handle the switch\r\n            // and re-open the modal with the new mode.\r\n        } else {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    // Handle mode check complete\r\n    const handleModeCheckComplete = useCallback(() => {\r\n        endSession();\r\n        onClose();\r\n    }, [endSession, onClose]);\r\n\r\n    // Handle close (escape or background click)\r\n    const handleClose = useCallback(() => {\r\n        if (practiceState !== PRACTICE_STATES.IDLE) {\r\n            endSession();\r\n        }\r\n        onClose();\r\n    }, [practiceState, endSession, onClose]);\r\n\r\n    // Escape key handler\r\n    useEffect(() => {\r\n        const handleKeyDown = (e) => {\r\n            if (e.key === 'Escape') {\r\n                handleClose();\r\n            }\r\n        };\r\n        if (isOpen) {\r\n            window.addEventListener('keydown', handleKeyDown);\r\n            return () => window.removeEventListener('keydown', handleKeyDown);\r\n        }\r\n    }, [isOpen, handleClose]);\r\n\r\n    // Render the appropriate practice component\r\n    const renderPractice = () => {\r\n        // Chain transition screen - shown after completing a chain mode\r\n        if (showChainTransition) {\r\n            const nextMode = getNextMode(completedMode);\r\n            const nextModeData = nextMode ? FOUR_MODES.find(m => m.id === nextMode) : null;\r\n            const completedModeData = FOUR_MODES.find(m => m.id === completedMode);\r\n\r\n            return (\r\n                <div className=\"flex flex-col items-center justify-center h-full text-center px-8\">\r\n                    <p\r\n                        className=\"text-xs uppercase tracking-[0.2em] mb-4\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-ui)\",\r\n                            fontWeight: 600,\r\n                            color: 'rgba(147, 197, 253, 0.6)',\r\n                        }}\r\n                    >\r\n                        Γ£ô {completedModeData?.name || completedMode} Complete\r\n                    </p>\r\n\r\n                    {nextModeData ? (\r\n                        <>\r\n                            <p\r\n                                className=\"text-lg mb-6\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-body)\",\r\n                                    fontWeight: 500,\r\n                                    letterSpacing: '0.01em',\r\n                                    color: 'rgba(255, 255, 255, 0.9)',\r\n                                }}\r\n                            >\r\n                                Proceed to {nextModeData.name}?\r\n                            </p>\r\n                            <p\r\n                                className=\"text-xs mb-8 max-w-xs\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-body)\",\r\n                                    fontWeight: 500,\r\n                                    letterSpacing: '0.01em',\r\n                                    fontStyle: 'italic',\r\n                                    color: 'rgba(255, 255, 255, 0.5)',\r\n                                }}\r\n                            >\r\n                                {nextModeData.tagline}\r\n                            </p>\r\n                            <div className=\"flex gap-4\">\r\n                                <button\r\n                                    onClick={onClose}\r\n                                    className=\"px-6 py-3 rounded border border-white/20 text-white/50 hover:text-white/70 hover:border-white/40 transition-all\"\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-ui)\",\r\n                                        fontWeight: 600,\r\n                                        fontSize: '11px',\r\n                                        letterSpacing: '0.08em',\r\n                                    }}\r\n                                >\r\n                                    CLOSE\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleProceedToNextMode}\r\n                                    className=\"px-8 py-3 rounded border transition-all\"\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-ui)\",\r\n                                        fontWeight: 600,\r\n                                        fontSize: '11px',\r\n                                        letterSpacing: '0.08em',\r\n                                        borderColor: 'rgba(147, 197, 253, 0.5)',\r\n                                        color: 'rgba(147, 197, 253, 0.9)',\r\n                                        background: 'rgba(147, 197, 253, 0.1)',\r\n                                    }}\r\n                                >\r\n                                    CONTINUE TO {nextModeData.name.toUpperCase()}\r\n                                </button>\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <p\r\n                                className=\"text-lg mb-6\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-body)\",\r\n                                    fontWeight: 500,\r\n                                    letterSpacing: '0.01em',\r\n                                    color: 'rgba(255, 255, 255, 0.9)',\r\n                                }}\r\n                            >\r\n                                Chain Complete\r\n                            </p>\r\n                            <p\r\n                                className=\"text-xs mb-8 max-w-xs\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-body)\",\r\n                                    fontWeight: 500,\r\n                                    letterSpacing: '0.01em',\r\n                                    fontStyle: 'italic',\r\n                                    color: 'rgba(255, 255, 255, 0.5)',\r\n                                }}\r\n                            >\r\n                                You have completed the full Immanence Chain.\r\n                            </p>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"px-8 py-3 rounded border transition-all\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-ui)\",\r\n                                    fontWeight: 600,\r\n                                    fontSize: '11px',\r\n                                    letterSpacing: '0.08em',\r\n                                    borderColor: 'rgba(147, 197, 253, 0.5)',\r\n                                    color: 'rgba(147, 197, 253, 0.9)',\r\n                                }}\r\n                            >\r\n                                DONE\r\n                            </button>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // Handoff state = Mode Check\r\n        if (practiceState === PRACTICE_STATES.HANDOFF) {\r\n            return <ModeCheck onComplete={handleModeCheckComplete} />;\r\n        }\r\n\r\n        switch (mode) {\r\n            case 'mirror':\r\n                return <MirrorObservation onComplete={handlePracticeComplete} />;\r\n            case 'wave':\r\n            case 'resonator': // Legacy support\r\n                return <WaveRide onComplete={handlePracticeComplete} />;\r\n            case 'prism':\r\n                return <PrismSeparation onComplete={handlePracticeComplete} />;\r\n            case 'sword':\r\n                return <SwordCommitment onComplete={handlePracticeComplete} />;\r\n            default:\r\n                return (\r\n                    <div className=\"flex flex-col items-center justify-center h-full text-center\">\r\n                        <p style={{ fontFamily: \"var(--font-body)\", fontWeight: 500, letterSpacing: '0.01em', color: 'rgba(255,255,255,0.6)' }}>\r\n                            Practice not found for {mode}\r\n                        </p>\r\n                        <button\r\n                            onClick={handleClose}\r\n                            className=\"mt-4 px-4 py-2 text-white/50 hover:text-white/80 transition-colors\"\r\n                            style={{ fontFamily: \"var(--font-ui)\", fontWeight: 600, fontSize: '11px' }}\r\n                        >\r\n                            CLOSE\r\n                        </button>\r\n                    </div>\r\n                );\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center\"\r\n            style={{ backgroundColor: 'rgba(5, 5, 8, 0.95)' }}\r\n        >\r\n            {/* Background click to close */}\r\n            <div\r\n                className=\"absolute inset-0\"\r\n                onClick={handleClose}\r\n            />\r\n\r\n            {/* Modal content */}\r\n            <div\r\n                className=\"relative w-full max-w-lg h-[80vh] max-h-[600px] mx-4 rounded-2xl overflow-hidden\"\r\n                style={{\r\n                    background: 'linear-gradient(180deg, rgba(15, 15, 26, 0.98) 0%, rgba(10, 10, 18, 0.99) 100%)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.8)',\r\n                }}\r\n            >\r\n                {/* Close button */}\r\n                <button\r\n                    onClick={handleClose}\r\n                    className=\"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-white/40 hover:text-white/70 transition-colors z-10\"\r\n                    style={{ fontSize: '20px' }}\r\n                >\r\n                    ├ù\r\n                </button>\r\n\r\n                {/* Mode indicator */}\r\n                <div className=\"absolute top-6 left-6\">\r\n                    <span\r\n                        style={{\r\n                            fontFamily: \"var(--font-ui)\",\r\n                            fontWeight: 600,\r\n                            fontSize: '10px',\r\n                            letterSpacing: '0.15em',\r\n                            color: config?.accent || 'rgba(255,255,255,0.5)',\r\n                            textTransform: 'uppercase',\r\n                        }}\r\n                    >\r\n                        {mode} Training\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Persistent Whisper Bar */}\r\n                <div\r\n                    className=\"absolute top-6 left-1/2 transform -translate-x-1/2\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-ui)\",\r\n                        fontWeight: 600,\r\n                        fontSize: '10px',\r\n                        letterSpacing: '0.2em',\r\n                        textTransform: 'uppercase',\r\n                        color: config?.accent || 'rgba(255,255,255,0.3)',\r\n                        opacity: 0.3,\r\n                    }}\r\n                >\r\n                    {config?.whisper || ''}\r\n                </div>\r\n\r\n                {/* Practice content */}\r\n                <div className=\"w-full h-full pt-16 pb-8\">\r\n                    {renderPractice()}\r\n                </div>\r\n            </div>\r\n\r\n            {/* CSS for fadeIn animation */}\r\n            <style>{`\r\n                @keyframes fadeIn {\r\n                    from { opacity: 0; transform: translateY(10px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\PatternReview.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\SentenceBuilder.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[227,234],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/SentenceBuilder.jsx\r\n// Natural language sentence builder - \"Mad Libs\" style input\r\n// Replaces form fields with tappable tokens in a sentence\r\n\r\nimport { useState, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { VoiceInput } from './VoiceInput.jsx';\r\n\r\n// Bottom Sheet Modal for token editing - compact and mystical\r\nfunction TokenEditSheet({ isOpen, onClose, type, value, onChange }) {\r\n    const inputRef = useRef(null);\r\n\r\n    // Quick options for different types\r\n    const quickOptions = {\r\n        date: ['Today', 'Yesterday', 'This morning', 'Last night', 'Earlier today'],\r\n        time: ['Just now', 'Morning', 'Afternoon', 'Evening', 'Night'],\r\n        location: ['Home', 'Work', 'Outside', 'Online', 'In transit'],\r\n    };\r\n\r\n    const options = quickOptions[type] || [];\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 bg-black/70 z-50\"\r\n                        onClick={onClose}\r\n                    />\r\n\r\n                    {/* Sheet - Compact */}\r\n                    <motion.div\r\n                        initial={{ y: '100%', x: '-50%' }}\r\n                        animate={{ y: 0, x: '-50%' }}\r\n                        exit={{ y: '100%', x: '-50%' }}\r\n                        transition={{ type: 'spring', damping: 30, stiffness: 400 }}\r\n                        className=\"fixed bottom-0 left-1/2 z-50 p-4 pb-6 w-full max-w-lg\"\r\n                        style={{\r\n                            maxHeight: '40vh',\r\n                            background: 'linear-gradient(180deg, rgba(15,15,26,0.98) 0%, rgba(10,10,18,0.99) 100%)',\r\n                            borderTop: '1px solid var(--accent-20)',\r\n                            borderLeft: '1px solid var(--accent-20)',\r\n                            borderRight: '1px solid var(--accent-20)',\r\n                            borderRadius: '20px 20px 0 0',\r\n                        }}\r\n                    >\r\n                        {/* Handle */}\r\n                        <div className=\"w-8 h-1 bg-white/20 rounded-full mx-auto mb-3\" />\r\n\r\n                        {/* Title */}\r\n                        <h3\r\n                            className=\"text-xs uppercase tracking-[0.2em] text-center mb-3\"\r\n                            style={{ fontFamily: 'var(--font-ui)', fontWeight: 700, color: 'var(--accent-color)', opacity: 0.8 }}\r\n                        >\r\n                            {type === 'date' ? 'When?' : type === 'time' ? 'What time?' : 'Where?'}\r\n                        </h3>\r\n\r\n                        {/* Quick options - pill buttons */}\r\n                        <div className=\"flex flex-wrap gap-2 justify-center mb-3\">\r\n                            {options.map((opt) => (\r\n                                <button\r\n                                    key={opt}\r\n                                    onClick={() => { onChange(opt); onClose(); }}\r\n                                    className=\"px-3 py-1.5 rounded-full text-xs transition-all hover:scale-105\"\r\n                                    style={{\r\n                                        background: value === opt\r\n                                            ? 'var(--accent-20)'\r\n                                            : 'rgba(255,255,255,0.03)',\r\n                                        border: `1px solid ${value === opt ? 'var(--accent-40)' : 'rgba(255,255,255,0.08)'}`,\r\n                                        color: value === opt ? 'var(--accent-color)' : 'rgba(255,255,255,0.6)',\r\n                                        fontFamily: 'var(--font-body)',\r\n                                        fontWeight: 500,\r\n                                        letterSpacing: '0.01em',\r\n                                    }}\r\n                                >\r\n                                    {opt}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Custom input with voice - minimal */}\r\n                        <div className=\"flex gap-2 items-center mb-3\">\r\n                            <input\r\n                                ref={inputRef}\r\n                                type=\"text\"\r\n                                value={value || ''}\r\n                                onChange={(e) => onChange(e.target.value)}\r\n                                placeholder={`Or type custom ${type}...`}\r\n                                className=\"flex-1 px-3 py-2 rounded-lg text-center text-sm bg-white/5 border border-white/10 focus:border-[var(--accent-30)] focus:outline-none\"\r\n                                style={{\r\n                                    fontFamily: 'var(--font-body)',\r\n                                    fontWeight: 500,\r\n                                    letterSpacing: '0.01em',\r\n                                    color: 'rgba(255,255,255,0.85)',\r\n                                }}\r\n                            />\r\n                            <VoiceInput onTranscription={(text) => onChange(text)} />\r\n                        </div>\r\n\r\n                        {/* Done button - subtle */}\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"w-full py-2 rounded-lg text-center text-xs uppercase tracking-widest transition-all hover:opacity-80\"\r\n                            style={{\r\n                                background: 'transparent',\r\n                                border: '1px solid var(--accent-30)',\r\n                                color: 'var(--accent-color)',\r\n                                fontFamily: 'var(--font-ui)',\r\n                                fontWeight: 700,\r\n                            }}\r\n                        >\r\n                            Done\r\n                        </button>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n\r\n// Tappable Token within the sentence\r\nfunction Token({ value, placeholder, onClick, isActive }) {\n    return (\r\n        <motion.button\r\n            onClick={onClick}\r\n            className=\"inline-block px-2 py-0.5 mx-1 rounded transition-all\"\r\n            animate={{\r\n                scale: isActive ? 1.05 : 1,\r\n                backgroundColor: isActive ? 'rgba(255,220,120,0.15)' : 'rgba(255,220,120,0.08)',\r\n            }}\r\n            whileHover={{ backgroundColor: 'rgba(255,220,120,0.2)' }}\r\n            style={{\r\n                borderBottom: '1px dashed var(--accent-40)',\r\n            }}\r\n        >\r\n            <span\r\n                className=\"text-lg\"\r\n                style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontWeight: 500,\r\n                    letterSpacing: '0.01em',\r\n                    color: value ? 'var(--accent-color)' : 'rgba(255,220,120,0.5)',\r\n                    fontStyle: value ? 'normal' : 'italic',\r\n                }}\r\n            >\r\n                {value || placeholder}\r\n            </span>\r\n        </motion.button>\r\n    );\r\n}\r\n\r\nexport function SentenceBuilder({ values = {}, onChange }) {\r\n    const [activeToken, setActiveToken] = useState(null);\r\n\r\n    const handleTokenChange = (field, value) => {\r\n        onChange(field, value);\r\n    };\r\n\r\n    const handleTokenClick = (field) => {\r\n        setActiveToken(field);\r\n    };\r\n\r\n    const handleSheetClose = () => {\r\n        setActiveToken(null);\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full\">\r\n            {/* The Sentence */}\r\n            <div\r\n                className=\"text-center py-6 px-4 leading-relaxed\"\r\n                style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontWeight: 500,\r\n                    letterSpacing: '0.01em',\r\n                    fontSize: '18px',\r\n                    color: 'rgba(253,251,245,0.85)',\r\n                }}\r\n            >\r\n                <span>It happened on </span>\r\n                <Token\n                    value={values.date}\n                    placeholder=\"when?\"\n                    onClick={() => handleTokenClick('date')}\n                    isActive={activeToken === 'date'}\n                />\n                <span> at </span>\r\n                <Token\n                    value={values.time}\n                    placeholder=\"what time?\"\n                    onClick={() => handleTokenClick('time')}\n                    isActive={activeToken === 'time'}\n                />\n                <span> in </span>\r\n                <Token\n                    value={values.location}\n                    placeholder=\"where?\"\n                    onClick={() => handleTokenClick('location')}\n                    isActive={activeToken === 'location'}\n                />\n                <span>.</span>\r\n            </div>\r\n\r\n            {/* Bottom Sheet for editing */}\r\n            <TokenEditSheet\r\n                isOpen={activeToken !== null}\r\n                onClose={handleSheetClose}\r\n                type={activeToken}\r\n                value={activeToken ? values[activeToken] : ''}\r\n                onChange={(val) => handleTokenChange(activeToken, val)}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// Actor/Action Builder - Typography focused flow\r\nexport function ActorActionBuilder({ values = {}, onChange }) {\r\n    const [activeField, setActiveField] = useState(null);\r\n\r\n    const fields = [\r\n        { key: 'actor', prompt: 'Who?', placeholder: 'the person' },\r\n        { key: 'action', prompt: 'Did what?', placeholder: 'the action' },\r\n        { key: 'recipient', prompt: 'To whom?', placeholder: 'optional', optional: true },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-full space-y-8 py-6\">\r\n            {fields.map((field) => (\r\n                <motion.div\r\n                    key={field.key}\r\n                    className=\"text-center\"\r\n                    animate={{\r\n                        opacity: activeField === field.key ? 1 : activeField ? 0.5 : 0.9,\r\n                    }}\r\n                >\r\n                    {/* Prompt */}\r\n                    <div\r\n                        className=\"text-[11px] uppercase tracking-[0.2em] mb-2\"\r\n                        style={{\r\n                            color: 'rgba(255,255,255,0.4)',\r\n                            fontFamily: 'var(--font-ui)',\r\n                            fontWeight: 600,\r\n                        }}\r\n                    >\r\n                        {field.prompt}\r\n                    </div>\r\n\r\n                    {/* Input with voice - styled as typography, not form */}\r\n                    <div className=\"flex items-center gap-2 justify-center\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={values[field.key] || ''}\r\n                            onChange={(e) => onChange(field.key, e.target.value)}\r\n                            onFocus={() => setActiveField(field.key)}\r\n                            onBlur={() => setActiveField(null)}\r\n                            placeholder={field.placeholder}\r\n                            className=\"w-full max-w-xs bg-transparent text-center text-2xl focus:outline-none border-b-2 pb-2 transition-all\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-body)\",\r\n                                fontWeight: 500,\r\n                                letterSpacing: '0.01em',\r\n                                color: values[field.key] ? 'rgba(255,255,255,0.95)' : 'rgba(255,255,255,0.3)',\r\n                                borderColor: activeField === field.key\r\n                                    ? 'var(--accent-50)'\r\n                                    : values[field.key]\r\n                                        ? 'var(--accent-20)'\r\n                                        : 'rgba(255,255,255,0.1)',\r\n                            }}\r\n                        />\r\n                        <VoiceInput onTranscription={(text) => onChange(field.key, text)} />\r\n                    </div>\r\n\r\n                    {/* Optional indicator */}\r\n                    {field.optional && !values[field.key] && (\r\n                        <div\r\n                            className=\"text-[9px] mt-1 italic\"\r\n                            style={{ color: 'rgba(255,255,255,0.3)' }}\r\n                        >\r\n                            (optional)\r\n                        </div>\r\n                    )}\r\n                </motion.div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\VoiceInput.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[232,239],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  19 |     // Sync edited text when transcript changes\n  20 |     useEffect(() => {\n> 21 |         setEditedText(transcript);\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  22 |         setEditMode(false);\n  23 |     }, [transcript]);\n  24 |","line":21,"column":9,"nodeType":null,"endLine":21,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/VoiceInput.jsx\r\n// Voice-to-text input with preview modal\r\n// Uses Web Speech API (works on Chrome, Safari iOS 14.5+, Edge)\r\n\r\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\n// Check if Speech Recognition is available\r\nconst SpeechRecognition = typeof window !== 'undefined'\r\n    ? (window.SpeechRecognition || window.webkitSpeechRecognition)\r\n    : null;\r\n\r\n// Preview Modal - shows transcription before confirming\r\nfunction VoicePreviewModal({ isOpen, transcript, onConfirm, onCancel, onRetry }) {\n    const [editMode, setEditMode] = useState(false);\r\n    const [editedText, setEditedText] = useState(transcript);\r\n    const inputRef = useRef(null);\r\n\r\n    // Sync edited text when transcript changes\r\n    useEffect(() => {\r\n        setEditedText(transcript);\r\n        setEditMode(false);\r\n    }, [transcript]);\r\n\r\n    // Focus input when entering edit mode\r\n    useEffect(() => {\r\n        if (editMode && inputRef.current) {\r\n            inputRef.current.focus();\r\n        }\r\n    }, [editMode]);\r\n\r\n    const handleConfirm = () => {\r\n        onConfirm(editMode ? editedText : transcript);\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 bg-black/80 z-[60]\"\r\n                        onClick={onCancel}\r\n                    />\r\n\r\n                    {/* Modal */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                        className=\"fixed left-4 right-4 top-1/2 -translate-y-1/2 z-[61] max-w-sm mx-auto\"\r\n                        style={{\r\n                            background: 'linear-gradient(180deg, rgba(20,20,35,0.98) 0%, rgba(15,15,25,0.99) 100%)',\r\n                            borderRadius: '16px',\r\n                            border: '1px solid var(--accent-20)',\r\n                            boxShadow: '0 20px 60px rgba(0,0,0,0.5)',\r\n                        }}\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"px-4 pt-4 pb-2 text-center\">\r\n                            <div\r\n                                className=\"text-[10px] uppercase tracking-[0.2em]\"\r\n                                style={{ color: 'var(--accent-color)', opacity: 0.7 }}\r\n                            >\r\n                                Voice Transcription\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"px-4 pb-4\">\r\n                            {editMode ? (\r\n                                <textarea\r\n                                    ref={inputRef}\r\n                                    value={editedText}\r\n                                    onChange={(e) => setEditedText(e.target.value)}\r\n                                    className=\"w-full px-3 py-3 rounded-lg text-base bg-white/5 border border-white/20 focus:border-[var(--accent-40)] focus:outline-none resize-none\"\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-body)\",\r\n                                        fontWeight: 500,\r\n                                        letterSpacing: '0.01em',\r\n                                        color: 'rgba(255,255,255,0.9)',\r\n                                        minHeight: '80px',\r\n                                    }}\r\n                                />\r\n                            ) : (\r\n                                <div\r\n                                    className=\"py-4 px-3 rounded-lg text-center min-h-[60px] flex items-center justify-center\"\r\n                                    style={{\r\n                                        background: 'rgba(255,255,255,0.03)',\r\n                                        border: '1px solid rgba(255,255,255,0.08)',\r\n                                    }}\r\n                                >\r\n                                    <p\r\n                                        className=\"text-base font-medium\"\r\n                                        style={{\r\n                                            fontFamily: \"var(--font-body)\",\r\n                                            letterSpacing: '0.01em',\r\n                                            color: transcript ? 'rgba(255,255,255,0.9)' : 'rgba(255,255,255,0.4)',\r\n                                            fontStyle: transcript ? 'normal' : 'italic',\r\n                                        }}\r\n                                    >\r\n                                        {transcript || 'No speech detected...'}\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Actions */}\r\n                        <div className=\"px-4 pb-4 flex gap-2\">\r\n                            {/* Cancel */}\r\n                            <button\r\n                                onClick={onCancel}\r\n                                className=\"flex-1 py-2.5 rounded-lg text-xs uppercase tracking-wider transition-all\"\r\n                                style={{\r\n                                    background: 'transparent',\r\n                                    border: '1px solid rgba(255,255,255,0.15)',\r\n                                    color: 'rgba(255,255,255,0.5)',\r\n                                }}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n\r\n                            {/* Edit / Retry */}\r\n                            {editMode ? (\r\n                                <button\r\n                                    onClick={onRetry}\r\n                                    className=\"flex-1 py-2.5 rounded-lg text-xs uppercase tracking-wider transition-all\"\r\n                                    style={{\r\n                                        background: 'rgba(255,255,255,0.05)',\r\n                                        border: '1px solid rgba(255,255,255,0.2)',\r\n                                        color: 'rgba(255,255,255,0.7)',\r\n                                    }}\r\n                                >\r\n                                    ≡ƒÄñ Re-dictate\r\n                                </button>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={() => setEditMode(true)}\r\n                                    className=\"flex-1 py-2.5 rounded-lg text-xs uppercase tracking-wider transition-all\"\r\n                                    style={{\r\n                                        background: 'rgba(255,255,255,0.05)',\r\n                                        border: '1px solid rgba(255,255,255,0.2)',\r\n                                        color: 'rgba(255,255,255,0.7)',\r\n                                    }}\r\n                                >\r\n                                    Edit\r\n                                </button>\r\n                            )}\r\n\r\n                            {/* Confirm */}\r\n                            <button\r\n                                onClick={handleConfirm}\r\n                                disabled={!transcript && !editedText}\r\n                                className=\"flex-1 py-2.5 rounded-lg text-xs uppercase tracking-wider transition-all\"\r\n                                style={{\r\n                                    background: 'var(--accent-15)',\r\n                                    border: '1px solid var(--accent-40)',\r\n                                    color: 'var(--accent-color)',\r\n                                    opacity: (transcript || editedText) ? 1 : 0.4,\r\n                                }}\r\n                            >\r\n                                Use This\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n\r\n// Main VoiceInput component - mic button + preview modal\r\nexport function VoiceInput({ onTranscription, lang = 'en-US', className = '' }) {\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [showPreview, setShowPreview] = useState(false);\r\n    const [transcript, setTranscript] = useState('');\r\n    const [interimTranscript, setInterimTranscript] = useState('');\r\n    const recognitionRef = useRef(null);\r\n\r\n    // Check API availability\r\n    const isSupported = !!SpeechRecognition;\r\n\r\n    // Initialize recognition\r\n    const initRecognition = useCallback(() => {\r\n        if (!SpeechRecognition) return null;\r\n\r\n        const recognition = new SpeechRecognition();\r\n        recognition.continuous = false;\r\n        recognition.interimResults = true;\r\n        recognition.lang = lang;\r\n\r\n        recognition.onresult = (event) => {\r\n            let interim = '';\r\n            let final = '';\r\n\r\n            for (let i = event.resultIndex; i < event.results.length; i++) {\r\n                const result = event.results[i];\r\n                if (result.isFinal) {\r\n                    final += result[0].transcript;\r\n                } else {\r\n                    interim += result[0].transcript;\r\n                }\r\n            }\r\n\r\n            if (final) {\r\n                setTranscript((prev) => prev + final);\r\n            }\r\n            setInterimTranscript(interim);\r\n        };\r\n\r\n        recognition.onend = () => {\r\n            setIsListening(false);\r\n            setInterimTranscript('');\r\n            // Show preview after recognition ends (only if we have content)\r\n            setTranscript((currentTranscript) => {\r\n                if (currentTranscript) {\r\n                    setShowPreview(true);\r\n                }\r\n                return currentTranscript;\r\n            });\r\n        };\r\n\r\n        recognition.onerror = (event) => {\r\n            console.warn('Speech recognition error:', event.error);\r\n            setIsListening(false);\r\n            if (event.error !== 'no-speech' && event.error !== 'aborted') {\r\n                // Show preview even on error if we have partial transcript\r\n                setTranscript((currentTranscript) => {\r\n                    if (currentTranscript) {\r\n                        setShowPreview(true);\r\n                    }\r\n                    return currentTranscript;\r\n                });\r\n            }\r\n        };\r\n\r\n        return recognition;\r\n    }, [lang]);\r\n\r\n    // Start listening\r\n    const startListening = useCallback(() => {\r\n        if (!isSupported) return;\r\n\r\n        // Reset state\r\n        setTranscript('');\r\n        setInterimTranscript('');\r\n        setShowPreview(false);\r\n\r\n        const recognition = initRecognition();\r\n        if (recognition) {\r\n            recognitionRef.current = recognition;\r\n            try {\r\n                recognition.start();\r\n                setIsListening(true);\r\n            } catch (err) {\r\n                console.error('Failed to start speech recognition:', err);\r\n            }\r\n        }\r\n    }, [isSupported, initRecognition]);\r\n\r\n    // Stop listening\r\n    const stopListening = useCallback(() => {\r\n        if (recognitionRef.current) {\r\n            recognitionRef.current.stop();\r\n        }\r\n    }, []);\r\n\r\n    // Handle mic button click\r\n    const handleMicClick = () => {\r\n        if (isListening) {\r\n            stopListening();\r\n        } else {\r\n            startListening();\r\n        }\r\n    };\r\n\r\n    // Handle confirm from preview\r\n    const handleConfirm = (text) => {\r\n        setShowPreview(false);\r\n        setTranscript('');\r\n        onTranscription?.(text);\r\n    };\r\n\r\n    // Handle cancel\r\n    const handleCancel = () => {\r\n        setShowPreview(false);\r\n        setTranscript('');\r\n    };\r\n\r\n    // Handle retry (re-dictate)\r\n    const handleRetry = () => {\r\n        setShowPreview(false);\r\n        setTranscript('');\r\n        // Small delay to allow modal to close\r\n        setTimeout(() => startListening(), 100);\r\n    };\r\n\r\n    // Cleanup on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (recognitionRef.current) {\r\n                recognitionRef.current.abort();\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // Don't render if not supported\r\n    if (!isSupported) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {/* Mic Button */}\r\n            <motion.button\r\n                onClick={handleMicClick}\r\n                className={`relative flex items-center justify-center transition-all ${className}`}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                style={{\r\n                    width: '32px',\r\n                    height: '32px',\r\n                    borderRadius: '50%',\r\n                    background: isListening\r\n                        ? 'rgba(239, 68, 68, 0.3)'\r\n                        : 'rgba(255,255,255,0.08)',\r\n                    border: `1px solid ${isListening ? 'rgba(239, 68, 68, 0.5)' : 'rgba(255,255,255,0.15)'}`,\r\n                }}\r\n                title={isListening ? 'Stop dictation' : 'Start dictation'}\r\n            >\r\n                {/* Mic icon */}\r\n                <svg\r\n                    width=\"14\"\r\n                    height=\"14\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke={isListening ? '#ef4444' : 'rgba(255,255,255,0.6)'}\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                >\r\n                    <path d=\"M12 1a4 4 0 0 0-4 4v7a4 4 0 0 0 8 0V5a4 4 0 0 0-4-4z\" />\r\n                    <path d=\"M19 10v2a7 7 0 0 1-14 0v-2\" />\r\n                    <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\" />\r\n                    <line x1=\"8\" y1=\"23\" x2=\"16\" y2=\"23\" />\r\n                </svg>\r\n\r\n                {/* Pulsing indicator when listening */}\r\n                {isListening && (\r\n                    <motion.div\r\n                        className=\"absolute inset-0 rounded-full\"\r\n                        style={{\r\n                            border: '2px solid rgba(239, 68, 68, 0.5)',\r\n                        }}\r\n                        animate={{\r\n                            scale: [1, 1.3, 1],\r\n                            opacity: [0.8, 0.3, 0.8],\r\n                        }}\r\n                        transition={{\r\n                            duration: 1.5,\r\n                            repeat: Infinity,\r\n                            ease: 'easeInOut',\r\n                        }}\r\n                    />\r\n                )}\r\n            </motion.button>\r\n\r\n            {/* Live transcript indicator (while listening) */}\r\n            <AnimatePresence>\r\n                {isListening && (interimTranscript || transcript) && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: 10 }}\r\n                        className=\"fixed bottom-20 left-4 right-4 z-50 text-center\"\r\n                    >\r\n                        <div\r\n                            className=\"inline-block px-4 py-2 rounded-full text-sm\"\r\n                            style={{\r\n                                background: 'rgba(0,0,0,0.8)',\r\n                                border: '1px solid rgba(255,255,255,0.2)',\r\n                                color: 'rgba(255,255,255,0.8)',\r\n                                maxWidth: '80%',\r\n                            }}\r\n                        >\r\n                            {transcript}\r\n                            <span style={{ color: 'rgba(255,255,255,0.4)' }}>{interimTranscript}</span>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Preview Modal */}\r\n            <VoicePreviewModal\n                isOpen={showPreview}\n                transcript={transcript}\n                onConfirm={handleConfirm}\n                onCancel={handleCancel}\n                onRetry={handleRetry}\n            />\n        </>\r\n    );\r\n}\r\n\r\nexport default VoiceInput;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\MirrorObservation.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[322,329],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'validateMirrorEntry' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"validateMirrorEntry"},"fix":{"range":[434,504],"text":""},"desc":"Remove unused variable 'validateMirrorEntry'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setMirrorLLMValidation' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":77,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"setMirrorLLMValidation"},"fix":{"range":[2888,2921],"text":""},"desc":"Remove unused variable 'setMirrorLLMValidation'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'context' logical expression could make the dependencies of useMemo Hook (at line 95) change on every render. To fix this, wrap the initialization of 'context' in its own useMemo() Hook.","line":90,"column":11,"nodeType":"VariableDeclarator","endLine":90,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'context' logical expression could make the dependencies of useMemo Hook (at line 100) change on every render. To fix this, wrap the initialization of 'context' in its own useMemo() Hook.","line":90,"column":11,"nodeType":"VariableDeclarator","endLine":90,"endColumn":45}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/practices/MirrorObservation.jsx\r\n// Mirror Mode: Observation - Establish a neutral, immutable anchor\r\n// Redesigned: Full-screen immersive \"Tunnel of Truth\" experience\r\n// Uses sentence builders instead of form fields\r\n\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useChainStore } from '../../../state/chainStore.js';\r\nimport { validateMirrorEntry } from '../../../services/llmService.js';\r\nimport { SentenceBuilder, ActorActionBuilder } from '../SentenceBuilder.jsx';\r\nimport { MirrorSeal } from '../MirrorSeal.jsx';\r\n\r\n// Build neutral sentence from components\r\nfunction buildNeutralSentence(context, actor, action, recipient) {\r\n    const parts = [];\r\n\r\n    if (context.time) parts.push(`At ${context.time}`);\r\n    if (context.date) parts.push(`on ${context.date}`);\r\n    if (context.location) parts.push(`at ${context.location}`);\r\n\r\n    const contextStr = parts.join(', ');\r\n    const actorStr = actor || '[Someone]';\r\n    const actionStr = action || '[did something]';\r\n    const recipientStr = recipient ? ` to ${recipient}` : '';\r\n\r\n    if (contextStr) {\r\n        return `${contextStr}, ${actorStr} ${actionStr}${recipientStr}.`;\r\n    }\r\n    return `${actorStr} ${actionStr}${recipientStr}.`;\r\n}\r\n\r\n// Build the \"original\" sentence with more narrative (for transformation effect)\r\nfunction buildOriginalSentence(context, actor, action, recipient) {\r\n    const parts = [];\r\n\r\n    if (context.date) parts.push(context.date);\r\n    if (context.time) parts.push(`around ${context.time}`);\r\n    if (context.location) parts.push(`in ${context.location}`);\r\n\r\n    const when = parts.length > 0 ? parts.join(', ') + ' ΓÇö ' : '';\r\n    const who = actor || 'Someone';\r\n    const what = action || 'did something';\r\n    const toWhom = recipient ? ` to ${recipient}` : '';\r\n\r\n    return `${when}${who} ${what}${toWhom}.`;\r\n}\r\n\r\n// Phase indicator\r\nfunction PhaseIndicator({ current, total }) {\r\n    return (\r\n        <div className=\"flex justify-center gap-2 items-center mb-4\">\r\n            {Array.from({ length: total }, (_, i) => (\r\n                <motion.div\r\n                    key={i}\r\n                    className=\"w-2 h-2 rounded-full\"\r\n                    animate={{\r\n                        scale: i === current ? 1.3 : 1,\r\n                        background: i < current\r\n                            ? 'var(--accent-color)'\r\n                            : i === current\r\n                                ? 'rgba(255,220,120,0.7)'\r\n                                : 'rgba(255,255,255,0.2)',\r\n                    }}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function MirrorObservation({ onComplete }) {\r\n    const {\r\n        activeChain,\r\n        startNewChain,\r\n        updateMirrorData,\r\n        updateMirrorContext,\r\n        lockMirror,\r\n        setMirrorLLMValidation,\r\n    } = useChainStore();\r\n\r\n    const [phase, setPhase] = useState(0); // 0: context, 1: action, 2: seal\r\n\r\n    // Auto-start chain if none exists\r\n    useEffect(() => {\r\n        if (!activeChain) {\r\n            startNewChain();\r\n        }\r\n    }, [activeChain, startNewChain]);\r\n\r\n    const mirrorData = activeChain?.mirror || {};\r\n    const context = mirrorData.context || {};\r\n\r\n    // Build sentences\r\n    const neutralSentence = useMemo(() =>\r\n        buildNeutralSentence(context, mirrorData.actor, mirrorData.action, mirrorData.recipient),\r\n        [context, mirrorData.actor, mirrorData.action, mirrorData.recipient]\r\n    );\r\n\r\n    const originalSentence = useMemo(() =>\r\n        buildOriginalSentence(context, mirrorData.actor, mirrorData.action, mirrorData.recipient),\r\n        [context, mirrorData.actor, mirrorData.action, mirrorData.recipient]\r\n    );\r\n\r\n    // Check if phases are complete\r\n    const contextComplete = context.date || context.time || context.location;\r\n    const actionComplete = mirrorData.actor && mirrorData.action;\r\n\r\n    // Handle context update from SentenceBuilder\r\n    const handleContextChange = (field, value) => {\r\n        updateMirrorContext(field, value);\r\n    };\r\n\r\n    // Handle actor/action update\r\n    const handleActionChange = (field, value) => {\r\n        updateMirrorData(field, value);\r\n    };\r\n\r\n    // Handle lock\r\n    const handleLock = () => {\r\n        lockMirror(neutralSentence, []);\r\n        onComplete?.();\r\n    };\r\n\r\n    // Navigation\r\n    const canProceed = phase === 0 ? contextComplete : actionComplete;\r\n\r\n    const goNext = () => {\r\n        if (phase < 2) setPhase(phase + 1);\r\n    };\r\n\r\n    const goBack = () => {\r\n        if (phase > 0) setPhase(phase - 1);\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"h-full flex flex-col overflow-auto\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n        >\r\n            {/* Header - Minimal */}\r\n            <div className=\"text-center pt-6 pb-4\">\r\n                <motion.div\r\n                    className=\"text-[10px] uppercase tracking-[0.25em] mb-1\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Mirror ┬╖ Observation\r\n                </motion.div>\r\n                <PhaseIndicator current={phase} total={3} />\r\n            </div>\r\n\r\n            {/* Content Area - Full height */}\r\n            <div className=\"flex-1 flex flex-col justify-center px-4\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {/* Phase 0: Context - When/Where */}\r\n                    {phase === 0 && (\r\n                        <motion.div\r\n                            key=\"context\"\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: -20 }}\r\n                            className=\"text-center\"\r\n                        >\r\n                            <h2\r\n                                className=\"text-xl mb-2\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-body)\",\r\n                                    fontWeight: 500,\r\n                                    letterSpacing: '0.01em',\r\n                                    color: 'rgba(255,255,255,0.9)',\r\n                                }}\r\n                            >\r\n                                Ground the moment\r\n                            </h2>\r\n                            <p\r\n                                className=\"text-[12px] mb-6\"\r\n                                style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                            >\r\n                                Place this observation in time and space.\r\n                            </p>\r\n\r\n                            <SentenceBuilder\r\n                                values={context}\r\n                                onChange={handleContextChange}\r\n                            />\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* Phase 1: Actor/Action */}\r\n                    {phase === 1 && (\r\n                        <motion.div\r\n                            key=\"action\"\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: -20 }}\r\n                            className=\"text-center\"\r\n                        >\r\n                            <h2\r\n                                className=\"text-xl mb-2\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-body)\",\r\n                                    fontWeight: 500,\r\n                                    letterSpacing: '0.01em',\r\n                                    color: 'rgba(255,255,255,0.9)',\r\n                                }}\r\n                            >\r\n                                What happened?\r\n                            </h2>\r\n                            <p\r\n                                className=\"text-[12px] mb-4\"\r\n                                style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                            >\r\n                                Describe only what a camera would capture.\r\n                            </p>\r\n\r\n                            <ActorActionBuilder\r\n                                values={{\r\n                                    actor: mirrorData.actor,\r\n                                    action: mirrorData.action,\r\n                                    recipient: mirrorData.recipient,\r\n                                }}\r\n                                onChange={handleActionChange}\r\n                            />\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* Phase 2: Seal */}\r\n                    {phase === 2 && (\r\n                        <motion.div\r\n                            key=\"seal\"\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: -20 }}\r\n                        >\r\n                            <MirrorSeal\r\n                                originalSentence={originalSentence}\r\n                                neutralSentence={neutralSentence}\r\n                                onLock={handleLock}\r\n                            />\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Navigation Footer */}\r\n            <div className=\"py-6 px-4\">\r\n                <div className=\"flex justify-center gap-4 items-center\">\r\n                    {/* Back button */}\r\n                    {phase > 0 && phase < 2 && (\r\n                        <motion.button\r\n                            onClick={goBack}\r\n                            className=\"px-5 py-2 rounded-full text-sm\"\r\n                            whileHover={{ scale: 1.05 }}\r\n                            whileTap={{ scale: 0.95 }}\r\n                            style={{\r\n                                border: '1px solid rgba(255,255,255,0.2)',\r\n                                color: 'rgba(255,255,255,0.5)',\r\n                            }}\r\n                        >\r\n                            ΓåÉ Back\r\n                        </motion.button>\r\n                    )}\r\n\r\n                    {/* Next button */}\r\n                    {phase < 2 && (\r\n                        <motion.button\r\n                            onClick={goNext}\r\n                            disabled={!canProceed}\r\n                            className=\"px-6 py-2.5 rounded-full text-sm\"\r\n                            whileHover={canProceed ? { scale: 1.05 } : {}}\r\n                            whileTap={canProceed ? { scale: 0.95 } : {}}\r\n                            style={{\r\n                                background: canProceed\r\n                                    ? 'linear-gradient(135deg, rgba(255,220,120,0.2) 0%, rgba(255,220,120,0.1) 100%)'\r\n                                    : 'rgba(255,255,255,0.05)',\r\n                                border: `1px solid ${canProceed ? 'var(--accent-40)' : 'rgba(255,255,255,0.1)'}`,\r\n                                color: canProceed ? 'var(--accent-color)' : 'rgba(255,255,255,0.3)',\r\n                                cursor: canProceed ? 'pointer' : 'not-allowed',\r\n                            }}\r\n                        >\r\n                            {phase === 1 ? 'Review ΓåÆ' : 'Continue ΓåÆ'}\r\n                        </motion.button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Skip option for context phase */}\r\n                {phase === 0 && !contextComplete && (\r\n                    <div className=\"text-center mt-3\">\r\n                        <button\r\n                            onClick={goNext}\r\n                            className=\"text-[10px] italic\"\r\n                            style={{ color: 'rgba(255,255,255,0.3)' }}\r\n                        >\r\n                            Skip context ΓåÆ\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\MirrorStillness.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[155,168],"text":""},"desc":"Remove unused variable 'useCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'addEntry' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"addEntry"},"fix":{"range":[468,478],"text":""},"desc":"Remove unused variable 'addEntry'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/practices/MirrorStillness.jsx\r\n// 90-second timed stillness practice with countdown ring\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useModeTrainingStore, PRACTICE_STATES } from '../../../state/modeTrainingStore.js';\r\nimport { PRACTICE_DEFINITIONS } from '../../../state/practiceConfig.js';\r\n\r\nexport function MirrorStillness({ onComplete }) {\r\n    const { practiceState, setPracticeState, updateCompletion, addEntry } = useModeTrainingStore();\r\n    const [timeRemaining, setTimeRemaining] = useState(90);\r\n    const [totalTime] = useState(90);\r\n    const [introComplete, setIntroComplete] = useState(false);\r\n\r\n    const config = PRACTICE_DEFINITIONS.mirror;\r\n\r\n    // Intro phase\r\n    useEffect(() => {\r\n        if (practiceState === PRACTICE_STATES.INTRO) {\r\n            const timer = setTimeout(() => {\r\n                setIntroComplete(true);\r\n                setPracticeState(PRACTICE_STATES.ACTIVE);\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [practiceState, setPracticeState]);\r\n\r\n    // Active countdown\r\n    useEffect(() => {\r\n        if (practiceState === PRACTICE_STATES.ACTIVE && timeRemaining > 0) {\r\n            const timer = setInterval(() => {\r\n                setTimeRemaining(t => {\r\n                    const newTime = t - 1;\r\n                    updateCompletion((totalTime - newTime) / totalTime);\r\n                    return newTime;\r\n                });\r\n            }, 1000);\r\n            return () => clearInterval(timer);\r\n        } else if (timeRemaining === 0 && practiceState === PRACTICE_STATES.ACTIVE) {\r\n            setPracticeState(PRACTICE_STATES.REFLECTION);\r\n        }\r\n    }, [practiceState, timeRemaining, totalTime, updateCompletion, setPracticeState]);\r\n\r\n    // Pause on visibility change\r\n    useEffect(() => {\r\n        const handleVisibilityChange = () => {\r\n            if (document.hidden && practiceState === PRACTICE_STATES.ACTIVE) {\r\n                useModeTrainingStore.getState().pauseSession();\r\n            }\r\n        };\r\n        document.addEventListener('visibilitychange', handleVisibilityChange);\r\n        return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n    }, [practiceState]);\r\n\r\n    const handleEndEarly = () => {\r\n        const completion = (totalTime - timeRemaining) / totalTime;\r\n        updateCompletion(completion);\r\n        setPracticeState(PRACTICE_STATES.REFLECTION);\r\n    };\r\n\r\n    // Progress ring calculation\r\n    const progress = (totalTime - timeRemaining) / totalTime;\r\n    const circumference = 2 * Math.PI * 80;\r\n    const offset = circumference * (1 - progress);\r\n\r\n    // Format time display\r\n    const minutes = Math.floor(timeRemaining / 60);\r\n    const seconds = timeRemaining % 60;\r\n    const timeDisplay = `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n\r\n    // Intro screen\r\n    if (!introComplete) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center h-full text-center px-8\">\r\n                <p\r\n                    className=\"text-2xl\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255, 255, 255, 0.8)',\r\n                        opacity: 0,\r\n                        animation: 'fadeIn 2s ease-out forwards',\r\n                    }}\r\n                >\r\n                    {config.introText}\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Reflection screen\r\n    if (practiceState === PRACTICE_STATES.REFLECTION) {\r\n        const wasEarly = timeRemaining > 0;\r\n        const prompt = wasEarly\r\n            ? config.reflectionPrompts.early\r\n            : config.reflectionPrompts.complete;\r\n\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center h-full text-center px-8\">\r\n                <p\r\n                    className=\"text-xl mb-8\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255, 255, 255, 0.9)',\r\n                    }}\r\n                >\r\n                    {prompt}\r\n                </p>\r\n                <p\r\n                    className=\"text-sm mb-8 max-w-xs\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255, 255, 255, 0.5)',\r\n                    }}\r\n                >\r\n                    No answer required. Just notice.\r\n                </p>\r\n                <button\r\n                    onClick={onComplete}\r\n                    className=\"px-6 py-2 rounded border border-white/30 text-white/70 hover:text-white hover:border-white/50 transition-all\"\r\n                    style={{ fontFamily: \"var(--font-ui)\", fontWeight: 700, fontSize: '11px', letterSpacing: 'var(--tracking-wide)' }}\r\n                >\r\n                    END PRACTICE\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Active practice with countdown ring\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center h-full\">\r\n            {/* Countdown ring */}\r\n            <div className=\"relative w-48 h-48 mb-8\">\r\n                <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 180 180\">\r\n                    {/* Background ring */}\r\n                    <circle\r\n                        cx=\"90\"\r\n                        cy=\"90\"\r\n                        r=\"80\"\r\n                        fill=\"none\"\r\n                        stroke=\"rgba(255, 255, 255, 0.1)\"\r\n                        strokeWidth=\"2\"\r\n                    />\r\n                    {/* Progress ring */}\r\n                    <circle\r\n                        cx=\"90\"\r\n                        cy=\"90\"\r\n                        r=\"80\"\r\n                        fill=\"none\"\r\n                        stroke={config.accent}\r\n                        strokeWidth=\"3\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeDasharray={circumference}\r\n                        strokeDashoffset={offset}\r\n                        style={{ transition: 'stroke-dashoffset 1s linear' }}\r\n                    />\r\n                </svg>\r\n\r\n                {/* Time display */}\r\n                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                    <span\r\n                        className=\"text-4xl font-light\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-ui)\",\r\n                            fontWeight: 700,\r\n                            color: 'rgba(255, 255, 255, 0.9)',\r\n                            letterSpacing: 'var(--tracking-wide)',\r\n                        }}\r\n                    >\r\n                        {timeDisplay}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* End early button */}\r\n            <button\r\n                onClick={handleEndEarly}\r\n                className=\"px-4 py-2 text-white/40 hover:text-white/60 transition-colors\"\r\n                style={{ fontFamily: \"var(--font-ui)\", fontWeight: 700, fontSize: '10px', letterSpacing: 'var(--tracking-wide)' }}\r\n            >\r\n                END EARLY\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\MirrorValidationFeedback.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\PrismReframing.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\PrismSeparation.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'categorizedCount' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":94,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"categorizedCount"},"fix":{"range":[3377,3461],"text":""},"desc":"Remove unused variable 'categorizedCount'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'idx' is defined but never used.","line":405,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":405,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"idx"},"fix":{"range":[17329,17334],"text":""},"desc":"Remove unused variable 'idx'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/practices/PrismSeparation.jsx\r\n// Prism Mode: Separation - Distinguish fact from narrative\r\n// IE v1 Spec: Display locked Mirror, log interpretations, categorize as Supported/Unsupported\r\n\r\nimport React, { useState } from 'react';\r\nimport { useChainStore } from '../../../state/chainStore.js';\r\nimport { VoiceInput } from '../VoiceInput.jsx';\r\n\r\n// Interpretation categories\r\nconst INTERPRETATION_CATEGORIES = [\r\n    { id: 'future_prediction', label: 'Future Prediction', example: '\"This will...\" or \"They will...\"' },\r\n    { id: 'causality', label: 'Assumed Causality', example: '\"Because of...\" or \"This caused...\"' },\r\n    { id: 'narrative_self', label: 'Narrative About Self', example: '\"I always...\" or \"I\\'m the kind of...\"' },\r\n    { id: 'narrative_other', label: 'Narrative About Other', example: '\"They\\'re...\" or \"He/She is...\"' },\r\n    { id: 'judgment', label: 'Value Judgment', example: '\"That was wrong...\" or \"It\\'s unfair...\"' },\r\n    { id: 'other', label: 'Other', example: 'Doesn\\'t fit above categories' },\r\n];\r\n\r\nexport function PrismSeparation({ onComplete }) {\r\n    const {\r\n        activeChain,\r\n        addInterpretation,\r\n        updateInterpretation,\r\n        lockPrism,\r\n        skipPrism,\r\n    } = useChainStore();\r\n\r\n    const [phase, setPhase] = useState('list'); // list | categorize | summary\r\n    const [currentInput, setCurrentInput] = useState('');\r\n    const [currentInterpIdx, setCurrentInterpIdx] = useState(0);\r\n\r\n    const prismData = activeChain?.prism || {};\r\n    const mirrorData = activeChain?.mirror || {};\r\n    const interpretations = prismData.interpretations || [];\r\n\r\n    // Add new interpretation\r\n    const handleAdd = () => {\r\n        if (currentInput.trim()) {\r\n            addInterpretation(currentInput.trim());\r\n            setCurrentInput('');\r\n        }\r\n    };\r\n\r\n    // Move to categorization phase\r\n    const handleStartCategorize = () => {\r\n        if (interpretations.length > 0) {\r\n            setCurrentInterpIdx(0);\r\n            setPhase('categorize');\r\n        }\r\n    };\r\n\r\n    // Set support status for current interpretation\r\n    const handleSetSupport = (isSupported) => {\r\n        const interp = interpretations[currentInterpIdx];\r\n        if (interp) {\r\n            updateInterpretation(interp.id, { isSupported });\r\n\r\n            // Move to next or summary\r\n            if (currentInterpIdx < interpretations.length - 1) {\r\n                setCurrentInterpIdx(currentInterpIdx + 1);\r\n            } else {\r\n                setPhase('summary');\r\n            }\r\n        }\r\n    };\r\n\r\n    // Set category for current interpretation\r\n    const handleSetCategory = (category) => {\r\n        const interp = interpretations[currentInterpIdx];\r\n        if (interp) {\r\n            updateInterpretation(interp.id, { category });\r\n        }\r\n    };\r\n\r\n    // Handle lock\r\n    const handleLock = () => {\r\n        try {\r\n            lockPrism();\r\n        } catch (err) {\r\n            console.error('Error locking prism:', err);\r\n        }\r\n        onComplete?.();\r\n    };\r\n\r\n    // Handle skip\r\n    const handleSkip = () => {\r\n        skipPrism();\r\n        onComplete?.();\r\n    };\r\n\r\n    // Calculate stats\r\n    const supportedCount = interpretations.filter(i => i.isSupported === true).length;\r\n    const unsupportedCount = interpretations.filter(i => i.isSupported === false).length;\r\n    const categorizedCount = interpretations.filter(i => i.isSupported !== null).length;\r\n    const total = interpretations.length;\r\n    const supportedRatio = total > 0 ? Math.round((supportedCount / total) * 100) : 0;\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 1: List Interpretations\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'list') {\r\n        return (\r\n            <div className=\"flex flex-col h-full px-6 py-4 overflow-y-auto\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-2 text-center\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Prism ΓÇö Step 1 of 2\r\n                </p>\r\n\r\n                {/* Locked Mirror Anchor */}\r\n                <div\r\n                    className=\"mb-4 p-3 rounded-lg\"\r\n                    style={{\r\n                        background: 'rgba(147, 197, 253, 0.1)',\r\n                        border: '1px solid rgba(147, 197, 253, 0.2)',\r\n                    }}\r\n                >\r\n                    <p className=\"text-xs text-blue-300/60 mb-1\">Locked Observation:</p>\r\n                    <p\r\n                        className=\"text-sm\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-body)\",\r\n                            fontWeight: 500,\r\n                            letterSpacing: '0.01em',\r\n                            color: 'rgba(255,255,255,0.85)',\r\n                        }}\r\n                    >\r\n                        \"{mirrorData.neutralSentence}\"\r\n                    </p>\r\n                </div>\r\n\r\n                <h2\r\n                    className=\"text-base mb-2 text-center\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.9)',\r\n                    }}\r\n                >\r\n                    What thoughts arise about this?\r\n                </h2>\r\n                <p\r\n                    className=\"text-xs mb-4 text-center\"\r\n                    style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                >\r\n                    List the interpretations, predictions, and stories your mind generates.\r\n                </p>\r\n\r\n                {/* Interpretation list */}\r\n                <div className=\"flex-1 mb-4 space-y-2 overflow-y-auto max-h-40\">\r\n                    {interpretations.map((interp, idx) => (\r\n                        <div\r\n                            key={interp.id}\r\n                            className=\"px-3 py-2 rounded text-sm\"\r\n                            style={{\r\n                                background: 'rgba(255,255,255,0.05)',\r\n                                border: '1px solid rgba(255,255,255,0.1)',\r\n                                color: 'rgba(255,255,255,0.8)',\r\n                            }}\r\n                        >\r\n                            {idx + 1}. \"{interp.text}\"\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Add input with voice */}\r\n                <div className=\"flex gap-2 mb-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={currentInput}\r\n                        onChange={(e) => setCurrentInput(e.target.value)}\r\n                        onKeyDown={(e) => e.key === 'Enter' && handleAdd()}\r\n                        placeholder=\"E.g., 'I am going to be fired'\"\r\n                        className=\"flex-1 px-3 py-2 rounded bg-white/5 border border-white/10 text-white text-sm placeholder-white/30 focus:outline-none focus:border-amber-400/50\"\r\n                    />\r\n                    <VoiceInput onTranscription={(text) => setCurrentInput(text)} />\r\n                    <button\r\n                        onClick={handleAdd}\r\n                        className=\"px-4 py-2 rounded bg-white/10 text-white/60 hover:text-white transition-all text-sm\"\r\n                    >\r\n                        Add\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <div className=\"flex gap-3 justify-center\">\r\n                    <button\r\n                        onClick={handleSkip}\r\n                        className=\"px-4 py-2 rounded border border-white/20 text-white/40 hover:text-white/60 transition-all text-xs\"\r\n                    >\r\n                        SKIP PRISM\r\n                    </button>\r\n                    <button\r\n                        onClick={handleStartCategorize}\r\n                        disabled={interpretations.length === 0}\r\n                        className=\"px-6 py-2 rounded border transition-all\"\r\n                        style={{\r\n                            borderColor: interpretations.length > 0\r\n                                ? 'rgba(251, 191, 36, 0.5)'\r\n                                : 'rgba(255,255,255,0.2)',\r\n                            color: interpretations.length > 0\r\n                                ? 'rgba(251, 191, 36, 0.9)'\r\n                                : 'rgba(255,255,255,0.4)',\r\n                        }}\r\n                    >\r\n                        CATEGORIZE ({interpretations.length})\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 2: Categorize (Supported/Unsupported)\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'categorize') {\r\n        const currentInterp = interpretations[currentInterpIdx];\r\n\r\n        return (\r\n            <div className=\"flex flex-col items-center h-full px-6 py-4 overflow-y-auto\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-2\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Prism ΓÇö {currentInterpIdx + 1} of {interpretations.length}\r\n                </p>\r\n\r\n                {/* Mirror anchor (compact) */}\r\n                <div\r\n                    className=\"w-full max-w-md mb-4 p-2 rounded text-xs\"\r\n                    style={{\r\n                        background: 'rgba(147, 197, 253, 0.08)',\r\n                        border: '1px solid rgba(147, 197, 253, 0.15)',\r\n                        color: 'rgba(147, 197, 253, 0.7)',\r\n                    }}\r\n                >\r\n                    Mirror: \"{mirrorData.neutralSentence}\"\r\n                </div>\r\n\r\n                {/* The interpretation */}\r\n                <div\r\n                    className=\"w-full max-w-md mb-4 p-4 rounded-lg\"\r\n                    style={{\r\n                        background: 'rgba(251, 191, 36, 0.1)',\r\n                        border: '1px solid rgba(251, 191, 36, 0.3)',\r\n                    }}\r\n                >\r\n                    <p\r\n                        className=\"text-center\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-body)\",\r\n                            fontWeight: 500,\r\n                            letterSpacing: '0.01em',\r\n                            fontSize: '16px',\r\n                            color: 'rgba(255,255,255,0.95)',\r\n                        }}\r\n                    >\r\n                        \"{currentInterp?.text}\"\r\n                    </p>\r\n                </div>\r\n\r\n                {/* The question */}\r\n                <h2\r\n                    className=\"text-base mb-2 text-center\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.9)',\r\n                    }}\r\n                >\r\n                    Does the Mirror text prove this?\r\n                </h2>\r\n                <p\r\n                    className=\"text-xs mb-6 text-center max-w-sm\"\r\n                    style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                >\r\n                    Supported = the exact words in the observation prove it explicitly.\r\n                    <br />\r\n                    Unsupported = it's an assumption, prediction, or added story.\r\n                </p>\r\n\r\n                {/* Supported / Unsupported buttons */}\r\n                <div className=\"flex gap-4 mb-6\">\r\n                    <button\r\n                        onClick={() => handleSetSupport(true)}\r\n                        className=\"px-6 py-3 rounded-lg border transition-all hover:scale-105\"\r\n                        style={{\r\n                            borderColor: 'rgba(34, 197, 94, 0.5)',\r\n                            background: 'rgba(34, 197, 94, 0.1)',\r\n                            color: 'rgba(34, 197, 94, 0.9)',\r\n                        }}\r\n                    >\r\n                        Γ£ô SUPPORTED\r\n                    </button>\r\n                    <button\r\n                        onClick={() => handleSetSupport(false)}\r\n                        className=\"px-6 py-3 rounded-lg border transition-all hover:scale-105\"\r\n                        style={{\r\n                            borderColor: 'rgba(239, 68, 68, 0.5)',\r\n                            background: 'rgba(239, 68, 68, 0.1)',\r\n                            color: 'rgba(239, 68, 68, 0.9)',\r\n                        }}\r\n                    >\r\n                        Γ£ò UNSUPPORTED\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Category selector (optional refinement) */}\r\n                <div className=\"w-full max-w-md\">\r\n                    <p className=\"text-xs text-white/40 mb-2 text-center\">Category (optional):</p>\r\n                    <div className=\"grid grid-cols-3 gap-2\">\r\n                        {INTERPRETATION_CATEGORIES.map((cat) => (\r\n                            <button\r\n                                key={cat.id}\r\n                                onClick={() => handleSetCategory(cat.id)}\r\n                                className=\"px-2 py-1.5 rounded text-xs transition-all\"\r\n                                style={{\r\n                                    background: currentInterp?.category === cat.id\r\n                                        ? 'rgba(251, 191, 36, 0.2)'\r\n                                        : 'rgba(255,255,255,0.05)',\r\n                                    color: currentInterp?.category === cat.id\r\n                                        ? 'rgba(251, 191, 36, 0.9)'\r\n                                        : 'rgba(255,255,255,0.5)',\r\n                                    border: `1px solid ${currentInterp?.category === cat.id ? 'rgba(251, 191, 36, 0.4)' : 'rgba(255,255,255,0.1)'}`,\r\n                                }}\r\n                            >\r\n                                {cat.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 3: Summary\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'summary') {\r\n        return (\r\n            <div className=\"flex flex-col items-center h-full px-6 py-4 overflow-y-auto\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-2\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Prism ΓÇö Summary\r\n                </p>\r\n\r\n                <h2\r\n                    className=\"text-lg mb-6 text-center\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.9)',\r\n                    }}\r\n                >\r\n                    Separation Complete\r\n                </h2>\r\n\r\n                {/* Stats */}\r\n                <div className=\"flex gap-8 mb-6\">\r\n                    <div className=\"text-center\">\r\n                        <div\r\n                            className=\"text-3xl mb-1\"\r\n                            style={{ color: 'rgba(34, 197, 94, 0.9)' }}\r\n                        >\r\n                            {supportedCount}\r\n                        </div>\r\n                        <div className=\"text-xs text-white/50\">Supported</div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                        <div\r\n                            className=\"text-3xl mb-1\"\r\n                            style={{ color: 'rgba(239, 68, 68, 0.9)' }}\r\n                        >\r\n                            {unsupportedCount}\r\n                        </div>\r\n                        <div className=\"text-xs text-white/50\">Unsupported</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Ratio bar */}\r\n                <div\r\n                    className=\"w-full max-w-sm h-2 rounded-full mb-2 overflow-hidden\"\r\n                    style={{ background: 'rgba(239, 68, 68, 0.3)' }}\r\n                >\r\n                    <div\r\n                        className=\"h-full rounded-full transition-all\"\r\n                        style={{\r\n                            width: `${supportedRatio}%`,\r\n                            background: 'rgba(34, 197, 94, 0.7)',\r\n                        }}\r\n                    />\r\n                </div>\r\n                <p className=\"text-xs text-white/50 mb-6\">\r\n                    {supportedRatio}% of interpretations were supported by evidence\r\n                </p>\r\n\r\n                {/* Interpretation breakdown */}\r\n                <div className=\"w-full max-w-sm space-y-2 mb-6 max-h-32 overflow-y-auto\">\r\n                    {interpretations.map((interp, idx) => (\r\n                        <div\r\n                            key={interp.id}\r\n                            className=\"flex items-center gap-2 text-xs\"\r\n                        >\r\n                            <span\r\n                                style={{\r\n                                    color: interp.isSupported\r\n                                        ? 'rgba(34, 197, 94, 0.8)'\r\n                                        : 'rgba(239, 68, 68, 0.8)',\r\n                                }}\r\n                            >\r\n                                {interp.isSupported ? 'Γ£ô' : 'Γ£ò'}\r\n                            </span>\r\n                            <span\r\n                                className=\"truncate\"\r\n                                style={{ color: 'rgba(255,255,255,0.6)' }}\r\n                            >\r\n                                \"{interp.text}\"\r\n                            </span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleLock}\r\n                    className=\"px-6 py-2 rounded border transition-all\"\r\n                    style={{\r\n                        borderColor: 'rgba(251, 191, 36, 0.7)',\r\n                        color: 'rgba(251, 191, 36, 1)',\r\n                        background: 'rgba(251, 191, 36, 0.15)',\r\n                    }}\r\n                >\r\n                    LOCK PRISM\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return null;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\ResonatorChambering.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\SwordCommitment.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\SwordCompression.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Application\\practices\\WaveRide.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  53 |             return () => clearInterval(timerRef.current);\n  54 |         } else if (timeRemaining === 0 && timerRunning) {\n> 55 |             setTimerRunning(false);\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  56 |             setPhase('complete');\n  57 |         }\n  58 |     }, [timerRunning, timeRemaining]);","line":55,"column":13,"nodeType":null,"endLine":55,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Application/practices/WaveRide.jsx\r\n// Wave Mode: Emotional Capacity - Ride the intensity without acting out\r\n// IE v1 Spec: Timer with emotion inventory, somatic scan, impulse tracking\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { useChainStore } from '../../../state/chainStore.js';\r\nimport { VoiceInput } from '../VoiceInput.jsx';\r\n\r\n// Common emotion labels (user can type custom)\r\nconst EMOTION_PRESETS = [\r\n    'Anxiety', 'Anger', 'Sadness', 'Fear', 'Shame',\r\n    'Frustration', 'Dread', 'Panic', 'Numbness', 'Overwhelm',\r\n    'Disgust', 'Guilt', 'Loneliness', 'Hopelessness', 'Jealousy',\r\n];\r\n\r\n// Somatic locations\r\nconst SOMATIC_LOCATIONS = [\r\n    'Head / Temples', 'Jaw / Tension', 'Throat / Constriction',\r\n    'Chest / Heart', 'Stomach / Gut', 'Shoulders / Upper back',\r\n    'Lower back', 'Hands / Arms', 'Legs / Feet', 'Whole body',\r\n];\r\n\r\nexport function WaveRide({ onComplete }) {\r\n    const {\r\n        activeChain,\r\n        updateWaveData,\r\n        addWaveEmotion,\r\n        addWaveImpulse,\r\n        lockWave,\r\n        abortWave,\r\n    } = useChainStore();\r\n\r\n    // Local UI state\r\n    const [phase, setPhase] = useState('inventory'); // inventory | somatic | impulse | ride | complete\r\n    const [customEmotion, setCustomEmotion] = useState('');\r\n    const [customImpulse, setCustomImpulse] = useState('');\r\n\r\n    // Timer state\r\n    const [timerRunning, setTimerRunning] = useState(false);\r\n    const [timeRemaining, setTimeRemaining] = useState(90);\r\n    const [startIntensity, setStartIntensity] = useState(null);\r\n    const [endIntensity, setEndIntensity] = useState(null);\r\n    const timerRef = useRef(null);\r\n\r\n    const waveData = activeChain?.wave || {};\r\n\r\n    // Timer effect\r\n    useEffect(() => {\r\n        if (timerRunning && timeRemaining > 0) {\r\n            timerRef.current = setInterval(() => {\r\n                setTimeRemaining(t => t - 1);\r\n            }, 1000);\r\n            return () => clearInterval(timerRef.current);\r\n        } else if (timeRemaining === 0 && timerRunning) {\r\n            setTimerRunning(false);\r\n            setPhase('complete');\r\n        }\r\n    }, [timerRunning, timeRemaining]);\r\n\r\n    // Handlers\r\n    const handleAddEmotion = (emotion) => {\r\n        if (emotion && !waveData.emotions?.includes(emotion)) {\r\n            addWaveEmotion(emotion);\r\n        }\r\n        setCustomEmotion('');\r\n    };\r\n\r\n    const handleAddImpulse = () => {\r\n        if (customImpulse.trim()) {\r\n            addWaveImpulse(customImpulse.trim());\r\n            setCustomImpulse('');\r\n        }\r\n    };\r\n\r\n    const handleStartRide = () => {\r\n        if (startIntensity === null) return;\r\n        updateWaveData('startIntensity', startIntensity);\r\n        setTimerRunning(true);\r\n        setPhase('ride');\r\n    };\r\n\r\n    const handleAbort = () => {\r\n        if (timerRef.current) clearInterval(timerRef.current);\r\n        setTimerRunning(false);\r\n        abortWave();\r\n        onComplete?.();\r\n    };\r\n\r\n    const handleComplete = () => {\r\n        try {\r\n            if (endIntensity !== null) {\r\n                updateWaveData('endIntensity', endIntensity);\r\n            }\r\n            lockWave();\r\n        } catch (err) {\r\n            console.error('Error locking wave:', err);\r\n        }\r\n        // Always call onComplete to progress\r\n        onComplete?.();\r\n    };\r\n\r\n    // Format time as M:SS\r\n    const formatTime = (seconds) => {\r\n        const m = Math.floor(seconds / 60);\r\n        const s = seconds % 60;\r\n        return `${m}:${s.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 1: Emotion Inventory\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'inventory') {\r\n        return (\r\n            <div className=\"flex flex-col items-center h-full px-6 py-8 overflow-y-auto\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-2\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Wave ΓÇö Step 1 of 4\r\n                </p>\r\n                <h2\r\n                    className=\"text-lg mb-6 text-center\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.9)',\r\n                    }}\r\n                >\r\n                    What emotions are present?\r\n                </h2>\r\n\r\n                {/* Selected emotions */}\r\n                <div className=\"flex flex-wrap gap-2 mb-4 justify-center\">\r\n                    {(waveData.emotions || []).map((em, i) => (\r\n                        <span\r\n                            key={i}\r\n                            className=\"px-3 py-1 rounded-full text-xs\"\r\n                            style={{\r\n                                background: 'rgba(167, 139, 250, 0.3)',\r\n                                color: 'rgba(255,255,255,0.9)',\r\n                                border: '1px solid rgba(167, 139, 250, 0.5)',\r\n                            }}\r\n                        >\r\n                            {em}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Preset grid */}\r\n                <div className=\"grid grid-cols-3 gap-2 mb-4 w-full max-w-sm\">\r\n                    {EMOTION_PRESETS.map((em) => (\r\n                        <button\r\n                            key={em}\r\n                            onClick={() => handleAddEmotion(em)}\r\n                            disabled={waveData.emotions?.includes(em)}\r\n                            className=\"px-2 py-1.5 rounded text-xs transition-all\"\r\n                            style={{\r\n                                background: waveData.emotions?.includes(em)\r\n                                    ? 'rgba(167, 139, 250, 0.2)'\r\n                                    : 'rgba(255,255,255,0.05)',\r\n                                color: waveData.emotions?.includes(em)\r\n                                    ? 'rgba(167, 139, 250, 0.6)'\r\n                                    : 'rgba(255,255,255,0.6)',\r\n                                border: '1px solid rgba(255,255,255,0.1)',\r\n                            }}\r\n                        >\r\n                            {em}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Custom input with voice */}\r\n                <div className=\"flex gap-2 mb-6 w-full max-w-sm\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={customEmotion}\r\n                        onChange={(e) => setCustomEmotion(e.target.value)}\r\n                        onKeyDown={(e) => e.key === 'Enter' && handleAddEmotion(customEmotion)}\r\n                        placeholder=\"Or type your own...\"\r\n                        className=\"flex-1 px-3 py-2 rounded bg-white/5 border border-white/10 text-white text-sm placeholder-white/30 focus:outline-none focus:border-purple-400/50\"\r\n                    />\r\n                    <VoiceInput onTranscription={(text) => setCustomEmotion(text)} />\r\n                    <button\r\n                        onClick={() => handleAddEmotion(customEmotion)}\r\n                        className=\"px-4 py-2 rounded bg-white/10 text-white/60 hover:text-white transition-all\"\r\n                    >\r\n                        Add\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Next */}\r\n                <button\r\n                    onClick={() => setPhase('somatic')}\r\n                    disabled={(waveData.emotions || []).length === 0}\r\n                    className=\"px-6 py-2 rounded border transition-all\"\r\n                    style={{\r\n                        borderColor: (waveData.emotions || []).length > 0 ? 'rgba(167, 139, 250, 0.5)' : 'rgba(255,255,255,0.2)',\r\n                        color: (waveData.emotions || []).length > 0 ? 'rgba(167, 139, 250, 0.9)' : 'rgba(255,255,255,0.4)',\r\n                        opacity: (waveData.emotions || []).length > 0 ? 1 : 0.5,\r\n                    }}\r\n                >\r\n                    NEXT\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 2: Somatic Scan\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'somatic') {\r\n        return (\r\n            <div className=\"flex flex-col items-center h-full px-6 py-8\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-2\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Wave ΓÇö Step 2 of 4\r\n                </p>\r\n                <h2\r\n                    className=\"text-lg mb-2 text-center\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.9)',\r\n                    }}\r\n                >\r\n                    Where do you feel it?\r\n                </h2>\r\n                <p\r\n                    className=\"text-xs mb-6 text-center\"\r\n                    style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                >\r\n                    Locate the sensation in your body.\r\n                </p>\r\n\r\n                {/* Location buttons */}\r\n                <div className=\"grid grid-cols-2 gap-2 mb-6 w-full max-w-sm\">\r\n                    {SOMATIC_LOCATIONS.map((loc) => (\r\n                        <button\r\n                            key={loc}\r\n                            onClick={() => updateWaveData('somaticLocation', loc)}\r\n                            className=\"px-3 py-2 rounded text-xs transition-all text-left\"\r\n                            style={{\r\n                                background: waveData.somaticLocation === loc\r\n                                    ? 'rgba(167, 139, 250, 0.3)'\r\n                                    : 'rgba(255,255,255,0.05)',\r\n                                color: waveData.somaticLocation === loc\r\n                                    ? 'rgba(255,255,255,0.95)'\r\n                                    : 'rgba(255,255,255,0.6)',\r\n                                border: `1px solid ${waveData.somaticLocation === loc ? 'rgba(167, 139, 250, 0.5)' : 'rgba(255,255,255,0.1)'}`,\r\n                            }}\r\n                        >\r\n                            {loc}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <div className=\"flex gap-4\">\r\n                    <button\r\n                        onClick={() => setPhase('inventory')}\r\n                        className=\"px-4 py-2 rounded border border-white/20 text-white/50 hover:text-white/70 transition-all text-xs\"\r\n                    >\r\n                        BACK\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setPhase('impulse')}\r\n                        disabled={!waveData.somaticLocation}\r\n                        className=\"px-6 py-2 rounded border transition-all\"\r\n                        style={{\r\n                            borderColor: waveData.somaticLocation ? 'rgba(167, 139, 250, 0.5)' : 'rgba(255,255,255,0.2)',\r\n                            color: waveData.somaticLocation ? 'rgba(167, 139, 250, 0.9)' : 'rgba(255,255,255,0.4)',\r\n                        }}\r\n                    >\r\n                        NEXT\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 3: Impulse Logging\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'impulse') {\r\n        return (\r\n            <div className=\"flex flex-col items-center h-full px-6 py-8\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-2\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Wave ΓÇö Step 3 of 4\r\n                </p>\r\n                <h2\r\n                    className=\"text-lg mb-2 text-center\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.9)',\r\n                    }}\r\n                >\r\n                    What do you want to do?\r\n                </h2>\r\n                <p\r\n                    className=\"text-xs mb-6 text-center max-w-xs\"\r\n                    style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                >\r\n                    Name the urge. You will not act on it during the timer.\r\n                </p>\r\n\r\n                {/* Logged impulses */}\r\n                <div className=\"w-full max-w-sm mb-4 space-y-2\">\r\n                    {(waveData.impulses || []).map((imp) => (\r\n                        <div\r\n                            key={imp.id}\r\n                            className=\"px-3 py-2 rounded text-sm\"\r\n                            style={{\r\n                                background: 'rgba(255,255,255,0.05)',\r\n                                border: '1px solid rgba(255,255,255,0.1)',\r\n                                color: 'rgba(255,255,255,0.8)',\r\n                            }}\r\n                        >\r\n                            \"{imp.text}\"\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Add impulse with voice */}\r\n                <div className=\"flex gap-2 mb-6 w-full max-w-sm\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={customImpulse}\r\n                        onChange={(e) => setCustomImpulse(e.target.value)}\r\n                        onKeyDown={(e) => e.key === 'Enter' && handleAddImpulse()}\r\n                        placeholder=\"E.g., Urge to send a text...\"\r\n                        className=\"flex-1 px-3 py-2 rounded bg-white/5 border border-white/10 text-white text-sm placeholder-white/30 focus:outline-none focus:border-purple-400/50\"\r\n                    />\r\n                    <VoiceInput onTranscription={(text) => setCustomImpulse(text)} />\r\n                    <button\r\n                        onClick={handleAddImpulse}\r\n                        className=\"px-4 py-2 rounded bg-white/10 text-white/60 hover:text-white transition-all\"\r\n                    >\r\n                        Add\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Intensity slider */}\r\n                <div className=\"w-full max-w-sm mb-6\">\r\n                    <p\r\n                        className=\"text-xs mb-2 text-center\"\r\n                        style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                    >\r\n                        Current intensity: {startIntensity !== null ? `${startIntensity}/10` : 'Set below'}\r\n                    </p>\r\n                    <input\r\n                        type=\"range\"\r\n                        min=\"1\"\r\n                        max=\"10\"\r\n                        value={startIntensity || 5}\r\n                        onChange={(e) => setStartIntensity(parseInt(e.target.value))}\r\n                        className=\"w-full\"\r\n                    />\r\n                    <div className=\"flex justify-between text-xs text-white/40 mt-1\">\r\n                        <span>1</span>\r\n                        <span>10</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <div className=\"flex gap-4\">\r\n                    <button\r\n                        onClick={() => setPhase('somatic')}\r\n                        className=\"px-4 py-2 rounded border border-white/20 text-white/50 hover:text-white/70 transition-all text-xs\"\r\n                    >\r\n                        BACK\r\n                    </button>\r\n                    <button\r\n                        onClick={handleStartRide}\r\n                        disabled={startIntensity === null}\r\n                        className=\"px-6 py-2 rounded border transition-all\"\r\n                        style={{\r\n                            borderColor: startIntensity !== null ? 'rgba(167, 139, 250, 0.5)' : 'rgba(255,255,255,0.2)',\r\n                            color: startIntensity !== null ? 'rgba(167, 139, 250, 0.9)' : 'rgba(255,255,255,0.4)',\r\n                        }}\r\n                    >\r\n                        START TIMER\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 4: Wave Ride (Timer)\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'ride') {\r\n        const progress = ((90 - timeRemaining) / 90) * 100;\r\n\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center h-full px-6\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-8\"\r\n                    style={{ color: 'rgba(255,255,255,0.4)' }}\r\n                >\r\n                    Observing\r\n                </p>\r\n\r\n                {/* Timer display */}\r\n                <div\r\n                    className=\"relative w-40 h-40 mb-8\"\r\n                    style={{\r\n                        background: `conic-gradient(rgba(167, 139, 250, 0.6) ${progress}%, rgba(255,255,255,0.1) ${progress}%)`,\r\n                        borderRadius: '50%',\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"absolute inset-2 rounded-full flex items-center justify-center\"\r\n                        style={{ background: 'rgba(10, 10, 18, 0.95)' }}\r\n                    >\r\n                        <span\r\n                            className=\"text-3xl\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-ui)\",\r\n                                fontWeight: 700,\r\n                                color: 'rgba(255,255,255,0.9)',\r\n                                letterSpacing: 'var(--tracking-wide)',\r\n                            }}\r\n                        >\r\n                            {formatTime(timeRemaining)}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Guidance */}\r\n                <p\r\n                    className=\"text-sm text-center mb-8 max-w-xs\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        fontStyle: 'italic',\r\n                        color: 'rgba(255,255,255,0.6)',\r\n                    }}\r\n                >\r\n                    Do not act. Just observe the sensation until the timer ends.\r\n                </p>\r\n\r\n                {/* Abort button */}\r\n                <button\r\n                    onClick={handleAbort}\r\n                    className=\"px-6 py-2 rounded border border-red-400/30 text-red-400/70 hover:text-red-300 hover:border-red-400/50 transition-all text-xs\"\r\n                >\r\n                    ABORT (Capacity Exceeded)\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // PHASE 5: Complete\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (phase === 'complete') {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center h-full px-6\">\r\n                <p\r\n                    className=\"text-xs uppercase tracking-[0.2em] mb-4\"\r\n                    style={{ color: 'rgba(167, 139, 250, 0.7)' }}\r\n                >\r\n                    Capacity Verified\r\n                </p>\r\n\r\n                <h2\r\n                    className=\"text-lg mb-6 text-center\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-body)\",\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        color: 'rgba(255,255,255,0.9)',\r\n                    }}\r\n                >\r\n                    You held it without discharge.\r\n                </h2>\r\n\r\n                {/* End intensity */}\r\n                <div className=\"w-full max-w-sm mb-6\">\r\n                    <p\r\n                        className=\"text-xs mb-2 text-center\"\r\n                        style={{ color: 'rgba(255,255,255,0.5)' }}\r\n                    >\r\n                        Current intensity: {endIntensity !== null ? `${endIntensity}/10` : 'Rate now'}\r\n                    </p>\r\n                    <input\r\n                        type=\"range\"\r\n                        min=\"1\"\r\n                        max=\"10\"\r\n                        value={endIntensity || startIntensity || 5}\r\n                        onChange={(e) => setEndIntensity(parseInt(e.target.value))}\r\n                        className=\"w-full\"\r\n                    />\r\n                    <div className=\"flex justify-between text-xs text-white/40 mt-1\">\r\n                        <span>1</span>\r\n                        <span>10</span>\r\n                    </div>\r\n                    {endIntensity !== null && startIntensity !== null && (\r\n                        <p\r\n                            className=\"text-xs text-center mt-2\"\r\n                            style={{ color: 'rgba(167, 139, 250, 0.7)' }}\r\n                        >\r\n                            Delta: {startIntensity - endIntensity > 0 ? '-' : '+'}{Math.abs(startIntensity - endIntensity)}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleComplete}\r\n                    className=\"px-6 py-2 rounded border border-purple-400/50 text-purple-300 hover:text-purple-200 transition-all\"\r\n                >\r\n                    LOCK WAVE\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return null;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\AvatarLuminousCanvas.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'weeklyConsistency' is assigned a value but never used.","line":532,"column":77,"nodeType":"Identifier","messageId":"unusedVar","endLine":532,"endColumn":94,"suggestions":[{"messageId":"removeVar","data":{"varName":"weeklyConsistency"},"fix":{"range":[17638,17661],"text":""},"desc":"Remove unused variable 'weeklyConsistency'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'particleColorHSL'. Either include it or remove the dependency array.","line":628,"column":6,"nodeType":"ArrayExpression","endLine":628,"endColumn":66,"suggestions":[{"desc":"Update the dependencies array to be: [particleColorHSL.h, particleColorHSL.s, particleColorHSL.l, particleColorHSL]","fix":{"range":[20747,20807],"text":"[particleColorHSL.h, particleColorHSL.s, particleColorHSL.l, particleColorHSL]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'particleColorHSL'. Either include it or remove the dependency array.","line":826,"column":6,"nodeType":"ArrayExpression","endLine":826,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [particleColorHSL]","fix":{"range":[27200,27202],"text":"[particleColorHSL]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/AvatarLuminousCanvas.jsx\r\n// RITUAL AESTHETIC: Dense Luminous Atmosphere\r\n// - Background: Noise texture, Nebula wisps, Distant stars\r\n// - Structure: Sacred geometry underlay\r\n// - Foreground: Seven Flames, Multi-lane particles, Ambient dust, Filaments\r\n\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { useTheme } from \"../context/ThemeContext.jsx\";\r\nimport { useDisplayModeStore } from \"../state/displayModeStore.js\";\r\n\r\n// CONFIGURATION\r\nconst CANVAS_SCALE = 3.0; // Increased to 300% to cover the whole screen/neighbor area\r\nconst VIRTUAL_RADIUS = 1000; // Deep space radius in virtual units\r\nconst VIRTUAL_SIZE = VIRTUAL_RADIUS * 2;\r\n\r\n// Geometry constants scaled to new 1000 radius (VIRTUAL_SIZE = 2000)\r\n// These maintain the same pixel size at center\r\nconst RUNE_RING_RADIUS_PCT = 0.103; // ~206 units\r\nconst INNER_BOUNDARY_PCT = 0.112;    // ~224 units\r\nconst MAX_RADIUS_PCT = 0.122;        // ~245 units\r\nconst FLAME_RADIUS_PCT = 0.126;      // ~252 units\r\n\r\nconst WEEK_NODES = [\r\n  { day: 'Mon', angle: -Math.PI * 0.5 },\r\n  { day: 'Tue', angle: -Math.PI * 0.214 },\r\n  { day: 'Wed', angle: Math.PI * 0.071 },\r\n  { day: 'Thu', angle: Math.PI * 0.357 },\r\n  { day: 'Fri', angle: Math.PI * 0.643 },\r\n  { day: 'Sat', angle: Math.PI * 0.929 },\r\n  { day: 'Sun', angle: -Math.PI * 0.786 },\r\n];\r\n\r\n// PARTICLE LANES - Golden Ratio (╧å Γëê 1.618) harmonics\r\n// Fibonacci sequence: 1, 1, 2, 3, 5, 8, 13, 21...\r\n// Trail lengths follow Fibonacci: 34, 55, 89, 144 (increased for visibility)\r\nconst PHI = 1.618033988749895; // Golden ratio\r\nconst PARTICLE_LANES = {\r\n  short: { count: 5, speedMod: 1.0, sizeMod: 0.9, trailLen: 68 },      // Doubled from 34\r\n  medium: { count: 3, speedMod: PHI * 0.5, sizeMod: 1.0, trailLen: 110 }, // Doubled from 55\r\n  long: { count: 2, speedMod: PHI * 0.4, sizeMod: 1.1, trailLen: 178 },   // Doubled from 89\r\n  vast: { count: 1, speedMod: PHI * 0.3, sizeMod: 1.2, trailLen: 288 },  // Doubled from 144\r\n};\r\n\r\n// UTILS\r\nfunction createNoiseTexture(width, height) {\r\n  // Safety guard: prevent DOMException for invalid dimensions\r\n  if (!width || !height || width <= 0 || height <= 0) return null;\r\n\r\n  const canvas = document.createElement('canvas');\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  const imageData = ctx.createImageData(width, height);\r\n  const data = imageData.data;\r\n\r\n  for (let i = 0; i < data.length; i += 4) {\r\n    const noise = Math.random() * 25;\r\n    data[i] = noise;     // R\r\n    data[i + 1] = noise * 0.9;  // G (warm)\r\n    data[i + 2] = noise * 0.7;  // B\r\n    data[i + 3] = 8;       // A (low opacity)\r\n  }\r\n  ctx.putImageData(imageData, 0, 0);\r\n  return canvas;\r\n}\r\n\r\nclass Particle {\r\n  constructor(maxRadius, innerBoundary, laneConfig, baseColor = { h: 42, s: 95, l: 63 }, isLight = false) {\r\n    this.maxRadius = maxRadius;\r\n    this.innerBoundary = innerBoundary;\r\n    this.laneConfig = laneConfig;\r\n    this.trailLength = laneConfig.trailLen; // Store lane-specific trail length\r\n    this.trail = [];\r\n    this.baseColor = baseColor; // Store base color from theme\r\n    this.color = { ...baseColor }; // Warm amber-gold or theme color\r\n    this.reset(isLight);\r\n  }\r\n\r\n  reset(isLight = false) {\r\n    // Spawn strictly outside inner boundary\r\n    const minSpawn = this.innerBoundary * 1.43; // Spread outwards 30% from 1.1\r\n    const range = this.innerBoundary * 0.52;    // Spread outwards 30% from 0.4\r\n    this.radius = minSpawn + Math.random() * range;\r\n\r\n    // Random starting angle\r\n    this.angle = Math.random() * Math.PI * 2;\r\n    this.startAngle = this.angle;\r\n\r\n    // VARY COLOR: Warm range based on base color\r\n    this.color = {\r\n      l: Math.max(50, Math.min(80, this.baseColor.l + (Math.random() - 0.5) * 20))  // ┬▒10 lightness\r\n    };\r\n\r\n    // LIGHT MODE REFINEMENTS: Verdigris palette for \"residue\" feel\r\n    this.verdigris = {\r\n      h: 172 + (Math.random() - 0.5) * 12,\r\n      s: 22 + (Math.random() - 0.5) * 8,\r\n      l: 62 + (Math.random() - 0.5) * 8\r\n    };\r\n\r\n    // Angular speed - responding to Light Mode for \"residue\" feel\r\n    const speedFactor = isLight ? 0.6 : 1.0; // Slow down to 60% in light mode (prev 45% was too static)\r\n    const baseAngular = 0.0015 * this.laneConfig.speedMod * speedFactor;\r\n    this.angularSpeed = baseAngular * (0.8 + Math.random() * 0.4);\r\n\r\n    // Spiral speed - also slowed in light mode\r\n    const baseSpiral = 0.05 * this.laneConfig.speedMod * speedFactor;\r\n    this.spiralSpeed = baseSpiral * (PHI / 2) * (0.8 + Math.random() * 0.4);\r\n\r\n    // Size variation\r\n    const baseSize = 5 * this.laneConfig.sizeMod;\r\n    this.size = baseSize * (1 + Math.random() * (PHI - 1)); // Range: baseSize to baseSize├ù╧å\r\n\r\n    // Brightness variation - increased for visibility\r\n    this.brightness = 0.8 + Math.random() * 0.2;\r\n\r\n    // Orbital eccentricity\r\n    this.eccentricity = 0.9 + Math.random() * 0.2;\r\n\r\n    // Orbital tilt\r\n    this.tilt = (Math.random() - 0.5) * 0.3;\r\n\r\n    // Lifecycle\r\n    this.life = 0;\r\n    this.fadeIn = true;\r\n    this.orbitsCompleted = 0;\r\n\r\n    this.trail = [];\r\n  }\r\n\r\n  update(deltaTime = 16, isLight = false) {\r\n    // Movement\r\n    this.angle += this.angularSpeed * (deltaTime / 16);\r\n\r\n    // Spiral inward\r\n    this.radius -= this.spiralSpeed * (deltaTime / 16);\r\n\r\n    // Track orbits\r\n    const angleChange = this.angularSpeed * (deltaTime / 16);\r\n    this.orbitsCompleted += angleChange / (Math.PI * 2);\r\n\r\n    // Lifecycle: fade in\r\n    if (this.fadeIn && this.life < 1) {\r\n      this.life = Math.min(1, this.life + (deltaTime / 16) * 0.005);\r\n      if (this.life >= 1) this.fadeIn = false;\r\n    }\r\n\r\n    // Fade out\r\n    if (this.orbitsCompleted > 30 || this.radius < this.innerBoundary) {\r\n      this.life -= (deltaTime / 16) * 0.002;\r\n    }\r\n\r\n    // Respawn\r\n    if (this.life <= 0) {\r\n      this.reset(isLight);\r\n      return;\r\n    }\r\n\r\n    // Position with eccentricity and tilt\r\n    const x = Math.cos(this.angle) * this.radius * this.eccentricity;\r\n    const y = Math.sin(this.angle) * this.radius * (1 + this.tilt);\r\n\r\n    // Update trail (using lane-specific length, not size-based)\r\n    this.trail.unshift({ x, y });\r\n    if (this.trail.length > this.trailLength) {\r\n      this.trail.pop();\r\n    }\r\n  }\r\n\r\n  draw(ctx, centerX, centerY, scaleMod, glowMod, isLight = false) {\r\n    if (this.trail.length < 2 || this.life <= 0) return;\r\n\r\n    ctx.save();\r\n    ctx.globalAlpha = this.life;\r\n\r\n    const lifeMod = this.life;\r\n\r\n    // Fallback validation for color HSL values\r\n    const safeH = typeof this.color?.h === 'number' && !isNaN(this.color.h) ? this.color.h : 42;\r\n    const safeS = typeof this.color?.s === 'number' && !isNaN(this.color.s) ? this.color.s : 95;\r\n    const safeL = typeof this.color?.l === 'number' && !isNaN(this.color.l) ? this.color.l : 63;\r\n\r\n    // Trail\r\n    for (let i = 0; i < this.trail.length - 1; i++) {\r\n      const p1 = this.trail[i];\r\n      const p2 = this.trail[i + 1];\r\n      const t = i / this.trail.length;\r\n\r\n      ctx.beginPath();\r\n      ctx.moveTo(centerX + p1.x * scaleMod, centerY + p1.y * scaleMod);\r\n      ctx.lineTo(centerX + p2.x * scaleMod, centerY + p2.y * scaleMod);\r\n\r\n      ctx.lineWidth = this.size * (1 - t * 0.9);\r\n      // Fainter alpha in light mode for \"dust/mote\" feel\r\n      const baseAlpha = isLight ? 0.35 : 0.9;\r\n      const alpha = this.brightness * baseAlpha * (1 - t * t) * glowMod * lifeMod;\r\n\r\n      let colorStr;\r\n      if (isLight) {\r\n        // Use stored verdigris color to avoid flickering\r\n        colorStr = `hsla(${this.verdigris.h}, ${this.verdigris.s}%, ${this.verdigris.l}%, ${alpha})`;\r\n      } else {\r\n        colorStr = `hsla(${this.color.h}, ${this.color.s}%, ${this.color.l}%, ${alpha})`;\r\n      }\r\n\r\n      ctx.strokeStyle = colorStr;\r\n      ctx.lineCap = \"round\";\r\n      ctx.stroke();\r\n    }\r\n\r\n    // Head\r\n    const head = this.trail[0];\r\n    const hx = centerX + head.x * scaleMod;\r\n    const hy = centerY + head.y * scaleMod;\r\n\r\n    // Halo - skip in light mode (causes gray circles)\r\n    if (!isLight) {\r\n      const halo = ctx.createRadialGradient(hx, hy, 0, hx, hy, this.size * 4 * scaleMod);\r\n      halo.addColorStop(0, `hsla(${safeH}, ${safeS}%, ${safeL}%, ${this.brightness * 0.5 * glowMod * lifeMod})`);\r\n      halo.addColorStop(1, 'transparent');\r\n      ctx.fillStyle = halo;\r\n      ctx.beginPath();\r\n      ctx.arc(hx, hy, this.size * 4 * scaleMod, 0, Math.PI * 2);\r\n      ctx.fill();\r\n    }\r\n\r\n    // Core\r\n    const core = ctx.createRadialGradient(hx, hy, 0, hx, hy, this.size * scaleMod);\r\n    core.addColorStop(0, `rgba(255, 255, 250, ${1 * glowMod * lifeMod})`);\r\n    core.addColorStop(0.4, `hsla(${safeH}, ${safeS}%, 85%, ${this.brightness * 0.9 * glowMod * lifeMod})`);\r\n    core.addColorStop(1, 'transparent');\r\n    ctx.fillStyle = core;\r\n    ctx.beginPath();\r\n    ctx.arc(hx, hy, this.size * scaleMod, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nclass Dust {\r\n  constructor(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n    this.x = Math.random() * this.width;\r\n    this.y = Math.random() * this.height;\r\n    this.size = 1 + Math.random() * 1.5;\r\n    this.opacity = 0.08 + Math.random() * 0.1;\r\n    this.vx = (Math.random() - 0.5) * 0.1;\r\n    this.vy = (Math.random() - 0.5) * 0.1;\r\n  }\r\n\r\n  update() {\r\n    this.x += this.vx;\r\n    this.y += this.vy;\r\n\r\n    if (this.x < 0) this.x = this.width;\r\n    if (this.x > this.width) this.x = 0;\r\n    if (this.y < 0) this.y = this.height;\r\n    if (this.y > this.height) this.y = 0;\r\n  }\r\n\r\n  draw(ctx) {\r\n    ctx.fillStyle = `rgba(253, 224, 71, ${this.opacity})`;\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  }\r\n}\r\n\r\n// DRAWING HELPERS (Using 0,0 as center)\r\n\r\nfunction drawNebulaWisps(ctx, time) {\r\n  const wisps = [\r\n    { angle: time * 0.0001, dist: 120, size: 150, opacity: 0.15 },\r\n    { angle: time * 0.00015 + 2, dist: 150, size: 180, opacity: 0.12 },\r\n    { angle: time * 0.00008 + 4, dist: 100, size: 120, opacity: 0.18 },\r\n  ];\r\n\r\n  wisps.forEach(wisp => {\r\n    const x = Math.cos(wisp.angle) * wisp.dist;\r\n    const y = Math.sin(wisp.angle) * wisp.dist;\r\n\r\n    const gradient = ctx.createRadialGradient(x, y, 0, x, y, wisp.size);\r\n    gradient.addColorStop(0, `rgba(180, 140, 80, ${wisp.opacity})`);\r\n    gradient.addColorStop(1, 'transparent');\r\n\r\n    ctx.fillStyle = gradient;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, wisp.size, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  });\r\n}\r\n\r\nfunction drawSacredGeometry(ctx, radius) {\r\n  // Sacred geometry at 100% opacity (maximum visibility)\r\n  ctx.strokeStyle = 'rgba(253, 224, 71, 1.0)';\r\n  ctx.lineWidth = 2;\r\n\r\n  // Concentric circles\r\n  for (let r = 40; r < radius; r += 40) {\r\n    ctx.beginPath();\r\n    ctx.arc(0, 0, r, 0, Math.PI * 2);\r\n    ctx.stroke();\r\n  }\r\n\r\n  // Radial lines\r\n  ctx.lineWidth = 1.5;\r\n  for (let angle = 0; angle < Math.PI * 2; angle += Math.PI / 6) {\r\n    ctx.beginPath();\r\n    ctx.moveTo(Math.cos(angle) * 60, Math.sin(angle) * 60);\r\n    ctx.lineTo(Math.cos(angle) * radius, Math.sin(angle) * radius);\r\n    ctx.stroke();\r\n  }\r\n}\r\n\r\nfunction drawUnifyingGlow(ctx) {\r\n  // REFINED GLOW: Multi-layered bloom with lighter blend mode\r\n  // Core-focused with tight falloff for elegant luminosity\r\n\r\n  ctx.save();\r\n  ctx.globalCompositeOperation = 'lighter'; // Additive blending for true glow\r\n\r\n  // Layer 1: Innermost core halo - very tight, warm white\r\n  const core = ctx.createRadialGradient(0, 0, 60, 0, 0, 160);\r\n  core.addColorStop(0, 'rgba(255, 250, 240, 0.19)');\r\n  core.addColorStop(0.5, 'rgba(253, 224, 71, 0.15)');\r\n  core.addColorStop(1, 'transparent');\r\n  ctx.fillStyle = core;\r\n  ctx.beginPath();\r\n  ctx.arc(0, 0, 160, 0, Math.PI * 2);\r\n  ctx.fill();\r\n\r\n  // Layer 2: Mid bloom - starts at rune ring edge\r\n  const mid = ctx.createRadialGradient(0, 0, 140, 0, 0, 320);\r\n  mid.addColorStop(0, 'rgba(253, 224, 71, 0.13)');\r\n  mid.addColorStop(0.6, 'rgba(220, 180, 60, 0.10)');\r\n  mid.addColorStop(1, 'transparent');\r\n  ctx.fillStyle = mid;\r\n  ctx.beginPath();\r\n  ctx.arc(0, 0, 320, 0, Math.PI * 2);\r\n  ctx.fill();\r\n\r\n  // Layer 3: Outer atmospheric bloom - soft but visible\r\n  const outer = ctx.createRadialGradient(0, 0, 180, 0, 0, 600);\r\n  outer.addColorStop(0, 'rgba(200, 160, 80, 0.08)');\r\n  outer.addColorStop(0.5, 'rgba(180, 140, 60, 0.06)');\r\n  outer.addColorStop(1, 'transparent');\r\n  ctx.fillStyle = outer;\r\n  ctx.beginPath();\r\n  ctx.arc(0, 0, 600, 0, Math.PI * 2);\r\n  ctx.fill();\r\n\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawAtmosphericHaze(ctx, time) {\r\n  const hazePoints = [\r\n    { angle: time * 0.00008, dist: 390, size: 195 },\r\n    { angle: time * 0.00012 + 2, dist: 420, size: 180 },\r\n    { angle: time * 0.0001 + 4, dist: 370, size: 210 },\r\n    { angle: time * 0.00009 + 1, dist: 350, size: 190 },\r\n  ];\r\n\r\n  hazePoints.forEach(h => {\r\n    const x = Math.cos(h.angle) * h.dist;\r\n    const y = Math.sin(h.angle) * h.dist;\r\n\r\n    const gradient = ctx.createRadialGradient(x, y, 0, x, y, h.size);\r\n    gradient.addColorStop(0, 'rgba(180, 140, 60, 0.15)');\r\n    gradient.addColorStop(1, 'transparent');\r\n\r\n    ctx.fillStyle = gradient;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, h.size, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  });\r\n}\r\n\r\nfunction drawLightRays(ctx, innerRadius, outerRadius) {\r\n  const rayCount = 24;\r\n\r\n  ctx.save();\r\n\r\n  for (let i = 0; i < rayCount; i++) {\r\n    const angle = (i / rayCount) * Math.PI * 2;\r\n    // REDUCED INTENSITY: from 0.03/0.02 to 0.015/0.01\r\n    const intensity = 0.015 + Math.sin(i * 1.5) * 0.01;\r\n\r\n    const innerX = Math.cos(angle) * innerRadius;\r\n    const innerY = Math.sin(angle) * innerRadius;\r\n    const outerX = Math.cos(angle) * outerRadius;\r\n    const outerY = Math.sin(angle) * outerRadius;\r\n\r\n    const gradient = ctx.createLinearGradient(innerX, innerY, outerX, outerY);\r\n    gradient.addColorStop(0, `rgba(253, 224, 71, ${intensity})`);\r\n    gradient.addColorStop(1, 'transparent');\r\n\r\n    ctx.strokeStyle = gradient;\r\n    ctx.lineWidth = 2;\r\n    ctx.beginPath();\r\n    ctx.moveTo(innerX, innerY);\r\n    ctx.lineTo(outerX, outerY);\r\n    ctx.stroke();\r\n  }\r\n\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawFilaments(ctx, nodes, innerRadius) {\r\n  nodes.forEach(node => {\r\n    if (!node.practiced) return;\r\n\r\n    const flameRadius = innerRadius;\r\n    const startX = Math.cos(node.angle) * flameRadius;\r\n    const startY = Math.sin(node.angle) * flameRadius;\r\n\r\n    const endDist = flameRadius * 0.6;\r\n    const endX = Math.cos(node.angle) * endDist;\r\n    const endY = Math.sin(node.angle) * endDist;\r\n\r\n    const gradient = ctx.createLinearGradient(startX, startY, endX, endY);\r\n    gradient.addColorStop(0, 'rgba(253, 224, 71, 0.15)');\r\n    gradient.addColorStop(1, 'rgba(253, 224, 71, 0.0)');\r\n\r\n    ctx.strokeStyle = gradient;\r\n    ctx.lineWidth = 1;\r\n    ctx.beginPath();\r\n    ctx.moveTo(startX, startY);\r\n\r\n    const cpX = (startX + endX) / 2 + (Math.random() - 0.5) * 10;\r\n    const cpY = (startY + endY) / 2 + (Math.random() - 0.5) * 10;\r\n    ctx.quadraticCurveTo(cpX, cpY, endX, endY);\r\n\r\n    ctx.stroke();\r\n  });\r\n}\r\n\r\nfunction drawHexagram(ctx, x, y, size, opacity) {\r\n  ctx.save();\r\n  ctx.translate(x, y);\r\n  ctx.strokeStyle = `rgba(253, 224, 71, ${opacity})`;\r\n  ctx.lineWidth = 1.5;\r\n\r\n  // Triangle 1\r\n  ctx.beginPath();\r\n  for (let i = 0; i < 3; i++) {\r\n    const angle = -Math.PI / 2 + (i * Math.PI * 2 / 3);\r\n    const px = Math.cos(angle) * size;\r\n    const py = Math.sin(angle) * size;\r\n    if (i === 0) ctx.moveTo(px, py);\r\n    else ctx.lineTo(px, py);\r\n  }\r\n  ctx.closePath();\r\n  ctx.stroke();\r\n\r\n  // Triangle 2\r\n  ctx.beginPath();\r\n  for (let i = 0; i < 3; i++) {\r\n    const angle = Math.PI / 2 + (i * Math.PI * 2 / 3);\r\n    const px = Math.cos(angle) * size;\r\n    const py = Math.sin(angle) * size;\r\n    if (i === 0) ctx.moveTo(px, py);\r\n    else ctx.lineTo(px, py);\r\n  }\r\n  ctx.closePath();\r\n  ctx.stroke();\r\n\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawWeekNode(ctx, x, y, practiced, isToday) {\r\n  const intensity = practiced ? 1 : 0.15;\r\n  const time = Date.now() / 1000;\r\n  const pulseScale = isToday && !practiced\r\n    ? 1 + Math.sin(time * 3) * 0.1\r\n    : practiced\r\n      ? 1 + Math.sin(time * 1.5) * 0.05\r\n      : 1;\r\n\r\n  if (practiced) {\r\n    const halo = ctx.createRadialGradient(x, y, 0, x, y, 40 * pulseScale);\r\n    halo.addColorStop(0, `rgba(253, 224, 71, ${0.15 * intensity})`);\r\n    halo.addColorStop(1, 'transparent');\r\n    ctx.fillStyle = halo;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, 40 * pulseScale, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  }\r\n\r\n  const glow = ctx.createRadialGradient(x, y, 0, x, y, 20 * pulseScale);\r\n  glow.addColorStop(0, `rgba(253, 224, 71, ${0.4 * intensity})`);\r\n  glow.addColorStop(1, 'transparent');\r\n  ctx.fillStyle = glow;\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, 20 * pulseScale, 0, Math.PI * 2);\r\n  ctx.fill();\r\n\r\n  drawHexagram(ctx, x, y, 6 * pulseScale, intensity * 0.9);\r\n\r\n  if (practiced) {\r\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, 1.5, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  }\r\n}\r\n\r\nfunction drawStreakArc(ctx, nodes, radius) {\r\n  ctx.strokeStyle = 'rgba(253, 224, 71, 0.25)';\r\n  ctx.lineWidth = 2;\r\n  ctx.lineCap = \"round\";\r\n\r\n  for (let i = 0; i < nodes.length; i++) {\r\n    const current = nodes[i];\r\n    const nextIndex = (i + 1) % nodes.length;\r\n    const next = nodes[nextIndex];\r\n\r\n    if (current.practiced && next.practiced) {\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, radius, current.angle, next.angle, false);\r\n      ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\n// MAIN COMPONENT\r\nexport function AvatarLuminousCanvas({ breathState, weeklyPracticeLog = [], weeklyConsistency = 0 }) {\r\n  const canvasRef = useRef(null);\r\n  const animationRef = useRef(null);\r\n  const particlesRef = useRef([]);\r\n  const dustRef = useRef([]);\r\n  const noiseCanvasRef = useRef(null);\r\n  const breathStateRef = useRef(breathState);\r\n  const weeklyPracticeLogRef = useRef(weeklyPracticeLog);\r\n\r\n  // Light mode check\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n  const isLightRef = useRef(isLight);\r\n\r\n  // Interaction State\r\n  const ritualHoverRef = useRef(null);\r\n  const hoverIntensityRef = useRef(0);\r\n\r\n  const theme = useTheme();\r\n\r\n  // Default gold HSL for all stages except Flame\r\n  const defaultGoldHSL = { h: 42, s: 95, l: 63 };\r\n\r\n  // Only use particleColor for Flame stage (when it's explicitly defined)\r\n  // Otherwise use default gold for all other stages\r\n  const particleColorHSL = theme.accent.particleColor\r\n    ? (() => {\r\n      // Convert hex to HSL for Flame stage only\r\n      const hex = theme.accent.particleColor.replace('#', '');\r\n      const r = parseInt(hex.substr(0, 2), 16) / 255;\r\n      const g = parseInt(hex.substr(2, 2), 16) / 255;\r\n      const b = parseInt(hex.substr(4, 2), 16) / 255;\r\n\r\n      const max = Math.max(r, g, b);\r\n      const min = Math.min(r, g, b);\r\n      let h, s, l = (max + min) / 2;\r\n\r\n      if (max === min) {\r\n        h = s = 0;\r\n      } else {\r\n        const d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n          case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;\r\n          case g: h = ((b - r) / d + 2) / 6; break;\r\n          case b: h = ((r - g) / d + 4) / 6; break;\r\n        }\r\n      }\r\n\r\n      return {\r\n        h: Math.round(h * 360),\r\n        s: Math.round(s * 100),\r\n        l: Math.round(l * 100)\r\n      };\r\n    })()\r\n    : defaultGoldHSL;\r\n\r\n  useEffect(() => {\r\n    breathStateRef.current = breathState;\r\n  }, [breathState]);\r\n\r\n  useEffect(() => {\r\n    weeklyPracticeLogRef.current = weeklyPracticeLog;\r\n  }, [weeklyPracticeLog]);\r\n\r\n  useEffect(() => {\r\n    isLightRef.current = isLight;\r\n  }, [isLight]);\r\n\r\n  // Setup Interaction Listeners\r\n  useEffect(() => {\r\n    const handleRitualHover = (e) => {\r\n      ritualHoverRef.current = e.detail?.id || 'hover';\r\n    };\r\n    const handleRitualLeave = () => {\r\n      ritualHoverRef.current = null;\r\n    };\r\n\r\n    window.addEventListener('ritual:hover', handleRitualHover);\r\n    window.addEventListener('ritual:leave', handleRitualLeave);\r\n\r\n    return () => {\r\n      window.removeEventListener('ritual:hover', handleRitualHover);\r\n      window.removeEventListener('ritual:leave', handleRitualLeave);\r\n    };\r\n  }, []);\r\n\r\n  // Update particle colors when theme/stage changes\r\n  useEffect(() => {\r\n    if (particlesRef.current.length > 0) {\r\n      particlesRef.current.forEach(particle => {\r\n        particle.baseColor = particleColorHSL;\r\n        // Reset color with new baseColor on next reset, but don't force reset now\r\n        // This ensures smooth transition - particles will update on their natural lifecycle\r\n      });\r\n    }\r\n  }, [particleColorHSL.h, particleColorHSL.s, particleColorHSL.l]);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) return;\r\n\r\n    let width = 0;\r\n    let height = 0;\r\n    let dpr = window.devicePixelRatio || 1;\r\n\r\n    function resize() {\r\n      const rect = canvas.getBoundingClientRect();\r\n      width = rect.width;\r\n      height = rect.height;\r\n\r\n      // Safety guard: skip if dimensions are invalid (0 or negative)\r\n      if (width <= 0 || height <= 0) return;\r\n\r\n      dpr = window.devicePixelRatio || 1;\r\n\r\n      canvas.width = width * dpr;\r\n      canvas.height = height * dpr;\r\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\r\n\r\n      // Init Noise\r\n      noiseCanvasRef.current = createNoiseTexture(width, height);\r\n\r\n      // Init Particles (using VIRTUAL_SIZE)\r\n      if (particlesRef.current.length === 0) {\r\n        const maxRadius = VIRTUAL_SIZE * MAX_RADIUS_PCT;\r\n        const innerBoundary = VIRTUAL_SIZE * INNER_BOUNDARY_PCT;\r\n\r\n        Object.values(PARTICLE_LANES).forEach(config => {\r\n          for (let i = 0; i < config.count; i++) {\r\n            particlesRef.current.push(new Particle(maxRadius, innerBoundary, config, particleColorHSL, isLightRef.current));\r\n          }\r\n        });\r\n      }\r\n\r\n      // Init Dust (using Screen Size)\r\n      dustRef.current = Array.from({ length: 40 }, () => new Dust(width, height));\r\n    }\r\n\r\n    resize();\r\n    window.addEventListener(\"resize\", resize);\r\n\r\n    function drawFrame() {\r\n      const centerX = width / 2;\r\n      const centerY = height / 2;\r\n\r\n      // Calculate scale to fit Virtual World into Canvas\r\n      const scale = (Math.min(width, height) / 2) / VIRTUAL_RADIUS;\r\n\r\n      // Virtual dimensions\r\n      const flameRadius = VIRTUAL_SIZE * FLAME_RADIUS_PCT;\r\n      const runeRingRadius = VIRTUAL_SIZE * RUNE_RING_RADIUS_PCT;\r\n\r\n      const time = Date.now();\r\n\r\n      // Breath mods\r\n      const bs = breathStateRef.current || { phase: 'rest', progress: 0, isPracticing: false };\r\n      let scaleMod = 1.0;\r\n      let glowMod = 1.0;\r\n\r\n      if (bs.isPracticing) {\r\n        if (bs.phase === 'inhale') {\r\n          scaleMod = 1.0 + (bs.progress * 0.05);\r\n          glowMod = 1.0 + (bs.progress * 0.3);\r\n        } else if (bs.phase === 'holdTop') {\r\n          scaleMod = 1.05;\r\n          glowMod = 1.3;\r\n        } else if (bs.phase === 'exhale') {\r\n          scaleMod = 1.05 - (bs.progress * 0.05);\r\n          glowMod = 1.3 - (bs.progress * 0.3);\r\n        } else if (bs.phase === 'holdBottom') {\r\n          scaleMod = 1.0;\r\n          glowMod = 1.0;\r\n        }\r\n      }\r\n\r\n      // INTELLIGENT RITUAL RESPONSE\r\n      // Lerp intensity based on hover state\r\n      const targetIntensity = ritualHoverRef.current ? 1 : 0;\r\n      hoverIntensityRef.current += (targetIntensity - hoverIntensityRef.current) * 0.08;\r\n\r\n      if (hoverIntensityRef.current > 0.01) {\r\n        scaleMod += hoverIntensityRef.current * 0.12; // Slight expansion\r\n        glowMod += hoverIntensityRef.current * 0.6;   // Significant brightness\r\n      }\r\n\r\n      // 1. Clear & Background\r\n      ctx.clearRect(0, 0, width, height);\r\n\r\n      // Noise Overlay (Screen Space) - only in dark mode\r\n      if (noiseCanvasRef.current && !isLightRef.current) {\r\n        ctx.drawImage(noiseCanvasRef.current, 0, 0, width, height);\r\n      }\r\n\r\n      // --- START VIRTUAL WORLD TRANSFORM ---\r\n      ctx.save();\r\n      ctx.translate(centerX, centerY);\r\n      ctx.scale(scale, scale);\r\n\r\n      // Skip heavy visual effects in light mode (they create visible gray circles)\r\n      const skipHeavyFx = isLightRef.current;\r\n\r\n      // Nebula & Stars (skip in light mode)\r\n      if (!skipHeavyFx) {\r\n        drawNebulaWisps(ctx, time);\r\n      }\r\n\r\n      // Sacred Geometry - Always visible (restored per user request)\r\n      drawSacredGeometry(ctx, flameRadius * 1.2);\r\n\r\n      // INTEGRATION LAYER 1: Refined multi-layered bloom glow (skip in light mode)\r\n      if (!skipHeavyFx) {\r\n        drawUnifyingGlow(ctx);\r\n      }\r\n\r\n      // INTEGRATION LAYER 2: Light rays (skip in light mode)\r\n      if (!skipHeavyFx) {\r\n        drawLightRays(ctx, 110, 800);\r\n      }\r\n\r\n      // INTEGRATION LAYER 3: Atmospheric haze (skip in light mode)\r\n      if (!skipHeavyFx) {\r\n        drawAtmosphericHaze(ctx, time);\r\n      }\r\n\r\n      // Decorative dashed ring - skip in light mode\r\n      if (!skipHeavyFx) {\r\n        ctx.save();\r\n        ctx.shadowColor = 'rgba(253, 224, 71, 0.15)';\r\n        ctx.shadowBlur = 8;\r\n        ctx.setLineDash([8, 12]);\r\n        ctx.strokeStyle = 'rgba(253, 224, 71, 0.10)';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        ctx.arc(0, 0, runeRingRadius * 1.15, 0, Math.PI * 2);\r\n        ctx.stroke();\r\n        ctx.setLineDash([]);\r\n        ctx.restore();\r\n      }\r\n\r\n      // 2. Week Nodes & Filaments\r\n      const currentDayIndex = new Date().getDay();\r\n      const jsDayToMyIndex = [6, 0, 1, 2, 3, 4, 5];\r\n      const todayIndex = jsDayToMyIndex[currentDayIndex];\r\n\r\n      const nodes = WEEK_NODES.map((node, i) => ({\r\n        ...node,\r\n        practiced: weeklyPracticeLogRef.current[i] || false,\r\n        isToday: i === todayIndex\r\n      }));\r\n\r\n      drawFilaments(ctx, nodes, flameRadius);\r\n      drawStreakArc(ctx, nodes, flameRadius);\r\n\r\n      nodes.forEach(node => {\r\n        const x = Math.cos(node.angle) * flameRadius;\r\n        const y = Math.sin(node.angle) * flameRadius;\r\n        drawWeekNode(ctx, x, y, node.practiced, node.isToday);\r\n      });\r\n\r\n      // 3. Particles - skip in light mode\r\n      if (!skipHeavyFx) {\r\n        particlesRef.current.forEach((particle) => {\r\n          particle.update(16, isLightRef.current);\r\n          // Pass 0,0 as center because we are already translated\r\n          particle.draw(ctx, 0, 0, scaleMod, glowMod, isLightRef.current);\r\n        });\r\n      }\r\n\r\n      ctx.restore();\r\n      // --- END VIRTUAL WORLD TRANSFORM ---\r\n\r\n      // 4. Ambient Dust (Screen Space) - skip in light mode\r\n      if (!skipHeavyFx) {\r\n        dustRef.current.forEach(dust => {\r\n          dust.update();\r\n          dust.draw(ctx);\r\n        });\r\n      }\r\n\r\n      animationRef.current = requestAnimationFrame(drawFrame);\r\n    }\r\n\r\n    animationRef.current = requestAnimationFrame(drawFrame);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", resize);\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      className=\"absolute w-[300%] h-[300%] -left-[100%] -top-[100%] pointer-events-none\"\r\n      style={{ zIndex: 1 }}\r\n    />\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\AvatarPreview.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":8,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":8,"endColumn":20},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":9,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":9,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/AvatarPreview.jsx\r\n// Debug panel to preview all 30 Stage ├ù Path avatar combinations\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { IconStyleToggle } from '../icons/Icon.jsx';\r\nimport { STAGE_COLORS } from '../constants/stageColors.js';\r\n\r\nexport const STAGES = ['Seedling', 'Ember', 'Flame', 'Beacon', 'Stellar'];\r\nexport const PATHS = ['Soma', 'Prana', 'Dhyana', 'Drishti', 'Jnana', 'Samyoga'];\r\n\r\n\r\n\r\nexport function AvatarPreview({\r\n    onClose,\r\n    stage,\r\n    path,\r\n    showCore,\r\n    onStageChange,\r\n    onPathChange,\r\n    onShowCoreChange\r\n}) {\r\n    const stageColor = STAGE_COLORS[stage.toLowerCase()]?.simple || '#fff';\r\n\r\n    // File path: /avatars/Stage-Path.png or /avatars/stage-core.png\r\n    const imagePath = showCore\r\n        ? `${import.meta.env.BASE_URL}avatars/${stage.toLowerCase()}-core.png`\r\n        : `${import.meta.env.BASE_URL}avatars/${stage}-${path}.png`;\r\n\r\n    const stageIndex = STAGES.indexOf(stage);\r\n    const pathIndex = PATHS.indexOf(path);\r\n\r\n    const handlePrevStage = () => onStageChange(STAGES[(stageIndex - 1 + STAGES.length) % STAGES.length]);\r\n    const handleNextStage = () => onStageChange(STAGES[(stageIndex + 1) % STAGES.length]);\r\n    const handlePrevPath = () => onPathChange(PATHS[(pathIndex - 1 + PATHS.length) % PATHS.length]);\r\n    const handleNextPath = () => onPathChange(PATHS[(pathIndex + 1) % PATHS.length]);\r\n\r\n    // Keyboard navigation\r\n    useEffect(() => {\r\n        const handleKeyDown = (e) => {\r\n            if (e.key === 'ArrowLeft') handlePrevStage();\r\n            else if (e.key === 'ArrowRight') handleNextStage();\r\n            else if (e.key === 'ArrowUp') { e.preventDefault(); handlePrevPath(); }\r\n            else if (e.key === 'ArrowDown') { e.preventDefault(); handleNextPath(); }\r\n            else if (e.key === 'c' || e.key === 'C') onShowCoreChange(!showCore);\r\n            else if (e.key === 'Escape') onClose();\r\n        };\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    });\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[200] bg-black/95 flex flex-col items-center justify-center p-4\">\r\n            {/* Close button */}\r\n            <button\r\n                onClick={onClose}\r\n                className=\"absolute top-4 right-4 text-white/60 hover:text-white text-2xl w-10 h-10 flex items-center justify-center\"\r\n            >\r\n                Γ£ò\r\n            </button>\r\n\r\n            {/* Title */}\r\n            <div className=\"text-center mb-6\">\r\n                <h2\r\n                    className=\"text-2xl font-medium tracking-wide\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        color: stageColor\r\n                    }}\r\n                >\r\n                    {stage} ┬╖ {showCore ? 'Core' : path}\r\n                </h2>\r\n                <p className=\"text-sm text-white/50 mt-1\">\r\n                    {stageIndex * (PATHS.length + 1) + (showCore ? 0 : pathIndex + 1) + 1} of {STAGES.length * (PATHS.length + 1)}\r\n                </p>\r\n                <p className=\"text-xs text-white/30 mt-1 font-mono\">{imagePath}</p>\r\n            </div>\r\n\r\n            {/* Avatar Preview */}\r\n            <div\r\n                className=\"relative w-80 h-80 rounded-full flex items-center justify-center\"\r\n                style={{\r\n                    background: `radial-gradient(circle, ${stageColor}20 0%, transparent 70%)`,\r\n                    boxShadow: `0 0 60px ${stageColor}30`,\r\n                }}\r\n            >\r\n                <img\r\n                    src={imagePath}\r\n                    alt={`${stage} ${path}`}\r\n                    className=\"w-64 h-64 object-cover rounded-full\"\r\n                    style={{\r\n                        mixBlendMode: 'screen',\r\n                        filter: 'brightness(1.1)',\r\n                    }}\r\n                    onError={(e) => {\r\n                        e.target.style.opacity = 0.3;\r\n                        e.target.alt = 'Missing image';\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div className=\"mt-8 flex flex-col gap-4 items-center\">\r\n                {/* Stage controls */}\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button\r\n                        onClick={handlePrevStage}\r\n                        className=\"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition\"\r\n                    >\r\n                        ΓåÉ Stage\r\n                    </button>\r\n                    <span className=\"text-white/70 w-24 text-center\">{stage}</span>\r\n                    <button\r\n                        onClick={handleNextStage}\r\n                        className=\"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition\"\r\n                    >\r\n                        Stage ΓåÆ\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Path controls */}\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button\r\n                        onClick={handlePrevPath}\r\n                        className=\"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition\"\r\n                        disabled={showCore}\r\n                        style={{ opacity: showCore ? 0.3 : 1 }}\r\n                    >\r\n                        ΓåÉ Path\r\n                    </button>\r\n                    <span className=\"text-white/70 w-24 text-center\">{showCore ? 'Core' : path}</span>\r\n                    <button\r\n                        onClick={handleNextPath}\r\n                        className=\"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition\"\r\n                        disabled={showCore}\r\n                        style={{ opacity: showCore ? 0.3 : 1 }}\r\n                    >\r\n                        Path ΓåÆ\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Core toggle */}\r\n                <button\r\n                    onClick={() => onShowCoreChange(!showCore)}\r\n                    className={`px-6 py-2 rounded-lg transition ${showCore ? 'bg-amber-600 text-white' : 'bg-white/10 text-white/70 hover:bg-white/20'\r\n                        }`}\r\n                >\r\n                    {showCore ? 'Showing Core' : 'Show Core Only'}\r\n                </button>\r\n\r\n                {/* Icon style toggle */}\r\n                <div className=\"mt-4 p-3 bg-white/5 rounded-lg\">\r\n                    <IconStyleToggle />\r\n                </div>\r\n\r\n                {/* Info */}\r\n                <p className=\"text-xs text-white/30 mt-4\">\r\n                    Arrow keys: ΓåÉ ΓåÆ Stage | Γåæ Γåô Path | C = Toggle Core | Esc = Close\r\n                </p>\r\n                <p className=\"text-xs text-amber-400/60 mt-1\">\r\n                    Selection applies to all avatars in the app\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Background.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\BodyScanVisual.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getPointById' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"getPointById"},"fix":{"range":[70,83],"text":""},"desc":"Remove unused variable 'getPointById'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getBodyScanPrompt' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"getBodyScanPrompt"},"fix":{"range":[82,101],"text":""},"desc":"Remove unused variable 'getBodyScanPrompt'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'useSettingsStore' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"useSettingsStore"},"fix":{"range":[137,195],"text":""},"desc":"Remove unused variable 'useSettingsStore'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[206,213],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  15 |             // Use provided point ID (dev mode)\n  16 |             const point = scanPoints.find(p => p.id === activePointId) || scanPoints[0];\n> 17 |             if (point) setActivePoint(point);\n     |                        ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  18 |         } else {\n  19 |             // Use time-based selection (normal mode)\n  20 |             let activePrompt = scanPrompts[0];","line":17,"column":24,"nodeType":null,"endLine":17,"endColumn":38},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  91 |             return () => cancelAnimationFrame(animId);\n  92 |         } else {\n> 93 |             setSushumnaPos(null);\n     |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  94 |         }\n  95 |     }, [activePoint, scanPoints]);\n  96 |","line":93,"column":13,"nodeType":null,"endLine":93,"endColumn":27}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { getPointById, getBodyScanPrompt } from '../data/bodyScanPrompts';\r\nimport { useSettingsStore } from '../state/settingsStore';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { CoordinateHelper } from './dev/CoordinateHelper';\r\nexport function BodyScanVisual({ elapsedSeconds = 0, activePointId = null, scanPoints = [], scanPrompts = [], image = null, isLight = false }) {\r\n    const [activePoint, setActivePoint] = useState(scanPoints[0] || { id: 'default', x: 50, y: 50, name: 'Center' });\r\n    const [hoveredPoint, setHoveredPoint] = useState(null);\r\n    const [breathPhase, setBreathPhase] = useState(0);\r\n    const animationRef = useRef(null);\r\n\r\n    // Update active point based on prop or elapsed time\r\n    useEffect(() => {\r\n        if (activePointId) {\r\n            // Use provided point ID (dev mode)\r\n            const point = scanPoints.find(p => p.id === activePointId) || scanPoints[0];\r\n            if (point) setActivePoint(point);\r\n        } else {\r\n            // Use time-based selection (normal mode)\r\n            let activePrompt = scanPrompts[0];\r\n            for (const prompt of scanPrompts) {\r\n                if (elapsedSeconds >= prompt.timing) {\r\n                    activePrompt = prompt;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            if (activePrompt) {\r\n                const point = scanPoints.find(p => p.id === activePrompt.point) || scanPoints[0];\r\n                if (point) setActivePoint(point);\r\n            }\r\n        }\r\n    }, [elapsedSeconds, activePointId, scanPoints, scanPrompts]);\r\n\r\n    // Breathing animation for the focus point\r\n    useEffect(() => {\r\n        const breathDuration = 6000; // 6 second breath cycle\r\n        let startTime = performance.now();\r\n\r\n        const animate = (now) => {\r\n            const elapsed = now - startTime;\r\n            const cycle = (elapsed % breathDuration) / breathDuration;\r\n            const phase = (Math.sin(cycle * Math.PI * 2 - Math.PI / 2) + 1) / 2;\r\n            setBreathPhase(phase);\r\n            animationRef.current = requestAnimationFrame(animate);\r\n        };\r\n\r\n        animationRef.current = requestAnimationFrame(animate);\r\n        return () => {\r\n            if (animationRef.current) {\r\n                cancelAnimationFrame(animationRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // Calculate glow properties based on breath (User requested 75% max opacity and smaller size)\r\n    const glowRadius = 8 + breathPhase * 6;\r\n    const glowOpacity = 0.5 + breathPhase * 0.25;\r\n\r\n    // Sushumna Pulse Logic - Only active when sushumna prompt is selected\r\n    const [sushumnaPos, setSushumnaPos] = useState(null);\r\n    useEffect(() => {\r\n        if (activePoint.id === 'nadi_sushumna_top') {\r\n            const top = scanPoints.find(p => p.id === 'nadi_sushumna_top');\r\n            const bottom = scanPoints.find(p => p.id === 'nadi_sushumna_bottom');\r\n            if (!top || !bottom) return;\r\n\r\n            const pulseDuration = 2000; // 2 seconds to travel\r\n            const breakDuration = 1000; // 1 second break\r\n            const totalCycle = pulseDuration + breakDuration;\r\n\r\n            let pulseStart = performance.now();\r\n\r\n            const animatePulse = (now) => {\r\n                const elapsed = now - pulseStart;\r\n                const progress = (elapsed % totalCycle) / pulseDuration;\r\n\r\n                if (progress <= 1) {\r\n                    setSushumnaPos({\r\n                        x: top.x + (bottom.x - top.x) * progress,\r\n                        y: top.y + (bottom.y - top.y) * progress,\r\n                        active: true\r\n                    });\r\n                } else {\r\n                    setSushumnaPos({ ...bottom, active: false });\r\n                }\r\n                requestAnimationFrame(animatePulse);\r\n            };\r\n\r\n            const animId = requestAnimationFrame(animatePulse);\r\n            return () => cancelAnimationFrame(animId);\r\n        } else {\r\n            setSushumnaPos(null);\r\n        }\r\n    }, [activePoint, scanPoints]);\r\n\r\n    return (\r\n        <div className=\"relative w-full flex items-center justify-center quiet-zone py-12\">\r\n            <CoordinateHelper\r\n                className=\"w-full max-w-sm\"\r\n                label={`BodyScan:${image || 'full'}`}\r\n            >\r\n                <div className={`relative w-full h-full glass-capsule overflow-hidden`} style={{ aspectRatio: '1/1' }}>\r\n                    {/* Interior Quiet Zone Glow */}\r\n                    <div className=\"absolute inset-0 bg-radial-gradient from-[var(--bg-void)] to-transparent opacity-40 rounded-[2rem] pointer-events-none\" />\r\n                    {/* Top Decorative Bar (Ember FX) */}\r\n                    <div\r\n                        className=\"absolute -top-4 left-0 right-0 h-[2px] ember-fx-bar z-10 pointer-events-none\"\r\n                        style={{ opacity: 0.6 }}\r\n                    />\r\n                    {/* Body silhouette image */}\r\n                    <img\r\n                        key={image || 'default'}\r\n                        src={image ? `${import.meta.env.BASE_URL}sensory/${image}` : `${import.meta.env.BASE_URL}sensory/body-scan-silhouette.png`}\r\n                        alt=\"Body Scan\"\r\n                        className=\"w-full h-full object-contain transition-opacity duration-700 pointer-events-none\"\r\n                        style={{\r\n                            filter: isLight ? 'none' : 'drop-shadow(0 0 20px var(--accent-20))',\r\n                            maskImage: isLight ? 'radial-gradient(circle at center, black 70%, transparent 100%)' : 'none',\r\n                            WebkitMaskImage: isLight ? 'radial-gradient(circle at center, black 70%, transparent 100%)' : 'none',\r\n                        }}\r\n                    />\r\n\r\n                    {/* SVG overlay for chakra points */}\r\n                    <svg\r\n                        viewBox=\"0 0 100 100\"\r\n                        className=\"absolute inset-0 w-full h-full pointer-events-none\"\r\n                        style={{ overflow: 'visible' }}\r\n                    >\r\n                        <defs>\r\n                            {/* Glow filter for the focus point */}\r\n                            <filter id=\"focusGlow\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\">\r\n                                <feGaussianBlur stdDeviation=\"3\" result=\"blur\" />\r\n                                <feComposite in=\"SourceGraphic\" in2=\"blur\" operator=\"over\" />\r\n                            </filter>\r\n                        </defs>\r\n\r\n                        {/* All body point markers (not active) */}\r\n                        {scanPoints.map((point) => (\r\n                            <circle\r\n                                key={point.id}\r\n                                cx={point.x}\r\n                                cy={point.y}\r\n                                r={point.id === activePoint.id ? 0 : 1}\r\n                                fill=\"var(--accent-color)\"\r\n                                opacity={0.3}\r\n                            />\r\n                        ))}\r\n\r\n                        {/* Sushumna Pulse Point */}\r\n                        {sushumnaPos && sushumnaPos.active && (\r\n                            <circle\r\n                                cx={sushumnaPos.x}\r\n                                cy={sushumnaPos.y}\r\n                                r={3}\r\n                                fill=\"var(--accent-color)\"\r\n                                opacity={0.6}\r\n                            />\r\n                        )}\r\n\r\n                        {/* Active focus point with breathing glow */}\r\n                        <g filter=\"url(#focusGlow)\">\r\n                            <circle\r\n                                cx={activePoint.x}\r\n                                cy={activePoint.y}\r\n                                r={glowRadius}\r\n                                fill=\"var(--accent-color)\"\r\n                                opacity={glowOpacity * 0.2}\r\n                                style={{\r\n                                    transition: 'cx 0.8s ease-out, cy 0.8s ease-out',\r\n                                }}\r\n                            />\r\n                            <circle\r\n                                cx={activePoint.x}\r\n                                cy={activePoint.y}\r\n                                r={4 + breathPhase * 2}\r\n                                fill=\"var(--accent-color)\"\r\n                                opacity={glowOpacity}\r\n                                style={{\r\n                                    transition: 'cx 0.8s ease-out, cy 0.8s ease-out',\r\n                                }}\r\n                            />\r\n                        </g>\r\n                    </svg>\r\n                </div>\r\n\r\n                {/* Interaction layer for hovering points */}\r\n                <svg\r\n                    viewBox=\"0 0 100 100\"\r\n                    className=\"absolute inset-0 w-full h-full\"\r\n                    style={{ overflow: 'visible', pointerEvents: 'none' }}\r\n                >\r\n                    {scanPoints.map((point) => (\r\n                        <circle\r\n                            key={`hit-${point.id}`}\r\n                            cx={point.x}\r\n                            cy={point.y}\r\n                            r={4}\r\n                            fill=\"transparent\"\r\n                            className=\"pointer-events-auto cursor-help\"\r\n                            onMouseEnter={() => setHoveredPoint(point)}\r\n                            onMouseLeave={() => setHoveredPoint(null)}\r\n                        />\r\n                    ))}\r\n                </svg>\r\n\r\n                {/* Info Card Overlay (Hover) */}\r\n                <AnimatePresence>\r\n                    {hoveredPoint && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.9, y: 10 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.9, y: 10 }}\r\n                            className=\"absolute left-1/2 bottom-[-10%] -translate-x-1/2 w-full max-w-[280px] z-[200] pointer-events-none\"\r\n                        >\r\n                            <div className=\"bg-black/80 backdrop-blur-xl border border-white/10 rounded-2xl p-4 shadow-2xl\">\r\n                                {/* Hybrid Labels Header */}\r\n                                <div className=\"flex flex-col gap-0.5 mb-3 border-b border-white/5 pb-2\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <span className=\"text-[9px] uppercase tracking-[0.2em] text-white/40 font-bold\">\r\n                                            {hoveredPoint.label_functional || 'Primary Node'}\r\n                                        </span>\r\n                                        <span className=\"text-[9px] text-[var(--accent-color)] font-mono opacity-60\">\r\n                                            {hoveredPoint.type}\r\n                                        </span>\r\n                                    </div>\r\n                                    <h4 className=\"text-sm text-white/90 font-medium tracking-wide\" style={{ fontFamily: 'var(--font-display)' }}>\r\n                                        {hoveredPoint.name}\r\n                                    </h4>\r\n                                    <div className=\"text-[10px] text-white/60\">\r\n                                        {hoveredPoint.label_anatomical && `${hoveredPoint.label_anatomical} ΓÇó `}{hoveredPoint.location}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Content Body */}\r\n                                <div className=\"space-y-2.5\">\r\n                                    {hoveredPoint.function && (\r\n                                        <div>\r\n                                            <div className=\"text-[8px] uppercase tracking-wider text-white/30 mb-0.5\">Function</div>\r\n                                            <p className=\"text-[10px] leading-relaxed text-white/80 italic\">\r\n                                                {hoveredPoint.function}\r\n                                            </p>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {(hoveredPoint.physical || hoveredPoint.sensory) && (\r\n                                        <div className=\"grid grid-cols-2 gap-3 pt-1 border-t border-white/5\">\r\n                                            {hoveredPoint.physical && (\r\n                                                <div>\r\n                                                    <div className=\"text-[8px] uppercase tracking-wider text-white/30 mb-0.5\">Physical</div>\r\n                                                    <div className=\"text-[9px] text-white/60 font-mono leading-tight\">{hoveredPoint.physical}</div>\r\n                                                </div>\r\n                                            )}\r\n                                            {hoveredPoint.sensory && (\r\n                                                <div>\r\n                                                    <div className=\"text-[8px] uppercase tracking-wider text-white/30 mb-0.5\">Sensory</div>\r\n                                                    <div className=\"text-[9px] text-white/60 font-mono leading-tight\">{hoveredPoint.sensory}</div>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Point name label (Static/Active) */}\r\n                <div\r\n                    className=\"absolute left-1/2 bottom-6 -translate-x-1/2 pointer-events-none\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontSize: '10px',\r\n                        fontWeight: 600,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        textTransform: 'uppercase',\r\n                        color: 'var(--accent-color)',\r\n                        opacity: hoveredPoint ? 0 : 0.7, // Hide regular label when hovering\r\n                        transition: 'opacity 0.3s'\r\n                    }}\r\n                >\r\n                    {activePoint.name}\r\n                </div>\r\n            </CoordinateHelper>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\BreathConfig.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":28},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":15,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":15,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/BreathConfig.jsx\r\n// Configuration panel for Breath & Stillness practice\r\n// Pattern presets and inhale/hold/exhale sliders\r\nimport React from 'react';\r\n\r\n// Breathing pattern presets\r\nexport const BREATH_PRESETS = {\r\n    Box: { inhale: 4, hold1: 4, exhale: 4, hold2: 4 },\r\n    \"4-7-8\": { inhale: 4, hold1: 7, exhale: 8, hold2: 0 },\r\n    Kumbhaka: { inhale: 4, hold1: 16, exhale: 8, hold2: 0 },\r\n    Relax: { inhale: 4, hold1: 4, exhale: 6, hold2: 2 },\r\n    Energy: { inhale: 3, hold1: 0, exhale: 3, hold2: 0 },\r\n};\r\n\r\nexport const PRESET_NAMES = Object.keys(BREATH_PRESETS);\r\n\r\nexport function BreathConfig({\r\n    pattern,\r\n    setPattern,\r\n    preset,\r\n    setPreset,\r\n    isLight = false,\r\n}) {\r\n    const handlePatternChange = (key, value) => {\r\n        setPattern((prev) => ({\r\n            ...prev,\r\n            [key]: Number.parseInt(value, 10) || 0,\r\n        }));\r\n        setPreset(null);\r\n    };\r\n\r\n    return (\r\n        <div className=\"breath-config\">\r\n            {/* Pattern Presets - centered, no label */}\r\n            <div className=\"flex flex-wrap gap-2 mb-4 justify-center\">\r\n                {PRESET_NAMES.map((name) => (\r\n                    <button\r\n                        key={name}\r\n                        onClick={() => {\r\n                            setPattern(BREATH_PRESETS[name]);\r\n                            setPreset(name);\r\n                        }}\r\n                        className=\"rounded-full px-2.5 py-1\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontSize: \"8px\",\r\n                            fontWeight: 600,\r\n                            letterSpacing: \"var(--tracking-mythic)\",\r\n                            textTransform: \"uppercase\",\r\n                            background: \"transparent\",\r\n                            border: `1px solid ${preset === name ? \"var(--accent-color)\" : \"var(--accent-10)\"}`,\r\n                            color: preset === name ? \"var(--accent-color)\" : \"var(--text-muted)\",\r\n                            boxShadow: preset === name ? '0 0 12px var(--accent-15)' : \"none\",\r\n                            transition: 'background 800ms cubic-bezier(0.4, 0, 0.2, 1), border-color 800ms ease-in-out, color 400ms ease, box-shadow 800ms ease',\r\n                        }}\r\n                    >\r\n                        {name}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Pattern Inputs */}\r\n            <div className=\"grid grid-cols-4 gap-3 mb-6\">\r\n                {[\r\n                    { label: \"Inhale\", key: \"inhale\" },\r\n                    { label: \"Hold 1\", key: \"hold1\" },\r\n                    { label: \"Exhale\", key: \"exhale\" },\r\n                    { label: \"Hold 2\", key: \"hold2\" },\r\n                ].map(({ label, key }) => (\r\n                    <div key={key} className=\"flex flex-col gap-1\">\r\n                        <label\r\n                            style={{\r\n                                fontFamily: \"var(--font-body)\",\r\n                                fontSize: \"8px\",\r\n                                fontWeight: 600,\r\n                                letterSpacing: \"var(--tracking-wide)\",\r\n                                textTransform: \"uppercase\",\r\n                                color: \"var(--text-muted)\",\r\n                                textAlign: \"center\"\r\n                            }}\r\n                        >\r\n                            {label}\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={pattern[key]}\r\n                            onChange={(e) => handlePatternChange(key, e.target.value)}\r\n                            className=\"text-center rounded-xl px-2 py-2 outline-none transition-all duration-200\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-display)\",\r\n                                fontSize: \"14px\",\r\n                                fontWeight: 600,\r\n                                background: isLight ? 'rgba(60,50,35,0.05)' : \"rgba(0,0,0,0.4)\",\r\n                                border: isLight ? '1px solid var(--light-border)' : \"1px solid var(--accent-10)\",\r\n                                color: \"var(--text-primary)\",\r\n                            }}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\BreathPatternPreview.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\BreathingRing.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'mandalaProgress' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"mandalaProgress"},"fix":{"range":[1252,1267],"text":""},"desc":"Remove unused variable 'mandalaProgress'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'lastCycleRef' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":32,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastCycleRef"},"fix":{"range":[1307,1338],"text":""},"desc":"Remove unused variable 'lastCycleRef'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`triggerEcho` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  83 |     // Crossed into HOLD-TOP phase (end of inhale, peak reached)\n  84 |     if (prevP < tInhale && currP >= tInhale) {\n> 85 |       triggerEcho();\n     |       ^^^^^^^^^^^ `triggerEcho` accessed before it is declared\n  86 |       playSound(800); // High ping (inhale peak)\n  87 |     }\n  88 |\n\n  133 |\n  134 |   // Trigger echo visual effect\n> 135 |   const triggerEcho = () => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 136 |     setEcho({ id: Date.now() });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 137 |   };\n      | ^^^^^ `triggerEcho` is declared here\n  138 |\n  139 |   // Remove echo after animation completes\n  140 |   useEffect(() => {","line":85,"column":7,"nodeType":null,"endLine":85,"endColumn":18},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`playSound` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  84 |     if (prevP < tInhale && currP >= tInhale) {\n  85 |       triggerEcho();\n> 86 |       playSound(800); // High ping (inhale peak)\n     |       ^^^^^^^^^ `playSound` accessed before it is declared\n  87 |     }\n  88 |\n  89 |     // Crossed into EXHALE phase (release from inhale hold)\n\n  146 |\n  147 |   // Web Audio API sound generation\n> 148 |   const playSound = (frequency) => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 149 |     if (!audioContextRef.current) {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 150 |       audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 169 |     osc.stop(now + 0.12);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 170 |   };\n      | ^^^^^ `playSound` is declared here\n  171 |\n  172 |   // Handle click on breathing ring - calculate error and call onTap\n  173 |   const handleRingClick = () => {","line":86,"column":7,"nodeType":null,"endLine":86,"endColumn":16},{"ruleId":"no-unused-vars","severity":2,"message":"'secondary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":233,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":233,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"secondary"},"fix":{"range":[7682,7693],"text":""},"desc":"Remove unused variable 'secondary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'muted' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":233,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":233,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"muted"},"fix":{"range":[7693,7700],"text":""},"desc":"Remove unused variable 'muted'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'glow' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":233,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":233,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"glow"},"fix":{"range":[7700,7706],"text":""},"desc":"Remove unused variable 'glow'."}]},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":434,"column":11,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":434,"endColumn":24}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/BreathingRing.jsx\r\n// BREATHING VISUALIZATION RING\r\n// - Scales smoothly to match exact breath pattern timing\r\n// - Echo effect + sound on inhale peak and exhale bottom\r\n// - User locks eyes on ring to feel the rhythm\r\n// - CLICKABLE: tapping calculates accuracy error and passes to onTap callback\r\n// - PATH FX: path-specific particle effects sync with breath\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { EnsoStroke } from \"./EnsoStroke\";\r\nimport { useTheme } from \"../context/ThemeContext\";\r\nimport { PathParticles } from \"./PathParticles.jsx\";\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nexport function BreathingRing({ breathPattern, onTap, onCycleComplete, startTime, pathId, fxPreset, practiceEnergy = 0.5 }) {\r\n  const {\r\n    inhale = 4,\r\n    holdTop = 4,\r\n    exhale = 4,\r\n    holdBottom = 2,\r\n  } = breathPattern || {};\r\n\r\n  const total = inhale + holdTop + exhale + holdBottom;\r\n  const minScale = 0.9;  // Decreased 10% from 1.0\r\n  const maxScale = 1.32; // Increased 10% from 1.2\r\n\r\n  const [progress, setProgress] = useState(0);\r\n  const [echo, setEcho] = useState(null);\r\n  const previousProgressRef = useRef(0);\r\n  const audioContextRef = useRef(null);\r\n  const [mandalaProgress, setMandalaProgress] = useState(0);\r\n  const lastCycleRef = useRef(0);\r\n\r\n  // Enso feedback state\r\n  const [ensoFeedback, setEnsoFeedback] = useState({\r\n    active: false,\r\n    accuracy: null, // 'perfect' | 'good' | 'loose'\r\n    key: 0\r\n  });\r\n  const [currentPhase, setCurrentPhase] = useState(null);\r\n  const lastTapPhaseRef = useRef(null);\r\n\r\n  // Phase boundaries (as fractions of cycle)\r\n  const tInhale = inhale / total;\r\n  const tHoldTop = (inhale + holdTop) / total;\r\n  const tExhale = (inhale + holdTop + exhale) / total;\r\n\r\n  // Track current phase for enso feedback\r\n  useEffect(() => {\r\n    if (progress < tInhale) {\r\n      setCurrentPhase('inhale');\r\n    } else if (progress < tHoldTop) {\r\n      setCurrentPhase('hold-top');\r\n    } else if (progress < tExhale) {\r\n      setCurrentPhase('exhale');\r\n    } else {\r\n      setCurrentPhase('hold-bottom');\r\n    }\r\n  }, [progress, tInhale, tHoldTop, tExhale]);\r\n\r\n  // Calculate current scale based on progress through cycle\r\n  let scale = minScale;\r\n  if (progress < tInhale) {\r\n    // INHALE: scale up from min to max\r\n    scale = minScale + (maxScale - minScale) * (progress / tInhale);\r\n  } else if (progress < tHoldTop) {\r\n    // HOLD TOP: stay at max\r\n    scale = maxScale;\r\n  } else if (progress < tExhale) {\r\n    // EXHALE: scale down from max to min\r\n    const exhaleProgress = (progress - tHoldTop) / (tExhale - tHoldTop);\r\n    scale = maxScale - (maxScale - minScale) * exhaleProgress;\r\n  } else {\r\n    // HOLD BOTTOM: stay at min\r\n    scale = minScale;\r\n  }\r\n\r\n  // Detect phase transitions and trigger sounds + echo\r\n  useEffect(() => {\r\n    const prevP = previousProgressRef.current;\r\n    const currP = progress;\r\n\r\n    // Crossed into HOLD-TOP phase (end of inhale, peak reached)\r\n    if (prevP < tInhale && currP >= tInhale) {\r\n      triggerEcho();\r\n      playSound(800); // High ping (inhale peak)\r\n    }\r\n\r\n    // Crossed into EXHALE phase (release from inhale hold)\r\n    if (prevP < tHoldTop && currP >= tHoldTop) {\r\n      playSound(700); // Medium-high ping (inhale release)\r\n    }\r\n\r\n    // Crossed into HOLD-BOTTOM phase (end of exhale, bottom reached)\r\n    if (prevP < tExhale && currP >= tExhale) {\r\n      playSound(400); // Low ping (exhale bottom)\r\n    }\r\n\r\n    // Crossed back into INHALE phase (release from exhale hold) - CYCLE COMPLETE\r\n    if (prevP >= tExhale && currP < tExhale) {\r\n      playSound(500); // Medium-low ping (exhale release)\r\n      // Cycle completed - increment mandala\r\n      setMandalaProgress(prev => Math.min(prev + 0.1, 1)); // Grow to max 100%\r\n      if (onCycleComplete) {\r\n        onCycleComplete();\r\n      }\r\n    }\r\n\r\n    previousProgressRef.current = currP;\r\n  }, [progress, tInhale, tHoldTop, tExhale, onCycleComplete]);\r\n\r\n  // Main animation loop - SYNCED to session start time\r\n  useEffect(() => {\r\n    if (!total || total <= 0) return;\r\n\r\n    const cycleMs = total * 1000;\r\n    // Use provided startTime or current time as reference\r\n    const referenceTime = startTime || performance.now();\r\n    let frameId = null;\r\n\r\n    const loop = (now) => {\r\n      const elapsed = now - referenceTime;\r\n      const t = (elapsed % cycleMs) / cycleMs;\r\n      setProgress(t);\r\n      frameId = requestAnimationFrame(loop);\r\n    };\r\n\r\n    frameId = requestAnimationFrame(loop);\r\n    return () => {\r\n      if (frameId) cancelAnimationFrame(frameId);\r\n    };\r\n  }, [total, startTime]); // Re-sync when startTime changes\r\n\r\n  // Trigger echo visual effect\r\n  const triggerEcho = () => {\r\n    setEcho({ id: Date.now() });\r\n  };\r\n\r\n  // Remove echo after animation completes\r\n  useEffect(() => {\r\n    if (echo) {\r\n      const timer = setTimeout(() => setEcho(null), 400);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [echo]);\r\n\r\n  // Web Audio API sound generation\r\n  const playSound = (frequency) => {\r\n    if (!audioContextRef.current) {\r\n      audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\r\n    }\r\n\r\n    const ctx = audioContextRef.current;\r\n    const osc = ctx.createOscillator();\r\n    const gain = ctx.createGain();\r\n\r\n    osc.connect(gain);\r\n    gain.connect(ctx.destination);\r\n\r\n    osc.frequency.value = frequency;\r\n    osc.type = \"sine\";\r\n\r\n    // Quick attack, exponential decay\r\n    const now = ctx.currentTime;\r\n    gain.gain.setValueAtTime(0.25, now);\r\n    gain.gain.exponentialRampToValueAtTime(0.01, now + 0.12);\r\n\r\n    osc.start(now);\r\n    osc.stop(now + 0.12);\r\n  };\r\n\r\n  // Handle click on breathing ring - calculate error and call onTap\r\n  const handleRingClick = () => {\r\n    if (!onTap) return;\r\n\r\n    // Find which peak the user was trying to hit\r\n    // Valid tap points: Start (0), Inhale Peak, Hold Release, Exhale Bottom, End (1)\r\n    const peaks = [\r\n      { name: 'inhale start', phase: 0 },\r\n      { name: 'inhale peak', phase: tInhale },\r\n      { name: 'hold release', phase: tHoldTop },\r\n      { name: 'exhale bottom', phase: tExhale },\r\n      { name: 'cycle end', phase: 1.0 }\r\n    ];\r\n\r\n    // Find closest peak\r\n    let closestPeak = peaks[0];\r\n    let minDistance = Math.abs(progress - peaks[0].phase);\r\n\r\n    for (let i = 1; i < peaks.length; i++) {\r\n      const distance = Math.abs(progress - peaks[i].phase);\r\n      if (distance < minDistance) {\r\n        minDistance = distance;\r\n        closestPeak = peaks[i];\r\n      }\r\n    }\r\n\r\n    // Calculate error from closest peak\r\n    const cycleMs = total * 1000;\r\n    const expectedMs = closestPeak.phase * cycleMs;\r\n    const actualMs = progress * cycleMs;\r\n\r\n    // INPUT LATENCY COMPENSATION\r\n    // Typical touchscreen/mouse latency is ~60ms. \r\n    // Without this, perfect physical taps register as \"Late\".\r\n    const INPUT_LATENCY_MS = 60;\r\n    const errorMs = (actualMs - expectedMs) - INPUT_LATENCY_MS;\r\n\r\n    const absError = Math.abs(errorMs);\r\n\r\n    // Trigger enso feedback (once per phase)\r\n    if (currentPhase && lastTapPhaseRef.current !== currentPhase) {\r\n      const accuracy = absError < 50 ? 'perfect' : absError < 200 ? 'good' : 'loose';\r\n\r\n      setEnsoFeedback(prev => ({\r\n        active: true,\r\n        accuracy,\r\n        key: prev.key + 1\r\n      }));\r\n\r\n      lastTapPhaseRef.current = currentPhase;\r\n\r\n      // Clear enso after animation completes\r\n      setTimeout(() => setEnsoFeedback(prev => ({ ...prev, active: false })), 1400);\r\n    }\r\n\r\n\r\n    onTap(errorMs);\r\n  };\r\n\r\n  // Read theme for dynamic colors\r\n  const theme = useTheme();\r\n  const { primary, secondary, muted, glow } = theme.accent;\r\n\r\n  // Detect light mode to use subtle shadow instead of glow\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n\r\n  return (\r\n    <div\r\n      className=\"relative w-full flex items-center justify-center py-16 cursor-pointer\"\r\n      onClick={handleRingClick}\r\n      style={{ userSelect: \"none\", overflow: \"visible\" }}\r\n    >\r\n\r\n      {/* Image-based Enso - authentic brush stroke (OUTSIDE SVG to avoid overlay) */}\r\n      {ensoFeedback.active && (\r\n        <div\r\n          key={ensoFeedback.key}\r\n          className=\"absolute\"\r\n          style={{\r\n            pointerEvents: \"none\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            width: \"128px\",\r\n            height: \"128px\",\r\n            transform: ensoFeedback.accuracy === 'loose'\r\n              ? 'translate(-50%, -50%) scale(0.85)'\r\n              : 'translate(-50%, -50%) scale(1)',\r\n            zIndex: 20,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              opacity: 1,\r\n              animation: 'ensoFadeOut 500ms ease-out 800ms forwards',\r\n            }}\r\n          >\r\n            <EnsoStroke\r\n              centerX={64}\r\n              centerY={64}\r\n              radius={50}\r\n              accuracy={ensoFeedback.accuracy}\r\n              isActive={true}\r\n            />\r\n          </div>\r\n\r\n          {/* Perfect timing flash at completion point */}\r\n          {ensoFeedback.accuracy === 'perfect' && (\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                top: '25%',\r\n                left: '22%',\r\n                width: '16px',\r\n                height: '16px',\r\n                borderRadius: '50%',\r\n                background: '#fffef0',\r\n                boxShadow: '0 0 12px rgba(255, 254, 240, 0.9)',\r\n                animation: 'ensoFlash 200ms ease-out 400ms',\r\n                opacity: 0,\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Main breathing ring with EVENT HORIZON GLOW */}\r\n      <svg\r\n        viewBox=\"-50 -50 300 300\"\r\n        className=\"w-80 h-80\"\r\n        style={{\r\n          position: 'relative',\r\n          zIndex: 10,\r\n          pointerEvents: \"none\",\r\n          overflow: \"visible\",\r\n          // EVENT HORIZON GLOW - Clean layered box-shadow using theme colors\r\n          // Light mode: subtle dark shadow for definition\r\n          // Dark mode: full colored glow effect\r\n          filter: isLight\r\n            ? 'drop-shadow(0 0 2px rgba(0, 0, 0, 0.15)) drop-shadow(0 0 4px rgba(0, 0, 0, 0.1))'\r\n            : progress < tInhale\r\n              ? `drop-shadow(0 0 ${8 + 1.6 * (progress / tInhale)}px var(--accent-primary)) \r\n               drop-shadow(0 0 ${16 + 3.2 * (progress / tInhale)}px var(--accent-secondary)) \r\n               drop-shadow(0 0 ${24 + 4.8 * (progress / tInhale)}px var(--accent-muted)) \r\n               drop-shadow(0 0 ${32 + 6.4 * (progress / tInhale)}px var(--accent-glow))`\r\n              : progress < tHoldTop\r\n                ? `drop-shadow(0 0 9.6px var(--accent-primary)) \r\n               drop-shadow(0 0 19.2px var(--accent-secondary)) \r\n               drop-shadow(0 0 28.8px var(--accent-muted)) \r\n               drop-shadow(0 0 38.4px var(--accent-glow))`\r\n                : progress < tExhale\r\n                  ? `drop-shadow(0 0 ${9.6 - 1.6 * ((progress - tHoldTop) / (tExhale - tHoldTop))}px var(--accent-primary)) \r\n               drop-shadow(0 0 ${19.2 - 3.2 * ((progress - tHoldTop) / (tExhale - tHoldTop))}px var(--accent-secondary)) \r\n               drop-shadow(0 0 ${28.8 - 4.8 * ((progress - tHoldTop) / (tExhale - tHoldTop))}px var(--accent-muted)) \r\n               drop-shadow(0 0 ${38.4 - 6.4 * ((progress - tHoldTop) / (tExhale - tHoldTop))}px var(--accent-glow))`\r\n                  : `drop-shadow(0 0 8px var(--accent-primary)) \r\n               drop-shadow(0 0 16px var(--accent-secondary)) \r\n               drop-shadow(0 0 24px var(--accent-muted)) \r\n               drop-shadow(0 0 32px var(--accent-glow))`\r\n        }}\r\n      >\r\n        <circle\r\n          cx=\"100\"\r\n          cy=\"100\"\r\n          r=\"80\"\r\n          fill=\"none\"\r\n          stroke=\"var(--accent-primary)\"\r\n          strokeWidth=\"4\"\r\n          strokeLinecap=\"round\"\r\n          style={{\r\n            transform: `scale(${scale})`,\r\n            transformOrigin: \"100px 100px\",\r\n            transition: \"none\",\r\n          }}\r\n        />\r\n      </svg>\r\n\r\n      {/* Echo effect - appears at max scale, fades out */}\r\n      {echo && (\r\n        <svg\r\n          viewBox=\"-50 -50 300 300\"\r\n          className=\"absolute w-80 h-80\"\r\n          style={{\r\n            animation: \"fadeOutEcho 0.4s ease-out forwards\",\r\n            pointerEvents: \"none\",\r\n            overflow: \"visible\",\r\n          }}\r\n        >\r\n          <circle\r\n            cx=\"100\"\r\n            cy=\"100\"\r\n            r=\"80\"\r\n            fill=\"none\"\r\n            stroke=\"var(--accent-primary)\"\r\n            strokeWidth=\"3\"\r\n            strokeLinecap=\"round\"\r\n            style={{\r\n              transform: `scale(${maxScale})`,\r\n              transformOrigin: \"100px 100px\",\r\n              opacity: 0.5,\r\n            }}\r\n          />\r\n        </svg>\r\n      )}\r\n\r\n      {/* PATH PARTICLES - Rendered ON TOP of the ring for visibility */}\r\n      {/* Canvas is 400x400 for headroom (prevents particle clipping), centered exactly over the ring */}\r\n      {pathId && fxPreset && fxPreset !== 'none' && (\r\n        <div\r\n          className=\"absolute\"\r\n          style={{\r\n            width: 400,\r\n            height: 400,\r\n            pointerEvents: 'none',\r\n            zIndex: 20,\r\n            overflow: 'visible',\r\n            /* Center using transform - same technique as phase indicator */\r\n            left: '50%',\r\n            top: '50%',\r\n            transform: 'translate(-50%, -50%)'\r\n          }}\r\n        >\r\n          <PathParticles\r\n            pathId={pathId}\r\n            fxPreset={fxPreset}\r\n            intensity={(() => {\r\n              // Base breath intensity from scale\r\n              const breathIntensity = scale === maxScale ? 1 : (scale - minScale) / (maxScale - minScale);\r\n              // Blend breath intensity with practice energy (60% breath, 40% practice energy)\r\n              return breathIntensity * 0.6 + practiceEnergy * 0.4;\r\n            })()}\r\n            ringScale={scale}\r\n            ringRadius={85.33}  /* Actual SVG ring radius: r=80 in viewBox 300, scaled to 320px = 80/300*320 */\r\n            phase={\r\n              progress < tInhale ? 'inhale' :\r\n                progress < tHoldTop ? 'hold' :\r\n                  progress < tExhale ? 'exhale' :\r\n                    'rest'\r\n            }\r\n            size={400}\r\n            accentColor={theme.accent.particleColor || primary}\r\n            isActive={true}\r\n            isLight={isLight}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Phase indicator - centered in circle for focus */}\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          fontSize: \"0.875rem\",\r\n          letterSpacing: \"0.25em\",\r\n          textTransform: \"uppercase\",\r\n          color: 'var(--accent-primary)',\r\n          fontFamily: \"var(--font-display)\",\r\n          fontWeight: \"700\",\r\n          letterSpacing: \"var(--tracking-mythic)\",\r\n          zIndex: 10,\r\n          pointerEvents: \"none\",\r\n          textShadow: '0 0 10px var(--accent-glow)'\r\n        }}\r\n      >\r\n        {progress < tInhale\r\n          ? \"Inhale\"\r\n          : progress < tHoldTop\r\n            ? \"Hold\"\r\n            : progress < tExhale\r\n              ? \"Exhale\"\r\n              : \"Hold\"}\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes fadeOutEcho {\r\n          0% {\r\n            opacity: 0.5;\r\n          }\r\n          100% {\r\n            opacity: 0;\r\n          }\r\n        }\r\n        \r\n        @keyframes ensoReveal {\r\n          0% {\r\n            opacity: 0;\r\n          }\r\n          100% {\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        @keyframes ensoGlow {\r\n          0%, 100% {\r\n            filter: brightness(0) saturate(100%) invert(84%) sepia(29%) saturate(1000%) hue-rotate(358deg) brightness(104%) contrast(96%) drop-shadow(0 0 8px rgba(253, 224, 71, 0.6));\r\n          }\r\n          50% {\r\n            filter: brightness(0) saturate(100%) invert(84%) sepia(29%) saturate(1000%) hue-rotate(358deg) brightness(104%) contrast(96%) drop-shadow(0 0 16px rgba(253, 224, 71, 0.9));\r\n          }\r\n        }\r\n        \r\n        @keyframes ensoGlowPerfect {\r\n          0%, 100% {\r\n            filter: brightness(0) saturate(100%) invert(84%) sepia(29%) saturate(1000%) hue-rotate(358deg) brightness(104%) contrast(96%) drop-shadow(0 0 12px rgba(253, 224, 71, 0.9));\r\n          }\r\n          50% {\r\n            filter: brightness(0) saturate(100%) invert(84%) sepia(29%) saturate(1000%) hue-rotate(358deg) brightness(104%) contrast(96%) drop-shadow(0 0 24px rgba(253, 224, 71, 1));\r\n          }\r\n        }\r\n        \r\n        @keyframes ensoFade {\r\n          0% {\r\n            opacity: 1;\r\n          }\r\n          100% {\r\n            opacity: 0;\r\n          }\r\n        }\r\n        \r\n        @keyframes ensoFlash {\r\n          0% {\r\n            opacity: 0;\r\n            transform: scale(0.5);\r\n          }\r\n          50% {\r\n            opacity: 1;\r\n            transform: scale(1.5);\r\n          }\r\n          100% {\r\n            opacity: 0;\r\n            transform: scale(2);\r\n          }\r\n        }\r\n        \r\n        @keyframes ensoFadeOut {\r\n          0% {\r\n            opacity: 1;\r\n          }\r\n          100% {\r\n            opacity: 0;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CircuitEntryCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CircuitEntryEditModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CircuitInsightsView.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useMemo' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"useMemo"},"fix":{"range":[193,206],"text":""},"desc":"Remove unused variable 'useMemo'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isLight' is defined but never used.","line":104,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLight"},"fix":{"range":[4533,4542],"text":""},"desc":"Remove unused variable 'isLight'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isLight' is defined but never used.","line":195,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":195,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLight"},"fix":{"range":[7650,7659],"text":""},"desc":"Remove unused variable 'isLight'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'accentColor' is defined but never used.","line":195,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":195,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"accentColor"},"fix":{"range":[7659,7672],"text":""},"desc":"Remove unused variable 'accentColor'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isLight' is defined but never used.","line":268,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":268,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLight"},"fix":{"range":[10676,10685],"text":""},"desc":"Remove unused variable 'isLight'."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CircuitInsightsView.jsx\r\n// Phase 3: Visual insights for circuit practice data\r\n// Shows: Attention trend line, challenge frequency bar chart, exercise heatmap\r\n\r\nimport React, { useMemo } from 'react';\r\nimport { useCircuitJournalStore } from '../state/circuitJournalStore';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\nimport { useAttentionTrendMemo, useChallengeMemo, useExerciseStatsMemo } from '../hooks/useEntryMemoization';\r\n\r\n/**\r\n * CircuitInsightsView\r\n * Displays three visualizations:\r\n * 1. Line chart - Attention Quality over time\r\n * 2. Bar chart - Challenge frequency\r\n * 3. Heatmap - Exercise performance by type\r\n */\r\nexport function CircuitInsightsView() {\r\n    const entries = useCircuitJournalStore(s => s.getAllEntries());\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const bgColor = isLight ? 'rgba(245, 240, 230, 0.95)' : 'rgba(20, 25, 35, 0.95)';\r\n    const textColor = isLight ? 'rgba(35, 20, 10, 0.95)' : 'rgba(253, 251, 245, 0.95)';\r\n    const accentColor = isLight ? 'rgba(180, 120, 40, 0.9)' : 'var(--accent-color)';\r\n    const borderColor = isLight ? 'rgba(180, 120, 40, 0.15)' : 'rgba(255, 255, 255, 0.1)';\r\n    const gridColor = isLight ? 'rgba(180, 120, 40, 0.1)' : 'rgba(255, 255, 255, 0.05)';\r\n\r\n    // Use memoized calculations instead of manual useMemo\r\n    const attentionData = useAttentionTrendMemo(entries);\r\n    const challengeData = useChallengeMemo(entries);\r\n    const heatmapData = useExerciseStatsMemo(entries);\r\n\r\n    return (\r\n        <div style={{\r\n            padding: '24px',\r\n            backgroundColor: bgColor,\r\n            color: textColor,\r\n            borderRadius: '16px',\r\n            space: '24px'\r\n        }}>\r\n            <h2 style={{ margin: '0 0 24px 0', fontSize: '28px', fontWeight: 'bold' }}>\r\n                Practice Insights\r\n            </h2>\r\n\r\n            {/* Chart 1: Attention Quality Trend Line */}\r\n            <div style={{\r\n                marginBottom: '32px',\r\n                backgroundColor: isLight ? 'rgba(255,255,255,0.3)' : 'rgba(0,0,0,0.2)',\r\n                border: `1px solid ${borderColor}`,\r\n                borderRadius: '12px',\r\n                padding: '16px'\r\n            }}>\r\n                <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: 'bold' }}>\r\n                    Attention Quality Trend\r\n                </h3>\r\n                {attentionData.length > 0 ? (\r\n                    <LineChart data={attentionData} height={200} isLight={isLight} accentColor={accentColor} gridColor={gridColor} textColor={textColor} />\r\n                ) : (\r\n                    <p style={{ opacity: 0.6, margin: 0 }}>No data yet</p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Chart 2: Challenge Frequency Bar Chart */}\r\n            <div style={{\r\n                marginBottom: '32px',\r\n                backgroundColor: isLight ? 'rgba(255,255,255,0.3)' : 'rgba(0,0,0,0.2)',\r\n                border: `1px solid ${borderColor}`,\r\n                borderRadius: '12px',\r\n                padding: '16px'\r\n            }}>\r\n                <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: 'bold' }}>\r\n                    Challenge Frequency\r\n                </h3>\r\n                {challengeData.length > 0 ? (\r\n                    <BarChart data={challengeData} height={200} isLight={isLight} accentColor={accentColor} gridColor={gridColor} textColor={textColor} />\r\n                ) : (\r\n                    <p style={{ opacity: 0.6, margin: 0 }}>No challenges logged</p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Chart 3: Exercise Performance Heatmap */}\r\n            <div style={{\r\n                backgroundColor: isLight ? 'rgba(255,255,255,0.3)' : 'rgba(0,0,0,0.2)',\r\n                border: `1px solid ${borderColor}`,\r\n                borderRadius: '12px',\r\n                padding: '16px'\r\n            }}>\r\n                <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: 'bold' }}>\r\n                    Exercise Performance\r\n                </h3>\r\n                {heatmapData.length > 0 ? (\r\n                    <Heatmap data={heatmapData} isLight={isLight} textColor={textColor} />\r\n                ) : (\r\n                    <p style={{ opacity: 0.6, margin: 0 }}>No exercise data</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * LineChart: Attention quality over time\r\n */\r\nfunction LineChart({ data, height, isLight, accentColor, gridColor, textColor }) {\r\n    if (data.length === 0) return null;\r\n\r\n    const width = 600;\r\n    const padding = 40;\r\n    const innerWidth = width - padding * 2;\r\n    const innerHeight = height - padding * 2;\r\n\r\n    const maxValue = 4;\r\n    const yScale = innerHeight / maxValue;\r\n    const xScale = innerWidth / Math.max(data.length - 1, 1);\r\n\r\n    // Generate line path\r\n    let pathD = `M ${padding + 0} ${padding + innerHeight - (data[0].value * yScale)}`;\r\n    for (let i = 1; i < data.length; i++) {\r\n        const x = padding + i * xScale;\r\n        const y = padding + innerHeight - (data[i].value * yScale);\r\n        pathD += ` L ${x} ${y}`;\r\n    }\r\n\r\n    const qualityColors = {\r\n        scattered: '#ef4444',\r\n        settling: '#f97316',\r\n        stable: '#3b82f6',\r\n        absorbed: '#10b981'\r\n    };\r\n\r\n    return (\r\n        <svg width={width} height={height} style={{ overflow: 'visible' }}>\r\n            {/* Grid lines */}\r\n            {[1, 2, 3, 4].map(i => (\r\n                <line\r\n                    key={`grid-${i}`}\r\n                    x1={padding}\r\n                    y1={padding + innerHeight - (i * yScale)}\r\n                    x2={padding + innerWidth}\r\n                    y2={padding + innerHeight - (i * yScale)}\r\n                    stroke={gridColor}\r\n                    strokeWidth={1}\r\n                    strokeDasharray=\"4,4\"\r\n                />\r\n            ))}\r\n\r\n            {/* Axes */}\r\n            <line x1={padding} y1={padding} x2={padding} y2={padding + innerHeight} stroke={gridColor} strokeWidth={2} />\r\n            <line x1={padding} y1={padding + innerHeight} x2={padding + innerWidth} y2={padding + innerHeight} stroke={gridColor} strokeWidth={2} />\r\n\r\n            {/* Y-axis labels */}\r\n            {[1, 2, 3, 4].map(i => (\r\n                <text\r\n                    key={`y-label-${i}`}\r\n                    x={padding - 10}\r\n                    y={padding + innerHeight - (i * yScale) + 4}\r\n                    textAnchor=\"end\"\r\n                    fontSize=\"11\"\r\n                    fill={textColor}\r\n                    opacity=\"0.6\"\r\n                >\r\n                    {['Scattered', 'Settling', 'Stable', 'Absorbed'][i - 1]}\r\n                </text>\r\n            ))}\r\n\r\n            {/* Line path */}\r\n            <path\r\n                d={pathD}\r\n                stroke={accentColor}\r\n                strokeWidth={2}\r\n                fill=\"none\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n            />\r\n\r\n            {/* Data points */}\r\n            {data.map((point, idx) => (\r\n                <g key={`point-${idx}`}>\r\n                    <circle\r\n                        cx={padding + idx * xScale}\r\n                        cy={padding + innerHeight - (point.value * yScale)}\r\n                        r={4}\r\n                        fill={qualityColors[point.label] || '#999'}\r\n                        opacity=\"0.8\"\r\n                    />\r\n                </g>\r\n            ))}\r\n        </svg>\r\n    );\r\n}\r\n\r\n/**\r\n * BarChart: Challenge frequency\r\n */\r\nfunction BarChart({ data, height, isLight, accentColor, gridColor, textColor }) {\r\n    if (data.length === 0) return null;\r\n\r\n    const width = 600;\r\n    const padding = 40;\r\n    const innerWidth = width - padding * 2;\r\n    const innerHeight = height - padding * 2;\r\n\r\n    const maxCount = Math.max(...data.map(d => d.count));\r\n    const barWidth = innerWidth / data.length;\r\n    const yScale = innerHeight / maxCount;\r\n\r\n    const colors = ['#ef4444', '#f97316', '#fbbf24', '#34d399', '#60a5fa', '#a78bfa', '#f472b6', '#94a3b8'];\r\n\r\n    return (\r\n        <svg width={width} height={height} style={{ overflow: 'visible' }}>\r\n            {/* Grid lines */}\r\n            {[1, 2, 3, 4, 5].map(i => {\r\n                const y = padding + innerHeight - (i * (innerHeight / 5));\r\n                return (\r\n                    <g key={`grid-${i}`}>\r\n                        <line x1={padding} y1={y} x2={padding + innerWidth} y2={y} stroke={gridColor} strokeWidth={1} strokeDasharray=\"4,4\" />\r\n                        <text x={padding - 10} y={y + 4} textAnchor=\"end\" fontSize=\"11\" fill={textColor} opacity=\"0.6\">\r\n                            {Math.round((i * maxCount) / 5)}\r\n                        </text>\r\n                    </g>\r\n                );\r\n            })}\r\n\r\n            {/* Axes */}\r\n            <line x1={padding} y1={padding} x2={padding} y2={padding + innerHeight} stroke={gridColor} strokeWidth={2} />\r\n            <line x1={padding} y1={padding + innerHeight} x2={padding + innerWidth} y2={padding + innerHeight} stroke={gridColor} strokeWidth={2} />\r\n\r\n            {/* Bars */}\r\n            {data.map((item, idx) => {\r\n                const barHeight = item.count * yScale;\r\n                const x = padding + idx * barWidth + barWidth * 0.1;\r\n                const y = padding + innerHeight - barHeight;\r\n                const bw = barWidth * 0.8;\r\n\r\n                return (\r\n                    <g key={`bar-${idx}`}>\r\n                        <rect x={x} y={y} width={bw} height={barHeight} fill={colors[idx % colors.length]} opacity=\"0.7\" />\r\n                        <text\r\n                            x={x + bw / 2}\r\n                            y={padding + innerHeight + 20}\r\n                            textAnchor=\"middle\"\r\n                            fontSize=\"11\"\r\n                            fill={textColor}\r\n                            opacity=\"0.7\"\r\n                        >\r\n                            {item.name.slice(0, 8)}\r\n                        </text>\r\n                        <text\r\n                            x={x + bw / 2}\r\n                            y={y - 5}\r\n                            textAnchor=\"middle\"\r\n                            fontSize=\"11\"\r\n                            fill={textColor}\r\n                            fontWeight=\"bold\"\r\n                        >\r\n                            {item.count}\r\n                        </text>\r\n                    </g>\r\n                );\r\n            })}\r\n        </svg>\r\n    );\r\n}\r\n\r\n/**\r\n * Heatmap: Exercise performance grid\r\n */\r\nfunction Heatmap({ data, isLight, textColor }) {\r\n    const cellSize = 40;\r\n    const labelWidth = 150;\r\n    const totalWidth = labelWidth + data.length * cellSize + 40;\r\n\r\n    const getColor = (avgQuality) => {\r\n        const q = parseFloat(avgQuality);\r\n        if (q >= 3.5) return '#10b981'; // Absorbed\r\n        if (q >= 2.5) return '#3b82f6'; // Stable\r\n        if (q >= 1.5) return '#f97316'; // Settling\r\n        return '#ef4444'; // Scattered\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <svg width={totalWidth} height={data.length * cellSize + 60} style={{ overflow: 'visible' }}>\r\n                {/* Header row - quality scale */}\r\n                <text x={labelWidth + 20} y={25} fontSize=\"12\" fill={textColor} fontWeight=\"bold\">\r\n                    Avg Quality\r\n                </text>\r\n\r\n                {/* Exercise rows */}\r\n                {data.map((exercise, idx) => {\r\n                    const y = 50 + idx * cellSize;\r\n\r\n                    return (\r\n                        <g key={`exercise-${idx}`}>\r\n                            {/* Exercise name */}\r\n                            <text\r\n                                x={labelWidth - 10}\r\n                                y={y + cellSize / 2 + 4}\r\n                                textAnchor=\"end\"\r\n                                fontSize=\"12\"\r\n                                fill={textColor}\r\n                                opacity=\"0.8\"\r\n                            >\r\n                                {exercise.name.slice(0, 20)}\r\n                            </text>\r\n\r\n                            {/* Quality cell */}\r\n                            <rect\r\n                                x={labelWidth + 20}\r\n                                y={y}\r\n                                width={cellSize}\r\n                                height={cellSize}\r\n                                fill={getColor(exercise.avgQuality)}\r\n                                opacity=\"0.7\"\r\n                                rx=\"4\"\r\n                            />\r\n                            <text\r\n                                x={labelWidth + 20 + cellSize / 2}\r\n                                y={y + cellSize / 2 + 4}\r\n                                textAnchor=\"middle\"\r\n                                fontSize=\"11\"\r\n                                fill=\"#fff\"\r\n                                fontWeight=\"bold\"\r\n                            >\r\n                                {exercise.avgQuality}\r\n                            </text>\r\n\r\n                            {/* Count badge */}\r\n                            <text\r\n                                x={labelWidth + 20 + cellSize + 15}\r\n                                y={y + cellSize / 2 + 4}\r\n                                fontSize=\"11\"\r\n                                fill={textColor}\r\n                                opacity=\"0.6\"\r\n                            >\r\n                                ├âΓÇö{exercise.count}\r\n                            </text>\r\n                        </g>\r\n                    );\r\n                })}\r\n            </svg>\r\n\r\n            {/* Legend */}\r\n            <div style={{ marginTop: '16px', display: 'flex', gap: '16px', fontSize: '12px', flexWrap: 'wrap' }}>\r\n                {[\r\n                    { label: 'Absorbed', color: '#10b981' },\r\n                    { label: 'Stable', color: '#3b82f6' },\r\n                    { label: 'Settling', color: '#f97316' },\r\n                    { label: 'Scattered', color: '#ef4444' }\r\n                ].map(item => (\r\n                    <div key={item.label} style={{ display: 'flex', gap: '6px', alignItems: 'center' }}>\r\n                        <div style={{ width: '16px', height: '16px', backgroundColor: item.color, borderRadius: '3px', opacity: 0.7 }} />\r\n                        <span style={{ opacity: 0.7 }}>{item.label}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CircuitInsightsView;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CircuitJournalForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Codex\\CodexChamber.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onClick' is defined but never used.","line":35,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":74,"suggestions":[{"messageId":"removeVar","data":{"varName":"onClick"},"fix":{"range":[1136,1145],"text":""},"desc":"Remove unused variable 'onClick'."}]},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":330,"column":25,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":330,"endColumn":38},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":427,"column":33,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":427,"endColumn":46},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":443,"column":33,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":443,"endColumn":46},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":551,"column":29,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":551,"endColumn":42}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Codex/CodexChamber.jsx\r\n// Compass - Orientation chamber with questions as center of gravity\r\n// Option 3: Card backs present but dormant until question selected\r\nimport React, { useState, useMemo } from 'react';\r\nimport { codexCards, CODEX_MODES } from './codexCards.js';\r\nimport { CodexTablet } from './CodexTablet.jsx';\r\n\r\nconst CARDS_PER_PAGE = 6;\r\n\r\n// Recognition statements ΓÇö confessions, not quotes\r\nconst ORIENTATION_QUESTIONS = {\r\n    mirror: {\r\n        line1: \"I can't tell what's actually happening\",\r\n        line2: \"anymore.\",\r\n        cardIds: ['001', '003'],\r\n    },\r\n    resonator: {\r\n        line1: \"Something in me is reacting faster\",\r\n        line2: \"than I can stay with.\",\r\n        cardIds: ['002', '007', '009'],\r\n    },\r\n    prism: {\r\n        line1: \"The story feels stuck\",\r\n        line2: \"ΓÇö but unfinished.\",\r\n        cardIds: ['005', '008'],\r\n    },\r\n    sword: {\r\n        line1: \"I know what matters.\",\r\n        line2: \"I keep delaying.\",\r\n        cardIds: ['004', '006', '010'],\r\n    },\r\n};\r\n\r\n// Face-down card component\r\nfunction DormantCard({ isAwakened = false, isHighlighted = false, onClick, card, expandedCard, setExpandedCard, onNavigate }) {\r\n    if (isAwakened) {\r\n        // Show the real card when awakened\r\n        return (\r\n            <CodexTablet\r\n                card={card}\r\n                isExpanded={expandedCard === card.id}\r\n                isFocused={false}\r\n                isDimmed={!isHighlighted}\r\n                isHighlighted={isHighlighted}\r\n                onToggle={() => setExpandedCard(expandedCard === card.id ? null : card.id)}\r\n                onNavigate={onNavigate}\r\n            />\r\n        );\r\n    }\r\n\r\n    // Dormant state - face-down card back\r\n    return (\r\n        <div\r\n            className=\"cursor-default flex items-center justify-center\"\r\n            style={{\r\n                background: 'linear-gradient(180deg, rgba(18, 14, 28, 0.4) 0%, rgba(12, 8, 18, 0.5) 100%)',\r\n                border: '1px solid rgba(250, 208, 120, 0.08)',\r\n                borderRadius: '8px',\r\n                minHeight: '180px',\r\n                opacity: 0.4,\r\n                transition: 'all 0.5s ease-out',\r\n            }}\r\n        >\r\n            {/* Card back pattern - subtle geometry */}\r\n            <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" style={{ opacity: 0.15 }}>\r\n                <path\r\n                    d=\"M20 5 L35 20 L20 35 L5 20 Z\"\r\n                    fill=\"none\"\r\n                    stroke=\"rgba(250, 208, 120, 0.5)\"\r\n                    strokeWidth=\"0.5\"\r\n                />\r\n                <circle cx=\"20\" cy=\"20\" r=\"6\" fill=\"none\" stroke=\"rgba(250, 208, 120, 0.3)\" strokeWidth=\"0.5\" />\r\n            </svg>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function CodexChamber({ onClose, onNavigate }) {\r\n    const [activeQuestion, setActiveQuestion] = useState(null);\r\n    const [hoveredQuestion, setHoveredQuestion] = useState(null);\r\n    const [expandedCard, setExpandedCard] = useState(null);\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n\r\n    // Always show all cards\r\n    const filteredCards = codexCards;\r\n\r\n    // Get highlighted card IDs based on active question\r\n    const highlightedCardIds = useMemo(() => {\r\n        if (!activeQuestion) return new Set();\r\n        return new Set(ORIENTATION_QUESTIONS[activeQuestion]?.cardIds || []);\r\n    }, [activeQuestion]);\r\n\r\n    // Pagination\r\n    const totalPages = Math.ceil(filteredCards.length / CARDS_PER_PAGE);\r\n    const paginatedCards = useMemo(() => {\r\n        const start = currentPage * CARDS_PER_PAGE;\r\n        return filteredCards.slice(start, start + CARDS_PER_PAGE);\r\n    }, [filteredCards, currentPage]);\r\n\r\n    const handleQuestionClick = (questionKey) => {\r\n        if (activeQuestion === questionKey) {\r\n            setActiveQuestion(null);\r\n        } else {\r\n            setActiveQuestion(questionKey);\r\n            setCurrentPage(0);\r\n        }\r\n    };\r\n\r\n    const handlePrevPage = () => {\r\n        if (currentPage > 0) {\r\n            setCurrentPage(currentPage - 1);\r\n            setExpandedCard(null);\r\n        }\r\n    };\r\n\r\n    const handleNextPage = () => {\r\n        if (currentPage < totalPages - 1) {\r\n            setCurrentPage(currentPage + 1);\r\n            setExpandedCard(null);\r\n        }\r\n    };\r\n\r\n    const isAwakened = activeQuestion !== null;\r\n\r\n    return (\r\n        <div className=\"compass-chamber w-full flex flex-col relative overflow-visible\">\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                PRE-MOTION BACKGROUND ΓÇö Subtle directional tension\r\n                Each quadrant drifts in mode-aligned direction (barely perceptible)\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n            <div className=\"absolute inset-0 pointer-events-none overflow-hidden\" style={{ opacity: 0.25 }}>\r\n                {/* Mirror: vertical stillness with slow breath */}\r\n                <div\r\n                    className=\"absolute top-0 left-0 w-1/2 h-1/2 transition-opacity duration-500\"\r\n                    style={{\r\n                        background: 'radial-gradient(ellipse at center, rgba(167, 139, 250, 0.3), transparent 70%)',\r\n                        animation: 'compass-drift-mirror 12s ease-in-out infinite',\r\n                        opacity: hoveredQuestion === 'mirror' ? 3 : 1,\r\n                    }}\r\n                />\r\n                {/* Resonator: horizontal oscillation */}\r\n                <div\r\n                    className=\"absolute top-0 right-0 w-1/2 h-1/2 transition-opacity duration-500\"\r\n                    style={{\r\n                        background: 'radial-gradient(ellipse at center, rgba(59, 130, 246, 0.3), transparent 70%)',\r\n                        animation: 'compass-drift-resonator 8s ease-in-out infinite',\r\n                        opacity: hoveredQuestion === 'resonator' ? 3 : 1,\r\n                    }}\r\n                />\r\n                {/* Prism: radial breathing */}\r\n                <div\r\n                    className=\"absolute bottom-0 left-0 w-1/2 h-1/2 transition-opacity duration-500\"\r\n                    style={{\r\n                        background: 'radial-gradient(ellipse at center, rgba(52, 211, 153, 0.3), transparent 70%)',\r\n                        animation: 'compass-drift-prism 15s ease-in-out infinite',\r\n                        opacity: hoveredQuestion === 'prism' ? 3 : 1,\r\n                    }}\r\n                />\r\n                {/* Sword: forward pressure (subtle push up) */}\r\n                <div\r\n                    className=\"absolute bottom-0 right-0 w-1/2 h-1/2 transition-opacity duration-500\"\r\n                    style={{\r\n                        background: 'radial-gradient(ellipse at center, rgba(251, 146, 60, 0.3), transparent 70%)',\r\n                        animation: 'compass-drift-sword 10s ease-in-out infinite',\r\n                        opacity: hoveredQuestion === 'sword' ? 3 : 1,\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Pre-motion animation keyframes (EXAGGERATED FOR TESTING) */}\r\n            <style>{`\r\n                @keyframes compass-drift-mirror {\r\n                    0%, 100% { transform: translateY(0) scale(1); }\r\n                    50% { transform: translateY(15px) scale(1.08); }\r\n                }\r\n                @keyframes compass-drift-resonator {\r\n                    0%, 100% { transform: translateX(0); }\r\n                    50% { transform: translateX(20px); }\r\n                }\r\n                @keyframes compass-drift-prism {\r\n                    0%, 100% { transform: scale(1); opacity: 1; }\r\n                    50% { transform: scale(1.2); opacity: 0.5; }\r\n                }\r\n                @keyframes compass-drift-sword {\r\n                    0%, 100% { transform: translateY(0); }\r\n                    50% { transform: translateY(-15px); }\r\n                }\r\n            `}</style>\r\n\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                COMPASS HEADER ΓÇö Dynamic: shows mode name when selected\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n            <div className=\"text-center pt-4 pb-2 relative z-10\">\r\n                <h1\r\n                    className=\"transition-all duration-500\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-display)\",\r\n                        fontSize: '14px',\r\n                        fontWeight: 700,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        color: activeQuestion\r\n                            ? CODEX_MODES[activeQuestion]?.color || 'rgba(245, 209, 138, 0.5)'\r\n                            : 'rgba(245, 209, 138, 0.3)',\r\n                        textTransform: 'uppercase',\r\n                    }}\r\n                >\r\n                    {activeQuestion ? CODEX_MODES[activeQuestion]?.name : 'Compass'}\r\n                </h1>\r\n            </div>\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                CENTER OF GRAVITY ΓÇö The Four Questions\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n            <div className=\"px-6 py-4 relative\" style={{ overflow: 'visible' }}>\r\n\r\n                {/* DIRECTIONAL ANCHORS ΓÇö Icons orbit the question field corners */}\r\n                <div className=\"absolute inset-0 pointer-events-none\">\r\n                    {/* Top-left: Mirror */}\r\n                    <div className=\"absolute transition-all duration-700\"\r\n                        style={{\r\n                            top: '-60px',\r\n                            left: '-60px',\r\n                            opacity: activeQuestion === 'mirror' ? 1 : 0.4,\r\n                            filter: activeQuestion && activeQuestion !== 'mirror' ? 'blur(2px) brightness(0.7)' : 'blur(0px)',\r\n                        }}>\r\n                        <div className=\"absolute inset-0 transition-opacity duration-700\"\r\n                            style={{\r\n                                width: '140px', height: '140px',\r\n                                transform: 'translate(-20px, -20px)',\r\n                                background: `radial-gradient(circle, ${CODEX_MODES.mirror.color}20, transparent 70%)`,\r\n                                opacity: activeQuestion === 'mirror' ? 1 : 0,\r\n                            }} />\r\n                        <img src={`${import.meta.env.BASE_URL}codex/mirror.png`} alt=\"\"\r\n                            style={{\r\n                                width: '100px', height: '100px', objectFit: 'contain',\r\n                                mixBlendMode: 'lighten',\r\n                                filter: 'hue-rotate(180deg) saturate(0.5)',\r\n                                animation: activeQuestion === 'mirror' ? 'icon-breathe 7s ease-in-out infinite' : 'none',\r\n                            }} />\r\n                    </div>\r\n                    {/* Top-right: Sword */}\r\n                    <div className=\"absolute transition-all duration-700\"\r\n                        style={{\r\n                            top: '-60px',\r\n                            right: '-60px',\r\n                            opacity: activeQuestion === 'sword' ? 1 : 0.4,\r\n                            filter: activeQuestion && activeQuestion !== 'sword' ? 'blur(2px) brightness(0.7)' : 'blur(0px)',\r\n                        }}>\r\n                        <div className=\"absolute inset-0 transition-opacity duration-700\"\r\n                            style={{\r\n                                width: '140px', height: '140px',\r\n                                transform: 'translate(-20px, -20px)',\r\n                                background: `radial-gradient(circle, ${CODEX_MODES.sword.color}20, transparent 70%)`,\r\n                                opacity: activeQuestion === 'sword' ? 1 : 0,\r\n                            }} />\r\n                        <img src={`${import.meta.env.BASE_URL}codex/sword.png`} alt=\"\"\r\n                            style={{\r\n                                width: '100px', height: '100px', objectFit: 'contain',\r\n                                mixBlendMode: 'lighten',\r\n                                filter: 'hue-rotate(180deg) saturate(0.5)',\r\n                                animation: activeQuestion === 'sword' ? 'icon-breathe 7s ease-in-out infinite' : 'none',\r\n                            }} />\r\n                    </div>\r\n                    {/* Bottom-left: Resonator */}\r\n                    <div className=\"absolute transition-all duration-700\"\r\n                        style={{\r\n                            bottom: '-60px',\r\n                            left: '-60px',\r\n                            opacity: activeQuestion === 'resonator' ? 1 : 0.4,\r\n                            filter: activeQuestion && activeQuestion !== 'resonator' ? 'blur(2px) brightness(0.7)' : 'blur(0px)',\r\n                        }}>\r\n                        <div className=\"absolute inset-0 transition-opacity duration-700\"\r\n                            style={{\r\n                                width: '140px', height: '140px',\r\n                                transform: 'translate(-20px, -20px)',\r\n                                background: `radial-gradient(circle, ${CODEX_MODES.resonator.color}20, transparent 70%)`,\r\n                                opacity: activeQuestion === 'resonator' ? 1 : 0,\r\n                            }} />\r\n                        <img src={`${import.meta.env.BASE_URL}codex/resonator.png`} alt=\"\"\r\n                            style={{\r\n                                width: '100px', height: '100px', objectFit: 'contain',\r\n                                mixBlendMode: 'lighten',\r\n                                filter: 'hue-rotate(180deg) saturate(0.5)',\r\n                                animation: activeQuestion === 'resonator' ? 'icon-breathe 7s ease-in-out infinite' : 'none',\r\n                            }} />\r\n                    </div>\r\n                    {/* Bottom-right: Prism */}\r\n                    <div className=\"absolute transition-all duration-700\"\r\n                        style={{\r\n                            bottom: '-60px',\r\n                            right: '-60px',\r\n                            opacity: activeQuestion === 'prism' ? 1 : 0.4,\r\n                            filter: activeQuestion && activeQuestion !== 'prism' ? 'blur(2px) brightness(0.7)' : 'blur(0px)',\r\n                        }}>\r\n                        <div className=\"absolute inset-0 transition-opacity duration-700\"\r\n                            style={{\r\n                                width: '140px', height: '140px',\r\n                                transform: 'translate(-20px, -20px)',\r\n                                background: `radial-gradient(circle, ${CODEX_MODES.prism.color}20, transparent 70%)`,\r\n                                opacity: activeQuestion === 'prism' ? 1 : 0,\r\n                            }} />\r\n                        <img src={`${import.meta.env.BASE_URL}codex/prism.png`} alt=\"\"\r\n                            style={{\r\n                                width: '100px', height: '100px', objectFit: 'contain',\r\n                                mixBlendMode: 'lighten',\r\n                                filter: 'hue-rotate(180deg) saturate(0.5)',\r\n                                animation: activeQuestion === 'prism' ? 'icon-breathe 7s ease-in-out infinite' : 'none',\r\n                            }} />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Icon breathing animation */}\r\n                <style>{`\r\n                    @keyframes icon-breathe {\r\n                        0%, 100% { transform: scale(1); opacity: 1; }\r\n                        50% { transform: scale(1.05); opacity: 0.9; }\r\n                    }\r\n                `}</style>\r\n\r\n                {/* Permission language ΓÇö above questions */}\r\n                <p\r\n                    className=\"mb-4 text-center relative z-10\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-display)\",\r\n                        fontWeight: 600,\r\n                        letterSpacing: \"var(--tracking-mythic)\",\r\n                        fontSize: '10px',\r\n                        letterSpacing: '0.1em',\r\n                        color: 'rgba(253, 251, 245, 0.3)',\r\n                    }}\r\n                >\r\n                    You don't have to be sure. Notice what pulls at you.\r\n                </p>\r\n\r\n                {/* The Questions ΓÇö Large, interactive anchors */}\r\n                {/* Container gets mode-specific deformation when hovering */}\r\n                <div\r\n                    className=\"w-full max-w-md mx-auto space-y-4 transition-all duration-500\"\r\n                    style={{\r\n                        // Mode-specific UI deformation on hover (only when not active)\r\n                        filter: !activeQuestion && hoveredQuestion === 'mirror'\r\n                            ? 'blur(2px) brightness(0.7)' // Mirror: everything QUIETS significantly\r\n                            : !activeQuestion && hoveredQuestion === 'sword'\r\n                                ? 'contrast(1.5) brightness(1.2)' // Sword: HIGH contrast and brightness\r\n                                : !activeQuestion && hoveredQuestion === 'prism'\r\n                                    ? 'hue-rotate(15deg) saturate(1.5)' // Prism: STRONG chromatic shift\r\n                                    : !activeQuestion && hoveredQuestion === 'resonator'\r\n                                        ? 'brightness(1.15)' // Resonator: BRIGHT pulse\r\n                                        : 'none',\r\n                        transform: !activeQuestion && hoveredQuestion === 'resonator'\r\n                            ? 'scale(1.03)' // Resonator: VISIBLE scale pulse\r\n                            : 'scale(1)',\r\n                    }}\r\n                >\r\n                    {Object.entries(ORIENTATION_QUESTIONS).map(([key, question]) => {\r\n                        const isActive = activeQuestion === key;\r\n                        const isHovered = hoveredQuestion === key;\r\n                        const isDimmed = activeQuestion && !isActive;\r\n                        const modeColor = CODEX_MODES[key]?.color || 'rgba(255,255,255,0.7)';\r\n\r\n                        return (\r\n                            <button\r\n                                key={key}\r\n                                onClick={() => handleQuestionClick(key)}\r\n                                onMouseEnter={() => setHoveredQuestion(key)}\r\n                                onMouseLeave={() => setHoveredQuestion(null)}\r\n                                className=\"w-full text-center transition-all duration-400 py-2 px-4 rounded-lg\"\r\n                                style={{\r\n                                    opacity: isDimmed ? 0.2 : 1,\r\n                                    transform: isActive ? 'scale(1.02)' : isHovered ? 'scale(1.01)' : 'scale(1)',\r\n                                    filter: isDimmed ? 'blur(1px)' : 'none',\r\n                                    background: isActive\r\n                                        ? `linear-gradient(135deg, ${modeColor}12, ${modeColor}06)`\r\n                                        : isHovered\r\n                                            ? 'rgba(255, 255, 255, 0.02)'\r\n                                            : 'transparent',\r\n                                    border: isActive\r\n                                        ? `1px solid ${modeColor}40`\r\n                                        : '1px solid transparent',\r\n                                    boxShadow: isActive\r\n                                        ? `0 0 25px ${modeColor}20`\r\n                                        : isHovered\r\n                                            ? `0 0 15px ${modeColor}10`\r\n                                            : 'none',\r\n                                }}\r\n                            >\r\n                                <p\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-body)\",\r\n                                        fontSize: isActive ? '18px' : '16px',\r\n                                        fontWeight: 500,\r\n                                        letterSpacing: '0.01em',\r\n                                        lineHeight: 1.35,\r\n                                        color: isActive\r\n                                            ? modeColor\r\n                                            : isHovered\r\n                                                ? 'rgba(253, 251, 245, 0.8)'\r\n                                                : 'rgba(253, 251, 245, 0.65)',\r\n                                        textShadow: isActive\r\n                                            ? `0 0 15px ${modeColor}30`\r\n                                            : 'none',\r\n                                        transition: 'all 0.3s ease-out',\r\n                                    }}\r\n                                >\r\n                                    {question.line1}<br />\r\n                                    {question.line2}\r\n                                </p>\r\n                            </button>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                {/* Mode totem removed - now using corner icons instead */}\r\n\r\n                {/* Instruction after selection */}\r\n                {activeQuestion && (\r\n                    <>\r\n                        <p\r\n                            className=\"mt-3 text-center\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-display)\",\r\n                                fontWeight: 700,\r\n                                letterSpacing: \"var(--tracking-mythic)\",\r\n                                fontSize: '9px',\r\n                                letterSpacing: '0.08em',\r\n                                color: CODEX_MODES[activeQuestion]?.color || 'rgba(253, 251, 245, 0.4)',\r\n                                opacity: 0.5,\r\n                            }}\r\n                        >\r\n                            Let this guide what you notice.\r\n                        </p>\r\n\r\n                        {/* Diagnostic reminder - appears below instruction */}\r\n                        <p\r\n                            className=\"mt-2 text-center\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-display)\",\r\n                                fontWeight: 700,\r\n                                letterSpacing: \"var(--tracking-mythic)\",\r\n                                fontSize: '8px',\r\n                                letterSpacing: '0.12em',\r\n                                color: 'rgba(253, 251, 245, 0.3)',\r\n                                fontStyle: 'italic',\r\n                            }}\r\n                        >\r\n                            (This reflects what's active now ΓÇö not what you are.)\r\n                        </p>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                CARD GRID ΓÇö Always visible, but dormant until awakened\r\n                Cards show as face-down backs until a question is selected\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n            <div className=\"pb-6 pt-2\">\r\n                {/* Divider */}\r\n                <div\r\n                    className=\"mx-auto mb-4\"\r\n                    style={{\r\n                        width: '40px',\r\n                        height: '1px',\r\n                        background: activeQuestion\r\n                            ? `linear-gradient(90deg, transparent, ${CODEX_MODES[activeQuestion]?.color || 'rgba(250, 208, 120, 0.3)'}40, transparent)`\r\n                            : 'linear-gradient(90deg, transparent, rgba(250, 208, 120, 0.15), transparent)',\r\n                    }}\r\n                />\r\n\r\n                {/* Pagination arrows + Card Grid */}\r\n                <div className=\"relative\">\r\n                    {currentPage > 0 && isAwakened && (\r\n                        <button\r\n                            onClick={handlePrevPage}\r\n                            className=\"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 z-10 w-7 h-7 flex items-center justify-center rounded-full bg-black/40 border border-white/15 text-white/50 hover:text-white hover:border-white/30 transition-all\"\r\n                            style={{ fontSize: '14px' }}\r\n                        >\r\n                            ΓåÉ\r\n                        </button>\r\n                    )}\r\n\r\n                    {currentPage < totalPages - 1 && isAwakened && (\r\n                        <button\r\n                            onClick={handleNextPage}\r\n                            className=\"absolute right-0 top-1/2 -translate-y-1/2 translate-x-1 z-10 w-7 h-7 flex items-center justify-center rounded-full bg-black/40 border border-white/15 text-white/50 hover:text-white hover:border-white/30 transition-all\"\r\n                            style={{ fontSize: '14px' }}\r\n                        >\r\n                            ΓåÆ\r\n                        </button>\r\n                    )}\r\n\r\n                    <div\r\n                        className=\"grid gap-3 mx-6\"\r\n                        style={{\r\n                            gridTemplateColumns: 'repeat(2, 1fr)',\r\n                            gridTemplateRows: 'repeat(3, auto)',\r\n                        }}\r\n                    >\r\n                        {paginatedCards.map(card => {\r\n                            const isHighlighted = highlightedCardIds.has(card.id);\r\n\r\n                            return (\r\n                                <DormantCard\r\n                                    key={card.id}\r\n                                    card={card}\r\n                                    isAwakened={isAwakened}\r\n                                    isHighlighted={isHighlighted}\r\n                                    expandedCard={expandedCard}\r\n                                    setExpandedCard={setExpandedCard}\r\n                                    onNavigate={onNavigate}\r\n                                />\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Page indicator - only when awakened */}\r\n                {totalPages > 1 && isAwakened && (\r\n                    <div className=\"flex justify-center items-center gap-2 mt-4\">\r\n                        {Array.from({ length: totalPages }).map((_, idx) => (\r\n                            <button\r\n                                key={idx}\r\n                                onClick={() => { setCurrentPage(idx); setExpandedCard(null); }}\r\n                                className=\"w-1.5 h-1.5 rounded-full transition-all\"\r\n                                style={{\r\n                                    backgroundColor: idx === currentPage\r\n                                        ? CODEX_MODES[activeQuestion]?.color || 'rgba(250, 208, 120, 0.8)'\r\n                                        : 'rgba(255, 255, 255, 0.15)',\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                EXIT ΓÇö Reduced contrast\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n            {onClose && (\r\n                <div className=\"text-center pb-4\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"transition-colors hover:text-white/40\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontWeight: 700,\r\n                            letterSpacing: \"var(--tracking-mythic)\",\r\n                            fontSize: '9px',\r\n                            letterSpacing: '0.1em',\r\n                            color: 'rgba(253, 251, 245, 0.2)',\r\n                        }}\r\n                    >\r\n                        ΓåÉ return\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Codex\\CodexTablet.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isExpanded' is assigned a value but never used.","line":61,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"isExpanded"},"fix":{"range":[2503,2523],"text":""},"desc":"Remove unused variable 'isExpanded'."}]},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":145,"column":25,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":145,"endColumn":38}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Codex/CodexTablet.jsx\r\n// Individual card component for the Codex system - Grid card style\r\nimport React from 'react';\r\nimport { CODEX_MODES } from './codexCards.js';\r\n\r\n// Mode geometry SVG icons\r\nconst ModeIcon = ({ mode }) => {\r\n    const modeData = CODEX_MODES[mode] || CODEX_MODES.mirror;\r\n\r\n    // Diamond frame with mode-specific inner geometry\r\n    return (\r\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" className=\"mode-icon\">\r\n            {/* Outer diamond frame */}\r\n            <path\r\n                d=\"M24 4 L44 24 L24 44 L4 24 Z\"\r\n                fill=\"none\"\r\n                stroke={modeData.color}\r\n                strokeWidth=\"1\"\r\n                opacity=\"0.6\"\r\n            />\r\n            {/* Inner diamond */}\r\n            <path\r\n                d=\"M24 12 L36 24 L24 36 L12 24 Z\"\r\n                fill=\"none\"\r\n                stroke={modeData.color}\r\n                strokeWidth=\"0.5\"\r\n                opacity=\"0.4\"\r\n            />\r\n            {/* Mode-specific center symbol */}\r\n            {mode === 'mirror' && (\r\n                <>\r\n                    {/* Vertical reflection line */}\r\n                    <line x1=\"24\" y1=\"16\" x2=\"24\" y2=\"32\" stroke={modeData.color} strokeWidth=\"1\" opacity=\"0.8\" />\r\n                    <circle cx=\"24\" cy=\"24\" r=\"3\" fill=\"none\" stroke={modeData.color} strokeWidth=\"0.5\" opacity=\"0.6\" />\r\n                </>\r\n            )}\r\n            {mode === 'resonator' && (\r\n                <>\r\n                    {/* Concentric circles */}\r\n                    <circle cx=\"24\" cy=\"24\" r=\"4\" fill=\"none\" stroke={modeData.color} strokeWidth=\"0.5\" opacity=\"0.8\" />\r\n                    <circle cx=\"24\" cy=\"24\" r=\"7\" fill=\"none\" stroke={modeData.color} strokeWidth=\"0.5\" opacity=\"0.5\" />\r\n                </>\r\n            )}\r\n            {mode === 'prism' && (\r\n                <>\r\n                    {/* Triangle */}\r\n                    <path d=\"M24 17 L31 31 L17 31 Z\" fill=\"none\" stroke={modeData.color} strokeWidth=\"0.75\" opacity=\"0.8\" />\r\n                </>\r\n            )}\r\n            {mode === 'sword' && (\r\n                <>\r\n                    {/* Cross / sword shape */}\r\n                    <line x1=\"24\" y1=\"16\" x2=\"24\" y2=\"32\" stroke={modeData.color} strokeWidth=\"1\" opacity=\"0.8\" />\r\n                    <line x1=\"18\" y1=\"20\" x2=\"30\" y2=\"20\" stroke={modeData.color} strokeWidth=\"0.75\" opacity=\"0.6\" />\r\n                </>\r\n            )}\r\n        </svg>\r\n    );\r\n};\r\n\r\nexport function CodexTablet({ card, isExpanded = false, isFocused = false, isDimmed = false, isHighlighted = false, onToggle, onNavigate }) {\r\n    const mode = CODEX_MODES[card.mode] || CODEX_MODES.mirror;\r\n\r\n    const handleBeginPractice = (e) => {\r\n        e.stopPropagation(); // Prevent card toggle\r\n        if (onNavigate) {\r\n            onNavigate('application');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"codex-tablet cursor-pointer flex flex-col\"\r\n            onClick={onToggle}\r\n            style={{\r\n                background: 'linear-gradient(180deg, rgba(18, 14, 28, 0.7) 0%, rgba(12, 8, 18, 0.85) 100%)',\r\n                border: `1px solid ${isHighlighted ? 'rgba(250, 208, 120, 0.6)' : isFocused ? 'rgba(250, 208, 120, 0.4)' : 'rgba(250, 208, 120, 0.25)'}`,\r\n                borderRadius: '8px',\r\n                padding: '16px 12px',\r\n                minHeight: '220px',\r\n                opacity: isDimmed ? 0.35 : 1,\r\n                filter: isDimmed ? 'blur(0.5px)' : 'none',\r\n                transform: isFocused || isHighlighted ? 'scale(1.02)' : 'scale(1)',\r\n                transition: 'all 0.4s ease-out',\r\n                position: 'relative',\r\n                zIndex: isFocused || isHighlighted ? 10 : 1,\r\n                boxShadow: isHighlighted\r\n                    ? `0 0 30px 10px ${mode.color}20, inset 0 0 20px ${mode.color}10`\r\n                    : isFocused\r\n                        ? `0 0 20px 5px ${mode.color}15`\r\n                        : 'none',\r\n            }}\r\n        >\r\n            {/* Mode icon top center */}\r\n            <div className=\"flex justify-center mb-3\">\r\n                <ModeIcon mode={card.mode} />\r\n            </div>\r\n\r\n            {/* Title */}\r\n            <h3\r\n                style={{\r\n                    fontFamily: \"var(--font-display)\",\r\n                    fontSize: '12px',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 'var(--tracking-wide)',\r\n                    color: 'rgba(253, 251, 245, 0.9)',\r\n                    textAlign: 'center',\r\n                    lineHeight: 1.3,\r\n                    marginBottom: '8px',\r\n                }}\r\n            >\r\n                {card.title}\r\n            </h3>\r\n\r\n            {/* Body text - more visible when highlighted */}\r\n            <p\r\n                className=\"flex-1\"\r\n                style={{\r\n                    fontFamily: \"var(--font-body)\",\r\n                    fontSize: '11px',\r\n                    fontWeight: 500,\r\n                    letterSpacing: '0.01em',\r\n                    fontStyle: 'italic',\r\n                    color: isHighlighted ? 'rgba(253, 251, 245, 0.7)' : 'rgba(253, 251, 245, 0.5)',\r\n                    textAlign: 'center',\r\n                    lineHeight: 1.5,\r\n                    transition: 'color 0.3s ease',\r\n                }}\r\n            >\r\n                {card.body}\r\n            </p>\r\n\r\n            {/* CTA - Now a clickable button */}\r\n            <div className=\"mt-auto pt-3\">\r\n                <button\r\n                    onClick={handleBeginPractice}\r\n                    className=\"w-full text-center hover:opacity-100 transition-opacity\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-display)\",\r\n                        fontWeight: 600,\r\n                        letterSpacing: \"var(--tracking-mythic)\",\r\n                        fontSize: '10px',\r\n                        color: mode.color,\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.1em',\r\n                        opacity: 0.8,\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        cursor: 'pointer',\r\n                    }}\r\n                >\r\n                    Begin practice ΓåÆ\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Codex\\codexCards.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CompactStatsCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'config' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":82,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"config"},"fix":{"range":[3333,3389],"text":""},"desc":"Remove unused variable 'config'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isSanctuary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":433,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":433,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"isSanctuary"},"fix":{"range":[20436,20484],"text":""},"desc":"Remove unused variable 'isSanctuary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'gradientAngle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":437,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":437,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"gradientAngle"},"fix":{"range":[20596,20609],"text":""},"desc":"Remove unused variable 'gradientAngle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'trajectory' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":513,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":513,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"trajectory"},"fix":{"range":[23594,23688],"text":""},"desc":"Remove unused variable 'trajectory'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has unnecessary dependencies: 'logsCount' and 'sessionsCount'. Either exclude them or remove the dependency array.","line":513,"column":56,"nodeType":"ArrayExpression","endLine":513,"endColumn":97,"suggestions":[{"desc":"Update the dependencies array to be: [getTrajectory]","fix":{"range":[23645,23686],"text":"[getTrajectory]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'sessionsCount'. Either exclude it or remove the dependency array.","line":520,"column":79,"nodeType":"ArrayExpression","endLine":520,"endColumn":134,"suggestions":[{"desc":"Update the dependencies array to be: [getWeeklyTimingOffsets, trackingDomain]","fix":{"range":[24097,24152],"text":"[getWeeklyTimingOffsets, trackingDomain]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'regimentProgress' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":524,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":524,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"regimentProgress"},"fix":{"range":[24307,24475],"text":""},"desc":"Remove unused variable 'regimentProgress'."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CompactStatsCard.jsx\r\n// Premium visual stats card with precision-of-time tracking\r\n// Targets the \"ancient relic / celestial technology\" aesthetic\r\n\r\nimport React, { useState, useRef, useEffect, useMemo } from 'react';\r\nimport { useProgressStore } from '../state/progressStore.js';\r\nimport { useTrackingStore } from '../state/trackingStore.js';\r\nimport { useDisplayModeStore } from \"../state/displayModeStore.js\";\r\nimport { calculateGradientAngle, getAvatarCenter } from \"../utils/dynamicLighting.js\";\r\nimport { useTheme } from '../context/ThemeContext';\r\n\r\n/**\r\n * THEME CONFIGURATION\r\n * Defines distinct visual rules for Light and Dark modes\r\n */\r\nconst THEME_CONFIG = {\r\n    light: {\r\n        accent: 'rgba(139, 159, 136, 0.85)', // Muted sage green, not bright lime\r\n        glow: 'rgba(139, 159, 136, 0.4)',\r\n        wellBg: 'rgba(245, 239, 230, 0.6)', // Warm cream\r\n        barBg: 'rgba(139, 115, 85, 0.12)', // Earth brown\r\n        textMain: 'rgba(35, 20, 10, 0.98)', // Even darker for maximum readability\r\n        textSub: 'rgba(65, 45, 25, 0.9)',\r\n        bgAsset: 'painted_card_organic.png', // Organic edges version\r\n        dabAssets: [\r\n            'textured_blob_1.png',\r\n            'textured_blob_2.png',\r\n            'textured_blob_3.png',\r\n            'textured_blob_4.png',\r\n            'textured_blob_5.png'\r\n        ],\r\n        canvasGrain: 'canvas_grain.png',\r\n        border: 'rgba(139, 115, 85, 0.25)',\r\n        wellBorder: 'rgba(139, 115, 85, 0.15)',\r\n        threadColor: 'rgba(139, 159, 136, 0.7)'\r\n    },\r\n    dark: {\r\n        accent: 'var(--accent-color)',\r\n        glow: 'var(--accent-glow)',\r\n        wellBg: 'rgba(10, 15, 25, 0.75)',\r\n        barBg: 'rgba(255, 255, 255, 0.05)',\r\n        textMain: 'rgba(253, 251, 245, 0.95)',\r\n        textSub: 'rgba(253, 251, 245, 0.5)',\r\n        streamAsset: 'filament_silk_alpha.png',\r\n        peakGem: 'gem_active_alpha.png',\r\n        lowGem: 'gem_low_alpha.png',\r\n        emptyGem: 'gem_empty_alpha.png',\r\n        progressAsset: 'progress_glow_alpha.png',\r\n        border: 'var(--accent-20)',\r\n        wellBorder: 'var(--accent-15)',\r\n        threadColor: 'var(--accent-color)'\r\n    }\r\n};\r\n\r\n/**\r\n * Tooltip Component - Positioned relative to page to avoid clipping\r\n */\r\nfunction Tooltip({ text, position }) {\r\n    if (!text || !position) return null;\r\n    return (\r\n        <div\r\n            className=\"fixed z-[100] px-3 py-1.5 rounded-lg bg-black/90 backdrop-blur-md border border-white/10 text-white text-[10px] pointer-events-none shadow-2xl transition-opacity duration-200\"\r\n            style={{\r\n                left: position.x,\r\n                top: position.y - 40,\r\n                transform: 'translateX(-50%)',\r\n                boxShadow: '0 4px 12px rgba(0,0,0,0.5)'\r\n            }}\r\n        >\r\n            <div className=\"font-bold tracking-wider uppercase mb-0.5 text-white/50\">{text.day}</div>\r\n            <div className=\"font-mono text-amber-200\">{text.time}</div>\r\n            {/* Tooltip arrow */}\r\n            <div className=\"absolute left-1/2 -bottom-1 -translate-x-1/2 w-2 h-2 bg-black/90 border-r border-b border-white/10 rotate-45\" />\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Regiment Progress - Glass Capsule Liquid Bar (Accent-Color Adaptive)\r\n */\r\nfunction RegimentProgress({ progress, isLight, r, g, b }) {\r\n    const config = THEME_CONFIG[isLight ? 'light' : 'dark'];\r\n    const percentage = Math.round(progress * 100);\r\n\r\n    // Convert RGB to CSS color\r\n    const accentRGB = `rgb(${r}, ${g}, ${b})`;\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-end gap-1 flex-1 w-full\">\r\n            {isLight ? (\r\n                <div className=\"w-full h-[32px] relative flex flex-col justify-center\">\r\n                    {/* Background brush stroke shape */}\r\n                    <svg className=\"absolute inset-0 w-full h-full\" viewBox=\"0 0 200 40\" preserveAspectRatio=\"none\">\r\n                        <path\r\n                            d=\"M2,20 Q50,15 100,20 T198,20\"\r\n                            fill=\"none\"\r\n                            stroke=\"rgba(180, 160, 140, 0.1)\"\r\n                            strokeWidth=\"12\"\r\n                            strokeLinecap=\"round\"\r\n                        />\r\n                    </svg>\r\n                    {/* Progress brush stroke */}\r\n                    <svg className=\"absolute inset-0 w-full h-full\" viewBox=\"0 0 200 40\" preserveAspectRatio=\"none\">\r\n                        <defs>\r\n                            <clipPath id=\"regimentClip\">\r\n                                <rect x=\"0\" y=\"0\" width={percentage * 2} height=\"40\" />\r\n                            </clipPath>\r\n                        </defs>\r\n                        <path\r\n                            d=\"M2,20 Q50,15 100,20 T198,20\"\r\n                            fill=\"none\"\r\n                            stroke={accentRGB}\r\n                            strokeWidth=\"14\"\r\n                            strokeLinecap=\"round\"\r\n                            style={{ opacity: 0.7, filter: 'blur(1px)' }}\r\n                            clipPath=\"url(#regimentClip)\"\r\n                            className=\"transition-all duration-1000\"\r\n                        />\r\n                    </svg>\r\n                    {/* Texture overlay from brush dab */}\r\n                    <img\r\n                        src={`${import.meta.env.BASE_URL}assets/brush_dab_1.png`}\r\n                        className=\"absolute inset-0 w-full h-full object-cover opacity-10 pointer-events-none mix-blend-overlay\"\r\n                        alt=\"\"\r\n                    />\r\n                </div>\r\n            ) : (\r\n                <div\r\n                    className=\"w-full h-[18px] rounded-full relative overflow-hidden backdrop-blur-sm\"\r\n                    style={{\r\n                        background: 'linear-gradient(135deg, rgba(15, 10, 20, 0.8), rgba(10, 5, 15, 0.9))',\r\n                        border: `1.5px solid rgba(${r}, ${g}, ${b}, 0.3)`,\r\n                        boxShadow: `inset 0 4px 12px rgba(0, 0, 0, 0.7),\r\n        inset 0 -1px 2px rgba(255, 255, 255, 0.05),\r\n            0 3px 8px rgba(${r}, ${g}, ${b}, 0.25)`,\r\n                        padding: '2px'\r\n                    }}\r\n                >\r\n                    {/* Multi-layered Glow */}\r\n                    <div\r\n                        className=\"absolute inset-y-0 left-0 rounded-full transition-all duration-1000 blur-lg opacity-40\"\r\n                        style={{\r\n                            width: `${percentage}%`,\r\n                            background: `radial-gradient(ellipse at center, ${accentRGB}, transparent 70%)`\r\n                        }}\r\n                    />\r\n                    <div\r\n                        className=\"absolute inset-y-0 left-0 rounded-full transition-all duration-1000 blur-md opacity-30\"\r\n                        style={{\r\n                            width: `${percentage}%`,\r\n                            background: accentRGB\r\n                        }}\r\n                    />\r\n\r\n                    {/* Dynamic Liquid Glass Bar */}\r\n                    <div\r\n                        className=\"h-full rounded-full transition-all duration-1000 ease-out relative z-10\"\r\n                        style={{\r\n                            width: `${percentage}%`,\r\n                            background: `linear-gradient(135deg,\r\n                    rgba(${r}, ${g}, ${b}, 0.85) 0%,\r\n                    rgba(${r}, ${g}, ${b}, 1) 50%,\r\n                    rgba(${r}, ${g}, ${b}, 0.75) 100%)`,\r\n                            boxShadow: `0 0 12px rgba(${r}, ${g}, ${b}, 0.5),\r\n        inset 0 1px 2px rgba(255, 255, 255, 0.3)`\r\n                        }}\r\n                    >\r\n                        {/* Plasma Shimmer */}\r\n                        <div\r\n                            className=\"absolute inset-0 rounded-full\"\r\n                            style={{\r\n                                background: 'linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%)',\r\n                                animation: 'shimmer 3s ease-in-out infinite',\r\n                                backgroundSize: '200% 100%'\r\n                            }}\r\n                        />\r\n                        {/* Inner Highlight */}\r\n                        <div\r\n                            className=\"absolute inset-0 rounded-full\"\r\n                            style={{\r\n                                background: 'linear-gradient(180deg, rgba(255, 255, 255, 0.25) 0%, transparent 50%)'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Capsule Specular Highlight */}\r\n                    <div\r\n                        className=\"absolute inset-x-4 top-[3px] h-[6px] rounded-full blur-[2px] z-20 pointer-events-none\"\r\n                        style={{\r\n                            background: 'linear-gradient(180deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%)'\r\n                        }}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            {/* Shimmer Animation */}\r\n            <style>{`\r\n@keyframes shimmer {\r\n    0% { background-position: -200% 0; }\r\n    100% { background-position: 200% 0; }\r\n}\r\n`}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Precision Timeline - 5-Level Timing Architecture\r\n */\r\nfunction PrecisionTimeline({ weekOffsets, isLight, r, g, b }) {\r\n    const config = THEME_CONFIG[isLight ? 'light' : 'dark'];\r\n    const days = ['M', 'T', 'W', 'T', 'F', 'S', 'S'];\r\n    const [hoverInfo, setHoverInfo] = useState(null);\r\n\r\n    // 5-Level Snap Logic\r\n    const getVerticalPosition = (offset) => {\r\n        if (offset === null) return null;\r\n        \r\n        // Exact: +/- 1 min (Level 3 - Center)\r\n        if (Math.abs(offset) <= 1) return 3;\r\n        \r\n        // Early\r\n        if (offset > 1) {\r\n            if (offset >= 8) return 5; // Level 5 (Top) - ΓëÑ 10m (using 8 as snap threshold)\r\n            return 4; // Level 4 - ~5m\r\n        }\r\n        \r\n        // Late\r\n        if (offset < -1) {\r\n            if (offset <= -8) return 1; // Level 1 (Bottom) - ΓëÑ 10m\r\n            return 2; // Level 2 - ~5m\r\n        }\r\n        \r\n        return 3;\r\n    };\r\n\r\n    const slotHeights = {\r\n        5: 15,  // Top (Early 10m+)\r\n        4: 35,  // Upper (Early 5m)\r\n        3: 55,  // Center (Exact)\r\n        2: 75,  // Lower (Late 5m)\r\n        1: 95   // Bottom (Late 10m+)\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"w-full relative mt-4 pt-5 pb-6 rounded-[28px] transition-all duration-700\"\r\n            style={{\r\n                background: isLight\r\n                    ? 'linear-gradient(135deg, rgba(252, 248, 240, 0.45) 0%, rgba(248, 244, 235, 0.5) 50%, rgba(245, 240, 230, 0.45) 100%)'\r\n                    : config.wellBg,\r\n                backdropFilter: 'blur(15px)',\r\n                WebkitBackdropFilter: 'blur(15px)',\r\n                border: `1px solid ${config.border}`,\r\n                borderRadius: '28px',\r\n                boxShadow: isLight\r\n                    ? 'inset 0 2px 6px rgba(255,255,255,0.5), 0 10px 25px rgba(0,0,0,0.05)'\r\n                    : 'inset 0 6px 25px rgba(0,0,0,0.6), 0 20px 50px rgba(0,0,0,0.5)',\r\n                marginLeft: '40px', // Make room for labels on the left\r\n                width: 'calc(100% - 40px)'\r\n            }}\r\n        >\r\n            {/* Header Text - ABOVE the chart, more legible */}\r\n            <div\r\n                className=\"text-[9px] font-black uppercase tracking-[0.3em] text-center mb-2 relative z-10\"\r\n                style={{ \r\n                    color: config.textMain, \r\n                    fontFamily: 'var(--font-display)',\r\n                    opacity: 0.7,\r\n                    textShadow: isLight \r\n                        ? '0 1px 2px rgba(255,255,255,0.9), 0 0 4px rgba(255,255,255,0.5)' \r\n                        : '0 1px 2px rgba(0,0,0,0.5)'\r\n                }}\r\n            >\r\n                Timing Precision ΓÇó 5-Level Scale\r\n            </div>\r\n\r\n            {/* Chart Container */}\r\n            <div className=\"relative\">\r\n                {/* Guide Threads (Horizontal lines) */}\r\n                <div className=\"absolute inset-x-0 top-0 bottom-[40px] px-8 flex flex-col justify-between pointer-events-none opacity-10\">\r\n                {[5, 4, 3, 2, 1].map(lvl => (\r\n                    <div key={lvl} className=\"w-full h-px\" style={{ background: config.textMain, borderTop: lvl === 3 ? '1px dashed' : 'none' }} />\r\n                ))}\r\n            </div>\r\n\r\n            {/* Scale Labels - OUTSIDE chart on the left */}\r\n            <div \r\n                className=\"absolute left-[-38px] top-[20px] bottom-[40px] w-[32px] flex flex-col justify-between items-end text-[8px] font-bold opacity-50 pointer-events-none uppercase tracking-tight pr-1\" \r\n                style={{ color: config.textMain }}\r\n            >\r\n                <span>+10m</span>\r\n                <span>+5m</span>\r\n                <span className=\"opacity-100 font-black\">Exact</span>\r\n                <span>-5m</span>\r\n                <span>-10m</span>\r\n            </div>\r\n\r\n            {/* Main Chart Area */}\r\n            <div className=\"flex justify-between items-start pl-3 pr-12 relative z-10 h-[110px] pt-2\">\r\n                {days.map((day, i) => {\r\n                    const data = weekOffsets[i] || { offsetMinutes: null, practiced: false };\r\n                    const slot = getVerticalPosition(data.offsetMinutes);\r\n                    const yPos = slot ? slotHeights[slot] : null;\r\n                    const isActive = data.practiced && slot !== null;\r\n\r\n                    return (\r\n                        <div\r\n                            key={i}\r\n                            className=\"flex flex-col items-center relative flex-1\"\r\n                            onMouseEnter={(e) => {\r\n                                if (!isActive) return;\r\n                                const rect = e.currentTarget.getBoundingClientRect();\r\n                                setHoverInfo({\r\n                                    day: day + ' TIMING',\r\n                                    time: data.offsetMinutes === 0 ? 'Exactly on time' : \r\n                                          data.offsetMinutes > 0 ? `${data.offsetMinutes.toFixed(0)}m early` : \r\n                                          `${Math.abs(data.offsetMinutes).toFixed(0)}m late`,\r\n                                    x: rect.left + rect.width / 2,\r\n                                    y: rect.top + (yPos || 0)\r\n                                });\r\n                            }}\r\n                            onMouseLeave={() => setHoverInfo(null)}\r\n                        >\r\n                            {/* Neural Connectors (Vertical Lines) */}\r\n                            <div \r\n                                className=\"absolute top-0 bottom-[-30px] w-px opacity-5\" \r\n                                style={{ background: config.textMain, left: '50%' }} \r\n                            />\r\n\r\n                            {/* Data Point - Always show blob, adjust opacity for inactive */}\r\n                            <div \r\n                                className=\"relative transition-all duration-700 ease-out\"\r\n                                style={{ \r\n                                    transform: `translateY(${isActive ? yPos : 55}px)`,\r\n                                    opacity: isActive ? 1 : 0.25\r\n                                }}\r\n                            >\r\n                                {isLight ? (\r\n                                    <img\r\n                                        src={`${import.meta.env.BASE_URL}assets/textured_blob_${(i % 5) + 1}.png`}\r\n                                        className=\"w-7 h-7 object-contain\"\r\n                                        alt=\"\"\r\n                                        style={{\r\n                                            filter: isActive ? (() => {\r\n                                                const max = Math.max(r, g, b) / 255;\r\n                                                const min = Math.min(r, g, b) / 255;\r\n                                                let h = 0;\r\n                                                if (max !== min) {\r\n                                                    const d = max - min;\r\n                                                    const rn = r / 255, gn = g / 255, bn = b / 255;\r\n                                                    if (max === rn) h = ((gn - bn) / d + (gn < bn ? 6 : 0)) / 6;\r\n                                                    else if (max === gn) h = ((bn - rn) / d + 2) / 6;\r\n                                                    else h = ((rn - gn) / d + 4) / 6;\r\n                                                }\r\n                                                const targetHue = Math.round(h * 360);\r\n                                                return `hue-rotate(${targetHue - 120}deg) saturate(1.2)`;\r\n                                            })() : 'grayscale(100%)'\r\n                                        }}\r\n                                    />\r\n                                ) : (\r\n                                    <div\r\n                                        className=\"w-3 h-3 rounded-full border-2 transition-all duration-300\"\r\n                                        style={{\r\n                                            background: isActive ? `rgb(${r}, ${g}, ${b})` : 'transparent',\r\n                                            borderColor: isActive ? `rgba(${r}, ${g}, ${b}, 0.5)` : config.border,\r\n                                            boxShadow: isActive ? `0 0 10px rgba(${r}, ${g}, ${b}, 0.3)` : 'none'\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            \r\n            {/* Day Labels Row - Below chart area */}\r\n            <div className=\"flex justify-between items-center pl-1 pr-6 mt-4 relative z-10\">\r\n                {days.map((day, i) => {\r\n                    const data = weekOffsets[i] || { practiced: false };\r\n                    return (\r\n                        <div key={i} className=\"flex-1 flex justify-center\">\r\n                            <span\r\n                                className=\"text-[10px] font-black\"\r\n                                style={{\r\n                                    color: config.textMain,\r\n                                    opacity: data.practiced ? 0.8 : 0.2,\r\n                                    fontFamily: 'var(--font-display)'\r\n                                }}\r\n                            >\r\n                                {day}\r\n                            </span>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Tooltip Overlay */}\r\n            <Tooltip text={hoverInfo} position={hoverInfo} />\r\n            </div>{/* End Chart Container */}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Metric Ring Component\r\n */\r\nfunction MetricRing({ label, value, isLight }) {\r\n    const config = THEME_CONFIG[isLight ? 'light' : 'dark'];\r\n    return (\r\n        <div className=\"flex flex-col items-center relative\">\r\n            <div className=\"relative w-16 h-16 flex items-center justify-center\">\r\n                {/* Decorative outer dash ring */}\r\n                <svg className=\"absolute inset-0 w-full h-full rotate-45\" viewBox=\"0 0 100 100\">\r\n                    <circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"none\" stroke={config.border} strokeWidth=\"1\" strokeDasharray=\"2 4\" opacity=\"0.5\" />\r\n                </svg>\r\n                <div className=\"flex flex-col items-center\">\r\n                    <span className=\"text-[22px] font-black leading-none\" style={{ color: config.textMain }}>{value}</span>\r\n                </div>\r\n            </div>\r\n            <span className=\"text-[9px] font-black uppercase tracking-[0.2em] opacity-50 mt-1\" style={{ color: config.textSub }}>{label}</span>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Main CompactStatsCard Component\r\n */\r\nexport function CompactStatsCard({ domain = 'wisdom', streakInfo, onOpenArchive }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const displayMode = useDisplayModeStore(s => s.mode);\r\n    const isLight = colorScheme === 'light';\r\n    const isSanctuary = displayMode === 'sanctuary';\r\n    const config = THEME_CONFIG[isLight ? 'light' : 'dark'];\r\n\r\n    const cardRef = useRef(null);\r\n    const [gradientAngle, setGradientAngle] = useState(135);\r\n\r\n    const getAllStats = useProgressStore(s => s.getAllStats);\r\n    const allStats = getAllStats?.() || {};\r\n    const domainStats = allStats[domain] || { count: 0, totalMinutes: 0 };\r\n    const streak = streakInfo?.currentStreak || 0;\r\n\r\n    // Get stage accent color from theme\r\n    const theme = useTheme();\r\n    const primaryHex = theme?.accent?.primary || '#4ade80';\r\n    \r\n    // Parse hex to RGB\r\n    const hexToRgb = (hex) => {\r\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : { r: 126, g: 217, b: 87 };\r\n    };\r\n    \r\n    const baseAccent = hexToRgb(primaryHex);\r\n    \r\n    // Calculate hue rotation from cyan/teal baseline (~180deg) to stage accent\r\n    const stageHueRotate = (() => {\r\n        const { r, g, b } = baseAccent;\r\n        const max = Math.max(r, g, b) / 255;\r\n        const min = Math.min(r, g, b) / 255;\r\n        let h = 0;\r\n        if (max !== min) {\r\n            const d = max - min;\r\n            const rn = r / 255, gn = g / 255, bn = b / 255;\r\n            if (max === rn) h = ((gn - bn) / d + (gn < bn ? 6 : 0)) / 6;\r\n            else if (max === gn) h = ((bn - rn) / d + 2) / 6;\r\n            else h = ((rn - gn) / d + 4) / 6;\r\n        }\r\n        const targetHue = Math.round(h * 360);\r\n        return targetHue - 180; // Subtly shift from the cyan/purple baseline of the milky way\r\n    })();\r\n    \r\n    // Create shade variations of the stage accent (adjust lightness)\r\n    const adjustBrightness = (rgb, factor) => ({\r\n        r: Math.min(255, Math.round(rgb.r * factor)),\r\n        g: Math.min(255, Math.round(rgb.g * factor)),\r\n        b: Math.min(255, Math.round(rgb.b * factor))\r\n    });\r\n    \r\n    const domainConfig = {\r\n        wisdom: {\r\n            title: 'Cognitive Vipassana',\r\n            metricLabel: 'Focus Stability',\r\n            curriculumLabel: 'Sanctuary of Mind',\r\n            unit: '%',\r\n            ...adjustBrightness(baseAccent, 1.0) // Base shade\r\n        },\r\n        breathwork: {\r\n            title: 'Rhythm Calibration',\r\n            metricLabel: 'Breath Precision',\r\n            curriculumLabel: 'Pranic Regulation',\r\n            unit: '%',\r\n            ...adjustBrightness(baseAccent, 0.8) // Darker shade\r\n        },\r\n        visualization: {\r\n            title: 'Radiant Schematics',\r\n            metricLabel: 'Vividness Depth',\r\n            curriculumLabel: 'Conceptual Mapping',\r\n            unit: '%',\r\n            ...adjustBrightness(baseAccent, 1.15) // Lighter shade\r\n        }\r\n    };\r\n\r\n    const currentDomain = domainConfig[domain] || domainConfig.wisdom;\r\n    const getTrajectory = useTrackingStore(s => s.getTrajectory);\r\n    const sessionsCount = useTrackingStore(s => s.sessions.length);\r\n    const logsCount = useTrackingStore(s => Object.keys(s.dailyLogs).length);\r\n    \r\n    const trajectory = useMemo(() => getTrajectory(7), [getTrajectory, sessionsCount, logsCount]);\r\n    \r\n    // New: Get Timing Offsets for the 5-level chart\r\n    const getWeeklyTimingOffsets = useTrackingStore(s => s.getWeeklyTimingOffsets);\r\n    const trackingDomain = domain === 'breathwork' ? 'breath' : \r\n                          domain === 'wisdom' ? 'cognitive_vipassana' : \r\n                          'visualization';\r\n    const weekOffsets = useMemo(() => getWeeklyTimingOffsets(trackingDomain), [getWeeklyTimingOffsets, trackingDomain, sessionsCount]);\r\n\r\n    // Calculate actual regiment progress based on past 7 weeks or path completion\r\n    const activePath = useTrackingStore(s => s.activePath);\r\n    const regimentProgress = activePath \r\n        ? (activePath.completedWeeks.length / activePath.totalWeeks)\r\n        : (weekOffsets.filter(d => d.practiced).length / 7);\r\n\r\n    useEffect(() => {\r\n        if (cardRef.current) {\r\n            const rect = cardRef.current.getBoundingClientRect();\r\n            setGradientAngle(calculateGradientAngle(rect, getAvatarCenter()));\r\n        }\r\n    }, [isLight]);\r\n\r\n    const domainLabels = { wisdom: 'Wisdom', breathwork: 'Breathwork', visualization: 'Visualization' };\r\n    const today = new Date().toLocaleDateString('en-US', { month: 'numeric', day: 'numeric', year: 'numeric' });\r\n\r\n    return (\r\n        <div\r\n            className=\"w-full relative transition-all duration-700 ease-in-out\"\r\n            style={{\r\n                maxWidth: '430px',\r\n                margin: '0 auto',\r\n            }}\r\n        >\r\n            {/* OUTER: Golden Border Frame - Using reliable box-shadow for depth */}\r\n            <div\r\n                className=\"w-full relative\"\r\n                style={{\r\n                    borderRadius: '24px',\r\n                    boxShadow: isLight \r\n                        ? '0 10px 30px rgba(80, 50, 20, 0.25), 0 20px 60px rgba(60, 40, 15, 0.2), 0 0 0 1px rgba(180, 140, 60, 0.3)'\r\n                        : '0 30px 80px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)'\r\n                }}\r\n            >\r\n                {/* MIDDLE: Parchment Background Container */}\r\n                <div\r\n                    ref={cardRef}\r\n                    className=\"w-full h-full relative\"\r\n                    style={{\r\n                        overflow: 'visible',\r\n                    }}\r\n                >\r\n                    {/* INNER: Masked Content - Softened to 98% */}\r\n                    <div\r\n                        className=\"w-full h-full relative\"\r\n                        style={{\r\n                            WebkitMaskImage: 'radial-gradient(ellipse 100% 100% at center, black 98%, transparent 100%)',\r\n                            maskImage: 'radial-gradient(ellipse 100% 100% at center, black 98%, transparent 100%)',\r\n                        }}\r\n                    >\r\n            {/* Painted Surface Background Layer */}\r\n            {isLight && (\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none\"\r\n                    style={{\r\n                        backgroundImage: `url(${import.meta.env.BASE_URL}assets/${config.bgAsset})`,\r\n                        backgroundSize: 'cover',\r\n                        backgroundPosition: 'center',\r\n                        backgroundRepeat: 'no-repeat',\r\n                        transform: 'scale(1.04)',\r\n                        transformOrigin: 'center',\r\n                        opacity: 0.95,\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Canvas Grain Overlay - subtle texture */}\r\n            {isLight && (\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none\"\r\n                    style={{\r\n                        backgroundImage: `url(${import.meta.env.BASE_URL}assets/${config.canvasGrain})`,\r\n                        backgroundSize: '256px 256px',\r\n                        backgroundRepeat: 'repeat',\r\n                        mixBlendMode: 'multiply',\r\n                        opacity: 0.05,\r\n                        transform: 'scale(1.04)', // Match scale of background\r\n                        transformOrigin: 'center'\r\n                    }}\r\n                />\r\n            )}\r\n\r\n\r\n            {/* Dark mode background */}\r\n            {!isLight && (\r\n                <>\r\n                    <div\r\n                        className=\"absolute inset-0 rounded-[24px]\"\r\n                        style={{\r\n                            backgroundImage: `linear-gradient(135deg, rgba(20, 15, 25, 0.98), rgba(10, 8, 15, 0.98)), \r\n                               linear-gradient(rgba(255,255,255,0.12), rgba(255,255,255,0.02))`,\r\n                            boxShadow: `0 30px 80px rgba(0, 0, 0, 0.7), \r\n                               inset 0 1px 0 rgba(255, 255, 255, 0.08)`\r\n                        }}\r\n                    />\r\n                    \r\n                    {/* Cosmic Feather - Single Dominant Object (Mirrors light mode feather) */}\r\n                    <div \r\n                        className=\"absolute inset-0 overflow-hidden rounded-[24px] pointer-events-none\"\r\n                        style={{ opacity: 0.6, mixBlendMode: 'screen' }}\r\n                    >\r\n                        <div \r\n                            className=\"absolute inset-0 transition-all duration-1000\"\r\n                            style={{\r\n                                backgroundImage: `url(${import.meta.env.BASE_URL}assets/dark_mode_cosmic_feather.png)`,\r\n                                backgroundSize: '100% 100%', \r\n                                backgroundPosition: 'center',\r\n                                filter: `hue-rotate(${stageHueRotate}deg) contrast(1.1) saturate(1.2)`,\r\n                                WebkitMaskImage: 'linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 85%, rgba(0,0,0,0) 100%)',\r\n                                maskImage: 'linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 85%, rgba(0,0,0,0) 100%)'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* Content Container - Shortened bottom to pull parchment edge up */}\r\n            <div className={`relative px-9 ${isLight ? 'pt-5 pb-2' : 'py-3'} z-10`} style={{ background: 'transparent' }}>\r\n\r\n                {/* Header Row: Date only (domain label moved to vertical) */}\r\n                <div className=\"flex justify-end items-center mb-2 relative z-10\">\r\n                    <div\r\n                        className=\"text-[10px] font-black tabular-nums tracking-wide opacity-50\"\r\n                        style={{\r\n                            color: config.textSub,\r\n                            textShadow: isLight ? '0 1px 1px rgba(0, 0, 0, 0.06)' : 'none'\r\n                        }}\r\n                    >\r\n                        {today}\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n                {/* Secondary Section: Two-Column Stats Layout */}\r\n                <div className=\"relative mb-4 flex gap-0 h-[140px]\">\r\n                    {/* Vertical Domain Label - Left Edge, Aligned to VERY TOP */}\r\n                    <div \r\n                        className=\"absolute left-[-8px] top-[-8px] flex items-start justify-center z-20\"\r\n                        style={{ writingMode: 'vertical-rl', transform: 'rotate(180deg)' }}\r\n                    >\r\n                        <span\r\n                            className=\"text-[11px] font-black uppercase tracking-[0.35em]\"\r\n                            style={{\r\n                                color: config.textMain,\r\n                                textShadow: isLight \r\n                                    ? '0 1px 3px rgba(255,255,255,0.8), 0 0 6px rgba(255,255,255,0.6)' \r\n                                    : 'none',\r\n                                opacity: 0.9,\r\n                                textDecoration: 'underline',\r\n                                textDecorationThickness: '1px',\r\n                                textUnderlineOffset: '0px'\r\n                            }}\r\n                        >\r\n                            {domainLabels[domain]}\r\n                        </span>\r\n                    </div>\r\n\r\n                    {/* Left Column: Graphics (Feather) - REDUCED WIDTH */}\r\n                    <div className=\"w-[25%] relative\">\r\n                        {/* Dark mode feather centered on left */}\r\n                        {!isLight && (\r\n                            <div \r\n                                className=\"absolute inset-x-[-20%] inset-y-0 opacity-80 mix-blend-screen\"\r\n                                style={{\r\n                                    backgroundImage: `url(${import.meta.env.BASE_URL}assets/dark_mode_cosmic_feather.png)`,\r\n                                    backgroundSize: '180% 100%',\r\n                                    backgroundPosition: 'left center',\r\n                                    filter: `hue-rotate(${stageHueRotate}deg) contrast(1.1) saturate(1.2)`,\r\n                                    WebkitMaskImage: 'linear-gradient(to right, black 50%, transparent 100%)',\r\n                                    maskImage: 'linear-gradient(to right, black 50%, transparent 100%)'\r\n                                }}\r\n                            />\r\n                        )}\r\n                        {/* Light mode - feather is in the bg, leave graphic area empty or smaller icon */}\r\n                    </div>\r\n\r\n                    {/* Celestial Thread Divider */}\r\n                    <div className=\"w-px h-full relative overflow-visible\">\r\n                        <div \r\n                            className=\"absolute inset-0 blur-[1px]\" \r\n                            style={{ \r\n                                background: `linear-gradient(to bottom, transparent, ${config.accent}, transparent)`,\r\n                                opacity: 0.6\r\n                            }} \r\n                        />\r\n                        <div \r\n                            className=\"absolute inset-y-2 left-[-1px] right-[-1px]\" \r\n                            style={{ \r\n                                background: config.accent,\r\n                                boxShadow: `0 0 10px ${config.accent}`\r\n                            }} \r\n                        />\r\n                        {/* Ornamental beads on the thread */}\r\n                        <div className=\"absolute top-[20%] left-[-2px] w-1.5 h-1.5 rounded-full\" style={{ background: config.accent, border: `1px solid ${config.wellBg}` }} />\r\n                        <div className=\"absolute top-[80%] left-[-2px] w-1.5 h-1.5 rounded-full\" style={{ background: config.accent, border: `1px solid ${config.wellBg}` }} />\r\n                    </div>\r\n\r\n                    {/* Right Column: Data - VERTICALLY STACKED, RIGHT ALIGNED */}\r\n                    <div className=\"flex-1 flex flex-col justify-center items-end pr-4\">\r\n                        {/* Streak */}\r\n                        <div className=\"mb-3 text-right\">\r\n                            <span className=\"text-[10px] font-bold uppercase tracking-widest opacity-60 block\" style={{ color: config.textSub }}>Streak</span>\r\n                            <div className=\"flex items-center justify-end gap-2\">\r\n                                <div className=\"flex flex-col items-center\">\r\n                                    {isLight ? (\r\n                                        <img\r\n                                            src={`${import.meta.env.BASE_URL}assets/impasto_fire.png`}\r\n                                            className=\"w-5 h-5 object-contain\"\r\n                                            alt=\"Fire\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span className=\"text-xl\">≡ƒöÑ</span>\r\n                                    )}\r\n                                    <span className=\"text-[7px] font-bold uppercase tracking-[0.15em] opacity-40\" style={{ color: config.textSub }}>Days</span>\r\n                                </div>\r\n                                <span className=\"text-[32px] font-black leading-none tabular-nums\" style={{ color: config.textMain }}>\r\n                                    {streak}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Sessions */}\r\n                        <div className=\"text-right\">\r\n                            <span className=\"text-[10px] font-bold uppercase tracking-widest opacity-60 block\" style={{ color: config.textSub }}>Sessions</span>\r\n                            <div className=\"flex items-center justify-end gap-2\">\r\n                                <div className=\"flex flex-col items-center\">\r\n                                    {isLight ? (\r\n                                        <img\r\n                                            src={`${import.meta.env.BASE_URL}assets/impasto_meditator.png`}\r\n                                            className=\"w-5 h-5 object-contain\"\r\n                                            alt=\"Meditator\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span className=\"text-xl\">≡ƒºÿ</span>\r\n                                    )}\r\n                                    <span className=\"text-[7px] font-bold uppercase tracking-[0.15em] opacity-40\" style={{ color: config.textSub }}>Total</span>\r\n                                </div>\r\n                                <span className=\"text-[32px] font-black leading-none tabular-nums\" style={{ color: config.textMain }}>\r\n                                    {domainStats.count || 0}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Tertiary Section: Practice Precision - Timing Offset Scale */}\r\n                <div className=\"relative z-10\">\r\n                    <PrecisionTimeline \r\n                        weekOffsets={weekOffsets} \r\n                        isLight={isLight} \r\n                        r={currentDomain.r} \r\n                        g={currentDomain.g} \r\n                        b={currentDomain.b} \r\n                    />\r\n                </div>\r\n\r\n                {/* Bottom Section - Archive Link */}\r\n                <div className={`mt-3 flex items-center justify-center px-2`}>\r\n                    <button\r\n                        onClick={(e) => {\r\n                            console.log('BOTTOM Archive clicked');\r\n                            e.stopPropagation();\r\n                            onOpenArchive?.();\r\n                        }}\r\n                        className=\"text-[9px] font-black uppercase tracking-[0.4em] opacity-30 hover:opacity-100 transition-opacity cursor-pointer\"\r\n                        style={{ color: config.textMain }}\r\n                    >\r\n                        Γƒ¿ VIEW ARCHIVE Γƒ⌐\r\n                    </button>\r\n                </div>\r\n            </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default CompactStatsCard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CosmicCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CrossfadePanels.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  33 |         if (!isSwitch) return;\n  34 |\n> 35 |         setPhase(\"measuring\");\n     |         ^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |\n  37 |         // Wait a frame so DOM paints\n  38 |         requestAnimationFrame(() => {","line":35,"column":9,"nodeType":null,"endLine":35,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useLayoutEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * CrossfadePanels\r\n * - No reflow during fade\r\n * - Wrapper height is locked to incoming panel BEFORE fade starts\r\n *\r\n * Usage:\r\n * <CrossfadePanels\r\n *   activeKey={activeTab}\r\n *   render={(key) => key === \"paths\" ? <PathsPanel /> : <CodexPanel />}\r\n * />\r\n */\r\nexport function CrossfadePanels({\r\n    activeKey,\r\n    render,\r\n    fadeMs = 2000,\r\n    heightMs = 250,\r\n    className = \"\",\r\n}) {\r\n    const [prevKey, setPrevKey] = useState(activeKey);\r\n    const [phase, setPhase] = useState(\"idle\"); // \"idle\" | \"measuring\" | \"fading\"\r\n    const [lockedHeight, setLockedHeight] = useState(null);\r\n\r\n    const incomingRef = useRef(null);\r\n    const wrapperRef = useRef(null);\r\n    const timeoutRef = useRef(null);\r\n\r\n    const isSwitch = activeKey !== prevKey;\r\n\r\n    // Mount incoming + measure BEFORE fade starts\r\n    useLayoutEffect(() => {\r\n        if (!isSwitch) return;\r\n\r\n        setPhase(\"measuring\");\r\n\r\n        // Wait a frame so DOM paints\r\n        requestAnimationFrame(() => {\r\n            const incomingEl = incomingRef.current;\r\n            if (!incomingEl) return;\r\n\r\n            const h = incomingEl.getBoundingClientRect().height;\r\n            setLockedHeight(Math.ceil(h));\r\n\r\n            // Start fade next frame so height is already locked\r\n            requestAnimationFrame(() => {\r\n                setPhase(\"fading\");\r\n\r\n                // End: commit active -> prev\r\n                window.clearTimeout(timeoutRef.current);\r\n                timeoutRef.current = window.setTimeout(() => {\r\n                    setPrevKey(activeKey);\r\n                    setPhase(\"idle\");\r\n                }, fadeMs);\r\n            });\r\n        });\r\n\r\n        return () => window.clearTimeout(timeoutRef.current);\r\n    }, [activeKey, isSwitch, fadeMs]);\r\n\r\n    const heightStyle =\r\n        lockedHeight != null\r\n            ? {\r\n                height: `${lockedHeight}px`,\r\n                transition: heightMs > 0 ? `height ${heightMs}ms ease` : \"none\",\r\n                overflow: \"hidden\",\r\n            }\r\n            : {\r\n                height: \"auto\",\r\n                overflow: \"visible\",\r\n            };\r\n\r\n    const basePanelStyle = {\r\n        position: \"absolute\",\r\n        inset: 0,\r\n        width: \"100%\",\r\n    };\r\n\r\n    const outgoingOpacity = phase === \"fading\" ? 0 : 1;\r\n    const incomingOpacity = phase === \"fading\" ? 1 : 0;\r\n\r\n    return (\r\n        <div\r\n            ref={wrapperRef}\r\n            className={className}\r\n            style={{\r\n                position: \"relative\",\r\n                ...heightStyle,\r\n            }}\r\n        >\r\n            {/* Outgoing (prevKey) - relative when idle, absolute during switch */}\r\n            <div\r\n                style={{\r\n                    // Use relative position when idle so content contributes to height\r\n                    // Use absolute only during switch for the crossfade overlay\r\n                    position: isSwitch ? \"absolute\" : \"relative\",\r\n                    ...(isSwitch ? { inset: 0, width: \"100%\" } : {}),\r\n                    opacity: isSwitch ? outgoingOpacity : 1,\r\n                    transition: `opacity ${fadeMs}ms ease`,\r\n                    pointerEvents: isSwitch ? \"none\" : \"auto\",\r\n                }}\r\n                aria-hidden={isSwitch ? true : false}\r\n            >\r\n                {render(prevKey)}\r\n            </div>\r\n\r\n            {/* Incoming (activeKey) ΓÇô mounted only when switching */}\r\n            {isSwitch && (\r\n                <div\r\n                    ref={incomingRef}\r\n                    style={{\r\n                        ...basePanelStyle,\r\n                        opacity: incomingOpacity,\r\n                        transition: `opacity ${fadeMs}ms ease`,\r\n                        pointerEvents: phase === \"fading\" ? \"auto\" : \"none\",\r\n                    }}\r\n                >\r\n                    {render(activeKey)}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CurriculumCompletionReport.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onRestart' is defined but never used.","line":189,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"onRestart"},"fix":{"range":[7575,7586],"text":""},"desc":"Remove unused variable 'onRestart'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CurriculumCompletionReport.jsx\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// CURRICULUM COMPLETION REPORT ΓÇö End-of-curriculum summary\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n//\r\n// Auto-shown when:\r\n// - All 14 days are complete, OR\r\n// - Day 15 is reached\r\n//\r\n// Displays:\r\n// - Days completed / 14\r\n// - Total practice time\r\n// - Consistency rate\r\n// - Average focus quality\r\n// - Challenge frequency\r\n// - Next steps\r\n//\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nimport React from 'react';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { CURRICULUM_CHALLENGES, RITUAL_FOUNDATION_14 } from '../data/ritualFoundation14.js';\r\nimport { PillButton } from './ui/PillButton';\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// STAT CARD COMPONENT\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction StatCard({ icon, label, value, sublabel, isLight, highlight = false }) {\r\n    return (\r\n        <div\r\n            className=\"p-4 rounded-xl text-center\"\r\n            style={{\r\n                background: highlight\r\n                    ? 'linear-gradient(135deg, var(--accent-15), var(--accent-10))'\r\n                    : isLight ? 'rgba(0,0,0,0.03)' : 'rgba(255,255,255,0.05)',\r\n                border: highlight ? '1px solid var(--accent-30)' : 'none',\r\n            }}\r\n        >\r\n            <span className=\"text-3xl\">{icon}</span>\r\n            <p\r\n                className=\"text-3xl font-bold mt-2\"\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    color: highlight ? 'var(--accent-color)' : isLight ? 'rgba(60, 50, 40, 0.95)' : 'rgba(253,251,245,0.98)',\r\n                }}\r\n            >\r\n                {value}\r\n            </p>\r\n            <p\r\n                className=\"text-base font-medium mt-1\"\r\n                style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}\r\n            >\r\n                {label}\r\n            </p>\r\n            {sublabel && (\r\n                <p\r\n                    className=\"text-sm mt-0.5\"\r\n                    style={{ color: isLight ? 'rgba(60, 50, 40, 0.55)' : 'rgba(253,251,245,0.55)' }}\r\n                >\r\n                    {sublabel}\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// CHALLENGE BAR CHART\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction ChallengeChart({ challengeStats, isLight }) {\r\n    const maxCount = Math.max(...Object.values(challengeStats), 1);\r\n    \r\n    // Sort by count descending\r\n    const sortedChallenges = CURRICULUM_CHALLENGES\r\n        .map(c => ({ ...c, count: challengeStats[c.id] || 0 }))\r\n        .filter(c => c.count > 0)\r\n        .sort((a, b) => b.count - a.count);\r\n\r\n    if (sortedChallenges.length === 0) {\r\n        return (\r\n            <p\r\n                className=\"text-center text-sm py-4\"\r\n                style={{ color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(253,251,245,0.5)' }}\r\n            >\r\n                No challenges recorded Γ£¿\r\n            </p>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            {sortedChallenges.map(challenge => (\r\n                <div key={challenge.id} className=\"flex items-center gap-3\">\r\n                    <span className=\"w-6 text-center\">{challenge.icon}</span>\r\n                    <div className=\"flex-1\">\r\n                        <div\r\n                            className=\"h-6 rounded-full flex items-center px-3\"\r\n                            style={{\r\n                                width: `${Math.max((challenge.count / maxCount) * 100, 20)}%`,\r\n                                background: 'var(--accent-20)',\r\n                            }}\r\n                        >\r\n                            <span\r\n                                className=\"text-xs font-medium\"\r\n                                style={{ color: 'var(--accent-color)' }}\r\n                            >\r\n                                {challenge.label}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <span\r\n                        className=\"text-sm font-bold w-6 text-right\"\r\n                        style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}\r\n                    >\r\n                        {challenge.count}\r\n                    </span>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// FOCUS QUALITY TREND\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction FocusTrend({ dayCompletions, isLight, totalDays }) {\r\n    const focusData = [];\r\n    for (let day = 1; day <= totalDays; day++) {\r\n        const completion = dayCompletions[day];\r\n        focusData.push({\r\n            day,\r\n            rating: completion?.focusRating || null,\r\n            completed: !!completion?.completed,\r\n            percentage: ((day - 1) / (totalDays - 1)) * 100, // 0% to 100%\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative h-24 w-full\">\r\n            {/* Percentage markers */}\r\n            <div className=\"absolute inset-x-0 bottom-0 flex justify-between text-[9px] font-medium\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.4)' : 'rgba(253,251,245,0.4)' }}>\r\n                <span>0%</span>\r\n                <span>25%</span>\r\n                <span>50%</span>\r\n                <span>75%</span>\r\n                <span>100%</span>\r\n            </div>\r\n\r\n            {/* Bar chart with absolute positioning */}\r\n            <div className=\"absolute inset-0 bottom-5\">\r\n                {focusData.map(data => (\r\n                    <div\r\n                        key={data.day}\r\n                        className=\"absolute bottom-0 flex flex-col items-center\"\r\n                        style={{\r\n                            left: `${data.percentage}%`,\r\n                            transform: 'translateX(-50%)',\r\n                            width: totalDays <= 14 ? '8px' : totalDays <= 30 ? '4px' : '2px',\r\n                        }}\r\n                    >\r\n                        <div\r\n                            className=\"rounded-t transition-all\"\r\n                            style={{\r\n                                width: '100%',\r\n                                height: data.rating ? `${(data.rating / 5) * 100}%` : '4px',\r\n                                background: data.completed\r\n                                    ? data.rating\r\n                                        ? `var(--accent-${20 + data.rating * 15})`\r\n                                        : 'var(--accent-30)'\r\n                                    : isLight ? 'rgba(0,0,0,0.08)' : 'rgba(255,255,255,0.1)',\r\n                                minHeight: '4px',\r\n                            }}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// MAIN COMPONENT\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nexport function CurriculumCompletionReport({ onDismiss, onRestart }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const displayMode = useDisplayModeStore(s => s.mode);\r\n    const isLight = colorScheme === 'light';\r\n    const isSanctuary = displayMode === 'sanctuary';\r\n\r\n    const {\r\n        getProgress,\r\n        getStreak,\r\n        getAverageFocus,\r\n        getTotalPracticeMinutes,\r\n        getChallengeStats,\r\n        dayCompletions,\r\n        curriculumStartDate,\r\n        getActiveCurriculum,\r\n    } = useCurriculumStore();\r\n\r\n    const progress = getProgress();\r\n    const streak = getStreak();\r\n    const avgFocus = getAverageFocus();\r\n    const totalMinutes = getTotalPracticeMinutes();\r\n    const challengeStats = getChallengeStats();\r\n\r\n    // Get curriculum data for dynamic totals\r\n    const curriculum = getActiveCurriculum();\r\n    const totalDays = curriculum?.duration || 14;\r\n\r\n    // Calculate consistency rate (% of expected days actually practiced)\r\n    const consistencyRate = Math.round((progress.completed / progress.total) * 100);\r\n\r\n    // Calculate date range\r\n    const startDate = curriculumStartDate ? new Date(curriculumStartDate) : new Date();\r\n    const endDate = new Date(startDate);\r\n    endDate.setDate(endDate.getDate() + (totalDays - 1));\r\n\r\n    const dateRangeStr = `${startDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - ${endDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}`;\r\n\r\n    // Determine completion message\r\n    const completionMessages = [\r\n        { min: 100, message: \"Perfect completion! You showed up every single day. ≡ƒÅå\" },\r\n        { min: 85, message: \"Excellent consistency! A powerful foundation has been laid. ≡ƒîƒ\" },\r\n        { min: 70, message: \"Good progress! The seeds of practice are planted. ≡ƒî▒\" },\r\n        { min: 50, message: \"A worthy beginning. Every practice counts. ≡ƒÆ¬\" },\r\n        { min: 0, message: \"The journey continues. What matters is that you started. ≡ƒöÑ\" },\r\n    ];\r\n    const completionMessage = completionMessages.find(m => consistencyRate >= m.min)?.message;\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 z-[100] flex items-center justify-center overflow-y-auto py-8 px-4\"\r\n            style={{\r\n                background: isLight ? 'rgba(245, 240, 235, 0.98)' : 'rgba(5, 5, 8, 0.98)',\r\n            }}\r\n        >\r\n            <div\r\n                className=\"w-full mx-auto\"\r\n                style={{\r\n                    maxWidth: isSanctuary ? '700px' : '500px',\r\n                }}\r\n            >\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <div\r\n                        className=\"w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center\"\r\n                        style={{\r\n                            background: 'linear-gradient(135deg, var(--accent-color), var(--accent-secondary))',\r\n                            boxShadow: '0 8px 32px var(--accent-30)',\r\n                        }}\r\n                    >\r\n                        <span className=\"text-4xl\">≡ƒÄë</span>\r\n                    </div>\r\n                    <h1\r\n                        className=\"text-2xl font-bold\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            color: 'var(--accent-color)',\r\n                        }}\r\n                    >\r\n                        Curriculum Complete\r\n                    </h1>\r\n                    <p\r\n                        className=\"text-sm mt-2\"\r\n                        style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)' }}\r\n                    >\r\n                        {RITUAL_FOUNDATION_14.name} ΓÇó {dateRangeStr}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Stats Grid */}\r\n                <div className=\"grid grid-cols-2 gap-3 mb-6\">\r\n                    <StatCard\r\n                        icon=\"≡ƒôè\"\r\n                        label=\"Days Completed\"\r\n                        value={`${progress.completed}/${progress.total}`}\r\n                        sublabel={`${consistencyRate}% consistency`}\r\n                        isLight={isLight}\r\n                        highlight={true}\r\n                    />\r\n                    <StatCard\r\n                        icon=\"ΓÅ▒∩╕Å\"\r\n                        label=\"Total Practice\"\r\n                        value={`${totalMinutes}m`}\r\n                        sublabel={`${Math.floor(totalMinutes / 60)}h ${totalMinutes % 60}m`}\r\n                        isLight={isLight}\r\n                    />\r\n                    <StatCard\r\n                        icon=\"≡ƒÄ»\"\r\n                        label=\"Avg Focus\"\r\n                        value={avgFocus ? `${avgFocus}/5` : 'ΓÇö'}\r\n                        isLight={isLight}\r\n                    />\r\n                    <StatCard\r\n                        icon=\"≡ƒöÑ\"\r\n                        label=\"Best Streak\"\r\n                        value={`${streak} days`}\r\n                        isLight={isLight}\r\n                    />\r\n                </div>\r\n\r\n                {/* Focus Trend */}\r\n                <div\r\n                    className=\"p-4 rounded-xl mb-6\"\r\n                    style={{\r\n                        background: isLight ? 'rgba(0,0,0,0.03)' : 'rgba(255,255,255,0.05)',\r\n                    }}\r\n                >\r\n                    <h3\r\n                        className=\"text-base font-semibold mb-4\"\r\n                        style={{ color: isLight ? 'rgba(60, 50, 40, 0.85)' : 'rgba(253,251,245,0.85)' }}\r\n                    >\r\n                        Focus Quality Over Time\r\n                    </h3>\r\n                    <div className=\"text-xs mb-3\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)' }}>\r\n                        {totalDays} days of practice\r\n                    </div>\r\n                    <FocusTrend dayCompletions={dayCompletions} isLight={isLight} totalDays={totalDays} />\r\n                </div>\r\n\r\n                {/* Challenge Summary */}\r\n                <div\r\n                    className=\"p-4 rounded-xl mb-6\"\r\n                    style={{\r\n                        background: isLight ? 'rgba(0,0,0,0.03)' : 'rgba(255,255,255,0.05)',\r\n                    }}\r\n                >\r\n                    <h3\r\n                        className=\"text-base font-semibold mb-4\"\r\n                        style={{ color: isLight ? 'rgba(60, 50, 40, 0.85)' : 'rgba(253,251,245,0.85)' }}\r\n                    >\r\n                        Challenges Encountered\r\n                    </h3>\r\n                    <ChallengeChart challengeStats={challengeStats} isLight={isLight} />\r\n                </div>\r\n\r\n                {/* Completion Message */}\r\n                <div\r\n                    className=\"p-4 rounded-xl text-center mb-6\"\r\n                    style={{\r\n                        background: 'linear-gradient(135deg, var(--accent-10), var(--accent-05))',\r\n                        border: '1px solid var(--accent-20)',\r\n                    }}\r\n                >\r\n                    <p\r\n                        className=\"text-sm italic\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.8)' : 'rgba(253,251,245,0.8)',\r\n                        }}\r\n                    >\r\n                        {completionMessage}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3\">\r\n                    <button\r\n                        onClick={onDismiss}\r\n                        className=\"flex-1 py-3 rounded-xl text-sm font-medium transition-all\"\r\n                        style={{\r\n                            background: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.08)',\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)',\r\n                        }}\r\n                    >\r\n                        Continue to App\r\n                    </button>\r\n                    {/* Future: Add restart option\r\n                    <button\r\n                        onClick={onRestart}\r\n                        className=\"flex-1 py-3 rounded-xl text-sm font-semibold transition-all\"\r\n                        style={{\r\n                            background: 'var(--accent-color)',\r\n                            color: isLight ? 'white' : '#050508',\r\n                        }}\r\n                    >\r\n                        Start New Curriculum\r\n                    </button>\r\n                    */}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CurriculumCompletionReport;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CurriculumHub.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":14,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[520,534],"text":""},"desc":"Remove unused variable 'useState'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CurriculumHub.jsx\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// CURRICULUM HUB ΓÇö Full 14-day schedule view\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n//\r\n// Shows:\r\n// - Complete 14-day timeline\r\n// - Day status (pending/complete/today/missed)\r\n// - Quick stats (streak, progress, avg focus)\r\n// - Today's practice quick-start\r\n//\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nimport React, { useState } from 'react';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { RITUAL_FOUNDATION_14 } from '../data/ritualFoundation14.js';\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// DAY CARD COMPONENT\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction DayCard({ day, status, completion, isLight, onSelect }) {\r\n    const statusConfig = {\r\n        complete: {\r\n            bg: isLight ? 'rgba(100, 180, 100, 0.15)' : 'rgba(100, 200, 100, 0.15)',\r\n            border: isLight ? 'rgba(100, 180, 100, 0.3)' : 'rgba(100, 200, 100, 0.25)',\r\n            badge: '#4CAF50',\r\n            icon: 'Γ£ô',\r\n        },\r\n        today: {\r\n            bg: isLight ? 'var(--accent-10)' : 'var(--accent-15)',\r\n            border: 'var(--accent-40)',\r\n            badge: 'var(--accent-color)',\r\n            icon: day.dayNumber,\r\n        },\r\n        missed: {\r\n            bg: isLight ? 'rgba(200, 100, 100, 0.08)' : 'rgba(200, 100, 100, 0.1)',\r\n            border: isLight ? 'rgba(200, 100, 100, 0.2)' : 'rgba(200, 100, 100, 0.15)',\r\n            badge: isLight ? 'rgba(180, 100, 100, 0.6)' : 'rgba(200, 100, 100, 0.5)',\r\n            icon: 'Γùï',\r\n        },\r\n        future: {\r\n            bg: isLight ? 'rgba(0, 0, 0, 0.02)' : 'rgba(255, 255, 255, 0.03)',\r\n            border: isLight ? 'rgba(0, 0, 0, 0.06)' : 'rgba(255, 255, 255, 0.06)',\r\n            badge: isLight ? 'rgba(0, 0, 0, 0.2)' : 'rgba(255, 255, 255, 0.15)',\r\n            icon: day.dayNumber,\r\n        },\r\n        pending: {\r\n            bg: isLight ? 'rgba(0, 0, 0, 0.02)' : 'rgba(255, 255, 255, 0.03)',\r\n            border: isLight ? 'rgba(0, 0, 0, 0.06)' : 'rgba(255, 255, 255, 0.06)',\r\n            badge: isLight ? 'rgba(0, 0, 0, 0.2)' : 'rgba(255, 255, 255, 0.15)',\r\n            icon: day.dayNumber,\r\n        },\r\n    };\r\n\r\n    const config = statusConfig[status] || statusConfig.pending;\r\n    const isClickable = status === 'today' && !completion?.completed;\r\n\r\n    const duration = day.circuit \r\n        ? day.circuit.totalDuration \r\n        : day.practiceConfig?.duration || 10;\r\n\r\n    return (\r\n        <div\r\n            className={`relative rounded-xl p-4 transition-all duration-200 ${isClickable ? 'cursor-pointer hover:scale-[1.02]' : ''}`}\r\n            style={{\r\n                background: config.bg,\r\n                border: `1px solid ${config.border}`,\r\n            }}\r\n            onClick={() => isClickable && onSelect?.(day)}\r\n        >\r\n            {/* Today indicator */}\r\n            {status === 'today' && (\r\n                <div \r\n                    className=\"absolute -top-1 -right-1 w-3 h-3 rounded-full animate-pulse\"\r\n                    style={{ background: 'var(--accent-color)', boxShadow: '0 0 8px var(--accent-color)' }}\r\n                />\r\n            )}\r\n\r\n            <div className=\"flex items-start gap-3\">\r\n                {/* Day badge */}\r\n                <div\r\n                    className=\"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0\"\r\n                    style={{\r\n                        background: config.badge,\r\n                        color: status === 'complete' || status === 'today' ? (isLight ? 'white' : '#050508') : 'inherit',\r\n                    }}\r\n                >\r\n                    {config.icon}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <h4\r\n                        className=\"font-medium text-sm truncate\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.9)' : 'rgba(253,251,245,0.9)',\r\n                            opacity: status === 'future' ? 0.5 : 1,\r\n                        }}\r\n                    >\r\n                        {day.title}\r\n                    </h4>\r\n                    <p\r\n                        className=\"text-xs mt-0.5\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(253,251,245,0.5)',\r\n                            opacity: status === 'future' ? 0.5 : 1,\r\n                        }}\r\n                    >\r\n                        {day.circuit ? 'Circuit' : day.practiceType} ΓÇó {duration}m\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Focus rating (if complete) */}\r\n                {completion?.focusRating && (\r\n                    <div className=\"flex items-center gap-0.5\">\r\n                        {[1, 2, 3, 4, 5].map(n => (\r\n                            <div\r\n                                key={n}\r\n                                className=\"w-1.5 h-1.5 rounded-full\"\r\n                                style={{\r\n                                    background: n <= completion.focusRating \r\n                                        ? 'var(--accent-color)' \r\n                                        : isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.1)',\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// STATS SUMMARY\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction StatsSummary({ isLight }) {\r\n    const { getProgress, getStreak, getAverageFocus, getTotalPracticeMinutes } = useCurriculumStore();\r\n    \r\n    const progress = getProgress();\r\n    const streak = getStreak();\r\n    const avgFocus = getAverageFocus();\r\n    const totalMinutes = getTotalPracticeMinutes();\r\n\r\n    const stats = [\r\n        { label: 'Progress', value: `${progress.completed}/${progress.total}`, icon: '≡ƒôè' },\r\n        { label: 'Streak', value: `${streak} day${streak !== 1 ? 's' : ''}`, icon: '≡ƒöÑ' },\r\n        { label: 'Avg Focus', value: avgFocus ? `${avgFocus}/5` : 'ΓÇö', icon: '≡ƒÄ»' },\r\n        { label: 'Total Time', value: `${totalMinutes}m`, icon: 'ΓÅ▒∩╕Å' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-4 gap-3\">\r\n            {stats.map(stat => (\r\n                <div\r\n                    key={stat.label}\r\n                    className=\"text-center p-3 rounded-xl\"\r\n                    style={{\r\n                        background: isLight ? 'rgba(0,0,0,0.03)' : 'rgba(255,255,255,0.05)',\r\n                    }}\r\n                >\r\n                    <span className=\"text-lg\">{stat.icon}</span>\r\n                    <p\r\n                        className=\"font-semibold text-sm mt-1\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.9)' : 'rgba(253,251,245,0.95)',\r\n                        }}\r\n                    >\r\n                        {stat.value}\r\n                    </p>\r\n                    <p\r\n                        className=\"text-xs\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(253,251,245,0.5)',\r\n                        }}\r\n                    >\r\n                        {stat.label}\r\n                    </p>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// MAIN COMPONENT\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nexport function CurriculumHub({ onSelectDay, onClose }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    \r\n    const { \r\n        getCurrentDayNumber, \r\n        getDayStatus, \r\n        dayCompletions,\r\n        curriculumStartDate,\r\n        isCurriculumComplete,\r\n    } = useCurriculumStore();\r\n\r\n    const currentDay = getCurrentDayNumber();\r\n    const curriculum = RITUAL_FOUNDATION_14;\r\n    const isComplete = isCurriculumComplete();\r\n\r\n    // Format start date\r\n    const startDateStr = curriculumStartDate \r\n        ? new Date(curriculumStartDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\r\n        : 'Not started';\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2\r\n                        className=\"text-xl font-semibold\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            color: 'var(--accent-color)',\r\n                        }}\r\n                    >\r\n                        {curriculum.name}\r\n                    </h2>\r\n                    <p\r\n                        className=\"text-sm mt-1\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)',\r\n                        }}\r\n                    >\r\n                        Started {startDateStr} ΓÇó Day {currentDay} of 14\r\n                    </p>\r\n                </div>\r\n                {onClose && (\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-2 rounded-full transition-colors hover:bg-black/5 dark:hover:bg-white/5\"\r\n                    >\r\n                        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                            <path d=\"M18 6L6 18M6 6l12 12\" />\r\n                        </svg>\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Progress bar */}\r\n            <div className=\"relative h-2 rounded-full overflow-hidden\" style={{ background: isLight ? 'rgba(0,0,0,0.08)' : 'rgba(255,255,255,0.1)' }}>\r\n                <div\r\n                    className=\"absolute inset-y-0 left-0 rounded-full transition-all duration-500\"\r\n                    style={{\r\n                        width: `${(Object.keys(dayCompletions).length / 14) * 100}%`,\r\n                        background: 'linear-gradient(90deg, var(--accent-color), var(--accent-secondary))',\r\n                    }}\r\n                />\r\n                {/* Current day marker */}\r\n                <div\r\n                    className=\"absolute top-1/2 -translate-y-1/2 w-3 h-3 rounded-full border-2 bg-white dark:bg-gray-900\"\r\n                    style={{\r\n                        left: `${((currentDay - 1) / 14) * 100}%`,\r\n                        borderColor: 'var(--accent-color)',\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Stats summary */}\r\n            <StatsSummary isLight={isLight} />\r\n\r\n            {/* Week labels and day grid */}\r\n            <div className=\"space-y-4\">\r\n                {/* Week 1 */}\r\n                <div>\r\n                    <h3\r\n                        className=\"text-xs uppercase tracking-wider mb-2 font-medium\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(253,251,245,0.4)',\r\n                        }}\r\n                    >\r\n                        Week 1 ΓÇö Settling\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                        {curriculum.days.slice(0, 7).map(day => (\r\n                            <DayCard\r\n                                key={day.dayNumber}\r\n                                day={day}\r\n                                status={getDayStatus(day.dayNumber)}\r\n                                completion={dayCompletions[day.dayNumber]}\r\n                                isLight={isLight}\r\n                                onSelect={onSelectDay}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Week 2 */}\r\n                <div>\r\n                    <h3\r\n                        className=\"text-xs uppercase tracking-wider mb-2 font-medium\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(253,251,245,0.4)',\r\n                        }}\r\n                    >\r\n                        Week 2 ΓÇö Deepening\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                        {curriculum.days.slice(7, 14).map(day => (\r\n                            <DayCard\r\n                                key={day.dayNumber}\r\n                                day={day}\r\n                                status={getDayStatus(day.dayNumber)}\r\n                                completion={dayCompletions[day.dayNumber]}\r\n                                isLight={isLight}\r\n                                onSelect={onSelectDay}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Completion banner */}\r\n            {isComplete && (\r\n                <div\r\n                    className=\"p-4 rounded-xl text-center\"\r\n                    style={{\r\n                        background: 'linear-gradient(135deg, var(--accent-15), var(--accent-10))',\r\n                        border: '1px solid var(--accent-30)',\r\n                    }}\r\n                >\r\n                    <span className=\"text-2xl\">≡ƒÄë</span>\r\n                    <p\r\n                        className=\"font-semibold mt-2\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            color: 'var(--accent-color)',\r\n                        }}\r\n                    >\r\n                        Curriculum Complete!\r\n                    </p>\r\n                    <p className=\"text-sm mt-1\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>\r\n                        Review your completion report for insights.\r\n                    </p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CurriculumHub;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CurriculumOnboarding.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'totalSteps' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":380,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":380,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"totalSteps"},"fix":{"range":[17687,17708],"text":""},"desc":"Remove unused variable 'totalSteps'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CurriculumOnboarding.jsx\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// CURRICULUM ONBOARDING ΓÇö Multi-step introduction to daily practice\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n//\r\n// Skippable onboarding flow that introduces:\r\n// 1. Welcome & Philosophy\r\n// 2. Practice explanation\r\n// 3. 14-day curriculum overview\r\n// 4. Time selection for daily practice\r\n// 5. Confirmation & start\r\n//\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nimport React, { useState } from 'react';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { PillButton } from './ui/PillButton';\r\nimport { RITUAL_FOUNDATION_14 } from '../data/ritualFoundation14.js';\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// TIME SLOT OPTIONS\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nconst TIME_OPTIONS = [\r\n    { value: '05:00', label: '5:00 AM', period: 'early' },\r\n    { value: '06:00', label: '6:00 AM', period: 'morning' },\r\n    { value: '07:00', label: '7:00 AM', period: 'morning' },\r\n    { value: '08:00', label: '8:00 AM', period: 'morning' },\r\n    { value: '09:00', label: '9:00 AM', period: 'morning' },\r\n    { value: '12:00', label: '12:00 PM', period: 'midday' },\r\n    { value: '17:00', label: '5:00 PM', period: 'evening' },\r\n    { value: '18:00', label: '6:00 PM', period: 'evening' },\r\n    { value: '19:00', label: '7:00 PM', period: 'evening' },\r\n    { value: '20:00', label: '8:00 PM', period: 'evening' },\r\n    { value: '21:00', label: '9:00 PM', period: 'night' },\r\n    { value: '22:00', label: '10:00 PM', period: 'night' },\r\n];\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// STEP COMPONENTS\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction StepWelcome({ onNext, isLight }) {\r\n    return (\r\n        <div className=\"space-y-8 text-center\" style={{ animation: 'fadeIn 400ms ease-out' }}>\r\n            <div className=\"space-y-6\">\r\n                <h1\r\n                    className=\"text-2xl font-semibold tracking-wide\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        color: 'var(--accent-color)',\r\n                        textShadow: '0 0 20px var(--accent-20)',\r\n                    }}\r\n                >\r\n                    Welcome to Your Practice\r\n                </h1>\r\n\r\n                <p className=\"text-[16px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.8)' : 'rgba(253,251,245,0.8)' }}>\r\n                    You're about to begin a 14-day journey into structured daily practice.\r\n                </p>\r\n\r\n                <div className=\"w-32 h-px mx-auto\" style={{ background: 'linear-gradient(to right, transparent, var(--accent-40), transparent)' }} />\r\n\r\n                <p className=\"text-[15px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>\r\n                    This isn't about relaxation or stress relief.\r\n                </p>\r\n\r\n                <p className=\"text-[16px] leading-relaxed font-medium\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.9)' : 'rgba(253,251,245,0.95)' }}>\r\n                    It's about building the capacity to <em>be present</em> ΓÇö to expand your container for awareness itself.\r\n                </p>\r\n\r\n                <p className=\"text-[15px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)' }}>\r\n                    Each day builds on the last. Consistency matters more than perfection.\r\n                </p>\r\n            </div>\r\n\r\n            <PillButton onClick={onNext} variant=\"primary\" size=\"lg\">\r\n                Continue\r\n            </PillButton>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StepPracticeExplain({ onNext, onBack, isLight }) {\r\n    return (\r\n        <div className=\"space-y-8 text-center\" style={{ animation: 'fadeIn 400ms ease-out' }}>\r\n            <div className=\"space-y-6\">\r\n                <h2\r\n                    className=\"text-xl font-semibold tracking-wide\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        color: 'var(--accent-color)',\r\n                    }}\r\n                >\r\n                    How Practice Works\r\n                </h2>\r\n\r\n                <div className=\"grid grid-cols-3 gap-4 py-4\">\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                        <div className=\"w-12 h-12 rounded-full flex items-center justify-center\" style={{ background: 'var(--accent-15)' }}>\r\n                            <span className=\"text-2xl\">≡ƒî¼∩╕Å</span>\r\n                        </div>\r\n                        <span className=\"text-xs font-medium\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>Breathwork</span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                        <div className=\"w-12 h-12 rounded-full flex items-center justify-center\" style={{ background: 'var(--accent-15)' }}>\r\n                            <span className=\"text-2xl\">≡ƒæü∩╕Å</span>\r\n                        </div>\r\n                        <span className=\"text-xs font-medium\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>Awareness</span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                        <div className=\"w-12 h-12 rounded-full flex items-center justify-center\" style={{ background: 'var(--accent-15)' }}>\r\n                            <span className=\"text-2xl\">≡ƒö«</span>\r\n                        </div>\r\n                        <span className=\"text-xs font-medium\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>Rituals</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <p className=\"text-[15px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.8)' : 'rgba(253,251,245,0.8)' }}>\r\n                    You'll practice different techniques: breathing, body awareness, thought observation, and structured rituals.\r\n                </p>\r\n\r\n                <div className=\"w-24 h-px mx-auto\" style={{ background: 'linear-gradient(to right, transparent, var(--accent-40), transparent)' }} />\r\n\r\n                <p className=\"text-[15px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>\r\n                    Some days are single practices. Others combine multiple techniques in a <strong>circuit</strong>.\r\n                </p>\r\n\r\n                <p className=\"text-[14px] leading-relaxed italic\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)' }}>\r\n                    Sessions range from 5 to 18 minutes.\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-4 justify-center\">\r\n                <PillButton onClick={onBack} variant=\"secondary\" size=\"md\">\r\n                    Back\r\n                </PillButton>\r\n                <PillButton onClick={onNext} variant=\"primary\" size=\"md\">\r\n                    Continue\r\n                </PillButton>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StepCurriculumOverview({ onNext, onBack, isLight }) {\r\n    const curriculum = RITUAL_FOUNDATION_14;\r\n    \r\n    return (\r\n        <div className=\"space-y-6 text-center\" style={{ animation: 'fadeIn 400ms ease-out' }}>\r\n            <h2\r\n                className=\"text-xl font-semibold tracking-wide\"\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    color: 'var(--accent-color)',\r\n                }}\r\n            >\r\n                Your 14-Day Path\r\n            </h2>\r\n\r\n            {/* Week Overview */}\r\n            <div className=\"grid grid-cols-2 gap-4 py-2\">\r\n                <div \r\n                    className=\"p-4 rounded-xl text-left\"\r\n                    style={{ \r\n                        background: isLight ? 'rgba(0,0,0,0.03)' : 'rgba(255,255,255,0.05)',\r\n                        border: `1px solid ${isLight ? 'rgba(0,0,0,0.08)' : 'rgba(255,255,255,0.08)'}`,\r\n                    }}\r\n                >\r\n                    <h3 className=\"text-sm font-semibold mb-2\" style={{ color: 'var(--accent-color)' }}>Week 1: Settling</h3>\r\n                    <p className=\"text-xs\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)' }}>\r\n                        Building the habit. Breath, body, and first circuits.\r\n                    </p>\r\n                </div>\r\n                <div \r\n                    className=\"p-4 rounded-xl text-left\"\r\n                    style={{ \r\n                        background: isLight ? 'rgba(0,0,0,0.03)' : 'rgba(255,255,255,0.05)',\r\n                        border: `1px solid ${isLight ? 'rgba(0,0,0,0.08)' : 'rgba(255,255,255,0.08)'}`,\r\n                    }}\r\n                >\r\n                    <h3 className=\"text-sm font-semibold mb-2\" style={{ color: 'var(--accent-color)' }}>Week 2: Deepening</h3>\r\n                    <p className=\"text-xs\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)' }}>\r\n                        Expanding capacity. Rituals, sound, and integration.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Day Dots Preview */}\r\n            <div className=\"flex justify-center gap-1 py-2\">\r\n                {curriculum.days.map((day, i) => (\r\n                    <div\r\n                        key={day.dayNumber}\r\n                        className=\"w-3 h-3 rounded-full transition-all\"\r\n                        style={{\r\n                            background: i < 7 \r\n                                ? `var(--accent-${30 + i * 5})` \r\n                                : `var(--accent-${60 + (i - 7) * 5})`,\r\n                            opacity: 0.7,\r\n                        }}\r\n                        title={day.title}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            <p className=\"text-[14px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>\r\n                You'll track each day's completion and reflect on your experience.\r\n            </p>\r\n\r\n            <p className=\"text-[14px] leading-relaxed font-medium\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.9)' : 'rgba(253,251,245,0.9)' }}>\r\n                At the end, you'll receive a complete report of your journey.\r\n            </p>\r\n\r\n            <div className=\"flex gap-4 justify-center pt-2\">\r\n                <PillButton onClick={onBack} variant=\"secondary\" size=\"md\">\r\n                    Back\r\n                </PillButton>\r\n                <PillButton onClick={onNext} variant=\"primary\" size=\"md\">\r\n                    Continue\r\n                </PillButton>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StepTimeSelection({ onNext, onBack, selectedTimes, setSelectedTimes, isLight }) {\r\n    const toggleTime = (timeValue) => {\r\n        if (selectedTimes.includes(timeValue)) {\r\n            setSelectedTimes(selectedTimes.filter(t => t !== timeValue));\r\n        } else if (selectedTimes.length < 2) {\r\n            setSelectedTimes([...selectedTimes, timeValue]);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 text-center\" style={{ animation: 'fadeIn 400ms ease-out' }}>\r\n            <h2\r\n                className=\"text-xl font-semibold tracking-wide\"\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    color: 'var(--accent-color)',\r\n                }}\r\n            >\r\n                Set Your Practice Times\r\n            </h2>\r\n\r\n            <p className=\"text-[14px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>\r\n                Select up to 2 times when you'd like to be reminded to practice.\r\n            </p>\r\n\r\n            <p className=\"text-[12px]\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(253,251,245,0.5)' }}>\r\n                (Optional ΓÇö you can skip this)\r\n            </p>\r\n\r\n            {/* Time Grid */}\r\n            <div className=\"grid grid-cols-4 gap-2 py-2 max-h-48 overflow-y-auto custom-scrollbar\">\r\n                {TIME_OPTIONS.map(option => {\r\n                    const isSelected = selectedTimes.includes(option.value);\r\n                    return (\r\n                        <button\r\n                            key={option.value}\r\n                            onClick={() => toggleTime(option.value)}\r\n                            className=\"px-3 py-2 rounded-lg text-sm font-medium transition-all\"\r\n                            style={{\r\n                                background: isSelected \r\n                                    ? 'var(--accent-color)' \r\n                                    : isLight ? 'rgba(0,0,0,0.04)' : 'rgba(255,255,255,0.08)',\r\n                                color: isSelected \r\n                                    ? (isLight ? 'white' : '#050508') \r\n                                    : isLight ? 'rgba(60, 50, 40, 0.8)' : 'rgba(253,251,245,0.8)',\r\n                                border: `1px solid ${isSelected ? 'var(--accent-color)' : 'transparent'}`,\r\n                            }}\r\n                        >\r\n                            {option.label}\r\n                        </button>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {selectedTimes.length > 0 && (\r\n                <p className=\"text-[13px]\" style={{ color: 'var(--accent-color)' }}>\r\n                    Selected: {selectedTimes.map(t => TIME_OPTIONS.find(o => o.value === t)?.label).join(', ')}\r\n                </p>\r\n            )}\r\n\r\n            <div className=\"flex gap-4 justify-center pt-2\">\r\n                <PillButton onClick={onBack} variant=\"secondary\" size=\"md\">\r\n                    Back\r\n                </PillButton>\r\n                <PillButton onClick={onNext} variant=\"primary\" size=\"md\">\r\n                    {selectedTimes.length > 0 ? 'Continue' : 'Skip'}\r\n                </PillButton>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StepConfirm({ onComplete, onBack, selectedTimes, isLight }) {\r\n    return (\r\n        <div className=\"space-y-8 text-center\" style={{ animation: 'fadeIn 400ms ease-out' }}>\r\n            <h2\r\n                className=\"text-xl font-semibold tracking-wide\"\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    color: 'var(--accent-color)',\r\n                }}\r\n            >\r\n                Ready to Begin\r\n            </h2>\r\n\r\n            <div className=\"space-y-4\">\r\n                <p className=\"text-[15px] leading-relaxed\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.8)' : 'rgba(253,251,245,0.8)' }}>\r\n                    Your 14-day curriculum starts today.\r\n                </p>\r\n\r\n                {selectedTimes.length > 0 && (\r\n                    <p className=\"text-[14px]\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(253,251,245,0.6)' }}>\r\n                        Practice times: {selectedTimes.map(t => TIME_OPTIONS.find(o => o.value === t)?.label).join(' & ')}\r\n                    </p>\r\n                )}\r\n\r\n                <div className=\"w-24 h-px mx-auto\" style={{ background: 'linear-gradient(to right, transparent, var(--accent-40), transparent)' }} />\r\n\r\n                <p className=\"text-[14px] leading-relaxed italic\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(253,251,245,0.7)' }}>\r\n                    \"The journey of a thousand miles begins with a single breath.\"\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-4 justify-center pt-4\">\r\n                <PillButton onClick={onBack} variant=\"secondary\" size=\"md\">\r\n                    Back\r\n                </PillButton>\r\n                <PillButton\r\n                    onClick={onComplete}\r\n                    variant=\"primary\"\r\n                    size=\"lg\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                    }}\r\n                >\r\n                    Begin Journey\r\n                </PillButton>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// MAIN COMPONENT\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nexport function CurriculumOnboarding({ onDismiss, onComplete }) {\r\n    const [step, setStep] = useState(1);\r\n    const [selectedTimes, setSelectedTimes] = useState([]);\r\n    \r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    \r\n    const { completeOnboarding, dismissOnboarding } = useCurriculumStore();\r\n\r\n    const handleComplete = () => {\r\n        // Convert selected times to time slot objects\r\n        const timeSlots = selectedTimes.map(time => {\r\n            const option = TIME_OPTIONS.find(o => o.value === time);\r\n            return { time, period: option?.period || 'morning' };\r\n        });\r\n        \r\n        completeOnboarding(timeSlots);\r\n        onComplete?.();\r\n    };\r\n\r\n    const handleDismiss = () => {\r\n        dismissOnboarding();\r\n        onDismiss?.();\r\n    };\r\n\r\n    const totalSteps = 5;\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 z-[100] flex items-center justify-center backdrop-blur-lg\"\r\n            style={{ \r\n                background: isLight ? 'rgba(245, 240, 235, 0.95)' : 'rgba(0, 0, 0, 0.95)',\r\n                animation: 'fadeIn 600ms ease-out',\r\n            }}\r\n        >\r\n            <div\r\n                className=\"max-w-lg mx-auto px-8 py-10 relative\"\r\n                style={{ animation: 'slideUp 800ms cubic-bezier(0.4, 0, 0.2, 1)' }}\r\n            >\r\n                {/* Corner flourishes */}\r\n                <div className=\"absolute top-0 left-0 w-12 h-12 border-t-2 border-l-2 opacity-30\" style={{ borderColor: 'var(--accent-color)' }} />\r\n                <div className=\"absolute top-0 right-0 w-12 h-12 border-t-2 border-r-2 opacity-30\" style={{ borderColor: 'var(--accent-color)' }} />\r\n                <div className=\"absolute bottom-0 left-0 w-12 h-12 border-b-2 border-l-2 opacity-30\" style={{ borderColor: 'var(--accent-color)' }} />\r\n                <div className=\"absolute bottom-0 right-0 w-12 h-12 border-b-2 border-r-2 opacity-30\" style={{ borderColor: 'var(--accent-color)' }} />\r\n\r\n                {/* Skip button */}\r\n                <button\r\n                    onClick={handleDismiss}\r\n                    className=\"absolute top-2 right-2 px-3 py-1 rounded text-xs transition-opacity hover:opacity-100\"\r\n                    style={{ \r\n                        color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(253,251,245,0.4)',\r\n                        opacity: 0.7,\r\n                    }}\r\n                >\r\n                    Skip for now\r\n                </button>\r\n\r\n                {/* Progress dots */}\r\n                <div className=\"flex justify-center gap-2 mb-8\">\r\n                    {[1, 2, 3, 4, 5].map(s => (\r\n                        <div\r\n                            key={s}\r\n                            className=\"w-2 h-2 rounded-full transition-all\"\r\n                            style={{\r\n                                background: s === step \r\n                                    ? 'var(--accent-color)' \r\n                                    : s < step \r\n                                        ? 'var(--accent-40)' \r\n                                        : isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.15)',\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Step content */}\r\n                <div className=\"relative z-10\">\r\n                    {step === 1 && (\r\n                        <StepWelcome onNext={() => setStep(2)} isLight={isLight} />\r\n                    )}\r\n                    {step === 2 && (\r\n                        <StepPracticeExplain \r\n                            onNext={() => setStep(3)} \r\n                            onBack={() => setStep(1)} \r\n                            isLight={isLight} \r\n                        />\r\n                    )}\r\n                    {step === 3 && (\r\n                        <StepCurriculumOverview \r\n                            onNext={() => setStep(4)} \r\n                            onBack={() => setStep(2)} \r\n                            isLight={isLight} \r\n                        />\r\n                    )}\r\n                    {step === 4 && (\r\n                        <StepTimeSelection \r\n                            onNext={() => setStep(5)} \r\n                            onBack={() => setStep(3)} \r\n                            selectedTimes={selectedTimes}\r\n                            setSelectedTimes={setSelectedTimes}\r\n                            isLight={isLight} \r\n                        />\r\n                    )}\r\n                    {step === 5 && (\r\n                        <StepConfirm \r\n                            onComplete={handleComplete} \r\n                            onBack={() => setStep(4)} \r\n                            selectedTimes={selectedTimes}\r\n                            isLight={isLight} \r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <style>{`\r\n                @keyframes fadeIn {\r\n                    from { opacity: 0; }\r\n                    to { opacity: 1; }\r\n                }\r\n                @keyframes slideUp {\r\n                    from { opacity: 0; transform: translateY(40px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n                .custom-scrollbar::-webkit-scrollbar {\r\n                    width: 6px;\r\n                }\r\n                .custom-scrollbar::-webkit-scrollbar-track {\r\n                    background: rgba(0,0,0,0.1);\r\n                    border-radius: 3px;\r\n                }\r\n                .custom-scrollbar::-webkit-scrollbar-thumb {\r\n                    background: var(--accent-30);\r\n                    border-radius: 3px;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CurriculumOnboarding;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CurriculumPracticeMode.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getCurrentDayNumber' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"getCurrentDayNumber"},"fix":{"range":[377,407],"text":""},"desc":"Remove unused variable 'getCurrentDayNumber'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\n\r\n/**\r\n * Wrapper component that displays curriculum practice guidance\r\n * Shows the day's intention, practice type, and instructions before/during practice\r\n */\r\nexport function CurriculumPracticeMode() {\r\n    const { \r\n        getActivePracticeDay, \r\n        activePracticeSession,\r\n        getCurrentDayNumber,\r\n    } = useCurriculumStore();\r\n\r\n    const practiceDay = getActivePracticeDay();\r\n    \r\n    if (!activePracticeSession || !practiceDay) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"mb-6 p-4 rounded-xl\" style={{\r\n            background: 'rgba(255, 255, 255, 0.05)',\r\n            border: '1px solid var(--accent-30)',\r\n        }}>\r\n            <div className=\"text-[10px] uppercase font-black tracking-[0.2em] opacity-60 mb-2\">\r\n                Curriculum Day {activePracticeSession}\r\n            </div>\r\n            \r\n            <h3 className=\"text-lg font-bold mb-2\" style={{ fontFamily: 'var(--font-display)' }}>\r\n                {practiceDay.title}\r\n            </h3>\r\n            \r\n            <p className=\"text-[13px] leading-relaxed mb-3 opacity-80\">\r\n                {practiceDay.description}\r\n            </p>\r\n            \r\n            <div className=\"p-3 rounded-lg\" style={{ background: 'rgba(0, 0, 0, 0.3)' }}>\r\n                <p className=\"text-[12px] italic\">\r\n                    \"{practiceDay.intention}\"\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CurriculumPracticeMode;","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CurriculumSessionJournal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CycleRingControl.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'activeHandle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":24,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"activeHandle"},"fix":{"range":[934,946],"text":""},"desc":"Remove unused variable 'activeHandle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setActiveHandle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":24,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"setActiveHandle"},"fix":{"range":[946,963],"text":""},"desc":"Remove unused variable 'setActiveHandle'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'PHASES'. Either include it or remove the dependency array.","line":77,"column":8,"nodeType":"ArrayExpression","endLine":77,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [PHASES, values, total]","fix":{"range":[2471,2486],"text":"[PHASES, values, total]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CycleRingControl.jsx\r\n// Donut chart control for visualization phase timing\r\nimport React, { useState, useRef, useCallback } from 'react';\r\n\r\nexport function CycleRingControl({\r\n    fadeInDuration,\r\n    setFadeInDuration,\r\n    displayDuration,\r\n    setDisplayDuration,\r\n    fadeOutDuration,\r\n    setFadeOutDuration,\r\n    voidDuration,\r\n    setVoidDuration,\r\n    isLight = false\r\n}) {\r\n    const PHASES = [\r\n        { key: 'fadeIn', label: 'IN', color: 'var(--accent-color)', min: 1, max: 5 },\r\n        { key: 'display', label: 'HOLD', color: isLight ? 'var(--text-primary)' : 'rgba(255,255,255,0.8)', min: 1, max: 30 },\r\n        { key: 'fadeOut', label: 'OUT', color: isLight ? 'var(--accent-60)' : 'var(--accent-60)', min: 1, max: 5 },\r\n        { key: 'void', label: 'VOID', color: isLight ? 'rgba(180,155,110,0.15)' : 'rgba(50,50,50,0.9)', min: 1, max: 30 }\r\n    ];\r\n\r\n    const svgRef = useRef(null);\r\n    const [activeHandle, setActiveHandle] = useState(null);\r\n\r\n    const values = {\r\n        fadeIn: fadeInDuration,\r\n        display: displayDuration,\r\n        fadeOut: fadeOutDuration,\r\n        void: voidDuration\r\n    };\r\n\r\n    const setters = {\r\n        fadeIn: setFadeInDuration,\r\n        display: setDisplayDuration,\r\n        fadeOut: setFadeOutDuration,\r\n        void: setVoidDuration\r\n    };\r\n\r\n    const total = values.fadeIn + values.display + values.fadeOut + values.void;\r\n\r\n    // SVG dimensions\r\n    const size = 180;\r\n    const center = size / 2;\r\n    const outerRadius = 70;\r\n    const innerRadius = 45;\r\n    const midRadius = (outerRadius + innerRadius) / 2;\r\n\r\n    // Convert polar to cartesian\r\n    const polarToCartesian = useCallback((angle, radius) => {\r\n        const rad = (angle * Math.PI) / 180;\r\n        return {\r\n            x: center + radius * Math.cos(rad),\r\n            y: center + radius * Math.sin(rad)\r\n        };\r\n    }, [center]);\r\n\r\n    // Calculate arc angles\r\n    const getArcs = useCallback(() => {\r\n        let startAngle = -90; // Start from top\r\n        return PHASES.map((phase) => {\r\n            const value = values[phase.key];\r\n            const sweepAngle = (value / total) * 360;\r\n            const endAngle = startAngle + sweepAngle;\r\n\r\n            const arc = {\r\n                ...phase,\r\n                value,\r\n                startAngle,\r\n                endAngle,\r\n                sweepAngle\r\n            };\r\n\r\n            startAngle = endAngle;\r\n            return arc;\r\n        });\r\n    }, [values, total]);\r\n\r\n    const arcs = getArcs();\r\n\r\n    // Create SVG arc path\r\n    const createArcPath = useCallback((startAngle, endAngle, outerR, innerR) => {\r\n        if (Math.abs(endAngle - startAngle) < 0.1) return '';\r\n\r\n        const start = polarToCartesian(startAngle, outerR);\r\n        const end = polarToCartesian(endAngle, outerR);\r\n        const innerStart = polarToCartesian(endAngle, innerR);\r\n        const innerEnd = polarToCartesian(startAngle, innerR);\r\n\r\n        const largeArc = endAngle - startAngle > 180 ? 1 : 0;\r\n\r\n        return [\r\n            `M ${start.x} ${start.y}`,\r\n            `A ${outerR} ${outerR} 0 ${largeArc} 1 ${end.x} ${end.y}`,\r\n            `L ${innerStart.x} ${innerStart.y}`,\r\n            `A ${innerR} ${innerR} 0 ${largeArc} 0 ${innerEnd.x} ${innerEnd.y}`,\r\n            'Z'\r\n        ].join(' ');\r\n    }, [polarToCartesian]);\r\n\r\n    // Handle click on arc to adjust value\r\n    const handleArcClick = (phaseKey, delta) => {\r\n        const phase = PHASES.find(p => p.key === phaseKey);\r\n        if (!phase) return;\r\n\r\n        const currentValue = values[phaseKey];\r\n        const newValue = Math.max(phase.min, Math.min(phase.max, currentValue + delta));\r\n        setters[phaseKey](newValue);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center\">\r\n            <svg\r\n                ref={svgRef}\r\n                width={size}\r\n                height={size}\r\n                viewBox={`0 0 ${size} ${size}`}\r\n            >\r\n                {/* Background ring */}\r\n                <circle\r\n                    cx={center}\r\n                    cy={center}\r\n                    r={midRadius}\r\n                    fill=\"none\"\r\n                    stroke={isLight ? 'rgba(60,50,35,0.05)' : \"rgba(0,0,0,0.3)\"}\r\n                    strokeWidth={outerRadius - innerRadius}\r\n                />\r\n\r\n                {/* Phase arcs - clickable to adjust */}\r\n                {arcs.map((arc) => (\r\n                    <g key={arc.key}>\r\n                        <path\r\n                            d={createArcPath(arc.startAngle, arc.endAngle, outerRadius, innerRadius)}\r\n                            fill={arc.color}\r\n                            stroke=\"rgba(0,0,0,0.3)\"\r\n                            strokeWidth=\"1\"\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() => handleArcClick(arc.key, 1)}\r\n                            onContextMenu={(e) => {\r\n                                e.preventDefault();\r\n                                handleArcClick(arc.key, -1);\r\n                            }}\r\n                        />\r\n                        {/* Arc label */}\r\n                        {arc.sweepAngle > 20 && (() => {\r\n                            const midAngle = (arc.startAngle + arc.endAngle) / 2;\r\n                            const labelPos = polarToCartesian(midAngle, midRadius);\r\n                            return (\r\n                                <text\r\n                                    x={labelPos.x}\r\n                                    y={labelPos.y}\r\n                                    textAnchor=\"middle\"\r\n                                    dominantBaseline=\"middle\"\r\n                                    fill={arc.key === 'void' ? (isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.4)') : (isLight ? 'var(--text-primary)' : 'rgba(0,0,0,0.6)')}\r\n                                    fontSize=\"9\"\r\n                                    fontFamily=\"var(--font-display)\"\r\n                                    fontWeight=\"bold\"\r\n                                    style={{ pointerEvents: 'none' }}\r\n                                >\r\n                                    {arc.value}\r\n                                </text>\r\n                            );\r\n                        })()}\r\n                    </g>\r\n                ))}\r\n\r\n                {/* Center label */}\r\n                <text\r\n                    x={center}\r\n                    y={center - 8}\r\n                    textAnchor=\"middle\"\r\n                    fill={isLight ? 'var(--text-muted)' : \"rgba(255,255,255,0.5)\"}\r\n                    fontSize=\"9\"\r\n                    fontFamily=\"var(--font-display)\"\r\n                    fontWeight=\"600\"\r\n                    letterSpacing=\"0.1em\"\r\n                >\r\n                    CYCLE\r\n                </text>\r\n                <text\r\n                    x={center}\r\n                    y={center + 10}\r\n                    textAnchor=\"middle\"\r\n                    fill=\"var(--accent-color)\"\r\n                    fontSize=\"18\"\r\n                    fontFamily=\"var(--font-display)\"\r\n                    fontWeight=\"bold\"\r\n                >\r\n                    {total}s\r\n                </text>\r\n            </svg>\r\n\r\n            {/* Legend with +/- buttons */}\r\n            <div className=\"flex flex-wrap justify-center gap-x-4 gap-y-2 mt-4\">\r\n                {arcs.map((arc) => {\r\n                    const phase = PHASES.find(p => p.key === arc.key);\r\n                    return (\r\n                        <div key={arc.key} className=\"flex items-center gap-2\">\r\n                            <div\r\n                                className=\"w-3 h-3 rounded-sm\"\r\n                                style={{ background: arc.color, border: '1px solid rgba(255,255,255,0.2)' }}\r\n                            />\r\n                            <span className={`text-[10px] ${isLight ? 'text-[var(--text-muted)]' : 'text-[rgba(253,251,245,0.5)]'} uppercase tracking-wider w-8`}>\r\n                                {arc.label}\r\n                            </span>\r\n                            <div className=\"flex items-center gap-1\">\r\n                                <button\r\n                                    onClick={() => handleArcClick(arc.key, -1)}\r\n                                    className=\"w-5 h-5 rounded-full text-xs flex items-center justify-center\"\r\n                                    style={{\r\n                                        background: isLight ? 'rgba(60,50,35,0.05)' : 'rgba(255,255,255,0.1)',\r\n                                        color: isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.6)',\r\n                                        border: isLight ? '1px solid var(--light-border)' : '1px solid rgba(255,255,255,0.15)'\r\n                                    }}\r\n                                    disabled={values[arc.key] <= phase.min}\r\n                                >\r\n                                    ΓêÆ\r\n                                </button>\r\n                                <span className=\"text-xs text-[var(--accent-color)] w-6 text-center font-bold\">\r\n                                    {arc.value}\r\n                                </span>\r\n                                <button\r\n                                    onClick={() => handleArcClick(arc.key, 1)}\r\n                                    className=\"w-5 h-5 rounded-full text-xs flex items-center justify-center\"\r\n                                    style={{\r\n                                        background: isLight ? 'rgba(60,50,35,0.05)' : 'rgba(255,255,255,0.1)',\r\n                                        color: isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.6)',\r\n                                        border: isLight ? '1px solid var(--light-border)' : '1px solid rgba(255,255,255,0.15)'\r\n                                    }}\r\n                                    disabled={values[arc.key] >= phase.max}\r\n                                >\r\n                                    +\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            <div className={`text-[9px] ${isLight ? 'text-[var(--text-muted)]' : 'text-[rgba(253,251,245,0.3)]'} mt-2`}>\r\n                Click arc to increase ΓÇó Right-click to decrease\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\BenchmarkInput.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[127,134],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/BenchmarkInput.jsx\r\n// Self-reported benchmark input form\r\nimport { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { logBenchmark } from '../../services/benchmarkManager';\r\n\r\nconst BENCHMARK_FIELDS = {\r\n    breath: [\r\n        { key: 'holdDuration', label: 'Breath Hold Duration', unit: 'seconds', type: 'number' },\r\n        { key: 'cycleConsistency', label: 'Cycle Consistency', unit: '1-10', type: 'number', max: 10 },\r\n    ],\r\n    focus: [\r\n        { key: 'flameDuration', label: 'Sustained Focus Duration', unit: 'minutes', type: 'number' },\r\n        { key: 'distractionCount', label: 'Distraction Count', unit: 'count', type: 'number' },\r\n    ],\r\n    body: [\r\n        { key: 'scanCompletionTime', label: 'Body Scan Completion Time', unit: 'minutes', type: 'number' },\r\n        { key: 'awarenessResolution', label: 'Awareness Resolution', unit: '1-10', type: 'number', max: 10 },\r\n    ],\r\n};\r\n\r\nexport function BenchmarkInput({ isOpen, onClose, initialPath = 'breath' }) {\r\n    const [selectedPath, setSelectedPath] = useState(initialPath);\r\n    const [values, setValues] = useState({});\r\n    const [notes, setNotes] = useState('');\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const fields = BENCHMARK_FIELDS[selectedPath];\r\n\r\n    const handleSubmit = () => {\r\n        // Log each filled benchmark\r\n        Object.entries(values).forEach(([metricName, value]) => {\r\n            if (value) {\r\n                logBenchmark(selectedPath, metricName, parseFloat(value));\r\n            }\r\n        });\r\n\r\n        // Reset and close\r\n        setValues({});\r\n        setNotes('');\r\n        onClose();\r\n    };\r\n\r\n    const hasAnyValue = Object.values(values).some((v) => v);\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n            >\r\n                {/* Backdrop */}\r\n                <div className=\"absolute inset-0 bg-black/80\" onClick={onClose} />\r\n\r\n                {/* Modal */}\r\n                <motion.div\r\n                    className=\"relative w-full max-w-md bg-[#161625] border border-white/10 rounded-lg p-6\"\r\n                    initial={{ scale: 0.9, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    exit={{ scale: 0.9, opacity: 0 }}\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"mb-6\">\r\n                        <h3\r\n                            className=\"text-xl tracking-wide font-bold text-white/90 mb-2\"\r\n                            style={{ fontFamily: 'var(--font-display)' }}\r\n                        >\r\n                            Log Benchmark\r\n                        </h3>\r\n                        <p\r\n                            className=\"text-sm text-white/60 tracking-tight font-medium\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Self-report your current capacity metrics\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Path Selection */}\r\n                    <div className=\"mb-6\">\r\n                        <div\r\n                            className=\"text-xs text-white/50 tracking-tight font-medium mb-2\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Select Path\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            {['breath', 'focus', 'body'].map((path) => (\r\n                                <button\r\n                                    key={path}\r\n                                    onClick={() => {\r\n                                        setSelectedPath(path);\r\n                                        setValues({});\r\n                                    }}\r\n                                    className={`flex-1 px-3 py-2 rounded tracking-tight font-medium text-sm capitalize transition-all ${selectedPath === path\r\n                                        ? 'bg-[#fcd34d] text-black'\r\n                                        : 'bg-white/10 text-white/60 hover:bg-white/15'\r\n                                        }`}\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    {path}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Metric Fields */}\r\n                    <div className=\"mb-6 space-y-4\">\r\n                        {fields.map((field) => (\r\n                            <div key={field.key}>\r\n                                <label\r\n                                    className=\"block text-xs text-white/50 tracking-tight font-medium mb-2\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    {field.label} <span className=\"text-white/30\">({field.unit})</span>\r\n                                </label>\r\n                                <input\r\n                                    type={field.type}\r\n                                    max={field.max}\r\n                                    min=\"0\"\r\n                                    step={field.type === 'number' ? '1' : undefined}\r\n                                    value={values[field.key] || ''}\r\n                                    onChange={(e) =>\r\n                                        setValues({ ...values, [field.key]: e.target.value })\r\n                                    }\r\n                                    className=\"w-full px-3 py-2 bg-white/5 border border-white/10 rounded text-white/90 tracking-tight font-medium focus:outline-none focus:border-[#fcd34d]/50\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                    placeholder={`Enter ${field.label.toLowerCase()}`}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Notes */}\r\n                    <div className=\"mb-6\">\r\n                        <label\r\n                            className=\"block text-xs text-white/50 tracking-tight font-medium mb-2\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Notes (optional)\r\n                        </label>\r\n                        <textarea\r\n                            value={notes}\r\n                            onChange={(e) => setNotes(e.target.value)}\r\n                            className=\"w-full px-3 py-2 bg-white/5 border border-white/10 rounded text-white/90 tracking-tight font-medium focus:outline-none focus:border-[#fcd34d]/50 resize-none\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                            rows=\"3\"\r\n                            placeholder=\"Any observations...\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Info */}\r\n                    <div className=\"mb-6 p-3 bg-white/5 rounded border border-white/10\">\r\n                        <p\r\n                            className=\"text-xs text-white/50 tracking-tight font-medium leading-relaxed\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            These metrics are self-reported and optional. They help track capacity\r\n                            development and inform avatar stage advancement.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-3\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"flex-1 px-4 py-2 bg-white/10 hover:bg-white/15 text-white/80 rounded tracking-tight font-medium transition-colors\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={!hasAnyValue}\r\n                            className={`flex-1 px-4 py-2 rounded tracking-tight font-medium transition-all ${hasAnyValue\r\n                                ? 'bg-[#fcd34d] text-black hover:bg-[#fcd34d]/90'\r\n                                : 'bg-white/10 text-white/30 cursor-not-allowed'\r\n                                }`}\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Log Metrics\r\n                        </button>\r\n                    </div>\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\CheckpointReview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[99,106],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/CheckpointReview.jsx\r\n// Checkpoint review modal (every 2 weeks)\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useCycleStore } from '../../state/cycleStore';\r\nimport { getAllBenchmarkSummary } from '../../services/benchmarkManager';\r\nimport { useState } from 'react';\r\nimport { ModeSwitchDialog } from './ModeSwitchDialog';\r\n\r\nexport function CheckpointReview({ isOpen, onClose }) {\r\n    const currentCycle = useCycleStore((state) => state.currentCycle);\r\n    const getCycleInfo = useCycleStore((state) => state.getCycleInfo);\r\n    const canSwitchMode = useCycleStore((state) => state.canSwitchMode);\r\n\r\n    const [showModeSwitch, setShowModeSwitch] = useState(false);\r\n\r\n    if (!isOpen || !currentCycle) return null;\r\n\r\n    const info = getCycleInfo();\r\n    const benchmarks = getAllBenchmarkSummary();\r\n\r\n    const hasBreathData = benchmarks.breath && Object.keys(benchmarks.breath).length > 0;\r\n    const hasFocusData = benchmarks.focus && Object.keys(benchmarks.focus).length > 0;\r\n    const hasBodyData = benchmarks.body && Object.keys(benchmarks.body).length > 0;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n            >\r\n                {/* Backdrop */}\r\n                <div className=\"absolute inset-0 bg-black/80\" onClick={onClose} />\r\n\r\n                {/* Modal */}\r\n                <motion.div\r\n                    className=\"relative w-full max-w-3xl max-h-[80vh] overflow-y-auto bg-[#161625] border border-white/10 rounded-lg p-8\"\r\n                    initial={{ scale: 0.9, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    exit={{ scale: 0.9, opacity: 0 }}\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"mb-6\">\r\n                        <h2\r\n                            className=\"text-2xl tracking-wide font-bold text-white/90 mb-2\"\r\n                            style={{ fontFamily: 'var(--font-display)' }}\r\n                        >\r\n                            Checkpoint: Day {info.currentDay}\r\n                        </h2>\r\n                        <p\r\n                            className=\"text-white/60 tracking-tight font-medium\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Review your progress and consider your path forward\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Metrics Summary */}\r\n                    <div className=\"mb-6\">\r\n                        <h3\r\n                            className=\"text-lg tracking-wide font-bold text-white/80 mb-3\"\r\n                            style={{ fontFamily: 'var(--font-display)' }}\r\n                        >\r\n                            Your Metrics\r\n                        </h3>\r\n\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4\">\r\n                            <div className=\"p-4 bg-white/5 rounded border border-white/10\">\r\n                                <div\r\n                                    className=\"text-xs text-white/50 tracking-tight font-medium mb-1\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    Consistency Rate\r\n                                </div>\r\n                                <div\r\n                                    className=\"text-2xl tracking-wide font-bold text-white/90\"\r\n                                    style={{ fontFamily: 'var(--font-display)' }}\r\n                                >\r\n                                    {info.consistencyRate}%\r\n                                </div>\r\n                                <div className=\"text-xs text-white/40 mt-1\">\r\n                                    Target: {info.baseline}%\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"p-4 bg-white/5 rounded border border-white/10\">\r\n                                <div\r\n                                    className=\"text-xs text-white/50 tracking-tight font-medium mb-1\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    Practice Days\r\n                                </div>\r\n                                <div\r\n                                    className=\"text-2xl tracking-wide font-bold text-white/90\"\r\n                                    style={{ fontFamily: 'var(--font-display)' }}\r\n                                >\r\n                                    {info.practiceDays} / {info.currentDay}\r\n                                </div>\r\n                                <div className=\"text-xs text-white/40 mt-1\">Elapsed days</div>\r\n                            </div>\r\n\r\n                            <div className=\"p-4 bg-white/5 rounded border border-white/10\">\r\n                                <div\r\n                                    className=\"text-xs text-white/50 tracking-tight font-medium mb-1\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    Projected\r\n                                </div>\r\n                                <div\r\n                                    className=\"text-2xl tracking-wide font-bold text-white/90\"\r\n                                    style={{ fontFamily: 'var(--font-display)' }}\r\n                                >\r\n                                    Day {info.projectedCompletion}\r\n                                </div>\r\n                                <div className=\"text-xs text-white/40 mt-1\">At current rate</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Benchmark highlights */}\r\n                        {(hasBreathData || hasFocusData || hasBodyData) && (\r\n                            <div className=\"p-4 bg-[#fcd34d]/10 border border-[#fcd34d]/20 rounded\">\r\n                                <div\r\n                                    className=\"text-sm text-[#fcd34d]/80 tracking-tight font-medium mb-2\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    Benchmark Progress\r\n                                </div>\r\n                                <div\r\n                                    className=\"text-xs text-white/60 tracking-tight font-medium\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    {hasBreathData && 'Γ£ô Breath metrics logged ┬╖ '}\r\n                                    {hasFocusData && 'Γ£ô Focus metrics logged ┬╖ '}\r\n                                    {hasBodyData && 'Γ£ô Body metrics logged'}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Path Assessment */}\r\n                    <div className=\"mb-6\">\r\n                        <h3\r\n                            className=\"text-lg tracking-wide font-bold text-white/80 mb-3\"\r\n                            style={{ fontFamily: 'var(--font-display)' }}\r\n                        >\r\n                            Assess Your Path\r\n                        </h3>\r\n\r\n                        <div className=\"p-4 bg-white/5 rounded border border-white/10 mb-3\">\r\n                            <div className=\"flex justify-between items-start mb-3\">\r\n                                <div>\r\n                                    <div\r\n                                        className=\"text-sm text-white/70 tracking-tight font-medium mb-1\"\r\n                                        style={{ fontFamily: 'var(--font-body)' }}\r\n                                    >\r\n                                        Current Mode\r\n                                    </div>\r\n                                    <div\r\n                                        className=\"text-lg tracking-wide font-bold text-white/90 capitalize\"\r\n                                        style={{ fontFamily: 'var(--font-display)' }}\r\n                                    >\r\n                                        {info.mode}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"text-2xl\">\r\n                                    {info.mode === 'consecutive' ? 'ΓÜí' : '≡ƒîè'}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {canSwitchMode && (\r\n                                <button\r\n                                    onClick={() => setShowModeSwitch(true)}\r\n                                    className=\"w-full px-4 py-2 bg-white/10 hover:bg-white/15 text-white/80 rounded tracking-tight font-medium text-sm transition-colors\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    Consider Mode Switch\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-3 justify-end\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"px-6 py-2 bg-[#fcd34d] text-black rounded tracking-tight font-medium hover:bg-[#fcd34d]/90 transition-colors\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Continue {info.mode}\r\n                        </button>\r\n                    </div>\r\n                </motion.div>\r\n            </motion.div>\r\n\r\n            {/* Mode Switch Dialog */}\r\n            <ModeSwitchDialog\r\n                isOpen={showModeSwitch}\r\n                onClose={() => setShowModeSwitch(false)}\r\n                onConfirm={() => {\r\n                    setShowModeSwitch(false);\r\n                    onClose();\r\n                }}\r\n            />\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\CircuitConfig.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[159,166],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleDurationChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":114,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":114,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleDurationChange"},"fix":{"range":[3764,4058],"text":""},"desc":"Remove unused variable 'handleDurationChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleReorder' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":129,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleReorder"},"fix":{"range":[4389,4689],"text":""},"desc":"Remove unused variable 'handleReorder'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'velocity' is defined but never used.","line":235,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":235,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"velocity"},"fix":{"range":[10092,10102],"text":""},"desc":"Remove unused variable 'velocity'."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'exerciseDuration', 'onChange', 'selectedExercises', and 'value'. Either include them or remove the dependency array. If 'onChange' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":87,"column":8,"nodeType":"ArrayExpression","endLine":87,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [exerciseDuration, onChange, selectedExercises, value]","fix":{"range":[2767,2769],"text":"[exerciseDuration, onChange, selectedExercises, value]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/CircuitConfig.jsx\r\n// Circuit configuration UI - Refined as \"digital talisman\"\r\nimport { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst AVAILABLE_EXERCISES = [\r\n    {\r\n        id: 'breath',\r\n        name: 'Breath Training',\r\n        type: 'breath',\r\n        icon: '≡ƒî¼∩╕Å',\r\n        practiceType: 'Breath & Stillness',\r\n        preset: 'box',\r\n        glow: 'rgba(147, 197, 253, 0.4)', // Blue glow\r\n    },\r\n    {\r\n        id: 'cognitive',\r\n        name: 'Cognitive Vipassana',\r\n        type: 'focus',\r\n        icon: '≡ƒöÑ',\r\n        practiceType: 'Cognitive Vipassana',\r\n        glow: 'rgba(251, 146, 60, 0.4)', // Orange glow\r\n    },\r\n    {\r\n        id: 'somatic',\r\n        name: 'Somatic Vipassana',\r\n        type: 'body',\r\n        icon: 'Γ£¿',\r\n        practiceType: 'Somatic Vipassana',\r\n        sensoryType: 'body',\r\n        glow: 'rgba(196, 181, 253, 0.4)', // Purple glow\r\n    },\r\n    {\r\n        id: 'visualization',\r\n        name: 'Visualization',\r\n        type: 'focus',\r\n        icon: '≡ƒö«',\r\n        practiceType: 'Visualization',\r\n        glow: 'rgba(167, 139, 250, 0.4)', // Deep purple\r\n    },\r\n    {\r\n        id: 'cymatics',\r\n        name: 'Cymatics',\r\n        type: 'focus',\r\n        icon: 'πÇ░∩╕Å',\r\n        practiceType: 'Cymatics',\r\n        glow: 'rgba(129, 140, 248, 0.4)', // Indigo\r\n    },\r\n    {\r\n        id: 'sound',\r\n        name: 'Sound Bath',\r\n        type: 'body',\r\n        icon: '≡ƒÄ╡',\r\n        practiceType: 'Sound',\r\n        glow: 'rgba(192, 132, 252, 0.4)', // Violet\r\n    },\r\n];\r\n\r\nconst DURATION_OPTIONS = [3, 5, 7, 10, 12, 15, 20];\r\n\r\nexport function CircuitConfig({ value, onChange, isLight = false }) {\r\n    // Per-exercise duration (user can change this)\r\n    const [exerciseDuration, setExerciseDuration] = useState(value?.exerciseDuration || 5);\r\n    const [pageIndex, setPageIndex] = useState(0);\r\n\r\n    const EXERCISES_PER_PAGE = 2;\r\n    const totalPages = Math.ceil(AVAILABLE_EXERCISES.length / EXERCISES_PER_PAGE);\r\n\r\n    const exercisePages = [];\r\n    for (let i = 0; i < AVAILABLE_EXERCISES.length; i += EXERCISES_PER_PAGE) {\r\n        exercisePages.push(AVAILABLE_EXERCISES.slice(i, i + EXERCISES_PER_PAGE));\r\n    }\r\n\r\n    const [selectedExercises, setSelectedExercises] = useState(\r\n        value?.exercises || [\r\n            { exercise: AVAILABLE_EXERCISES[0], duration: 5 },\r\n            { exercise: AVAILABLE_EXERCISES[1], duration: 5 },\r\n            { exercise: AVAILABLE_EXERCISES[2], duration: 5 },\r\n        ]\r\n    );\r\n\r\n    // Notify parent of initial state on mount (fixes Circuit START bug)\r\n    useEffect(() => {\r\n        if (onChange && !value) {\r\n            onChange({ exercises: selectedExercises, exerciseDuration });\r\n        }\r\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    // Update all exercises when duration changes\r\n    const handleExerciseDurationChange = (newDuration) => {\r\n        setExerciseDuration(newDuration);\r\n        const updated = selectedExercises.map(e => ({\r\n            ...e,\r\n            duration: newDuration\r\n        }));\r\n        setSelectedExercises(updated);\r\n        if (onChange) onChange({ exercises: updated, exerciseDuration: newDuration });\r\n    };\r\n\r\n    const MAX_EXERCISES = 6;\r\n\r\n    const handleToggleExercise = (exercise) => {\r\n        // Check if at max capacity\r\n        if (selectedExercises.length >= MAX_EXERCISES) {\r\n            return; // Can't add more\r\n        }\r\n\r\n        // Always add a new instance of the exercise (allow duplicates)\r\n        const updated = [...selectedExercises, { exercise, duration: exerciseDuration }];\r\n        setSelectedExercises(updated);\r\n        if (onChange) onChange({ exercises: updated, exerciseDuration });\r\n    };\r\n\r\n    const handleDurationChange = (exerciseId, duration) => {\r\n        const updated = selectedExercises.map((e) =>\r\n            e.exercise.id === exerciseId ? { ...e, duration } : e\r\n        );\r\n        setSelectedExercises(updated);\r\n        if (onChange) onChange({ exercises: updated });\r\n    };\r\n\r\n    // Remove exercise by index (needed for duplicates)\r\n    const handleRemoveExercise = (indexToRemove) => {\r\n        const updated = selectedExercises.filter((_, idx) => idx !== indexToRemove);\r\n        setSelectedExercises(updated);\r\n        if (onChange) onChange({ exercises: updated, exerciseDuration });\r\n    };\r\n\r\n    const handleReorder = (fromIndex, toIndex) => {\r\n        const updated = [...selectedExercises];\r\n        const [moved] = updated.splice(fromIndex, 1);\r\n        updated.splice(toIndex, 0, moved);\r\n        setSelectedExercises(updated);\r\n        if (onChange) onChange({ exercises: updated });\r\n    };\r\n\r\n    const totalDuration = selectedExercises.reduce((sum, e) => sum + e.duration, 0);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Total Duration - Hero Number with Pulse */}\r\n            <div\r\n                className=\"p-4 rounded relative\"\r\n                style={{\r\n                    background: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.08)',\r\n                    backdropFilter: 'blur(10px)',\r\n                    border: '1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.15)',\r\n                    boxShadow: 'inset 0 0 20px hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.1)',\r\n                }}\r\n            >\r\n                <style>{`\r\n                    @keyframes energy-pulse {\r\n                        0%, 100% { \r\n                            filter: drop-shadow(0 0 8px var(--accent-color)) drop-shadow(0 0 16px var(--accent-30));\r\n                            transform: scale(1);\r\n                        }\r\n                        50% { \r\n                            filter: drop-shadow(0 0 16px var(--accent-color)) drop-shadow(0 0 32px var(--accent-50));\r\n                            transform: scale(1.02);\r\n                        }\r\n                    }\r\n                `}</style>\r\n                <div className=\"flex justify-between items-center\">\r\n                    <div>\r\n                        <div\r\n                            className=\"text-xs mb-1 tracking-wider uppercase font-medium\"\r\n                            style={{\r\n                                fontFamily: 'var(--font-body)',\r\n                                color: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.6)',\r\n                            }}\r\n                        >\r\n                            Total Circuit\r\n                        </div>\r\n                        <div\r\n                            className=\"text-3xl font-bold tracking-wide\"\r\n                            style={{\r\n                                color: isLight ? 'var(--text-primary)' : 'rgba(255,255,255,0.95)',\r\n                                fontFamily: 'var(--font-display)',\r\n                                animation: selectedExercises.length > 0 ? 'energy-pulse 2s ease-in-out infinite' : 'none'\r\n                            }}\r\n                        >\r\n                            {totalDuration} <span className=\"text-lg\" style={{ fontFamily: 'var(--font-body)', color: isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.5)' }}>min</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <div\r\n                            className=\"text-xs mb-1 tracking-wider uppercase font-medium\"\r\n                            style={{\r\n                                fontFamily: 'var(--font-body)',\r\n                                color: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.6)',\r\n                            }}\r\n                        >\r\n                            Per Exercise\r\n                        </div>\r\n                        <select\r\n                            value={exerciseDuration}\r\n                            onChange={(e) => handleExerciseDurationChange(parseInt(e.target.value))}\r\n                            className=\"text-lg font-bold rounded px-2 py-1 cursor-pointer\"\r\n                            style={{\r\n                                fontFamily: 'var(--font-display)',\r\n                                background: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.15)',\r\n                                color: 'var(--accent-color)',\r\n                                border: '1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3)',\r\n                                letterSpacing: 'var(--tracking-wide)'\r\n                            }}\r\n                        >\r\n                            {DURATION_OPTIONS.map((dur) => (\r\n                                <option key={dur} value={dur} style={{ background: isLight ? 'var(--bg-card)' : '#1a1a2e', color: isLight ? 'var(--text-primary)' : '#fff' }}>\r\n                                    {dur} min\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Swipable Exercise Carousel */}\r\n            <div className=\"relative group\">\r\n                <div\r\n                    className=\"text-xs text-white/40 mb-4 uppercase tracking-[0.15em] flex justify-between font-medium px-1\"\r\n                    style={{ fontFamily: 'var(--font-body)' }}\r\n                >\r\n                    <span>Select Practices</span>\r\n                    <span style={{ color: selectedExercises.length >= MAX_EXERCISES ? 'var(--accent-color)' : (isLight ? 'var(--text-muted)' : 'inherit') }}>\r\n                        {selectedExercises.length}/{MAX_EXERCISES}\r\n                    </span>\r\n                </div>\r\n\r\n                <div className=\"relative overflow-hidden mb-4\" style={{ height: '140px' }}>\r\n                    <motion.div\r\n                        className=\"flex gap-3 h-full px-1\"\r\n                        drag=\"x\"\r\n                        dragConstraints={{ left: 0, right: 0 }}\r\n                        dragElastic={0.2}\r\n                        onDragEnd={(e, { offset, velocity }) => {\r\n                            const swipe = offset.x;\r\n                            if (swipe < -50 && pageIndex < totalPages - 1) {\r\n                                setPageIndex(prev => prev + 1);\r\n                            } else if (swipe > 50 && pageIndex > 0) {\r\n                                setPageIndex(prev => prev - 1);\r\n                            }\r\n                        }}\r\n                        style={{ cursor: 'grab' }}\r\n                        whileTap={{ cursor: 'grabbing' }}\r\n                    >\r\n                        <AnimatePresence mode=\"wait\">\r\n                            <motion.div\r\n                                key={pageIndex}\r\n                                initial={{ x: 20, opacity: 0 }}\r\n                                animate={{ x: 0, opacity: 1 }}\r\n                                exit={{ x: -20, opacity: 0 }}\r\n                                transition={{ type: 'spring', damping: 25, stiffness: 300, duration: 0.3 }}\r\n                                className=\"flex gap-3 w-full\"\r\n                            >\r\n                                {exercisePages[pageIndex].map((exercise) => {\r\n                                    const isSelected = selectedExercises.some((e) => e.exercise.id === exercise.id);\r\n                                    const isAtMax = selectedExercises.length >= MAX_EXERCISES;\r\n                                    return (\r\n                                        <motion.button\r\n                                            key={exercise.id}\r\n                                            onClick={() => handleToggleExercise(exercise)}\r\n                                            className=\"flex-1 max-w-[calc(50%-6px)]\"\r\n                                            disabled={isAtMax}\r\n                                            style={{\r\n                                                padding: '16px 12px',\r\n                                                borderRadius: '12px',\r\n                                                border: isSelected\r\n                                                    ? '1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.5)'\r\n                                                    : (isLight ? '1px solid var(--light-border)' : '1px solid rgba(255,255,255,0.08)'),\r\n                                                background: isSelected\r\n                                                    ? 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.15)'\r\n                                                    : (isLight ? 'rgba(60,50,35,0.03)' : 'rgba(255,255,255,0.03)'),\r\n                                                backdropFilter: 'blur(12px)',\r\n                                                transition: 'all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)',\r\n                                                boxShadow: isSelected\r\n                                                    ? `0 10px 30px -10px ${exercise.glow}, inset 0 0 20px hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)`\r\n                                                    : 'none',\r\n                                                opacity: isAtMax ? 0.4 : 1,\r\n                                                cursor: isAtMax ? 'not-allowed' : 'pointer',\r\n                                            }}\r\n                                            whileHover={isAtMax ? {} : { scale: 1.02, y: -2 }}\r\n                                            whileTap={isAtMax ? {} : { scale: 0.98 }}\r\n                                        >\r\n                                            <div className=\"flex flex-col items-center gap-3\">\r\n                                                <div\r\n                                                    className=\"text-4xl\"\r\n                                                    style={{\r\n                                                        filter: `drop-shadow(0 0 12px ${exercise.glow})`,\r\n                                                    }}\r\n                                                >\r\n                                                    {exercise.icon}\r\n                                                </div>\r\n                                                <div\r\n                                                    className=\"text-center leading-tight font-bold tracking-wide\"\r\n                                                    style={{\r\n                                                        fontFamily: 'var(--font-display)',\r\n                                                        fontSize: '11px',\r\n                                                        letterSpacing: '0.04em',\r\n                                                        color: isSelected\r\n                                                            ? (isLight ? 'var(--text-primary)' : 'rgba(255,255,255,0.95)')\r\n                                                            : (isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.65)'),\r\n                                                    }}\r\n                                                >\r\n                                                    {exercise.name}\r\n                                                </div>\r\n                                                {isSelected && (\r\n                                                    <motion.div\r\n                                                        initial={{ scale: 0 }}\r\n                                                        animate={{ scale: 1 }}\r\n                                                        className=\"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-[#fcd34d] flex items-center justify-center shadow-lg\"\r\n                                                    >\r\n                                                        <span className=\"text-[10px] text-black font-black\">Γ£ô</span>\r\n                                                    </motion.div>\r\n                                                )}\r\n                                            </div>\r\n                                        </motion.button>\r\n                                    );\r\n                                })}\r\n                            </motion.div>\r\n                        </AnimatePresence>\r\n                    </motion.div>\r\n                </div>\r\n\r\n                {/* Pagination Dots */}\r\n                <div className=\"flex justify-center gap-2 mb-2\">\r\n                    {exercisePages.map((_, i) => (\r\n                        <div\r\n                            key={i}\r\n                            className=\"transition-all duration-300 rounded-full\"\r\n                            style={{\r\n                                width: i === pageIndex ? '16px' : '6px',\r\n                                height: '6px',\r\n                                background: i === pageIndex ? 'var(--accent-color)' : (isLight ? 'rgba(60,50,35,0.1)' : 'rgba(255,255,255,0.15)'),\r\n                                boxShadow: i === pageIndex ? '0 0 10px var(--accent-color)' : 'none'\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Circuit Sequence - Energy Pathway */}\r\n            {selectedExercises.length > 0 && (\r\n                <div>\r\n                    <div\r\n                        className=\"text-[10px] mb-3 uppercase tracking-[0.2em] font-bold\"\r\n                        style={{ fontFamily: 'var(--font-display)', color: isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.4)' }}\r\n                    >\r\n                        Energy Pathway ┬╖ {selectedExercises.length} Nodes\r\n                    </div>\r\n                    <div className=\"relative\">\r\n                        <div className=\"space-y-2 relative\" style={{ zIndex: 1 }}>\r\n                            {selectedExercises.map((item, index) => (\r\n                                <div\r\n                                    key={`${item.exercise.id}-${index}`}\r\n                                    className=\"p-3 rounded flex items-center gap-3\"\r\n                                    style={{\r\n                                        background: isLight ? 'rgba(60,50,35,0.03)' : 'rgba(255,255,255,0.04)',\r\n                                        border: isLight ? '1px solid var(--light-border)' : '1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.15)',\r\n                                        backdropFilter: 'blur(5px)',\r\n                                    }}\r\n                                >\r\n                                    {/* Energy Node Number */}\r\n                                    <div className=\"relative\" style={{ width: '32px', height: '32px' }}>\r\n                                        <div\r\n                                            className=\"w-full h-full rounded-full flex items-center justify-center text-xs font-bold\"\r\n                                            style={{\r\n                                                background: 'var(--accent-color)',\r\n                                                color: '#000',\r\n                                                boxShadow: '0 0 12px var(--accent-50), 0 0 24px var(--accent-30)',\r\n                                                border: '2px solid var(--accent-color)',\r\n                                                position: 'relative',\r\n                                                zIndex: 2\r\n                                            }}\r\n                                        >\r\n                                            {index + 1}\r\n                                        </div>\r\n                                        {/* Outer energy ring */}\r\n                                        <div\r\n                                            className=\"absolute inset-0 rounded-full\"\r\n                                            style={{\r\n                                                border: '1px solid var(--accent-40)',\r\n                                                transform: 'scale(1.4)',\r\n                                                opacity: 0.4,\r\n                                                animation: 'energy-pulse 2s ease-in-out infinite',\r\n                                                animationDelay: `${index * 0.2}s`\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    {/* Exercise Icon */}\r\n                                    <div\r\n                                        className=\"text-2xl\"\r\n                                        style={{\r\n                                            filter: `drop-shadow(0 0 6px ${item.exercise.glow})`,\r\n                                        }}\r\n                                    >\r\n                                        {item.exercise.icon}\r\n                                    </div>\r\n\r\n                                    {/* Exercise Name */}\r\n                                    <div className=\"flex-1\">\r\n                                        <div\r\n                                            className=\"text-sm font-bold leading-tight\"\r\n                                            style={{\r\n                                                color: isLight ? 'var(--text-primary)' : 'white',\r\n                                                fontFamily: 'var(--font-display)',\r\n                                                letterSpacing: '0.04em'\r\n                                            }}\r\n                                        >\r\n                                            {item.exercise.name}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Duration */}\r\n                                    <div\r\n                                        className=\"text-sm font-bold\"\r\n                                        style={{ fontFamily: 'var(--font-body)', color: 'var(--accent-color)', letterSpacing: '0.05em' }}\r\n                                    >\r\n                                        {item.duration}m\r\n                                    </div>\r\n\r\n                                    {/* Remove button */}\r\n                                    <button\r\n                                        onClick={() => handleRemoveExercise(index)}\r\n                                        className={`text-sm transition-colors ${isLight ? 'text-[#3D3425]/30 hover:text-[#3D3425]/70' : 'text-white/30 hover:text-white/70'}`}\r\n                                    >\r\n                                        Γ£ò\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {selectedExercises.length === 0 && (\r\n                <div\r\n                    className=\"p-8 text-center rounded\"\r\n                    style={{\r\n                        background: 'rgba(255,255,255,0.02)',\r\n                        border: '1px solid rgba(255,255,255,0.05)',\r\n                    }}\r\n                >\r\n                    <p\r\n                        className=\"text-sm font-medium\"\r\n                        style={{ fontFamily: 'var(--font-body)', color: isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.4)' }}\r\n                    >\r\n                        Select practices above to build your circuit\r\n                    </p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\CircuitSession.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\CircuitSigil.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[98,137],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/CircuitSigil.jsx\r\n// Living sigil that charges as exercises are selected\r\nimport { motion } from 'framer-motion';\r\n\r\nconst SIGIL_SIZE = 200;\r\nconst CENTER_SIZE = 60;\r\nconst RING_COUNT = 6; // Max exercises\r\nconst RING_RADIUS = 80;\r\nconst RING_WIDTH = 8;\r\nconst SEGMENT_GAP = 4; // Gap between segments in degrees\r\n\r\n// Exercise type to glyph symbol mapping\r\nconst EXERCISE_GLYPHS = {\r\n    'breath': 'Γùë',      // Circle with dot - centered breath\r\n    'cognitive': 'Γû│',   // Triangle - ascending thought\r\n    'somatic': 'Γùè',     // Diamond - body awareness\r\n    'visualization': 'Γ£ª', // Star - visual focus\r\n    'cymatics': 'Γëï',    // Waves - sound/frequency\r\n    'sound': 'ΓÖ¬',       // Music note - auditory\r\n};\r\n\r\nexport function CircuitSigil({ selectedExercises = [], totalExercises = 6 }) {\r\n    const progress = selectedExercises.length / totalExercises;\r\n\r\n    // Calculate segment angle for each ring slot\r\n    const segmentAngle = 360 / RING_COUNT;\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center\" style={{ width: SIGIL_SIZE, height: SIGIL_SIZE }}>\r\n            <svg width={SIGIL_SIZE} height={SIGIL_SIZE} viewBox={`0 0 ${SIGIL_SIZE} ${SIGIL_SIZE}`}>\r\n                <defs>\r\n                    {/* Glow filter for active segments */}\r\n                    <filter id=\"segment-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                        <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\r\n                        <feMerge>\r\n                            <feMergeNode in=\"coloredBlur\" />\r\n                            <feMergeNode in=\"SourceGraphic\" />\r\n                        </feMerge>\r\n                    </filter>\r\n\r\n                    {/* Core glow for center */}\r\n                    <radialGradient id=\"core-gradient\">\r\n                        <stop offset=\"0%\" stopColor=\"var(--accent-color)\" stopOpacity=\"0.3\" />\r\n                        <stop offset=\"100%\" stopColor=\"var(--accent-color)\" stopOpacity=\"0\" />\r\n                    </radialGradient>\r\n                </defs>\r\n\r\n                {/* Center core - pulses with selection */}\r\n                <motion.circle\r\n                    cx={SIGIL_SIZE / 2}\r\n                    cy={SIGIL_SIZE / 2}\r\n                    r={CENTER_SIZE / 2}\r\n                    fill=\"url(#core-gradient)\"\r\n                    initial={{ opacity: 0.3, scale: 1 }}\r\n                    animate={{\r\n                        opacity: 0.3 + (progress * 0.4),\r\n                        scale: 1 + (progress * 0.1)\r\n                    }}\r\n                    transition={{ duration: 0.5 }}\r\n                />\r\n\r\n                {/* Inner circle border */}\r\n                <circle\r\n                    cx={SIGIL_SIZE / 2}\r\n                    cy={SIGIL_SIZE / 2}\r\n                    r={CENTER_SIZE / 2}\r\n                    fill=\"none\"\r\n                    stroke=\"var(--accent-color)\"\r\n                    strokeWidth=\"1\"\r\n                    opacity=\"0.4\"\r\n                />\r\n\r\n                {/* Exercise ring segments */}\r\n                <g>\r\n                    {Array.from({ length: RING_COUNT }).map((_, index) => {\r\n                        const exercise = selectedExercises[index];\r\n                        const isActive = !!exercise;\r\n\r\n                        const startAngle = index * segmentAngle - 90 + SEGMENT_GAP / 2;\r\n                        const endAngle = (index + 1) * segmentAngle - 90 - SEGMENT_GAP / 2;\r\n\r\n                        // Convert to radians\r\n                        const startRad = (startAngle * Math.PI) / 180;\r\n                        const endRad = (endAngle * Math.PI) / 180;\r\n\r\n                        // Calculate arc path\r\n                        const innerRadius = RING_RADIUS - RING_WIDTH / 2;\r\n                        const outerRadius = RING_RADIUS + RING_WIDTH / 2;\r\n\r\n                        const x1 = SIGIL_SIZE / 2 + Math.cos(startRad) * innerRadius;\r\n                        const y1 = SIGIL_SIZE / 2 + Math.sin(startRad) * innerRadius;\r\n                        const x2 = SIGIL_SIZE / 2 + Math.cos(endRad) * innerRadius;\r\n                        const y2 = SIGIL_SIZE / 2 + Math.sin(endRad) * innerRadius;\r\n                        const x3 = SIGIL_SIZE / 2 + Math.cos(endRad) * outerRadius;\r\n                        const y3 = SIGIL_SIZE / 2 + Math.sin(endRad) * outerRadius;\r\n                        const x4 = SIGIL_SIZE / 2 + Math.cos(startRad) * outerRadius;\r\n                        const y4 = SIGIL_SIZE / 2 + Math.sin(startRad) * outerRadius;\r\n\r\n                        const pathData = `\r\n                            M ${x1} ${y1}\r\n                            A ${innerRadius} ${innerRadius} 0 0 1 ${x2} ${y2}\r\n                            L ${x3} ${y3}\r\n                            A ${outerRadius} ${outerRadius} 0 0 0 ${x4} ${y4}\r\n                            Z\r\n                        `;\r\n\r\n                        return (\r\n                            <motion.path\r\n                                key={index}\r\n                                d={pathData}\r\n                                fill={isActive ? 'var(--accent-color)' : 'rgba(255,255,255,0.08)'}\r\n                                stroke={isActive ? 'var(--accent-color)' : 'rgba(255,255,255,0.15)'}\r\n                                strokeWidth=\"0.5\"\r\n                                initial={{ opacity: 0.3 }}\r\n                                animate={{\r\n                                    opacity: isActive ? 0.8 : 0.3,\r\n                                    filter: isActive ? 'url(#segment-glow)' : 'none'\r\n                                }}\r\n                                transition={{ duration: 0.4, delay: index * 0.05 }}\r\n                            />\r\n                        );\r\n                    })}\r\n                </g>\r\n\r\n                {/* Exercise glyphs on ring */}\r\n                {selectedExercises.map((item, index) => {\r\n                    const angle = index * segmentAngle - 90;\r\n                    const rad = (angle * Math.PI) / 180;\r\n                    const x = SIGIL_SIZE / 2 + Math.cos(rad) * RING_RADIUS;\r\n                    const y = SIGIL_SIZE / 2 + Math.sin(rad) * RING_RADIUS;\r\n\r\n                    const glyph = EXERCISE_GLYPHS[item.exercise.id] || 'Γùï';\r\n\r\n                    return (\r\n                        <motion.text\r\n                            key={`${item.exercise.id}-${index}`}\r\n                            x={x}\r\n                            y={y}\r\n                            textAnchor=\"middle\"\r\n                            dominantBaseline=\"middle\"\r\n                            fill=\"var(--accent-color)\"\r\n                            fontSize=\"16\"\r\n                            fontWeight=\"bold\"\r\n                            initial={{ opacity: 0, scale: 0 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            transition={{ duration: 0.3, delay: index * 0.1 }}\r\n                            style={{\r\n                                filter: 'drop-shadow(0 0 4px var(--accent-color))',\r\n                            }}\r\n                        >\r\n                            {glyph}\r\n                        </motion.text>\r\n                    );\r\n                })}\r\n\r\n                {/* Connecting lines from glyphs to center */}\r\n                {selectedExercises.map((item, index) => {\r\n                    const angle = index * segmentAngle - 90;\r\n                    const rad = (angle * Math.PI) / 180;\r\n                    const x1 = SIGIL_SIZE / 2 + Math.cos(rad) * (CENTER_SIZE / 2 + 5);\r\n                    const y1 = SIGIL_SIZE / 2 + Math.sin(rad) * (CENTER_SIZE / 2 + 5);\r\n                    const x2 = SIGIL_SIZE / 2 + Math.cos(rad) * (RING_RADIUS - RING_WIDTH / 2 - 5);\r\n                    const y2 = SIGIL_SIZE / 2 + Math.sin(rad) * (RING_RADIUS - RING_WIDTH / 2 - 5);\r\n\r\n                    return (\r\n                        <motion.line\r\n                            key={`line-${index}`}\r\n                            x1={x1}\r\n                            y1={y1}\r\n                            x2={x2}\r\n                            y2={y2}\r\n                            stroke=\"var(--accent-color)\"\r\n                            strokeWidth=\"0.5\"\r\n                            opacity=\"0.2\"\r\n                            initial={{ pathLength: 0 }}\r\n                            animate={{ pathLength: 1 }}\r\n                            transition={{ duration: 0.5, delay: index * 0.1 }}\r\n                        />\r\n                    );\r\n                })}\r\n            </svg>\r\n\r\n            {/* Center progress text */}\r\n            <div\r\n                className=\"absolute inset-0 flex items-center justify-center\"\r\n                style={{ width: SIGIL_SIZE, height: SIGIL_SIZE }}\r\n            >\r\n                <motion.div\r\n                    className=\"text-center\"\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    transition={{ duration: 0.5 }}\r\n                >\r\n                    <div\r\n                        className=\"text-3xl font-bold tracking-wide\"\r\n                        style={{ fontFamily: 'var(--font-display)', color: 'var(--accent-color)' }}\r\n                    >\r\n                        {selectedExercises.length}\r\n                    </div>\r\n                    <div\r\n                        className=\"text-[9px] uppercase tracking-wider font-bold\"\r\n                        style={{ fontFamily: 'var(--font-body)', color: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.5)' }}\r\n                    >\r\n                        Paths\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\CircuitTrainer.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[190,229],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/CircuitTrainer.jsx\r\n// Circuit selection UI with custom circuit builder\r\n// Phase 2: Wired to Zustand store via useCircuitManager\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useCircuitManager } from '../../state/circuitManager';\r\nimport { CircuitConfig } from './CircuitConfig';\r\n\r\nexport function CircuitTrainer({ onSelectCircuit }) {\r\n    const allCircuits = useCircuitManager(s => s.getAllCircuits());\r\n    const circuits = allCircuits || [];\r\n    \r\n    const [showCustomBuilder, setShowCustomBuilder] = useState(false);\r\n    const [customCircuitConfig, setCustomCircuitConfig] = useState(null);\r\n\r\n    const handleStartPresetCircuit = (circuit) => {\r\n        if (onSelectCircuit) {\r\n            onSelectCircuit(circuit);\r\n        }\r\n    };\r\n\r\n    const handleStartCustomCircuit = () => {\r\n        if (!customCircuitConfig || customCircuitConfig.exercises.length === 0) return;\r\n\r\n        const customCircuit = {\r\n            id: 'custom_circuit',\r\n            name: 'Custom Circuit',\r\n            description: 'Your personalized training sequence',\r\n            totalDuration: customCircuitConfig.exercises.reduce((sum, e) => sum + e.duration, 0),\r\n            exercises: customCircuitConfig.exercises.map((item) => ({\r\n                type: item.exercise.type,\r\n                name: item.exercise.name,\r\n                duration: item.duration,\r\n                instructions: `${item.duration}-minute ${item.exercise.name.toLowerCase()}`,\r\n                practiceType: item.exercise.practiceType,\r\n                preset: item.exercise.preset,\r\n                sensoryType: item.exercise.sensoryType,\r\n            })),\r\n        };\r\n\r\n        if (onSelectCircuit) {\r\n            onSelectCircuit(customCircuit);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"mb-4\">\r\n                <h3 className=\"text-xl font-bold tracking-wide text-white/90 mb-1\" style={{ fontFamily: 'var(--font-display)' }}>Circuit Trainer</h3>\r\n                <p className=\"text-sm text-white/60 font-medium\" style={{ fontFamily: 'var(--font-body)' }}>Sequential practice sessions across multiple paths</p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2 mb-4\">\r\n                <button onClick={() => setShowCustomBuilder(false)} className={`flex-1 px-4 py-2 rounded font-bold tracking-wide text-sm transition-all ${!showCustomBuilder ? 'bg-[#fcd34d] text-black' : 'bg-white/10 text-white/60 hover:bg-white/15'}`} style={{ fontFamily: 'var(--font-body)' }}>Preset Circuits</button>\r\n                <button onClick={() => setShowCustomBuilder(true)} className={`flex-1 px-4 py-2 rounded font-bold tracking-wide text-sm transition-all ${showCustomBuilder ? 'bg-[#fcd34d] text-black' : 'bg-white/10 text-white/60 hover:bg-white/15'}`} style={{ fontFamily: 'var(--font-body)' }}>Custom Circuit</button>\r\n            </div>\r\n\r\n            {!showCustomBuilder && (\r\n                <div className=\"space-y-4\">\r\n                    {circuits.map((circuit) => (\r\n                        <motion.div key={circuit.id} className=\"p-6 bg-gradient-to-br from-[#161625] to-[#1a1a2e] border border-white/10 rounded-lg\" whileHover={{ scale: 1.01 }}>\r\n                            <div className=\"flex justify-between items-start mb-3\">\r\n                                <div>\r\n                                    <h4 className=\"text-lg font-bold tracking-wide text-white/90 mb-1\" style={{ fontFamily: 'var(--font-display)' }}>{circuit.name}</h4>\r\n                                    <p className=\"text-sm text-white/60 font-medium\" style={{ fontFamily: 'var(--font-body)' }}>{circuit.description}</p>\r\n                                </div>\r\n                                <div className=\"text-sm text-white/50 font-medium\" style={{ fontFamily: 'var(--font-body)' }}>{circuit.totalDuration} min</div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2 mb-4\">\r\n                                {circuit.exercises.map((ex, idx) => (\r\n                                    <div key={idx} className=\"flex items-center gap-3 p-3 bg-white/5 rounded border border-white/10\">\r\n                                        <div className=\"text-2xl\">{ex.targetDomain === 'breath' && '≡ƒî¼∩╕Å'}{ex.targetDomain === 'focus' && '≡ƒöÑ'}{ex.targetDomain === 'body' && 'Γ£¿'}</div>\r\n                                        <div className=\"flex-1\">\r\n                                            <div className=\"text-sm font-bold tracking-wide text-white/80 mb-1\" style={{ fontFamily: 'var(--font-display)' }}>{ex.name}</div>\r\n                                            <div className=\"text-xs text-white/50 font-medium\" style={{ fontFamily: 'var(--font-body)' }}>{ex.practiceType || ex.name}</div>\r\n                                        </div>\r\n                                        <div className=\"text-xs text-white/50 font-bold\" style={{ fontFamily: 'var(--font-body)' }}>{ex.duration}m</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <button onClick={() => handleStartPresetCircuit(circuit)} className=\"w-full px-4 py-2 bg-[#fcd34d] text-black rounded font-bold tracking-wide hover:bg-[#fcd34d]/90 transition-colors\" style={{ fontFamily: 'var(--font-body)' }}>Start Circuit</button>\r\n                        </motion.div>\r\n                    ))}\r\n\r\n                    {circuits.length === 0 && (\r\n                        <div className=\"p-6 bg-white/5 rounded border border-white/10 text-center\">\r\n                            <p className=\"text-sm text-white/50 font-medium\" style={{ fontFamily: 'var(--font-body)' }}>No preset circuits available</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {showCustomBuilder && (\r\n                <div className=\"p-6 bg-gradient-to-br from-[#161625] to-[#1a1a2e] border border-white/10 rounded-lg\">\r\n                    <div className=\"mb-4\">\r\n                        <h4 className=\"text-lg font-bold tracking-wide text-white/90 mb-1\" style={{ fontFamily: 'var(--font-display)' }}>Build Your Circuit</h4>\r\n                        <p className=\"text-sm text-white/60 font-medium\" style={{ fontFamily: 'var(--font-body)' }}>Choose exercises and set durations</p>\r\n                    </div>\r\n                    <CircuitConfig value={customCircuitConfig} onChange={setCustomCircuitConfig} />\r\n                    <button onClick={handleStartCustomCircuit} disabled={!customCircuitConfig || customCircuitConfig.exercises.length === 0} className={`w-full mt-4 px-4 py-2 rounded font-bold tracking-wide transition-all ${customCircuitConfig && customCircuitConfig.exercises.length > 0 ? 'bg-[#fcd34d] text-black hover:bg-[#fcd34d]/90' : 'bg-white/10 text-white/30 cursor-not-allowed'}`} style={{ fontFamily: 'var(--font-body)' }}>Start Custom Circuit</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CircuitTrainer;","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\CircuitTrainerConnected.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\ConsistencyFoundation.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[325,364],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/ConsistencyFoundation.jsx\r\n// Navigation component showing current cycle status\r\nimport { useCycleStore } from '../../state/cycleStore';\r\nimport { useDisplayModeStore } from '../../state/displayModeStore.js';\r\nimport { useState } from 'react';\r\nimport { CycleChoiceModal } from './CycleChoiceModal';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport function ConsistencyFoundation() {\r\n    const currentCycle = useCycleStore((state) => state.currentCycle);\r\n    const getCycleInfo = useCycleStore((state) => state.getCycleInfo);\r\n    const canSwitchMode = useCycleStore((state) => state.canSwitchMode);\r\n\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const [showCycleChoice, setShowCycleChoice] = useState(false);\r\n\r\n    // No cycle active - show call to action\r\n    if (!currentCycle) {\r\n        return (\r\n            <>\r\n                <motion.div\r\n                    className=\"p-6 rounded-3xl mb-4 border transition-all duration-500\"\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    style={{\r\n                        background: isLight\r\n                            ? 'linear-gradient(135deg, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0.4) 100%)'\r\n                            : 'linear-gradient(135deg, #161625 0%, #1a1a2e 100%)',\r\n                        borderColor: isLight ? 'rgba(180, 140, 90, 0.25)' : 'rgba(255,255,255,0.1)',\r\n                        boxShadow: isLight ? '0 10px 30px rgba(180, 140, 90, 0.1)' : '0 10px 30px rgba(0,0,0,0.3)',\r\n                    }}\r\n                >\r\n                    <div className=\"flex items-center justify-between mb-3\">\r\n                        <h3\r\n                            className=\"text-lg font-bold tracking-wide\"\r\n                            style={{\r\n                                fontFamily: 'var(--font-display)',\r\n                                color: isLight ? 'rgba(60, 52, 37, 0.9)' : 'white'\r\n                            }}\r\n                        >\r\n                            Consistency Foundation\r\n                        </h3>\r\n                        <div className=\"text-2xl\" style={{ color: isLight ? 'rgba(180, 140, 90, 0.6)' : 'rgba(252, 211, 77, 0.6)' }}>Γù»</div>\r\n                    </div>\r\n\r\n                    <p\r\n                        className=\"text-sm font-medium mb-6 leading-relaxed\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            color: isLight ? 'rgba(90, 77, 60, 0.7)' : 'rgba(255, 255, 255, 0.6)'\r\n                        }}\r\n                    >\r\n                        Ready to establish your practice foundation? Choose your commitment structure.\r\n                    </p>\r\n\r\n                    <button\r\n                        onClick={() => setShowCycleChoice(true)}\r\n                        className=\"w-full px-4 py-3 rounded-xl font-bold tracking-wide transition-all active:scale-95\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontSize: '12px',\r\n                            background: isLight ? 'rgba(180, 140, 90, 0.8)' : '#fcd34d',\r\n                            color: isLight ? 'white' : 'black',\r\n                            boxShadow: isLight ? '0 4px 12px rgba(180, 140, 90, 0.3)' : '0 4px 12px rgba(252, 211, 77, 0.2)'\r\n                        }}\r\n                    >\r\n                        BEGIN FOUNDATION CYCLE\r\n                    </button>\r\n                </motion.div>\r\n\r\n                <CycleChoiceModal\r\n                    isOpen={showCycleChoice}\r\n                    onClose={() => setShowCycleChoice(false)}\r\n                    cycleType=\"foundation\"\r\n                />\r\n            </>\r\n        );\r\n    }\r\n\r\n    // Cycle in progress\r\n    const info = getCycleInfo();\r\n    if (!info) return null;\r\n\r\n    const progressPercent = (info.effectiveDays / info.targetDays) * 100;\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"p-6 rounded-3xl mb-4 border transition-all duration-500\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            style={{\r\n                background: isLight\r\n                    ? 'linear-gradient(135deg, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0.4) 100%)'\r\n                    : 'linear-gradient(135deg, #161625 0%, #1a1a2e 100%)',\r\n                borderColor: isLight ? 'rgba(180, 140, 90, 0.25)' : 'rgba(255,255,255,0.1)',\r\n                boxShadow: isLight ? '0 10px 30px rgba(180, 140, 90, 0.1)' : '0 10px 30px rgba(0,0,0,0.3)',\r\n            }}\r\n        >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                    <h3\r\n                        className=\"text-lg font-bold tracking-wide capitalize\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            color: isLight ? 'rgba(60, 52, 37, 0.9)' : 'white'\r\n                        }}\r\n                    >\r\n                        {info.type} Cycle\r\n                    </h3>\r\n                    <div\r\n                        className=\"text-xs font-medium\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            color: isLight ? 'rgba(90, 77, 60, 0.5)' : 'rgba(255, 255, 255, 0.5)'\r\n                        }}\r\n                    >\r\n                        Day {info.currentDay} of {info.targetDays} ┬╖ {info.mode}\r\n                    </div>\r\n                </div>\r\n                <div className=\"text-3xl\">\r\n                    {info.type === 'foundation' && '≡ƒî▒'}\r\n                    {info.type === 'transformation' && '≡ƒöÑ'}\r\n                    {info.type === 'integration' && 'Γ¡É'}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"mb-4\">\r\n                <div\r\n                    className=\"w-full h-2 rounded-full overflow-hidden\"\r\n                    style={{ background: isLight ? 'rgba(0, 0, 0, 0.05)' : 'rgba(255, 255, 255, 0.1)' }}\r\n                >\r\n                    <motion.div\r\n                        className=\"h-full bg-gradient-to-r from-[#fcd34d] to-[#f59e0b]\"\r\n                        initial={{ width: 0 }}\r\n                        animate={{ width: `${Math.min(100, progressPercent)}%` }}\r\n                        transition={{ duration: 0.5, ease: 'easeOut' }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Metrics Grid */}\r\n            <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n                {[\r\n                    { label: 'Practice Days', value: `${info.practiceDays} / ${Math.ceil(info.targetDays * (info.baseline / 100))}` },\r\n                    { label: 'Consistency', value: `${info.consistencyRate}%` },\r\n                    { label: 'Effective Days', value: info.effectiveDays },\r\n                    { label: 'Projected', value: `Day ${info.projectedCompletion}` }\r\n                ].map((m, i) => (\r\n                    <div\r\n                        key={i}\r\n                        className=\"p-3 rounded border transition-colors duration-500\"\r\n                        style={{\r\n                            background: isLight ? 'rgba(255, 255, 255, 0.5)' : 'rgba(255, 255, 255, 0.05)',\r\n                            borderColor: isLight ? 'rgba(180, 140, 90, 0.15)' : 'rgba(255, 255, 255, 0.1)'\r\n                        }}\r\n                    >\r\n                        <div\r\n                            className=\"text-[10px] uppercase tracking-wider font-bold mb-1\"\r\n                            style={{\r\n                                fontFamily: 'var(--font-body)',\r\n                                color: isLight ? 'rgba(90, 77, 60, 0.4)' : 'rgba(255, 255, 255, 0.4)'\r\n                            }}\r\n                        >\r\n                            {m.label}\r\n                        </div>\r\n                        <div\r\n                            className=\"text-lg font-bold\"\r\n                            style={{\r\n                                fontFamily: 'var(--font-display)',\r\n                                color: isLight ? 'rgba(60, 52, 37, 0.85)' : 'rgba(255, 255, 255, 0.9)'\r\n                            }}\r\n                        >\r\n                            {m.value}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Next Checkpoint */}\r\n            {info.nextCheckpoint && (\r\n                <div\r\n                    className=\"p-3 border rounded transition-colors duration-500\"\r\n                    style={{\r\n                        background: isLight ? 'rgba(180, 140, 90, 0.1)' : 'rgba(252, 211, 77, 0.1)',\r\n                        borderColor: isLight ? 'rgba(180, 140, 90, 0.2)' : 'rgba(252, 211, 77, 0.2)'\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"text-[10px] uppercase tracking-wider font-bold mb-1\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            color: isLight ? 'rgba(140, 100, 40, 0.8)' : 'rgba(252, 211, 77, 0.8)'\r\n                        }}\r\n                    >\r\n                        Next Checkpoint\r\n                    </div>\r\n                    <div\r\n                        className=\"text-sm font-bold\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            color: isLight ? 'rgba(140, 100, 40, 1)' : '#fcd34d'\r\n                        }}\r\n                    >\r\n                        {new Date(info.nextCheckpoint).toLocaleDateString()}\r\n                        {canSwitchMode && ' ┬╖ Mode change available'}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\CycleChoiceModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[98,105],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/CycleChoiceModal.jsx\r\n// Modal for choosing cycle type and mode\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useCycleStore, CYCLE_TYPES, CYCLE_MODES } from '../../state/cycleStore';\r\nimport { useState } from 'react';\r\n\r\nexport function CycleChoiceModal({ isOpen, onClose, cycleType = 'foundation' }) {\r\n    const startCycle = useCycleStore((state) => state.startCycle);\r\n    const [selectedMode, setSelectedMode] = useState(null);\r\n\r\n    const handleStartCycle = () => {\r\n        if (!selectedMode) return;\r\n\r\n        startCycle(cycleType, selectedMode);\r\n        onClose();\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                className=\"fixed inset-0 z-50 flex items-center justify-center\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n            >\r\n                {/* Backdrop */}\r\n                <div\r\n                    className=\"absolute inset-0 bg-black/80\"\r\n                    onClick={onClose}\r\n                />\r\n\r\n                {/* Modal */}\r\n                <motion.div\r\n                    className=\"relative w-full max-w-2xl mx-4 p-8 bg-[#161625] border border-white/10 rounded-lg\"\r\n                    initial={{ scale: 0.9, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    exit={{ scale: 0.9, opacity: 0 }}\r\n                    transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"mb-6\">\r\n                        <h2\r\n                            className=\"text-2xl font-bold tracking-wide text-white/90 mb-2\"\r\n                            style={{ fontFamily: 'var(--font-display)' }}\r\n                        >\r\n                            Choose Your Path\r\n                        </h2>\r\n                        <p\r\n                            className=\"text-white/60 font-medium\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            {cycleType === 'foundation' && 'Establish your baseline consistency over 14 days'}\r\n                            {cycleType === 'transformation' && 'Deepen your practice over 90 days'}\r\n                            {cycleType === 'integration' && 'Sustain long-term commitment over 180 days'}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Mode Cards */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n                        {/* Consecutive Mode */}\r\n                        <motion.button\r\n                            className={`p-6 border-2 rounded-lg text-left transition-all ${selectedMode === CYCLE_MODES.CONSECUTIVE\r\n                                ? 'border-[#fcd34d] bg-[#fcd34d]/10'\r\n                                : 'border-white/10 hover:border-white/20'\r\n                                }`}\r\n                            onClick={() => setSelectedMode(CYCLE_MODES.CONSECUTIVE)}\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <h3\r\n                                    className=\"text-lg font-bold tracking-wide text-white/90\"\r\n                                    style={{ fontFamily: 'var(--font-display)' }}\r\n                                >\r\n                                    Consecutive\r\n                                </h3>\r\n                                <div className=\"text-2xl\">ΓÜí</div>\r\n                            </div>\r\n\r\n                            <div className=\"mb-3\">\r\n                                <div\r\n                                    className=\"text-sm text-white/50 font-medium mb-1\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    {cycleType === 'foundation' && '14 days unbroken'}\r\n                                    {cycleType === 'transformation' && '90 days unbroken'}\r\n                                    {cycleType === 'integration' && '180 days unbroken'}\r\n                                </div>\r\n                                <div className=\"text-xs text-white/40\">100% required</div>\r\n                            </div>\r\n\r\n                            <p\r\n                                className=\"text-sm text-white/60 leading-relaxed font-medium\"\r\n                                style={{ fontFamily: 'var(--font-body)' }}\r\n                            >\r\n                                Unbroken discipline. Every day counts. Rewards consistency over flexibility.\r\n                                Higher bar, faster recognition.\r\n                            </p>\r\n                        </motion.button>\r\n\r\n                        {/* Flexible Mode */}\r\n                        <motion.button\r\n                            className={`p-6 border-2 rounded-lg text-left transition-all ${selectedMode === CYCLE_MODES.FLEXIBLE\r\n                                ? 'border-[#22d3ee] bg-[#22d3ee]/10'\r\n                                : 'border-white/10 hover:border-white/20'\r\n                                }`}\r\n                            onClick={() => setSelectedMode(CYCLE_MODES.FLEXIBLE)}\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <h3\r\n                                    className=\"text-lg font-bold tracking-wide text-white/90\"\r\n                                    style={{ fontFamily: 'var(--font-display)' }}\r\n                                >\r\n                                    Flexible\r\n                                </h3>\r\n                                <div className=\"text-2xl\">≡ƒîè</div>\r\n                            </div>\r\n\r\n                            <div className=\"mb-3\">\r\n                                <div\r\n                                    className=\"text-sm text-white/50 font-medium mb-1\"\r\n                                    style={{ fontFamily: 'var(--font-body)' }}\r\n                                >\r\n                                    {cycleType === 'foundation' && '14 of 21 days'}\r\n                                    {cycleType === 'transformation' && '60 of 90 days'}\r\n                                    {cycleType === 'integration' && '120 of 180 days'}\r\n                                </div>\r\n                                <div className=\"text-xs text-white/40\">67% required</div>\r\n                            </div>\r\n\r\n                            <p\r\n                                className=\"text-sm text-white/60 leading-relaxed font-medium\"\r\n                                style={{ fontFamily: 'var(--font-body)' }}\r\n                            >\r\n                                Life happens, you adapt. Rewards persistence over perfection.\r\n                                Sustainable for real-world commitments.\r\n                            </p>\r\n                        </motion.button>\r\n                    </div>\r\n\r\n                    {/* Footer Note */}\r\n                    <div className=\"mb-6 p-4 bg-white/5 rounded border border-white/10\">\r\n                        <p\r\n                            className=\"text-xs text-white/50 leading-relaxed font-medium\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            No judgment. Your choice reflects your current capacity.\r\n                            We use this to calibrate your journey. You can switch modes\r\n                            at 2-week checkpoints.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-3 justify-end\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"px-6 py-2 text-white/60 hover:text-white/80 font-bold tracking-wide transition-colors\"\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={handleStartCycle}\r\n                            disabled={!selectedMode}\r\n                            className={`px-6 py-2 rounded font-bold tracking-wide transition-all ${selectedMode\r\n                                ? 'bg-[#fcd34d] text-black hover:bg-[#fcd34d]/90'\r\n                                : 'bg-white/10 text-white/30 cursor-not-allowed'\r\n                                }`}\r\n                            style={{ fontFamily: 'var(--font-body)' }}\r\n                        >\r\n                            Begin Cycle\r\n                        </button>\r\n                    </div>\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\ModeSwitchDialog.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[99,106],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/ModeSwitchDialog.jsx\r\n// Confirmation dialog for switching modes\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useCycleStore, CYCLE_MODES } from '../../state/cycleStore';\r\nimport { recalibrateOnModeSwitch } from '../../services/cycleManager';\r\n\r\nexport function ModeSwitchDialog({ isOpen, onClose, onConfirm }) {\r\n    const currentCycle = useCycleStore((state) => state.currentCycle);\r\n    const getCycleInfo = useCycleStore((state) => state.getCycleInfo);\r\n\r\n    if (!isOpen || !currentCycle) return null;\r\n\r\n    const info = getCycleInfo();\r\n    const newMode = info.mode === CYCLE_MODES.CONSECUTIVE\r\n        ? CYCLE_MODES.FLEXIBLE\r\n        : CYCLE_MODES.CONSECUTIVE;\r\n\r\n    // Calculate what would happen if switched\r\n    const currentEffective = info.effectiveDays;\r\n    const currentRate = info.consistencyRate / 100;\r\n    const newBaseline = newMode === CYCLE_MODES.CONSECUTIVE ? 1.0 : 0.67;\r\n    const recalibratedDays = Math.floor(info.practiceDays * (currentRate / newBaseline));\r\n    const timelineChange = recalibratedDays - currentEffective;\r\n\r\n    const handleConfirm = () => {\r\n        const result = recalibrateOnModeSwitch(newMode);\r\n        if (result.success) {\r\n            onConfirm();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n            >\r\n                {/* Backdrop */}\r\n                <div className=\"absolute inset-0 bg-black/90\" onClick={onClose} />\r\n\r\n                {/* Dialog */}\r\n                <motion.div\r\n                    className=\"relative w-full max-w-md bg-[#161625] border border-white/10 rounded-lg p-6\"\r\n                    initial={{ scale: 0.9, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    exit={{ scale: 0.9, opacity: 0 }}\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"mb-4\">\r\n                        <h3 className=\"text-xl font-bold text-white/90 mb-2 tracking-wide\" style={{ fontFamily: 'var(--font-display)' }}>\r\n                            Switch to {newMode}?\r\n                        </h3>\r\n                        <p className=\"text-sm text-white/60 font-medium tracking-tight\" style={{ fontFamily: 'var(--font-ui)' }}>\r\n                            This will recalibrate your timeline based on the new standard.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Current Progress */}\r\n                    <div className=\"mb-4 p-4 bg-white/5 rounded border border-white/10\">\r\n                        <div className=\"text-xs text-white/50 mb-2 font-bold tracking-[0.1em] uppercase\" style={{ fontFamily: 'var(--font-ui)' }}>Current Progress</div>\r\n                        <div className=\"space-y-2 text-sm text-white/70 font-medium\" style={{ fontFamily: 'var(--font-ui)' }}>\r\n                            <div>┬╖ {info.practiceDays} practice days over {info.currentDay} elapsed</div>\r\n                            <div>┬╖ Effective progress: {currentEffective} days toward goal</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* After Switch */}\r\n                    <div className=\"mb-4 p-4 bg-[#fcd34d]/10 border border-[#fcd34d]/20 rounded\">\r\n                        <div className=\"text-xs text-[#fcd34d]/80 mb-2 font-bold tracking-[0.1em] uppercase\" style={{ fontFamily: 'var(--font-ui)' }}>After Switch</div>\r\n                        <div className=\"space-y-2 text-sm text-white/70 font-medium\" style={{ fontFamily: 'var(--font-ui)' }}>\r\n                            <div>┬╖ Same {info.practiceDays} practice days</div>\r\n                            <div>\r\n                                ┬╖ New effective progress: {recalibratedDays} days\r\n                                {newMode === CYCLE_MODES.CONSECUTIVE ? ' (higher bar)' : ' (lower bar)'}\r\n                            </div>\r\n                            <div className={timelineChange > 0 ? 'text-[#4ade80]' : 'text-[#f87171]'}>\r\n                                ┬╖ Timeline {timelineChange > 0 ? 'shrinks' : 'extends'} by ~{Math.abs(timelineChange)} days\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Warning */}\r\n                    <div className=\"mb-6 p-3 bg-orange-500/10 border border-orange-500/20 rounded\">\r\n                        <p className=\"text-xs text-orange-200/80 font-medium italic\" style={{ fontFamily: 'var(--font-ui)' }}>\r\n                            This change locks for 2 weeks. You won't be able to switch again\r\n                            until the next checkpoint.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex gap-3\">\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"flex-1 px-4 py-2 bg-white/10 hover:bg-white/15 text-white/80 rounded transition-colors font-bold tracking-wide\"\r\n                            style={{ fontFamily: 'var(--font-ui)' }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={handleConfirm}\r\n                            className=\"flex-1 px-4 py-2 bg-[#fcd34d] text-black rounded hover:bg-[#fcd34d]/90 transition-colors font-bold tracking-wide\"\r\n                            style={{ fontFamily: 'var(--font-ui)' }}\r\n                        >\r\n                            Confirm Switch\r\n                        </button>\r\n                    </div>\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\Cycle\\OrbitalSequence.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[93,132],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/Cycle/OrbitalSequence.jsx\r\n// Orbital/radial layout for circuit exercises\r\nimport { motion } from 'framer-motion';\r\n\r\nexport function OrbitalSequence({ selectedExercises, onRemove }) {\r\n    if (selectedExercises.length === 0) return null;\r\n\r\n    return (\r\n        <div>\r\n            <div\r\n                className=\"text-xs text-white/40 mb-4 uppercase tracking-[0.15em] text-center font-bold\"\r\n                style={{ fontFamily: 'var(--font-body)' }}\r\n            >\r\n                Circuit Sequence ┬╖ {selectedExercises.length} Paths\r\n            </div>\r\n\r\n            {/* Orbital Container */}\r\n            <div className=\"relative flex items-center justify-center\" style={{ height: '320px' }}>\r\n                {/* Center Core */}\r\n                <div\r\n                    className=\"absolute rounded-full flex items-center justify-center z-10\"\r\n                    style={{\r\n                        width: '80px',\r\n                        height: '80px',\r\n                        background: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.1)',\r\n                        border: '1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3)',\r\n                        backdropFilter: 'blur(10px)',\r\n                        boxShadow: 'inset 0 0 20px hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.2)',\r\n                    }}\r\n                >\r\n                    <div className=\"text-center\">\r\n                        <div\r\n                            className=\"text-2xl font-bold tracking-wide\"\r\n                            style={{ fontFamily: 'var(--font-display)', color: 'var(--accent-color)' }}\r\n                        >\r\n                            {selectedExercises.length}\r\n                        </div>\r\n                        <div\r\n                            className=\"text-[8px] uppercase tracking-wider font-bold\"\r\n                            style={{ fontFamily: 'var(--font-body)', color: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.6)' }}\r\n                        >\r\n                            Paths\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Orbital Exercises */}\r\n                {selectedExercises.map((item, index) => {\r\n                    const angle = (index / selectedExercises.length) * 360 - 90;\r\n                    const rad = (angle * Math.PI) / 180;\r\n                    const radius = 120;\r\n                    const x = Math.cos(rad) * radius;\r\n                    const y = Math.sin(rad) * radius;\r\n\r\n                    return (\r\n                        <motion.div\r\n                            key={item.exercise.id}\r\n                            className=\"absolute\"\r\n                            style={{\r\n                                left: '50%',\r\n                                top: '50%',\r\n                                transform: `translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`,\r\n                            }}\r\n                            initial={{ opacity: 0, scale: 0 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            transition={{ delay: index * 0.1, type: 'spring', stiffness: 200 }}\r\n                        >\r\n                            {/* Connection Line to Center */}\r\n                            <div\r\n                                className=\"absolute\"\r\n                                style={{\r\n                                    width: '1px',\r\n                                    height: `${radius - 40}px`,\r\n                                    background: 'linear-gradient(to bottom, hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3), transparent)',\r\n                                    left: '50%',\r\n                                    bottom: '100%',\r\n                                    transform: `translateX(-50%) rotate(${-angle + 90}deg)`,\r\n                                    transformOrigin: 'bottom',\r\n                                }}\r\n                            />\r\n\r\n                            {/* Exercise Card */}\r\n                            <div\r\n                                className=\"rounded-full p-4 relative\"\r\n                                style={{\r\n                                    background: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.12)',\r\n                                    border: '1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.3)',\r\n                                    backdropFilter: 'blur(8px)',\r\n                                    boxShadow: `0 0 20px ${item.exercise.glow}`,\r\n                                    width: '70px',\r\n                                    height: '70px',\r\n                                }}\r\n                            >\r\n                                <div className=\"flex flex-col items-center justify-center h-full\">\r\n                                    <div\r\n                                        className=\"text-2xl mb-1\"\r\n                                        style={{\r\n                                            filter: `drop-shadow(0 0 6px ${item.exercise.glow})`,\r\n                                        }}\r\n                                    >\r\n                                        {item.exercise.icon}\r\n                                    </div>\r\n\r\n                                    {/* Duration Badge */}\r\n                                    <div\r\n                                        className=\"absolute -bottom-2 px-2 py-0.5 rounded-full text-[9px]\"\r\n                                        style={{\r\n                                            fontFamily: 'var(--font-body)',\r\n                                            background: 'hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.9)',\r\n                                            color: '#000',\r\n                                            fontWeight: '700',\r\n                                        }}\r\n                                    >\r\n                                        {item.duration}m\r\n                                    </div>\r\n\r\n                                    {/* Sequence Number */}\r\n                                    <div\r\n                                        className=\"absolute -top-2 -right-2 rounded-full text-[10px] flex items-center justify-center\"\r\n                                        style={{\r\n                                            fontFamily: 'var(--font-body)',\r\n                                            background: 'var(--accent-color)',\r\n                                            color: '#000',\r\n                                            width: '18px',\r\n                                            height: '18px',\r\n                                            fontWeight: '900',\r\n                                        }}\r\n                                    >\r\n                                        {index + 1}\r\n                                    </div>\r\n\r\n                                    {/* Remove Button */}\r\n                                    <button\r\n                                        onClick={() => onRemove(item.exercise)}\r\n                                        className=\"absolute -top-2 -left-2 rounded-full text-xs flex items-center justify-center transition-colors\"\r\n                                        style={{\r\n                                            background: 'rgba(0,0,0,0.8)',\r\n                                            color: 'rgba(255,255,255,0.5)',\r\n                                            width: '18px',\r\n                                            height: '18px',\r\n                                        }}\r\n                                        onMouseEnter={(e) => e.currentTarget.style.color = 'rgba(255,255,255,0.9)'}\r\n                                        onMouseLeave={(e) => e.currentTarget.style.color = 'rgba(255,255,255,0.5)'}\r\n                                    >\r\n                                        Γ£ò\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Exercise Name Tooltip */}\r\n                            <div\r\n                                className=\"absolute top-full mt-2 text-[10px] text-white/60 text-center whitespace-nowrap font-medium\"\r\n                                style={{ fontFamily: 'var(--font-body)', left: '50%', transform: 'translateX(-50%)' }}\r\n                            >\r\n                                {item.exercise.name}\r\n                            </div>\r\n                        </motion.div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Instructions */}\r\n            <div\r\n                className=\"text-center mt-4 text-[10px] text-white/30 font-medium\"\r\n                style={{ fontFamily: 'var(--font-body)' }}\r\n            >\r\n                Tap ├ù to remove ┬╖ Exercises run clockwise from top\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CymaticsCanvas.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[71,81],"text":""},"desc":"Remove unused variable 'useState'."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`performance.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  24 |     const particlesRef = useRef([]);\n  25 |     const animationIdRef = useRef(null);\n> 26 |     const startTimeRef = useRef(performance.now());\n     |                                 ^^^^^^^^^^^^^^^^^ Cannot call impure function\n  27 |\n  28 |     const PARTICLE_COUNT = 4000;\n  29 |     const PARTICLE_SIZE = 1.5;","line":26,"column":33,"nodeType":null,"endLine":26,"endColumn":50},{"ruleId":"no-unused-vars","severity":2,"message":"'amp' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":105,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"amp"},"fix":{"range":[3345,3436],"text":""},"desc":"Remove unused variable 'amp'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CymaticsCanvas.jsx\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport {\r\n    getChladniAmplitude,\r\n    applyDrift\r\n} from '../utils/chladniMath.js';\r\n\r\n/**\r\n * CymaticsCanvas: Particle-based visualization of Chladni plates\r\n * Particles migrate toward nodal lines (where amplitude = 0)\r\n */\r\n\r\nexport function CymaticsCanvas({\r\n    n = 5,\r\n    m = 7,\r\n    width = 400,\r\n    height = 400,\r\n    driftEnabled = false,\r\n    modes = null,\r\n    phase = 'display',\r\n    phaseProgress = 0\r\n}) {\r\n    const canvasRef = useRef(null);\r\n    const particlesRef = useRef([]);\r\n    const animationIdRef = useRef(null);\r\n    const startTimeRef = useRef(performance.now());\r\n\r\n    const PARTICLE_COUNT = 4000;\r\n    const PARTICLE_SIZE = 1.5;\r\n\r\n    // Initialize particles randomly\r\n    useEffect(() => {\r\n        const particles = [];\r\n        for (let i = 0; i < PARTICLE_COUNT; i++) {\r\n            particles.push({\r\n                x: Math.random() * width,\r\n                y: Math.random() * height,\r\n                vx: 0,\r\n                vy: 0\r\n            });\r\n        }\r\n        particlesRef.current = particles;\r\n    }, [width, height]);\r\n\r\n    // Animation loop\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        const particles = particlesRef.current;\r\n\r\n        function animate() {\r\n            const time = (performance.now() - startTimeRef.current) / 1000;\r\n\r\n            // Clear canvas\r\n            ctx.fillStyle = 'rgba(5, 5, 8, 1)';\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            // Skip particle updates during void phase\r\n            if (phase === 'void') {\r\n                animationIdRef.current = requestAnimationFrame(animate);\r\n                return;\r\n            }\r\n\r\n            // Get accent color\r\n            const accentColor = getComputedStyle(document.documentElement)\r\n                .getPropertyValue('--accent-color')\r\n                .trim() || '#d4af37';\r\n\r\n            // Determine effective mode numbers (with optional drift)\r\n            let effectiveN = n;\r\n            let effectiveM = m;\r\n            if (driftEnabled && phase === 'display') {\r\n                const drifted = applyDrift(n, m, time, 0.15, 0.15);\r\n                effectiveN = drifted.n;\r\n                effectiveM = drifted.m;\r\n            }\r\n\r\n            // Calculate force multiplier based on phase\r\n            let forceMult = 1;\r\n            if (phase === 'fadeIn') {\r\n                forceMult = phaseProgress;\r\n            } else if (phase === 'fadeOut') {\r\n                forceMult = 1 - phaseProgress;\r\n            }\r\n\r\n            // Calculate opacity based on phase\r\n            let opacity = 1;\r\n            if (phase === 'fadeIn') {\r\n                opacity = phaseProgress;\r\n            } else if (phase === 'fadeOut') {\r\n                opacity = 1 - phaseProgress;\r\n            }\r\n\r\n            // Update particles\r\n            const delta = 1; // Gradient step size\r\n            const forceFactor = 0.5; // How strongly particles are pushed\r\n            const damping = 0.85; // Velocity decay\r\n\r\n            for (let i = 0; i < particles.length; i++) {\r\n                const p = particles[i];\r\n\r\n                // Get current amplitude (absolute value)\r\n                const amp = Math.abs(getChladniAmplitude(p.x, p.y, effectiveN, effectiveM, width, height));\r\n\r\n                // Calculate gradient by sampling nearby points\r\n                const ampRight = Math.abs(getChladniAmplitude(p.x + delta, p.y, effectiveN, effectiveM, width, height));\r\n                const ampLeft = Math.abs(getChladniAmplitude(p.x - delta, p.y, effectiveN, effectiveM, width, height));\r\n                const ampDown = Math.abs(getChladniAmplitude(p.x, p.y + delta, effectiveN, effectiveM, width, height));\r\n                const ampUp = Math.abs(getChladniAmplitude(p.x, p.y - delta, effectiveN, effectiveM, width, height));\r\n\r\n                // Calculate gradient (direction of increasing amplitude)\r\n                const gradX = (ampRight - ampLeft) / (2 * delta);\r\n                const gradY = (ampDown - ampUp) / (2 * delta);\r\n\r\n                // Move OPPOSITE to gradient (toward lower amplitude = nodal lines)\r\n                p.vx -= gradX * forceFactor * forceMult;\r\n                p.vy -= gradY * forceFactor * forceMult;\r\n\r\n                // Add random scatter during fadeOut\r\n                if (phase === 'fadeOut') {\r\n                    p.vx += (Math.random() - 0.5) * 0.5 * phaseProgress;\r\n                    p.vy += (Math.random() - 0.5) * 0.5 * phaseProgress;\r\n                }\r\n\r\n                // Update position\r\n                p.x += p.vx;\r\n                p.y += p.vy;\r\n\r\n                // Apply damping\r\n                p.vx *= damping;\r\n                p.vy *= damping;\r\n\r\n                // Boundary wrap\r\n                if (p.x < 0) p.x += width;\r\n                if (p.x > width) p.x -= width;\r\n                if (p.y < 0) p.y += height;\r\n                if (p.y > height) p.y -= height;\r\n            }\r\n\r\n            // Render particles\r\n            ctx.fillStyle = accentColor;\r\n            ctx.globalAlpha = opacity * 0.8;\r\n\r\n            for (let i = 0; i < particles.length; i++) {\r\n                const p = particles[i];\r\n                ctx.fillRect(p.x, p.y, PARTICLE_SIZE, PARTICLE_SIZE);\r\n            }\r\n\r\n            // Add subtle glow layer\r\n            ctx.globalAlpha = opacity * 0.2;\r\n            for (let i = 0; i < particles.length; i += 3) { // Every 3rd particle for performance\r\n                const p = particles[i];\r\n                ctx.fillRect(p.x - 0.5, p.y - 0.5, PARTICLE_SIZE + 1, PARTICLE_SIZE + 1);\r\n            }\r\n\r\n            ctx.globalAlpha = 1;\r\n            animationIdRef.current = requestAnimationFrame(animate);\r\n        }\r\n\r\n        animate();\r\n\r\n        return () => {\r\n            if (animationIdRef.current) {\r\n                cancelAnimationFrame(animationIdRef.current);\r\n            }\r\n        };\r\n    }, [n, m, width, height, driftEnabled, modes, phase, phaseProgress]);\r\n\r\n    return (\r\n        <canvas\r\n            ref={canvasRef}\r\n            width={width}\r\n            height={height}\r\n            style={{\r\n                width: `${width}px`,\r\n                height: `${height}px`,\r\n                borderRadius: '8px'\r\n            }}\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CymaticsConfig.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\CymaticsVisualization.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'newPhase' is defined but never used.","line":57,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"newPhase"},"fix":{"range":[1541,1550],"text":""},"desc":"Remove unused variable 'newPhase'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'oldPhase' is defined but never used.","line":57,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"oldPhase"},"fix":{"range":[1549,1559],"text":""},"desc":"Remove unused variable 'oldPhase'."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'audioFadeOut', 'start', and 'stop'. Either include them or remove the dependency array.","line":74,"column":8,"nodeType":"ArrayExpression","endLine":74,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [audioFadeOut, start, stop]","fix":{"range":[2061,2063],"text":"[audioFadeOut, start, stop]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/CymaticsVisualization.jsx\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport { CymaticsCanvas } from './CymaticsCanvas.jsx';\r\nimport { useVisualizationEngine } from '../hooks/useVisualizationEngine.js';\r\nimport { useCymaticsAudio } from '../hooks/useCymaticsAudio.js';\r\n\r\n/**\r\n * Complete Cymatics visualization with engine and audio integration.\r\n * \r\n * Key difference from standard visualization: Audio continues during void phase.\r\n * This trains the user to recall the visual pattern from sound alone.\r\n */\r\n\r\nexport function CymaticsVisualization({\r\n    // Frequency config\r\n    frequency = 528,\r\n    n = 5,\r\n    m = 7,\r\n\r\n    // Timing config\r\n    fadeInDuration = 2.5,\r\n    displayDuration = 10,\r\n    fadeOutDuration = 2.5,\r\n    voidDuration = 10,\r\n\r\n    // Features\r\n    driftEnabled = false,\r\n    audioEnabled = true,\r\n    modes = null, // For chord mode: [{n, m, weight}, ...]\r\n\r\n    // Callbacks\r\n    onCycleComplete = null,\r\n}) {\r\n    const audioInitializedRef = useRef(false);\r\n    const [volume, setVolume] = useState(0.3);\r\n\r\n    const {\r\n        setFrequency,\r\n        addInterval,\r\n        setDrift,\r\n        setVolume: setAudioVolume,\r\n        fadeIn: audioFadeIn,\r\n        fadeOut: audioFadeOut,\r\n    } = useCymaticsAudio();\r\n\r\n    const {\r\n        phase,\r\n        progress,\r\n        isRunning,\r\n        start,\r\n        stop,\r\n    } = useVisualizationEngine({\r\n        fadeInDuration,\r\n        displayDuration,\r\n        fadeOutDuration,\r\n        voidDuration,\r\n        onPhaseChange: (newPhase, oldPhase) => {\r\n            // Audio continues through all phases, no changes needed here\r\n        },\r\n        onCycleComplete: (cycle) => {\r\n            if (onCycleComplete) onCycleComplete(cycle);\r\n        },\r\n    });\r\n\r\n    // Start engine on mount\r\n    useEffect(() => {\r\n        start();\r\n        return () => {\r\n            stop();\r\n            // Fade out audio when component unmounts\r\n            audioFadeOut(300);\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // Initialize audio when isRunning becomes true\r\n    useEffect(() => {\r\n        if (isRunning && audioEnabled && !audioInitializedRef.current) {\r\n\r\n            // Start audio\r\n            const initAudio = async () => {\r\n                setFrequency(frequency, 0);\r\n                await addInterval(1.0); // Add root oscillator\r\n                await audioFadeIn(fadeInDuration * 1000, volume);\r\n                audioInitializedRef.current = true;\r\n            };\r\n\r\n            initAudio();\r\n        }\r\n    }, [isRunning, audioEnabled, frequency, setFrequency, addInterval, audioFadeIn, fadeInDuration, volume]);\r\n\r\n    // Update frequency when it changes\r\n    useEffect(() => {\r\n        if (audioInitializedRef.current) {\r\n            setFrequency(frequency, 500);\r\n        }\r\n    }, [frequency, setFrequency]);\r\n\r\n    // Update drift when toggled\r\n    useEffect(() => {\r\n        setDrift(driftEnabled);\r\n    }, [driftEnabled, setDrift]);\r\n\r\n    // Update volume when slider changes\r\n    useEffect(() => {\r\n        if (audioInitializedRef.current) {\r\n            setAudioVolume(volume, 100);\r\n        }\r\n    }, [volume, setAudioVolume]);\r\n\r\n    // Render\r\n    return (\r\n        <div\r\n            style={{\r\n                position: 'relative',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                gap: '16px',\r\n            }}\r\n        >\r\n            <div\r\n                style={{\r\n                    width: '400px',\r\n                    height: '400px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                }}\r\n            >\r\n                {phase === 'void' ? (\r\n                    // Void phase: black screen with \"VISUALIZE\" text\r\n                    <div\r\n                        style={{\r\n                            width: '400px',\r\n                            height: '400px',\r\n                            background: '#050508',\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            borderRadius: '8px',\r\n                        }}\r\n                    >\r\n                        <div\r\n                            style={{\r\n                                fontFamily: 'var(--font-display)',\r\n                                fontSize: '18px',\r\n                                fontWeight: 700,\r\n                                letterSpacing: '0.3em',\r\n                                textTransform: 'uppercase',\r\n                                color: 'rgba(253,251,245,0.3)',\r\n                                marginBottom: '16px',\r\n                            }}\r\n                        >\r\n                            VISUALIZE\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                fontFamily: 'var(--font-display)',\r\n                                fontSize: '14px',\r\n                                fontWeight: 600,\r\n                                letterSpacing: 'var(--tracking-mythic)',\r\n                                color: 'var(--accent-color)',\r\n                            }}\r\n                        >\r\n                            ΓÖ¬ {frequency} Hz ΓÖ¬\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    // All other phases: show particle canvas\r\n                    <CymaticsCanvas\r\n                        n={n}\r\n                        m={m}\r\n                        width={400}\r\n                        height={400}\r\n                        driftEnabled={driftEnabled && phase === 'display'}\r\n                        modes={modes}\r\n                        phase={phase}\r\n                        phaseProgress={progress}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* Volume Slider */}\r\n            <div\r\n                style={{\r\n                    width: '400px',\r\n                    padding: '12px 16px',\r\n                    borderRadius: '8px',\r\n                    background: 'rgba(0,0,0,0.2)',\r\n                    border: '1px solid var(--accent-15)',\r\n                }}\r\n            >\r\n                <div\r\n                    style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'space-between',\r\n                        marginBottom: '8px',\r\n                    }}\r\n                >\r\n                    <span\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontSize: '10px',\r\n                            fontWeight: 600,\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            textTransform: 'uppercase',\r\n                            color: 'rgba(253,251,245,0.6)',\r\n                        }}\r\n                    >\r\n                        Volume\r\n                    </span>\r\n                    <span\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontSize: '10px',\r\n                            fontWeight: 600,\r\n                            color: 'var(--accent-color)',\r\n                        }}\r\n                    >\r\n                        {Math.round(volume * 100)}%\r\n                    </span>\r\n                </div>\r\n                <input\r\n                    type=\"range\"\r\n                    min=\"0\"\r\n                    max=\"1\"\r\n                    step=\"0.01\"\r\n                    value={volume}\r\n                    onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n                    className=\"w-full h-1 rounded-full appearance-none cursor-pointer\"\r\n                    style={{\r\n                        background: `linear-gradient(to right, var(--accent-color) 0%, var(--accent-color) ${volume * 100}%, rgba(255,255,255,0.1) ${volume * 100}%, rgba(255,255,255,0.1) 100%)`,\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\DailyPracticeCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isSanctuary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":35,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"isSanctuary"},"fix":{"range":[1488,1536],"text":""},"desc":"Remove unused variable 'isSanctuary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'gradientAngle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":39,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"gradientAngle"},"fix":{"range":[1648,1661],"text":""},"desc":"Remove unused variable 'gradientAngle'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect, useMemo } from 'react';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { calculateGradientAngle, getAvatarCenter } from \"../utils/dynamicLighting.js\";\r\nimport { useTheme } from '../context/ThemeContext.jsx';\r\n\r\n/**\r\n * THEME CONFIGURATION\r\n * Synchronized with CompactStatsCard for \"Ancient Relic\" aesthetic\r\n */\r\nconst THEME_CONFIG = {\r\n    light: {\r\n        accent: 'rgba(139, 159, 136, 0.85)',\r\n        textMain: 'rgba(35, 20, 10, 0.98)',\r\n        textSub: 'rgba(65, 45, 25, 0.9)',\r\n        bgAsset: 'ancient_relic_focus.png',\r\n        canvasGrain: 'canvas_grain.png',\r\n        border: 'rgba(139, 115, 85, 0.25)',\r\n        shadow: '0 10px 30px rgba(80, 50, 20, 0.25), 0 20px 60px rgba(60, 40, 15, 0.2), 0 0 0 1px rgba(180, 140, 60, 0.3)'\r\n    },\r\n    dark: {\r\n        accent: 'var(--accent-color)',\r\n        textMain: 'rgba(253, 251, 245, 0.95)',\r\n        textSub: 'rgba(253, 251, 245, 0.5)',\r\n        cosmicAsset: 'celestial_black_hole.png',\r\n        border: 'var(--accent-20)',\r\n        shadow: '0 30px 80px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)'\r\n    }\r\n};\r\n\r\nexport function DailyPracticeCard({ onStartPractice, onViewCurriculum, onNavigate }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const displayMode = useDisplayModeStore(s => s.mode);\r\n    const isLight = colorScheme === 'light';\r\n    const isSanctuary = displayMode === 'sanctuary';\r\n    const config = THEME_CONFIG[isLight ? 'light' : 'dark'];\r\n\r\n    const cardRef = useRef(null);\r\n    const [gradientAngle, setGradientAngle] = useState(135);\r\n\r\n    const theme = useTheme();\r\n    const primaryHex = theme?.accent?.primary || '#4ade80';\r\n\r\n    const {\r\n        onboardingComplete,\r\n        getCurrentDayNumber,\r\n        getTodaysPractice,\r\n        isTodayComplete,\r\n        getProgress,\r\n        getStreak,\r\n        getDayLegsWithStatus,\r\n        setActivePracticeSession,\r\n        _devReset,\r\n    } = useCurriculumStore();\r\n\r\n    // Parse hex to RGB for dynamic effects\r\n    const baseAccent = useMemo(() => {\r\n        const hex = primaryHex;\r\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : { r: 126, g: 217, b: 87 };\r\n    }, [primaryHex]);\r\n\r\n    // Calculate hue rotation for cosmic assets\r\n    const stageHueRotate = useMemo(() => {\r\n        const { r, g, b } = baseAccent;\r\n        const max = Math.max(r, g, b) / 255;\r\n        const min = Math.min(r, g, b) / 255;\r\n        let h = 0;\r\n        if (max !== min) {\r\n            const d = max - min;\r\n            const rn = r / 255, gn = g / 255, bn = b / 255;\r\n            if (max === rn) h = ((gn - bn) / d + (gn < bn ? 6 : 0)) / 6;\r\n            else if (max === gn) h = ((bn - rn) / d + 2) / 6;\r\n            else h = ((rn - gn) / d + 4) / 6;\r\n        }\r\n        const targetHue = Math.round(h * 360);\r\n        return targetHue - 180;\r\n    }, [baseAccent]);\r\n\r\n    useEffect(() => {\r\n        if (cardRef.current) {\r\n            const rect = cardRef.current.getBoundingClientRect();\r\n            setGradientAngle(calculateGradientAngle(rect, getAvatarCenter()));\r\n        }\r\n    }, [isLight, displayMode]);\r\n\r\n    if (!onboardingComplete) return null;\r\n\r\n    const dayNumber = getCurrentDayNumber();\r\n    const todaysPractice = getTodaysPractice();\r\n    const isComplete = isTodayComplete();\r\n    const progress = getProgress();\r\n    const streak = getStreak();\r\n    const legs = getDayLegsWithStatus(dayNumber);\r\n\r\n\r\n    if (dayNumber > 14 || progress.completed >= progress.total) {\r\n        const bgAsset = isLight ? 'ancient_relic_focus.png' : 'celestial_black_hole.png';\r\n        return (\r\n            <div\r\n                className=\"w-full relative p-8 text-center rounded-[24px] overflow-hidden\"\r\n                style={{\r\n                    background: isLight ? '#f5efe5' : 'rgb(10, 10, 15)',\r\n                    border: `1px solid ${config.border}`,\r\n                    boxShadow: config.shadow,\r\n                }}\r\n            >\r\n                {/* Relic/Cosmic Background Wallpaper */}\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none\"\r\n                    style={{\r\n                        backgroundImage: `url(${import.meta.env.BASE_URL}assets/${bgAsset})`,\r\n                        backgroundSize: 'cover',\r\n                        backgroundPosition: 'center',\r\n                        opacity: isLight ? 0.21 : 0.36,\r\n                        mixBlendMode: isLight ? 'multiply' : 'screen',\r\n                    }}\r\n                />\r\n\r\n                {/* Canvas Grain Texture (Light mode only) */}\r\n                {isLight && (\r\n                    <div\r\n                        className=\"absolute inset-0 pointer-events-none opacity-[0.03]\"\r\n                        style={{\r\n                            backgroundImage: `url(${import.meta.env.BASE_URL}assets/canvas_grain.png)`,\r\n                            backgroundSize: '200px',\r\n                            mixBlendMode: 'multiply',\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"text-4xl mb-4\">≡ƒÅå</div>\r\n                    <h3 className=\"text-xl font-bold mb-2\" style={{ color: config.textMain, fontFamily: 'var(--font-display)' }}>\r\n                        Curriculum Complete!\r\n                    </h3>\r\n                    <p className=\"mb-6 opacity-70\" style={{ color: config.textSub }}>\r\n                        You completed {progress.completed} of {progress.total} practices\r\n                    </p>\r\n\r\n                    {/* Action buttons */}\r\n                    <div className=\"flex flex-col gap-3\">\r\n                        <button\r\n                            onClick={onViewCurriculum}\r\n                            className=\"px-6 py-2.5 rounded-full font-bold transition-all hover:scale-105 active:scale-95\"\r\n                            style={{\r\n                                background: 'var(--accent-color)',\r\n                                color: isLight ? '#fff' : '#000',\r\n                                boxShadow: '0 4px 20px var(--accent-30)',\r\n                                fontFamily: 'var(--font-display)',\r\n                            }}\r\n                        >\r\n                            View Report\r\n                        </button>\r\n\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    if (window.confirm('Reset this curriculum? All progress will be cleared.')) {\r\n                                        _devReset();\r\n                                    }\r\n                                }}\r\n                                className=\"flex-1 px-4 py-2 rounded-full text-sm font-semibold transition-all hover:scale-105 active:scale-95\"\r\n                                style={{\r\n                                    background: isLight ? 'rgba(60,50,35,0.08)' : 'rgba(255,255,255,0.08)',\r\n                                    border: isLight ? '1px solid rgba(60,50,35,0.15)' : '1px solid rgba(255,255,255,0.15)',\r\n                                    color: config.textMain,\r\n                                    fontFamily: 'var(--font-display)',\r\n                                }}\r\n                            >\r\n                                Reset Program\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => onNavigate?.('navigation')}\r\n                                className=\"flex-1 px-4 py-2 rounded-full text-sm font-semibold transition-all hover:scale-105 active:scale-95\"\r\n                                style={{\r\n                                    background: isLight ? 'rgba(60,50,35,0.08)' : 'rgba(255,255,255,0.08)',\r\n                                    border: isLight ? '1px solid rgba(60,50,35,0.15)' : '1px solid rgba(255,255,255,0.15)',\r\n                                    color: config.textMain,\r\n                                    fontFamily: 'var(--font-display)',\r\n                                }}\r\n                            >\r\n                                New Curriculum\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!todaysPractice) return null;\r\n\r\n    const handleStartLeg = (leg) => {\r\n        setActivePracticeSession(dayNumber, leg.legNumber);\r\n        onStartPractice?.();\r\n    };\r\n\r\n    const completedLegs = legs.filter(l => l.completed).length;\r\n\r\n    return (\r\n        <div\r\n            className=\"w-full relative transition-all duration-700 ease-in-out\"\r\n            style={{\r\n                maxWidth: '430px',\r\n                margin: '0 auto',\r\n            }}\r\n        >\r\n            {/* OUTER: Frame with Shadow */}\r\n            <div\r\n                className=\"w-full relative\"\r\n                style={{\r\n                    borderRadius: '24px',\r\n                    boxShadow: config.shadow,\r\n                }}\r\n            >\r\n                {/* MIDDLE: Container */}\r\n                <div\r\n                    ref={cardRef}\r\n                    className=\"w-full relative overflow-hidden rounded-[24px]\"\r\n                    style={{\r\n                        background: isLight ? '#faf6ee' : 'rgb(20, 15, 25)',\r\n                        border: isLight ? '1px solid rgba(160, 120, 60, 0.15)' : '1px solid var(--accent-20)',\r\n                    }}\r\n                >\r\n                    {/* Parchment Base Wallpaper (Entire Card) */}\r\n                    {isLight && (\r\n                        <div\r\n                            className=\"absolute inset-0 pointer-events-none\"\r\n                            style={{\r\n                                backgroundImage: `url(${import.meta.env.BASE_URL}assets/parchment_blank.png)`,\r\n                                backgroundSize: 'cover',\r\n                                backgroundPosition: 'center',\r\n                                opacity: 0.85,\r\n                                mixBlendMode: 'multiply',\r\n                            }}\r\n                        />\r\n                    )}\r\n\r\n                    {/* Canvas Grain Texture (Entire Card) */}\r\n                    {isLight && (\r\n                        <div\r\n                            className=\"absolute inset-0 pointer-events-none opacity-[0.05]\"\r\n                            style={{\r\n                                backgroundImage: `url(${import.meta.env.BASE_URL}assets/canvas_grain.png)`,\r\n                                backgroundSize: '200px',\r\n                                mixBlendMode: 'multiply',\r\n                            }}\r\n                        />\r\n                    )}\r\n\r\n                    {/* TWO-COLUMN LAYOUT */}\r\n                    <div className=\"flex\">\r\n                        {/* LEFT COLUMN: Background Image */}\r\n                        <div \r\n                            className=\"relative overflow-hidden\"\r\n                            style={{\r\n                                width: '42%',\r\n                                minHeight: '280px',\r\n                            }}\r\n                        >\r\n                            {isLight ? (\r\n                                <>\r\n                                    {/* Painted Surface */}\r\n                                    <div\r\n                                        className=\"absolute inset-0 pointer-events-none\"\r\n                                        style={{\r\n                                            backgroundImage: `url(${import.meta.env.BASE_URL}assets/${config.bgAsset})`,\r\n                                            backgroundSize: 'cover',\r\n                                            backgroundPosition: 'center left',\r\n                                            opacity: 0.54,\r\n                                            mixBlendMode: 'multiply',\r\n                                        }}\r\n                                    />\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    {/* Cosmic Surface */}\r\n                                    <div\r\n                                        className=\"absolute inset-0\"\r\n                                        style={{\r\n                                            backgroundImage: `linear-gradient(135deg, rgba(20, 15, 25, 0.98), rgba(10, 8, 15, 0.98))`,\r\n                                        }}\r\n                                    />\r\n                                    {/* Cosmic Feather / Black Hole */}\r\n                                    <div\r\n                                        className=\"absolute inset-0 overflow-hidden pointer-events-none z-1\"\r\n                                        style={{ opacity: 0.24, mixBlendMode: 'screen' }}\r\n                                    >\r\n                                        <div \r\n                                            className=\"absolute inset-0\"\r\n                                            style={{\r\n                                                backgroundImage: `url(${import.meta.env.BASE_URL}assets/${config.cosmicAsset})`,\r\n                                                backgroundSize: 'cover', \r\n                                                backgroundPosition: 'center',\r\n                                                filter: `hue-rotate(${stageHueRotate}deg) contrast(1.1) saturate(1.2)`,\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                            \r\n                            {/* Day Number Overlay with Labels */}\r\n                            <div \r\n                                className=\"absolute top-4 left-4 z-10\"\r\n                                style={{ width: '48px', height: '48px' }}\r\n                            >\r\n                                {/* DAY label - Vertical on the left, matching Breathwork style */}\r\n                                <div \r\n                                    className=\"absolute left-[2px] top-0 h-full flex items-center justify-center\"\r\n                                    style={{ \r\n                                        writingMode: 'vertical-rl', \r\n                                        transform: 'rotate(180deg)',\r\n                                        color: isLight ? '#000' : '#fff',\r\n                                        opacity: 0.8,\r\n                                        fontFamily: 'var(--font-display)',\r\n                                        fontSize: '10px',\r\n                                        fontWeight: 900,\r\n                                        letterSpacing: '0.2em',\r\n                                        textDecoration: 'underline',\r\n                                        textDecorationThickness: '1px',\r\n                                        textUnderlineOffset: '2px'\r\n                                    }}\r\n                                >\r\n                                    Day\r\n                                </div>\r\n                                \r\n                                {/* Badge with number */}\r\n                                <div className=\"w-full h-full relative\">\r\n                                    <svg width=\"48\" height=\"48\" viewBox=\"0 0 44 44\">\r\n                                        <circle cx=\"22\" cy=\"22\" r=\"20\" fill=\"none\" stroke={isLight ? 'rgba(0,0,0,0.06)' : 'rgba(255,255,255,0.1)'} strokeWidth=\"1\" />\r\n                                        <circle \r\n                                            cx=\"22\" cy=\"22\" r=\"20\" \r\n                                            fill=\"none\" \r\n                                            stroke=\"var(--accent-color)\" \r\n                                            strokeWidth=\"2.5\" \r\n                                            strokeDasharray={`${(progress.completed / 14) * 126} 126`}\r\n                                            strokeLinecap=\"round\"\r\n                                            style={{ \r\n                                                transition: 'stroke-dasharray 1.5s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                                                filter: isLight ? 'none' : 'blur(0.5px) drop-shadow(0 0 3px var(--accent-color))'\r\n                                            }}\r\n                                        />\r\n                                    </svg>\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center pt-2\">\r\n                                        <span \r\n                                            className=\"text-[20px] font-black\" \r\n                                            style={{ \r\n                                                color: isLight ? '#000' : 'var(--accent-color)',\r\n                                                fontFamily: 'var(--font-display)',\r\n                                                textShadow: isLight ? '0 1px 2px rgba(255,255,255,0.8)' : '0 0 12px var(--accent-40)'\r\n                                            }}\r\n                                        >\r\n                                            {isComplete ? 'Γ£ô' : dayNumber}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                {/* \"OF 14\" label - Centered Right */}\r\n                                <div \r\n                                    className=\"absolute top-1/2 -translate-y-1/2 left-[44px] text-[10px] font-black uppercase tracking-widest whitespace-nowrap\"\r\n                                    style={{ \r\n                                        color: isLight ? '#000' : '#fff',\r\n                                        opacity: 0.6,\r\n                                        fontFamily: 'var(--font-display)'\r\n                                    }}\r\n                                >\r\n                                    of 14\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Soft fade edge to right */}\r\n                            <div \r\n                                className=\"absolute inset-y-0 right-0 w-4 pointer-events-none\"\r\n                                style={{\r\n                                    background: isLight \r\n                                        ? 'linear-gradient(to right, transparent, #faf6ee)'\r\n                                        : 'linear-gradient(to right, transparent, rgba(20, 15, 25, 0.98))',\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* RIGHT COLUMN: Data */}\r\n                        <div \r\n                            className=\"flex-1 flex flex-col p-5\"\r\n                            style={{ minHeight: '280px' }}\r\n                        >\r\n                            {/* Header - Title only, day info moved to left badge */}\r\n                            <div className=\"mb-3\">\r\n                                <div \r\n                                    className=\"text-[17px] font-black leading-tight\" \r\n                                    style={{ \r\n                                        color: config.textMain,\r\n                                        fontFamily: 'var(--font-display)',\r\n                                    }}\r\n                                >\r\n                                    {todaysPractice.title}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Divider */}\r\n                            <div \r\n                                className=\"w-full h-px mb-3\"\r\n                                style={{ background: isLight ? 'rgba(160, 120, 60, 0.15)' : 'var(--accent-15)' }}\r\n                            />\r\n\r\n                            {/* Practice Legs List */}\r\n                            <div className=\"flex-1 space-y-2\">\r\n                                {legs.map((leg, index) => {\r\n                                    // Determine if this is the next leg to complete\r\n                                    const isNextLeg = !leg.completed && legs.slice(0, index).every(l => l.completed);\r\n                                    const isLockedLeg = !leg.completed && !isNextLeg;\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={`${dayNumber}-${leg.legNumber}`}\r\n                                            className=\"flex items-center justify-between gap-2 p-2.5 rounded-xl transition-all\"\r\n                                            style={{\r\n                                                background: leg.completed\r\n                                                    ? (isLight ? 'rgba(100, 150, 100, 0.08)' : 'rgba(100, 150, 100, 0.1)')\r\n                                                    : (isLight ? 'rgba(60, 50, 35, 0.03)' : 'rgba(255, 255, 255, 0.03)'),\r\n                                                opacity: isLockedLeg ? 0.5 : 1,\r\n                                            }}\r\n                                        >\r\n                                            {/* Left: Status + Info */}\r\n                                            <div className=\"flex items-center gap-2.5 flex-1 min-w-0\">\r\n                                                {/* Status Icon */}\r\n                                                <div style={{\r\n                                                    width: '22px',\r\n                                                    height: '22px',\r\n                                                    borderRadius: '50%',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    justifyContent: 'center',\r\n                                                    fontSize: '10px',\r\n                                                    fontWeight: 700,\r\n                                                    flexShrink: 0,\r\n                                                    background: leg.completed ? 'var(--accent-color)' : (isLight ? 'rgba(60, 50, 35, 0.1)' : 'rgba(255, 255, 255, 0.1)'),\r\n                                                    color: leg.completed ? '#fff' : (isLight ? '#3c3020' : '#fdfbf5'),\r\n                                                }}>\r\n                                                    {leg.completed ? 'Γ£ô' : leg.legNumber}\r\n                                                </div>\r\n\r\n                                                {/* Label + Time */}\r\n                                                <div className=\"min-w-0 flex-1\">\r\n                                                    <div style={{\r\n                                                        fontSize: '11px',\r\n                                                        fontFamily: 'var(--font-display)',\r\n                                                        fontWeight: 700,\r\n                                                        color: config.textMain,\r\n                                                    }}>\r\n                                                        {leg.label || leg.practiceType}\r\n                                                    </div>\r\n                                                    <div\r\n                                                        className=\"truncate\"\r\n                                                        style={{\r\n                                                            fontSize: '9px',\r\n                                                            opacity: 0.6,\r\n                                                            color: config.textMain,\r\n                                                        }}\r\n                                                    >\r\n                                                        {leg.time ? (typeof leg.time === 'string' ? leg.time.substring(0, 5) : String(leg.time)) : 'Anytime'}\r\n                                                    </div>\r\n                                                    {/* Warning for locked legs */}\r\n                                                    {isLockedLeg && (\r\n                                                        <div\r\n                                                            style={{\r\n                                                                fontSize: '8px',\r\n                                                                fontWeight: 600,\r\n                                                                color: isLight ? '#D97706' : '#FBBF24',\r\n                                                                marginTop: '2px',\r\n                                                            }}\r\n                                                        >\r\n                                                            Complete previous first\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Right: Action */}\r\n                                            {!leg.completed ? (\r\n                                                <div className=\"relative flex-shrink-0\">\r\n                                                    {/* Radial glow animation - only for next leg */}\r\n                                                    {isNextLeg && (\r\n                                                        <div\r\n                                                            className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n                                                            style={{\r\n                                                                background: `conic-gradient(from 0deg, transparent 0deg, var(--accent-color) 60deg, transparent 120deg)`,\r\n                                                                filter: 'blur(8px)',\r\n                                                                opacity: 0.6,\r\n                                                                animation: 'radialGlow 3s linear infinite',\r\n                                                            }}\r\n                                                        />\r\n                                                    )}\r\n                                                    <button\r\n                                                        onClick={() => handleStartLeg(leg)}\r\n                                                        disabled={isLockedLeg}\r\n                                                        className=\"relative px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-wider transition-all\"\r\n                                                        style={{\r\n                                                            background: isLockedLeg\r\n                                                                ? (isLight ? 'rgba(60, 50, 35, 0.2)' : 'rgba(255, 255, 255, 0.15)')\r\n                                                                : 'var(--accent-color)',\r\n                                                            color: isLockedLeg\r\n                                                                ? (isLight ? 'rgba(60, 50, 35, 0.4)' : 'rgba(255, 255, 255, 0.3)')\r\n                                                                : (isLight ? '#fff' : '#000'),\r\n                                                            boxShadow: isLockedLeg ? 'none' : '0 3px 10px var(--accent-30)',\r\n                                                            cursor: isLockedLeg ? 'not-allowed' : 'pointer',\r\n                                                            ...(isNextLeg && {\r\n                                                                transform: 'scale(1)',\r\n                                                            }),\r\n                                                            ...(!isLockedLeg && {\r\n                                                                '&:hover': { transform: 'scale(1.05)' },\r\n                                                                '&:active': { transform: 'scale(0.95)' },\r\n                                                            }),\r\n                                                        }}\r\n                                                    >\r\n                                                        Start\r\n                                                    </button>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div style={{\r\n                                                    fontSize: '9px',\r\n                                                    fontFamily: 'var(--font-display)',\r\n                                                    fontWeight: 600,\r\n                                                    color: 'var(--accent-color)',\r\n                                                    opacity: 0.8,\r\n                                                    flexShrink: 0,\r\n                                                }}>\r\n                                                    Done\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n\r\n                            {/* Footer */}\r\n                            <div className=\"flex items-center justify-between mt-3 pt-3\" style={{\r\n                                borderTop: isLight ? '1px solid rgba(160, 120, 60, 0.1)' : '1px solid var(--accent-10)',\r\n                            }}>\r\n                                {/* Completion Status */}\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    {isComplete ? (\r\n                                        <div className=\"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-wider\" style={{ color: 'var(--accent-color)' }}>\r\n                                            <span>Γ£¿</span>\r\n                                            Day Complete\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div style={{\r\n                                            fontSize: '9px',\r\n                                            fontWeight: 600,\r\n                                            letterSpacing: '0.05em',\r\n                                            color: config.textSub,\r\n                                        }}>\r\n                                            {completedLegs}/{legs.length} complete\r\n                                        </div>\r\n                                    )}\r\n                                    {streak > 1 && (\r\n                                        <div className=\"px-2 py-0.5 rounded-full text-[8px] font-black flex items-center gap-1\"\r\n                                            style={{\r\n                                                background: 'rgba(255, 200, 0, 0.1)',\r\n                                                border: '1px solid rgba(255, 200, 0, 0.3)',\r\n                                                color: 'var(--accent-color)',\r\n                                            }}\r\n                                        >\r\n                                            ≡ƒöÑ {streak}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Rate + View Path */}\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div \r\n                                        className=\"text-[16px] font-black tabular-nums\" \r\n                                        style={{ \r\n                                            color: 'var(--accent-color)',\r\n                                            textShadow: isLight ? 'none' : '0 0 10px var(--accent-30)'\r\n                                        }}\r\n                                    >\r\n                                        {progress.rate}%\r\n                                    </div>\r\n                                    <button \r\n                                        onClick={onViewCurriculum}\r\n                                        className=\"text-[8px] font-black uppercase tracking-[0.2em] opacity-40 hover:opacity-100 transition-all\"\r\n                                        style={{ color: config.textMain }}\r\n                                    >\r\n                                        Path ΓåÆ\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DailyPracticeCard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\DailyPracticeTracker.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'leg' is defined but never used.","line":25,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"leg"},"fix":{"range":[761,764],"text":""},"desc":"Remove unused variable 'leg'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nexport function DailyPracticeTracker() {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const {\r\n        onboardingComplete,\r\n        getCurrentDayNumber,\r\n        getDayLegsWithStatus,\r\n        getStreak,\r\n        setActivePracticeSession,\r\n    } = useCurriculumStore();\r\n\r\n    if (!onboardingComplete) return null;\r\n\r\n    const dayNumber = getCurrentDayNumber();\r\n    const legs = getDayLegsWithStatus(dayNumber);\r\n    const streak = getStreak();\r\n\r\n    if (legs.length === 0) return null;\r\n\r\n    const handleStartLeg = (leg) => {\r\n        setActivePracticeSession(dayNumber);\r\n    };\r\n\r\n    const completedCount = legs.filter(l => l.completed).length;\r\n\r\n    return (\r\n        <div\r\n            className=\"w-full rounded-[24px] overflow-hidden transition-all duration-700\"\r\n            style={{\r\n                background: isLight ? '#faf6ee' : 'rgba(25, 20, 30, 0.98)',\r\n                border: isLight ? '1px solid rgba(160, 120, 60, 0.15)' : '1px solid var(--accent-20)',\r\n                boxShadow: isLight\r\n                    ? '0 10px 30px rgba(80, 50, 20, 0.15)'\r\n                    : '0 30px 80px rgba(0, 0, 0, 0.6)',\r\n            }}\r\n        >\r\n            {/* Header */}\r\n            <div className=\"px-5 py-4 border-b\" style={{\r\n                borderColor: isLight ? 'rgba(160, 120, 60, 0.1)' : 'var(--accent-10)',\r\n                background: isLight ? 'rgba(60, 50, 35, 0.02)' : 'rgba(0, 0, 0, 0.2)',\r\n            }}>\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                    <div>\r\n                        <div style={{\r\n                            fontSize: '10px',\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            letterSpacing: '0.2em',\r\n                            textTransform: 'uppercase',\r\n                            opacity: 0.6,\r\n                            color: isLight ? '#3c3020' : '#fdfbf5',\r\n                        }}>\r\n                            Today's Practice\r\n                        </div>\r\n                        <div style={{\r\n                            fontSize: '16px',\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            color: isLight ? '#3c3020' : '#fdfbf5',\r\n                            marginTop: '2px',\r\n                        }}>\r\n                            Day {dayNumber} of 14\r\n                        </div>\r\n                    </div>\r\n\r\n                    {streak > 1 && (\r\n                        <div style={{\r\n                            padding: '6px 12px',\r\n                            borderRadius: '999px',\r\n                            background: 'rgba(255, 200, 0, 0.1)',\r\n                            border: '1px solid rgba(255, 200, 0, 0.3)',\r\n                            fontSize: '11px',\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            color: 'var(--accent-color)',\r\n                        }}>\r\n                            ≡ƒöÑ {streak} Day Streak\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Legs List */}\r\n            <div className=\"divide-y\" style={{\r\n                borderColor: isLight ? 'rgba(160, 120, 60, 0.1)' : 'var(--accent-10)',\r\n            }}>\r\n                {legs.map((leg) => (\r\n                    <div\r\n                        key={`${dayNumber}-${leg.legNumber}`}\r\n                        className=\"px-5 py-4 transition-all duration-200\"\r\n                        style={{\r\n                            background: leg.completed ? (isLight ? 'rgba(100, 150, 100, 0.05)' : 'rgba(100, 150, 100, 0.08)') : 'transparent',\r\n                        }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between gap-3\">\r\n                            {/* Left: Time + Status */}\r\n                            <div className=\"flex items-center gap-3 flex-1\">\r\n                                {/* Status Icon */}\r\n                                <div style={{\r\n                                    width: '24px',\r\n                                    height: '24px',\r\n                                    borderRadius: '50%',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'center',\r\n                                    fontSize: '12px',\r\n                                    fontWeight: 600,\r\n                                    background: leg.completed ? 'var(--accent-color)' : (isLight ? 'rgba(60, 50, 35, 0.1)' : 'rgba(255, 255, 255, 0.1)'),\r\n                                    color: leg.completed ? '#fff' : (isLight ? '#3c3020' : '#fdfbf5'),\r\n                                }}>\r\n                                    {leg.completed ? 'Γ£ô' : leg.legNumber}\r\n                                </div>\r\n\r\n                                {/* Time + Description */}\r\n                                <div className=\"flex-1\">\r\n                                    <div style={{\r\n                                        fontSize: '12px',\r\n                                        fontFamily: 'var(--font-display)',\r\n                                        fontWeight: 600,\r\n                                        color: isLight ? '#3c3020' : '#fdfbf5',\r\n                                    }}>\r\n                                        {leg.time ? leg.time.substring(0, 5) : 'Anytime'}\r\n                                    </div>\r\n                                    <div style={{\r\n                                        fontSize: '10px',\r\n                                        opacity: 0.6,\r\n                                        color: isLight ? '#3c3020' : '#fdfbf5',\r\n                                        marginTop: '2px',\r\n                                    }}>\r\n                                        {leg.description || leg.practiceType}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Right: Action Button */}\r\n                            {!leg.completed ? (\r\n                                <button\r\n                                    onClick={() => handleStartLeg(leg)}\r\n                                    className=\"px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-wider transition-all hover:scale-105\"\r\n                                    style={{\r\n                                        background: 'var(--accent-color)',\r\n                                        color: '#fff',\r\n                                        boxShadow: '0 4px 12px var(--accent-30)',\r\n                                    }}\r\n                                >\r\n                                    Start\r\n                                </button>\r\n                            ) : (\r\n                                <div style={{\r\n                                    fontSize: '10px',\r\n                                    fontFamily: 'var(--font-display)',\r\n                                    fontWeight: 600,\r\n                                    color: 'var(--accent-color)',\r\n                                    opacity: 0.8,\r\n                                }}>\r\n                                    Complete\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Footer: Summary */}\r\n            <div className=\"px-5 py-3\" style={{\r\n                background: isLight ? 'rgba(60, 50, 35, 0.02)' : 'rgba(0, 0, 0, 0.2)',\r\n                borderTop: isLight ? '1px solid rgba(160, 120, 60, 0.1)' : '1px solid var(--accent-10)',\r\n            }}>\r\n                <div style={{\r\n                    fontSize: '9px',\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontWeight: 600,\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                    color: isLight ? 'rgba(60, 50, 35, 0.5)' : 'rgba(253, 251, 245, 0.4)',\r\n                }}>\r\n                    {completedCount} of {legs.length} legs complete\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DailyPracticeTracker;","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\DeleteConfirmationModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'title' is defined but never used.","line":8,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[286,292],"text":""},"desc":"Remove unused variable 'title'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/DeleteConfirmationModal.jsx\r\n// Phase 4: Safe deletion with confirmation\r\n\r\nimport React from 'react';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\nimport { AccessibleModal } from './AccessibleModal';\r\n\r\nexport function DeleteConfirmationModal({ title, message, onConfirm, onCancel }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const bgColor = isLight ? 'rgba(245, 240, 230, 0.98)' : 'rgba(10, 15, 25, 0.98)';\r\n    const textColor = isLight ? 'rgba(35, 20, 10, 0.95)' : 'rgba(253, 251, 245, 0.95)';\r\n    const borderColor = isLight ? 'rgba(180, 120, 40, 0.15)' : 'rgba(255, 255, 255, 0.1)';\r\n\r\n    return (\r\n        <AccessibleModal\r\n            isOpen={true}\r\n            onClose={onCancel}\r\n            title=\"Confirm Deletion\"\r\n            ariaLabel=\"Confirm deletion of journal entry\"\r\n        >\r\n            <div style={{\r\n                backgroundColor: bgColor,\r\n                color: textColor,\r\n                borderRadius: '16px',\r\n                maxWidth: '400px',\r\n                width: '100%',\r\n                border: `1px solid ${borderColor}`\r\n            }}>\r\n                {/* Message */}\r\n                <div style={{ padding: '20px' }}>\r\n                    <p style={{ margin: 0, fontSize: '14px', lineHeight: '1.6', opacity: 0.8 }}>\r\n                        {message || 'Are you sure you want to delete this entry? This action cannot be undone.'}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Buttons */}\r\n                <div style={{\r\n                    padding: '16px',\r\n                    borderTop: `1px solid ${borderColor}`,\r\n                    display: 'flex',\r\n                    gap: '12px',\r\n                    justifyContent: 'flex-end'\r\n                }}>\r\n                    <button onClick={onCancel} style={{\r\n                        padding: '10px 20px',\r\n                        backgroundColor: 'rgba(100, 100, 100, 0.3)',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        color: textColor,\r\n                        cursor: 'pointer',\r\n                        fontSize: '13px',\r\n                        fontWeight: '600'\r\n                    }}>\r\n                        Cancel\r\n                    </button>\r\n                    <button onClick={onConfirm} style={{\r\n                        padding: '10px 20px',\r\n                        backgroundColor: '#ef4444',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        color: '#fff',\r\n                        cursor: 'pointer',\r\n                        fontSize: '13px',\r\n                        fontWeight: '600'\r\n                    }}>\r\n                        Delete\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </AccessibleModal>\r\n    );\r\n}\r\n\r\nexport default DeleteConfirmationModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\DevPanel.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'weeklyFeatures' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":750,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":750,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"weeklyFeatures"},"fix":{"range":[41684,41748],"text":""},"desc":"Remove unused variable 'weeklyFeatures'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/DevPanel.jsx\r\n// Developer-only lab for testing Immanence OS systems\r\n// Access: Ctrl+Shift+D or tap version 5 times\r\n\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport { useLunarStore } from '../state/lunarStore';\r\nimport { usePathStore, PATH_NAMES, PATH_SYMBOLS } from '../state/pathStore';\r\nimport { useAttentionStore } from '../state/attentionStore';\r\nimport { STAGES, STAGE_THRESHOLDS } from '../state/stageConfig';\r\nimport { Avatar } from './avatar';\r\nimport * as devHelpers from '../utils/devHelpers';\r\nimport { calculatePathProbabilities, getDominantPath, determinePathState } from '../utils/attentionPathScoring';\r\nimport { generateMockWeeklyData, getProfileKeys, getProfileMetadata } from '../utils/mockAttentionData';\r\nimport { generateMockSessions, MOCK_PATTERNS } from '../utils/devDataGenerator';\r\nimport { useProgressStore } from '../state/progressStore';\r\nimport { useTrackingStore } from '../state/trackingStore';\r\nimport { useSettingsStore } from '../state/settingsStore';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\nimport { useCurriculumStore } from '../state/curriculumStore';\r\nimport { LLMTestPanel } from './dev/LLMTestPanel.jsx';\r\n\r\n// Available stages and paths for dropdowns\r\nconst STAGE_OPTIONS = ['Seedling', 'Ember', 'Flame', 'Beacon', 'Stellar'];\r\nconst PATH_OPTIONS = ['Soma', 'Prana', 'Dhyana', 'Drishti', 'Jnana', 'Samyoga'];\r\n\r\nexport function DevPanel({\r\n    isOpen,\r\n    onClose,\r\n    avatarStage = 'flame',\r\n    setAvatarStage,\r\n    avatarPath = 'Prana',\r\n    setAvatarPath,\r\n    showCore = false,\r\n    setShowCore,\r\n    avatarAttention = 'vigilance',\r\n    setAvatarAttention\r\n}) {\r\n\r\n    // Lunar store state\r\n    const lunarProgress = useLunarStore(s => s.progress);\r\n    const totalDays = useLunarStore(s => s.totalPracticeDays);\r\n    const currentStage = useLunarStore(s => s.getCurrentStage());\r\n    const recentActivity = useLunarStore(s => s.recentActivity);\r\n    const sparkleMode = useLunarStore(s => s.sparkleMode);\r\n    const cycleSparkleMode = useLunarStore(s => s.cycleSparkleMode);\r\n\r\n    // Path store state\r\n    const currentPath = usePathStore(s => s.currentPath);\r\n    const pathStatus = usePathStore(s => s.pathStatus);\r\n    const pendingCeremony = usePathStore(s => s.pendingCeremony);\r\n\r\n    // Settings store state\r\n    const showCoordinateHelper = useSettingsStore(s => s.showCoordinateHelper);\r\n    const setCoordinateHelper = useSettingsStore(s => s.setCoordinateHelper);\r\n    const lightModeRingType = useSettingsStore(s => s.lightModeRingType);\r\n    const setLightModeRingType = useSettingsStore(s => s.setLightModeRingType);\r\n    const useNewAvatars = useSettingsStore(s => s.useNewAvatars);\r\n    const setUseNewAvatars = useSettingsStore(s => s.setUseNewAvatars);\r\n    const buttonThemeDark = useSettingsStore(s => s.buttonThemeDark);\r\n    const setButtonThemeDark = useSettingsStore(s => s.setButtonThemeDark);\r\n    const buttonThemeLight = useSettingsStore(s => s.buttonThemeLight);\r\n    const setButtonThemeLight = useSettingsStore(s => s.setButtonThemeLight);\r\n\r\n    // Color scheme detection\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const stageAssetStyle = useDisplayModeStore(s => s.stageAssetStyle);\r\n    const setStageAssetStyle = useDisplayModeStore(s => s.setStageAssetStyle);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    // Collapsible sections\r\n    const [expandedSections, setExpandedSections] = useState({\r\n        avatar: true,\r\n        lunar: true,\r\n        curriculum: false,\r\n        path: false,\r\n        attention: false,\r\n        tracking: false,\r\n        llm: false,\r\n        data: false\r\n    });\r\n\r\n    // Armed state for destructive actions\r\n    const [armed, setArmed] = useState(null);\r\n\r\n    // Slider state\r\n    const [sliderProgress, setSliderProgress] = useState(lunarProgress);\r\n\r\n    // Sync slider with store\r\n    useEffect(() => {\r\n        setSliderProgress(lunarProgress);\r\n    }, [lunarProgress]);\r\n\r\n    // Inspector modal\r\n    const [inspectorOpen, setInspectorOpen] = useState(false);\r\n    const [storeSnapshot, setStoreSnapshot] = useState(null);\r\n\r\n    // Gyro simulation state\r\n    const [gyroX, setGyroX] = useState(0);\r\n    const [gyroY, setGyroY] = useState(0);\r\n\r\n    // Toggle section\r\n    const toggleSection = (section) => {\r\n        setExpandedSections(prev => ({\r\n            ...prev,\r\n            [section]: !prev[section]\r\n        }));\r\n    };\r\n\r\n    // Destructive action handler (two-click arm/fire)\r\n    const handleDestructive = useCallback((actionName, action) => {\r\n        if (armed === actionName) {\r\n            action();\r\n            setArmed(null);\r\n        } else {\r\n            setArmed(actionName);\r\n            setTimeout(() => setArmed(null), 3000); // Auto-disarm\r\n        }\r\n    }, [armed]);\r\n\r\n    // Handle slider change\r\n    const handleProgressChange = (e) => {\r\n        const value = parseFloat(e.target.value);\r\n        setSliderProgress(value);\r\n    };\r\n\r\n    // Commit slider value on release\r\n    const handleProgressCommit = () => {\r\n        devHelpers.setMoonProgress(sliderProgress);\r\n    };\r\n\r\n    // Open inspector\r\n    const openInspector = () => {\r\n        setStoreSnapshot(devHelpers.getStoreSnapshot());\r\n        setInspectorOpen(true);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[9999] flex\">\r\n            {/* Backdrop */}\r\n            <div\r\n                className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n                onClick={onClose}\r\n            />\r\n\r\n            {/* Panel */}\r\n            <div className=\"relative ml-auto w-[400px] h-full border-l overflow-y-auto\" style={{\r\n                background: isLight ? '#F5F0E6' : '#0a0a12',\r\n                borderColor: isLight ? 'rgba(180, 155, 110, 0.25)' : 'rgba(255, 255, 255, 0.1)'\r\n            }}>\r\n                {/* Header */}\r\n                <div className=\"sticky top-0 z-10 border-b px-4 py-3 flex items-center justify-between\" style={{\r\n                    background: isLight ? '#F5F0E6' : '#0a0a12',\r\n                    borderColor: isLight ? 'rgba(180, 155, 110, 0.25)' : 'rgba(255, 255, 255, 0.1)'\r\n                }}>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-lg\">≡ƒöº</span>\r\n                        <span className=\"text-sm font-semibold tracking-wide\" style={{\r\n                            color: isLight ? 'rgba(45, 40, 35, 0.95)' : 'rgba(255, 255, 255, 0.9)'\r\n                        }}>DEVELOPER PANEL</span>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 transition-colors\"\r\n                        style={{ color: isLight ? 'rgba(60, 50, 40, 0.6)' : 'rgba(255, 255, 255, 0.6)' }}\r\n                    >\r\n                        Γ£ò\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-4 space-y-4\">\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* AVATAR SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <Section\r\n                        title=\"Avatar Preview\"\r\n                        expanded={expandedSections.avatar}\r\n                        onToggle={() => toggleSection('avatar')}\r\n                        isLight={isLight}\r\n                    >\r\n                        {/* Avatar display */}\r\n                        <div className=\"flex justify-center mb-4 scale-50 origin-center -my-16\">\r\n                            <Avatar\r\n                                mode=\"hub\"\r\n                                stage={avatarStage}\r\n                                path={showCore ? null : avatarPath}\r\n                                showCore={showCore}\r\n                                attention={avatarAttention}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Variation info */}\r\n                        <div className=\"text-xs text-center mb-4\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(255, 255, 255, 0.4)' }}>\r\n                            Click avatar to cycle through variations\r\n                        </div>\r\n\r\n                        {/* Stage selector */}\r\n                        <div className=\"flex items-center gap-3 mb-3\">\r\n                            <label className=\"text-sm font-medium w-16\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.9)' : 'white' }}>Stage</label>\r\n                            <select\r\n                                value={avatarStage}\r\n                                onChange={(e) => setAvatarStage(e.target.value)}\r\n                                className=\"flex-1 rounded-lg px-3 py-2.5 text-base font-medium\"\r\n                                style={{\r\n                                    background: isLight ? 'rgba(255, 255, 255, 0.9)' : '#0a0a12',\r\n                                    border: isLight ? '1px solid rgba(180, 155, 110, 0.3)' : '1px solid rgba(255, 255, 255, 0.3)',\r\n                                    color: isLight ? 'rgba(60, 50, 40, 0.95)' : 'white',\r\n                                    colorScheme: isLight ? 'light' : 'dark'\r\n                                }}\r\n                            >\r\n                                {STAGE_OPTIONS.map(s => (\r\n                                    <option key={s} value={s}>{s}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Path selector */}\r\n                        <div className=\"flex items-center gap-3 mb-3\">\r\n                            <label className=\"text-sm font-medium w-16\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.9)' : 'white' }}>Path</label>\r\n                            <select\r\n                                value={avatarPath}\r\n                                onChange={(e) => setAvatarPath(e.target.value)}\r\n                                className=\"flex-1 rounded-lg px-3 py-2.5 text-base font-medium\"\r\n                                style={{\r\n                                    background: isLight ? 'rgba(255, 255, 255, 0.9)' : '#0a0a12',\r\n                                    border: isLight ? '1px solid rgba(180, 155, 110, 0.3)' : '1px solid rgba(255, 255, 255, 0.3)',\r\n                                    color: isLight ? 'rgba(60, 50, 40, 0.95)' : 'white',\r\n                                    colorScheme: isLight ? 'light' : 'dark'\r\n                                }}\r\n                            >\r\n                                {PATH_OPTIONS.map(p => (\r\n                                    <option key={p} value={p}>{p}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Attention selector */}\r\n                        <div className=\"flex items-center gap-3 mb-3\">\r\n                            <label className=\"text-sm font-medium w-16\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.9)' : 'white' }}>Attention</label>\r\n                            <select\r\n                                value={avatarAttention}\r\n                                onChange={(e) => setAvatarAttention(e.target.value)}\r\n                                className=\"flex-1 rounded-lg px-3 py-2.5 text-base font-medium\"\r\n                                style={{\r\n                                    background: isLight ? 'rgba(255, 255, 255, 0.9)' : '#0a0a12',\r\n                                    border: isLight ? '1px solid rgba(180, 155, 110, 0.3)' : '1px solid rgba(255, 255, 255, 0.3)',\r\n                                    color: isLight ? 'rgba(60, 50, 40, 0.95)' : 'white',\r\n                                    colorScheme: isLight ? 'light' : 'dark'\r\n                                }}\r\n                            >\r\n                                <option value=\"none\">None (Stage/Path only)</option>\r\n                                <option value=\"vigilance\">Vigilance</option>\r\n                                <option value=\"sahaja\">Sahaja</option>\r\n                                <option value=\"ekagrata\">Ekagrata</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Show Core toggle */}\r\n                        <div className=\"flex items-center gap-3 mb-4\">\r\n                            <label className=\"text-xs w-16\" style={{ color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(255, 255, 255, 0.5)' }}>Show Core</label>\r\n                            <button\r\n                                onClick={() => setShowCore(!showCore)}\r\n                                className={`px-3 py-1.5 rounded-lg text-xs transition-colors ${showCore\r\n                                    ? 'bg-amber-500/30 text-amber-300 border border-amber-500/50'\r\n                                    : 'bg-white/5 text-white/50 border border-white/10'\r\n                                    }`}\r\n                            >\r\n                                {showCore ? 'ON' : 'OFF'}\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Light Mode Ring Toggle */}\r\n                        <div className=\"flex items-center gap-3 mb-4\">\r\n                            <label className=\"text-xs w-16\" style={{ color: isLight ? 'rgba(60, 120, 140, 0.9)' : '#22d3ee' }}>Ring Type</label>\r\n                            <div className=\"flex bg-white/5 rounded-lg p-1 gap-1\">\r\n                                <button\r\n                                    onClick={() => setLightModeRingType('astrolabe')}\r\n                                    className={`px-2 py-1 rounded text-[10px] transition-all ${lightModeRingType === 'astrolabe'\r\n                                        ? 'bg-cyan-500/20 text-cyan-300 border border-cyan-500/30'\r\n                                        : 'text-white/40 hover:text-white/60'\r\n                                        }`}\r\n                                >\r\n                                    ASTROLABE\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setLightModeRingType('rune')}\r\n                                    className={`px-2 py-1 rounded text-[10px] transition-all ${lightModeRingType === 'rune'\r\n                                        ? 'bg-amber-500/20 text-amber-300 border border-amber-500/30'\r\n                                        : 'text-white/40 hover:text-white/60'\r\n                                        }`}\r\n                                >\r\n                                    RUNE\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Cloud Background Toggle (Light Mode) */}\r\n                        <div className=\"flex items-center gap-3 mb-4\">\r\n                            <label className=\"text-xs w-16\" style={{ color: isLight ? 'rgba(60, 140, 100, 0.9)' : '#34d399' }}>Cloud BG</label>\r\n                            <div className=\"flex bg-white/5 rounded-lg p-1 gap-1 flex-wrap\">\r\n                                {['none', 'light_clouds', 'cloudier', 'cloudiest'].map(cloud => (\r\n                                    <button\r\n                                        key={cloud}\r\n                                        onClick={() => {\r\n                                            // This will need to be wired to HomeHub state via props\r\n                                            const event = new CustomEvent('dev-cloud-change', { detail: cloud });\r\n                                            window.dispatchEvent(event);\r\n                                        }}\r\n                                        className=\"px-2 py-1 rounded text-[10px] transition-all text-white/40 hover:text-white/60 hover:bg-white/10\"\r\n                                    >\r\n                                        {cloud === 'light_clouds' ? 'LIGHT' : cloud.toUpperCase()}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Avatar Version Toggle */}\r\n                        <div className=\"flex items-center gap-3 mb-4\">\r\n                            <label className=\"text-xs w-16\" style={{ color: isLight ? 'rgba(140, 60, 100, 0.9)' : '#ec4899' }}>Avatar Set</label>\r\n                            <div className=\"flex bg-white/5 rounded-lg p-1 gap-1\">\r\n                                <button\r\n                                    onClick={() => setUseNewAvatars(false)}\r\n                                    className={`px-2 py-1 rounded text-[10px] transition-all ${!useNewAvatars\r\n                                        ? 'bg-pink-500/20 text-pink-300 border border-pink-500/30'\r\n                                        : 'text-white/40 hover:text-white/60'\r\n                                        }`}\r\n                                >\r\n                                    OLD\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setUseNewAvatars(true)}\r\n                                    className={`px-2 py-1 rounded text-[10px] transition-all ${useNewAvatars\r\n                                        ? 'bg-purple-500/20 text-purple-300 border border-purple-500/30'\r\n                                        : 'text-white/40 hover:text-white/60'\r\n                                        }`}\r\n                                >\r\n                                    NEW\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Stage Asset Style Toggle */}\r\n                        <div className=\"flex items-center gap-3 mb-4\">\r\n                            <label className=\"text-xs w-16\" style={{ color: isLight ? 'rgba(140, 100, 60, 0.9)' : '#fb923c' }}>Title Set</label>\r\n                            <div className=\"flex bg-white/5 rounded-lg p-1 gap-1\">\r\n                                {[1, 2, 3, 4, 5].map(styleSet => (\r\n                                    <button\r\n                                        key={styleSet}\r\n                                        onClick={() => setStageAssetStyle(styleSet)}\r\n                                        className={`w-7 h-7 flex items-center justify-center rounded text-[10px] font-bold transition-all ${stageAssetStyle === styleSet\r\n                                            ? 'bg-amber-500/20 text-amber-300 border border-amber-500/30'\r\n                                            : 'text-white/40 hover:text-white/60 hover:bg-white/5'\r\n                                            }`}\r\n                                    >\r\n                                        {styleSet}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Gyro Simulation for Ring Drift */}\r\n                        <div className=\"border-t border-white/10 pt-3 mt-2\">\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <span className=\"text-xs text-white/50\">≡ƒÄ» Ring Drift Simulation</span>\r\n                                <span className=\"text-[10px] text-cyan-400/70 font-mono\">\r\n                                    X:{gyroX.toFixed(0)} Y:{gyroY.toFixed(0)}\r\n                                </span>\r\n                            </div>\r\n\r\n                            {/* X Tilt */}\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                <label className=\"text-xs text-white/40 w-8\">X</label>\r\n                                <input\r\n                                    type=\"range\"\r\n                                    min=\"-30\"\r\n                                    max=\"30\"\r\n                                    value={gyroX}\r\n                                    className=\"flex-1 accent-cyan-500\"\r\n                                    onChange={(e) => {\r\n                                        const val = parseFloat(e.target.value);\r\n                                        setGyroX(val);\r\n                                        console.log('≡ƒÄ» Gyro X:', val);\r\n                                        window.dispatchEvent(new CustomEvent('dev-gyro', {\r\n                                            detail: { axis: 'gamma', value: val }\r\n                                        }));\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Y Tilt */}\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                <label className=\"text-xs text-white/40 w-8\">Y</label>\r\n                                <input\r\n                                    type=\"range\"\r\n                                    min=\"-30\"\r\n                                    max=\"30\"\r\n                                    value={gyroY}\r\n                                    className=\"flex-1 accent-cyan-500\"\r\n                                    onChange={(e) => {\r\n                                        const val = parseFloat(e.target.value);\r\n                                        setGyroY(val);\r\n                                        console.log('≡ƒÄ» Gyro Y:', val);\r\n                                        window.dispatchEvent(new CustomEvent('dev-gyro', {\r\n                                            detail: { axis: 'beta', value: val }\r\n                                        }));\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Reset button */}\r\n                            <button\r\n                                onClick={() => {\r\n                                    setGyroX(0);\r\n                                    setGyroY(0);\r\n                                    window.dispatchEvent(new CustomEvent('dev-gyro', { detail: { reset: true } }));\r\n                                }}\r\n                                className=\"w-full bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg px-3 py-1.5 text-xs text-white/60 hover:text-white/90 transition-all\"\r\n                            >\r\n                                Reset Tilt\r\n                            </button>\r\n                        </div>\r\n                    </Section>\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* BUTTON AESTHETICS SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <Section\r\n                        title=\"Button Aesthetics\"\r\n                        expanded={expandedSections.buttons || false}\r\n                        onToggle={() => toggleSection('buttons')}\r\n                        isLight={isLight}\r\n                    >\r\n                        {/* Dark Mode Theme */}\r\n                        {!isLight && (\r\n                            <div className=\"flex flex-col gap-2 mb-4\">\r\n                                <label className=\"text-xs font-semibold uppercase tracking-wider text-white/30\">\r\n                                    Dark Mode Theme (Cosmic)\r\n                                </label>\r\n                                <div className=\"grid grid-cols-2 gap-2\">\r\n                                    {['cosmic', 'bioluminescent', 'aurora', 'crystalline', 'electric'].map(theme => (\r\n                                        <button\r\n                                            key={theme}\r\n                                            onClick={() => setButtonThemeDark(theme)}\r\n                                            className={`px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-tight transition-all border ${buttonThemeDark === theme\r\n                                                ? 'bg-amber-500/20 text-amber-300 border-amber-500/40'\r\n                                                : 'bg-white/5 text-white/40 border-white/10 hover:bg-white/10'\r\n                                                }`}\r\n                                        >\r\n                                            {theme}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Light Mode Theme */}\r\n                        {isLight && (\r\n                            <div className=\"flex flex-col gap-2 mb-4\">\r\n                                <label className=\"text-xs font-semibold uppercase tracking-wider\" style={{ color: 'rgba(60, 50, 40, 0.4)' }}>\r\n                                    Light Mode Theme (Pastel)\r\n                                </label>\r\n                                <div className=\"grid grid-cols-2 gap-2\">\r\n                                    {['watercolor', 'sketch', 'botanical', 'inkwash', 'cloudscape'].map(theme => (\r\n                                        <button\r\n                                            key={theme}\r\n                                            onClick={() => setButtonThemeLight(theme)}\r\n                                            className={`px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-tight transition-all border ${buttonThemeLight === theme\r\n                                                ? 'bg-amber-700/20 text-amber-800 border-amber-700/30'\r\n                                                : 'bg-black/5 text-black/40 border-black/10 hover:bg-black/10'\r\n                                                }`}\r\n                                        >\r\n                                            {theme}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"text-[10px] text-center opacity-40 mt-2 italic\">\r\n                            {isLight ? 'Pastel & Watercolor' : 'Dramatic & Cosmic'}\r\n                        </div>\r\n                    </Section>\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* LUNAR PROGRESS SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <Section\r\n                        title=\"Lunar Progress\"\r\n                        expanded={expandedSections.lunar}\r\n                        onToggle={() => toggleSection('lunar')}\r\n                        isLight={isLight}\r\n                    >\r\n                        {/* Stats */}\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-4 text-xs\">\r\n                            <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                                <div className=\"text-white/40\">Progress</div>\r\n                                <div className=\"text-white/90 font-mono\">{lunarProgress.toFixed(2)} / 12</div>\r\n                            </div>\r\n                            <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                                <div className=\"text-white/40\">Total Days</div>\r\n                                <div className=\"text-white/90 font-mono\">{totalDays}</div>\r\n                            </div>\r\n                            <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                                <div className=\"text-white/40\">Stage</div>\r\n                                <div className=\"text-white/90\">{currentStage}</div>\r\n                            </div>\r\n                            <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                                <div className=\"text-white/40\">Trail Length</div>\r\n                                <div className=\"text-white/90\">{recentActivity.filter(a => a.completed).length}/7</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Sparkle mode toggle */}\r\n                        <div className=\"flex items-center justify-between mb-4 bg-white/5 rounded-lg px-3 py-2\">\r\n                            <span className=\"text-xs text-white/50\">Moon Sparkles</span>\r\n                            <button\r\n                                onClick={cycleSparkleMode}\r\n                                className=\"px-3 py-1 rounded text-xs bg-amber-500/20 border border-amber-500/30 text-amber-300 hover:bg-amber-500/30 transition-colors\"\r\n                            >\r\n                                {sparkleMode === 'none' ? 'Γ£ù None' : sparkleMode === 'static' ? 'Γ£ª Static' : 'Γ£º Floating'}\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Progress slider */}\r\n                        <div className=\"mb-4\">\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <span className=\"text-xs text-white/50\">Moon Position</span>\r\n                                <span className=\"text-xs text-white/70 font-mono\">{sliderProgress.toFixed(1)}</span>\r\n                            </div>\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"0\"\r\n                                max=\"12\"\r\n                                step=\"0.1\"\r\n                                value={sliderProgress}\r\n                                onChange={handleProgressChange}\r\n                                onMouseUp={handleProgressCommit}\r\n                                onTouchEnd={handleProgressCommit}\r\n                                className=\"w-full accent-amber-500\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Practice buttons */}\r\n                        <div className=\"grid grid-cols-3 gap-2 mb-3\">\r\n                            <DevButton onClick={() => devHelpers.simulatePracticeDays(1)}>+1 Day</DevButton>\r\n                            <DevButton onClick={() => devHelpers.simulatePracticeDays(10)}>+10 Days</DevButton>\r\n                            <DevButton onClick={() => devHelpers.simulatePracticeDays(30)}>+30 Days</DevButton>\r\n                        </div>\r\n\r\n                        {/* Stage buttons */}\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-3\">\r\n                            <DevButton onClick={() => devHelpers.goToPreviousStage()}>ΓåÉ Prev Stage</DevButton>\r\n                            <DevButton onClick={() => devHelpers.advanceToNextStage()}>Next Stage ΓåÆ</DevButton>\r\n                        </div>\r\n\r\n                        {/* Simulation buttons */}\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-3\">\r\n                            <DevButton onClick={() => devHelpers.simulateDrift(7)}>Simulate 7-Day Drift</DevButton>\r\n                            <DevButton onClick={() => devHelpers.fillRecentActivity()}>Fill Trail</DevButton>\r\n                        </div>\r\n\r\n                        {/* Reset lunar (destructive) */}\r\n                        <DestructiveButton\r\n                            label=\"Reset Lunar\"\r\n                            armed={armed === 'lunar'}\r\n                            onArm={() => handleDestructive('lunar', () => useLunarStore.getState()._devReset())}\r\n                        />\r\n                    </Section>\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* CURRICULUM SIMULATION SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <CurriculumSection\r\n                        expanded={expandedSections.curriculum}\r\n                        onToggle={() => toggleSection('curriculum')}\r\n                        armed={armed}\r\n                        handleDestructive={handleDestructive}\r\n                        isLight={isLight}\r\n                    />\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* PATH CEREMONY SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <Section\r\n                        title=\"Path Ceremony\"\r\n                        expanded={expandedSections.path}\r\n                        onToggle={() => toggleSection('path')}\r\n                        isLight={isLight}\r\n                    >\r\n                        {/* Stats */}\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-4 text-xs\">\r\n                            <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                                <div className=\"text-white/40\">Current Path</div>\r\n                                <div className=\"text-white/90\">{currentPath || 'None'}</div>\r\n                            </div>\r\n                            <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                                <div className=\"text-white/40\">Status</div>\r\n                                <div className=\"text-white/90\">{pathStatus}</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Pending ceremony indicator */}\r\n                        {pendingCeremony && (\r\n                            <div className=\"bg-amber-500/20 border border-amber-500/40 rounded-lg px-3 py-2 mb-4 text-xs text-amber-300\">\r\n                                Ceremony pending: {pendingCeremony.type} ΓåÆ {pendingCeremony.path}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Ceremony triggers */}\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-3\">\r\n                            <DevButton onClick={() => devHelpers.triggerPathEmergence('Prana')}>Trigger Emergence</DevButton>\r\n                            <DevButton onClick={() => devHelpers.triggerPathShift('Prana', 'Dhyana')}>Trigger Shift</DevButton>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-3\">\r\n                            <DevButton onClick={() => devHelpers.clearCeremony()}>Clear Ceremony</DevButton>\r\n                            <DevButton onClick={() => devHelpers.setPath('Prana')}>Set Path: Prana</DevButton>\r\n                        </div>\r\n\r\n                        {/* Reset path (destructive) */}\r\n                        <DestructiveButton\r\n                            label=\"Reset Path Data\"\r\n                            armed={armed === 'path'}\r\n                            onArm={() => handleDestructive('path', () => usePathStore.getState()._devReset())}\r\n                        />\r\n                    </Section>\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* ATTENTION PATH SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <AttentionPathSection\r\n                        expanded={expandedSections.attention}\r\n                        onToggle={() => toggleSection('attention')}\r\n                        armed={armed}\r\n                        handleDestructive={handleDestructive}\r\n                        isLight={isLight}\r\n                    />\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* TRACKINGHUB SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <TrackingHubSection\r\n                        expanded={expandedSections.tracking}\r\n                        onToggle={() => toggleSection('tracking')}\r\n                        isLight={isLight}\r\n                    />\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* LLM TEST SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <Section\r\n                        title=\"LLM Service (Gemini)\"\r\n                        expanded={expandedSections.llm}\r\n                        onToggle={() => toggleSection('llm')}\r\n                        isLight={isLight}\r\n                    >\r\n                        <LLMTestPanel />\r\n                    </Section>\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* DESIGN & DIAGNOSTIC SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <Section\r\n                        title=\"Design & Diagnostic\"\r\n                        expanded={expandedSections.design || false}\r\n                        onToggle={() => toggleSection('design')}\r\n                        isLight={isLight}\r\n                    >\r\n                        <div className=\"flex items-center justify-between mb-4 bg-white/5 rounded-lg px-3 py-2\">\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-xs text-white/90\">Coordinate Helper</span>\r\n                                <span className=\"text-[10px] text-white/40\">Logs X,Y % on click</span>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setCoordinateHelper(!showCoordinateHelper)}\r\n                                className={`px-3 py-1.5 rounded-lg text-xs transition-colors ${showCoordinateHelper\r\n                                    ? 'bg-cyan-500/30 text-cyan-300 border border-cyan-500/50'\r\n                                    : 'bg-white/5 text-white/50 border border-white/10'\r\n                                    }`}\r\n                            >\r\n                                {showCoordinateHelper ? 'ACTIVE' : 'OFF'}\r\n                            </button>\r\n                        </div>\r\n                    </Section>\r\n\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    {/* DATA SECTION */}\r\n                    {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n                    <Section\r\n                        title=\"Data Management\"\r\n                        expanded={expandedSections.data}\r\n                        onToggle={() => toggleSection('data')}\r\n                        isLight={isLight}\r\n                    >\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-3\">\r\n                            <DevButton onClick={openInspector}>Inspect Stores</DevButton>\r\n                            <DevButton onClick={() => {\r\n                                const data = devHelpers.getStoreSnapshot();\r\n                                console.log('Store Snapshot:', data);\r\n                                navigator.clipboard?.writeText(JSON.stringify(data, null, 2));\r\n                            }}>Copy to Clipboard</DevButton>\r\n                        </div>\r\n\r\n                        {/* Reset all (destructive) */}\r\n                        <DestructiveButton\r\n                            label=\"Reset ALL Stores\"\r\n                            armed={armed === 'all'}\r\n                            onArm={() => handleDestructive('all', devHelpers.resetAllStores)}\r\n                        />\r\n                    </Section>\r\n\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"sticky bottom-0 bg-[#0a0a12] border-t border-white/10 px-4 py-2 text-center text-[10px] text-white/30\">\r\n                    Dev Panel ΓÇó Ctrl+Shift+D to toggle\r\n                </div>\r\n            </div>\r\n\r\n            {/* Inspector Modal */}\r\n            {inspectorOpen && (\r\n                <div className=\"fixed inset-0 z-[10000] flex items-center justify-center\">\r\n                    <div className=\"absolute inset-0 bg-black/80\" onClick={() => setInspectorOpen(false)} />\r\n                    <div className=\"relative bg-[#0a0a12] border border-white/20 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden\">\r\n                        <div className=\"flex items-center justify-between px-4 py-3 border-b border-white/10\">\r\n                            <span className=\"text-sm font-semibold text-white/90\">Store Inspector</span>\r\n                            <button\r\n                                onClick={() => setInspectorOpen(false)}\r\n                                className=\"text-white/50 hover:text-white\"\r\n                            >Γ£ò</button>\r\n                        </div>\r\n                        <pre className=\"p-4 text-xs text-white/70 overflow-auto max-h-[60vh] font-mono\">\r\n                            {JSON.stringify(storeSnapshot, null, 2)}\r\n                        </pre>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// SUB-COMPONENTS\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction AttentionPathSection({ expanded, onToggle, armed, handleDestructive, isLight = false }) {\r\n    const weeklyFeatures = useAttentionStore(s => s.weeklyFeatures);\r\n    const windows = useAttentionStore(s => s.windows);\r\n    const getValidWeekCount = useAttentionStore(s => s.getValidWeekCount);\r\n    const aggregateCurrentWeek = useAttentionStore(s => s.aggregateCurrentWeek);\r\n    const _devAggregateAll = useAttentionStore(s => s._devAggregateAll);\r\n    const _devReset = useAttentionStore(s => s._devReset);\r\n\r\n    const [mockProfile, setMockProfile] = useState('stable_ekagrata');\r\n    const [mockResult, setMockResult] = useState(null);\r\n\r\n    const validWeekCount = getValidWeekCount(12);\r\n    const featureVector = windows.mid || windows.short;\r\n\r\n    // Calculate current path state\r\n    let pathState = null;\r\n    if (featureVector) {\r\n        pathState = determinePathState(featureVector, validWeekCount);\r\n    }\r\n\r\n    // Run mock profile test\r\n    const runMockTest = () => {\r\n        const mockData = generateMockWeeklyData(mockProfile, 8, 0.2);\r\n        const lastWeek = mockData[mockData.length - 1];\r\n        const probs = calculatePathProbabilities(lastWeek);\r\n        const dominant = getDominantPath(probs);\r\n        const metadata = getProfileMetadata(mockProfile);\r\n        setMockResult({\r\n            profile: metadata,\r\n            probabilities: probs,\r\n            dominant,\r\n            expected: metadata?.expectedPath,\r\n            pass: dominant.path?.includes(metadata?.expectedPath) || dominant.status === metadata?.expectedPath,\r\n        });\r\n    };\r\n\r\n    return (\r\n        <Section\r\n            title=\"Attention Path (Ekagrata/Sahaja/Vigilance)\"\r\n            expanded={expanded}\r\n            onToggle={onToggle}\r\n            isLight={isLight}\r\n        >\r\n            {/* Stats */}\r\n            <div className=\"grid grid-cols-2 gap-2 mb-4 text-xs\">\r\n                <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                    <div className=\"text-white/40\">Valid Weeks</div>\r\n                    <div className=\"text-white/90 font-mono\">{validWeekCount}/12</div>\r\n                </div>\r\n                <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                    <div className=\"text-white/40\">State</div>\r\n                    <div className=\"text-white/90\">{pathState?.state || 'No Data'}</div>\r\n                </div>\r\n                <div className=\"bg-white/5 rounded-lg px-3 py-2 col-span-2\">\r\n                    <div className=\"text-white/40\">Attention Path</div>\r\n                    <div className=\"text-white/90 font-medium\">\r\n                        {pathState?.path || 'None'}\r\n                        {pathState?.probability && <span className=\"text-white/50 ml-2\">({(pathState.probability * 100).toFixed(0)}%)</span>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Probability Bars */}\r\n            {pathState?.probabilities && (\r\n                <div className=\"mb-4\">\r\n                    <div className=\"text-xs text-white/50 mb-2\">Path Probabilities</div>\r\n                    {['Ekagrata', 'Sahaja', 'Vigilance'].map(path => {\r\n                        const prob = pathState.probabilities[path] || 0;\r\n                        return (\r\n                            <div key={path} className=\"flex items-center gap-2 mb-1.5\">\r\n                                <span className=\"text-xs text-white/60 w-16\">{path}</span>\r\n                                <div className=\"flex-1 h-3 bg-white/5 rounded-full overflow-hidden\">\r\n                                    <div\r\n                                        className=\"h-full rounded-full transition-all\"\r\n                                        style={{\r\n                                            width: `${prob * 100}%`,\r\n                                            background: path === 'Ekagrata' ? '#a78bfa'\r\n                                                : path === 'Sahaja' ? '#34d399'\r\n                                                    : '#fbbf24',\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <span className=\"text-xs text-white/50 w-10 text-right font-mono\">\r\n                                    {(prob * 100).toFixed(0)}%\r\n                                </span>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            )}\r\n\r\n            {/* Actions */}\r\n            <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                <DevButton onClick={() => aggregateCurrentWeek()}>Aggregate Now</DevButton>\r\n                <DevButton onClick={() => _devAggregateAll()}>Aggregate All</DevButton>\r\n            </div>\r\n\r\n            {/* Mock Profile Testing */}\r\n            <div className=\"border-t border-white/10 pt-3 mt-2\">\r\n                <div className=\"text-xs text-white/50 mb-2\">Mock Profile Test</div>\r\n                <div className=\"flex gap-2 mb-2\">\r\n                    <select\r\n                        value={mockProfile}\r\n                        onChange={(e) => setMockProfile(e.target.value)}\r\n                        className=\"flex-1 bg-[#1a1a24] border border-white/10 rounded-lg px-2 py-1.5 text-xs text-white/90\"\r\n                        style={{ colorScheme: 'dark' }}\r\n                    >\r\n                        {getProfileKeys().map(key => (\r\n                            <option key={key} value={key}>{getProfileMetadata(key)?.name || key}</option>\r\n                        ))}\r\n                    </select>\r\n                    <DevButton onClick={runMockTest}>Test</DevButton>\r\n                </div>\r\n\r\n                {mockResult && (\r\n                    <div className={`text-xs p-2 rounded-lg ${mockResult.pass ? 'bg-green-500/20 border border-green-500/40' : 'bg-red-500/20 border border-red-500/40'}`}>\r\n                        <div className=\"flex justify-between mb-1\">\r\n                            <span className=\"text-white/70\">Expected: {mockResult.expected}</span>\r\n                            <span className=\"text-white/70\">Got: {mockResult.dominant.path || mockResult.dominant.status}</span>\r\n                        </div>\r\n                        <div className=\"text-white/50\">\r\n                            {mockResult.pass ? 'Γ£ô PASS' : 'Γ£ù FAIL'}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Reset */}\r\n            <div className=\"mt-3\">\r\n                <DestructiveButton\r\n                    label=\"Reset Attention Data\"\r\n                    armed={armed === 'attention'}\r\n                    onArm={() => handleDestructive('attention', _devReset)}\r\n                />\r\n            </div>\r\n        </Section>\r\n    );\r\n}\r\n\r\nfunction TrackingHubSection({ expanded, onToggle, isLight = false }) {\r\n    const { sessions } = useProgressStore();\r\n    const trackingSessions = useTrackingStore(s => s.sessions);\r\n    const [selectedPattern, setSelectedPattern] = useState('dedicated');\r\n\r\n    const injectMockData = (patternKey) => {\r\n        const pattern = MOCK_PATTERNS[patternKey];\r\n        const mockSessions = [\r\n            ...generateMockSessions('breathwork', pattern.breathwork),\r\n            ...generateMockSessions('visualization', pattern.visualization),\r\n            ...generateMockSessions('wisdom', pattern.wisdom)\r\n        ];\r\n\r\n        // Inject into store (this will overwrite existing sessions)\r\n        useProgressStore.setState({ sessions: mockSessions });\r\n        console.log(`Γ£à Injected ${mockSessions.length} mock sessions (${pattern.label})`);\r\n    };\r\n\r\n    const clearMockData = () => {\r\n        const realSessions = sessions.filter(s => !s.metadata?.mock);\r\n        useProgressStore.setState({ sessions: realSessions });\r\n        console.log('≡ƒùæ∩╕Å Cleared all mock data');\r\n    };\r\n\r\n    // TRAJECTORY MOCK DATA GENERATION\r\n    const injectTrajectoryData = (pattern) => {\r\n        const mockSessions = [];\r\n        const now = Date.now();\r\n        const weeksToGenerate = 8;\r\n\r\n        // Pattern configurations\r\n        const patterns = {\r\n            ascending: {\r\n                label: 'Ascending (Improving)',\r\n                daysPerWeek: (week) => Math.min(3 + Math.floor(week * 0.5), 7), // 3 days ΓåÆ 6-7 days\r\n                precision: (week) => 0.6 + (week * 0.04), // 60% ΓåÆ 90%+\r\n            },\r\n            steady: {\r\n                label: 'Steady (Consistent)',\r\n                daysPerWeek: () => 5, // Consistent 5 days/week\r\n                precision: () => 0.75 + (Math.random() * 0.1 - 0.05), // 70-80% with variation\r\n            },\r\n            declining: {\r\n                label: 'Declining (Falling Off)',\r\n                daysPerWeek: (week) => Math.max(6 - Math.floor(week * 0.6), 2), // 6 days ΓåÆ 2 days\r\n                precision: (week) => Math.max(0.85 - (week * 0.05), 0.4), // 85% ΓåÆ 45%\r\n            },\r\n        };\r\n\r\n        const config = patterns[pattern];\r\n\r\n        // Generate sessions for each week\r\n        for (let weekOffset = weeksToGenerate - 1; weekOffset >= 0; weekOffset--) {\r\n            const daysThisWeek = config.daysPerWeek(weeksToGenerate - weekOffset - 1);\r\n            const msPerDay = 24 * 60 * 60 * 1000;\r\n            const weekStartMs = now - (weekOffset * 7 * msPerDay);\r\n\r\n            // Randomize which days of the week\r\n            const daysOfWeek = [0, 1, 2, 3, 4, 5, 6];\r\n            const selectedDays = daysOfWeek.sort(() => Math.random() - 0.5).slice(0, daysThisWeek);\r\n\r\n            selectedDays.forEach((dayOfWeek) => {\r\n                const sessionDate = new Date(weekStartMs + (dayOfWeek * msPerDay));\r\n                const dateKey = sessionDate.toISOString().split('T')[0];\r\n                const precisionValue = Math.min(Math.max(config.precision(weeksToGenerate - weekOffset - 1), 0), 1);\r\n\r\n                // Random time variation (11am - 2pm)\r\n                const targetTime = new Date(sessionDate);\r\n                targetTime.setHours(12, 0, 0, 0);\r\n                const offsetSeconds = (Math.random() * 120 - 60) * (1 - precisionValue * 0.5); // More variance when precision is low\r\n                const actualTime = new Date(targetTime.getTime() + offsetSeconds * 1000);\r\n\r\n                const duration = 10 + Math.floor(Math.random() * 5); // 10-15 minutes\r\n                const totalCycles = Math.floor(duration * 6); // ~6 cycles per minute\r\n                const accurateCycles = Math.floor(totalCycles * precisionValue);\r\n\r\n                mockSessions.push({\r\n                    id: `traj_mock_${sessionDate.getTime()}_${Math.random().toString(36).substr(2, 9)}`,\r\n                    dateKey,\r\n                    timestamp: actualTime.getTime(),\r\n                    practiceType: 'breath',\r\n                    practiceFamily: 'attention',\r\n                    scheduledTime: '12:00',\r\n                    actualTime: actualTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false }),\r\n                    duration,\r\n                    durationMs: duration * 60 * 1000,\r\n                    exitType: Math.random() > 0.1 ? 'completed' : 'early_exit',\r\n                    completionRatio: Math.random() > 0.1 ? 1 : 0.7 + Math.random() * 0.2,\r\n                    precision: {\r\n                        breath: {\r\n                            rhythmAccuracy: precisionValue,\r\n                            totalCycles,\r\n                            accurateCycles,\r\n                            avgDeviation: Math.abs(offsetSeconds),\r\n                        },\r\n                    },\r\n                    pauseCount: Math.floor(Math.random() * 2),\r\n                    pauseTotalMs: Math.floor(Math.random() * 30000),\r\n                    aliveSignalCount: totalCycles,\r\n                    circuitExercises: null,\r\n                    metadata: { mock: true, trajectoryPattern: pattern },\r\n                });\r\n            });\r\n        }\r\n\r\n        // Inject into trackingStore\r\n        useTrackingStore.setState({ sessions: mockSessions });\r\n        console.log(`Γ£à Injected ${mockSessions.length} trajectory sessions (${config.label}) over ${weeksToGenerate} weeks`);\r\n    };\r\n\r\n    const clearTrajectoryData = () => {\r\n        const realSessions = trackingSessions.filter(s => !s.metadata?.mock);\r\n        useTrackingStore.setState({ sessions: realSessions });\r\n        console.log('≡ƒùæ∩╕Å Cleared trajectory mock data');\r\n    };\r\n\r\n    const mockSessionCount = sessions.filter(s => s.metadata?.mock).length;\r\n    const totalSessionCount = sessions.length;\r\n    const trajectoryMockCount = trackingSessions.filter(s => s.metadata?.mock).length;\r\n    const trajectoryTotalCount = trackingSessions.length;\r\n\r\n    return (\r\n        <Section\r\n            title=\"TrackingHub Mock Data\"\r\n            expanded={expanded}\r\n            onToggle={onToggle}\r\n            isLight={isLight}\r\n        >\r\n            {/* TRAJECTORY SECTION */}\r\n            <div className=\"mb-6 pb-4 border-b border-white/10\">\r\n                <div className=\"text-xs font-semibold uppercase tracking-wider mb-3\" style={{\r\n                    color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(255, 255, 255, 0.5)'\r\n                }}>\r\n                    ≡ƒôê Trajectory (8 Weeks)\r\n                </div>\r\n\r\n                {/* Session counts */}\r\n                <div className=\"grid grid-cols-2 gap-2 mb-3 text-xs\">\r\n                    <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                        <div className=\"text-white/40\">Total Sessions</div>\r\n                        <div className=\"text-white/90 font-mono\">{trajectoryTotalCount}</div>\r\n                    </div>\r\n                    <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                        <div className=\"text-white/40\">Mock Sessions</div>\r\n                        <div className=\"text-white/90 font-mono\">{trajectoryMockCount}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Pattern injection buttons */}\r\n                <div className=\"space-y-2 mb-3\">\r\n                    {['ascending', 'steady', 'declining'].map((key) => (\r\n                        <button\r\n                            key={key}\r\n                            onClick={() => injectTrajectoryData(key)}\r\n                            className=\"w-full text-left px-3 py-2 rounded-lg text-xs transition-all bg-white/5 text-white/60 hover:bg-white/10 hover:text-white/90 border border-white/10 hover:border-white/20\"\r\n                        >\r\n                            {key === 'ascending' ? 'Γåæ Ascending (Improving)' :\r\n                                key === 'steady' ? 'ΓåÆ Steady (Consistent)' :\r\n                                    'Γåô Declining (Falling Off)'}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Clear button */}\r\n                <button\r\n                    onClick={clearTrajectoryData}\r\n                    className=\"w-full px-3 py-2 rounded-lg text-xs bg-red-500/10 border border-red-500/30 text-red-400/70 hover:bg-red-500/20 transition-all\"\r\n                >\r\n                    ≡ƒùæ∩╕Å Clear Trajectory Data\r\n                </button>\r\n            </div>\r\n\r\n            {/* PROGRESS STORE SECTION */}\r\n            <div>\r\n                <div className=\"text-xs font-semibold uppercase tracking-wider mb-3\" style={{\r\n                    color: isLight ? 'rgba(60, 50, 40, 0.7)' : 'rgba(255, 255, 255, 0.5)'\r\n                }}>\r\n                    ≡ƒôè Progress Stats (Legacy)\r\n                </div>\r\n\r\n                {/* Session counts */}\r\n                <div className=\"grid grid-cols-2 gap-2 mb-4 text-xs\">\r\n                    <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                        <div className=\"text-white/40\">Total Sessions</div>\r\n                        <div className=\"text-white/90 font-mono\">{totalSessionCount}</div>\r\n                    </div>\r\n                    <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                        <div className=\"text-white/40\">Mock Sessions</div>\r\n                        <div className=\"text-white/90 font-mono\">{mockSessionCount}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Pattern injection */}\r\n                <div className=\"mb-4\">\r\n                    <div className=\"text-xs text-white/50 mb-2\">Inject Mock Pattern</div>\r\n                    <div className=\"space-y-2\">\r\n                        {Object.entries(MOCK_PATTERNS).map(([key, pattern]) => (\r\n                            <button\r\n                                key={key}\r\n                                onClick={() => {\r\n                                    setSelectedPattern(key);\r\n                                    injectMockData(key);\r\n                                }}\r\n                                className={`\r\n                                    w-full text-left px-3 py-2 rounded-lg text-xs transition-all\r\n                                    ${selectedPattern === key\r\n                                        ? 'bg-amber-500/20 text-amber-300 border border-amber-500/50'\r\n                                        : 'bg-white/5 text-white/60 hover:bg-white/10 border border-white/10'\r\n                                    }\r\n                                `}\r\n                            >\r\n                                {pattern.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Clear button */}\r\n                <button\r\n                    onClick={clearMockData}\r\n                    className=\"w-full px-3 py-2 rounded-lg text-xs bg-red-500/10 border border-red-500/30 text-red-400/70 hover:bg-red-500/20 transition-all\"\r\n                >\r\n                    ≡ƒùæ∩╕Å Clear Progress Data\r\n                </button>\r\n            </div>\r\n\r\n            {/* Info */}\r\n            <div className=\"mt-3 pt-3 border-t border-white/10\">\r\n                <div className=\"text-[10px] text-white/40\">\r\n                    Trajectory data populates the TrajectoryCard on the Hub\r\n                </div>\r\n            </div>\r\n        </Section>\r\n    );\r\n}\r\n\r\nfunction CurriculumSection({ expanded, onToggle, armed, handleDestructive, isLight = false }) {\r\n    const getCurrentDayNumber = useCurriculumStore(s => s.getCurrentDayNumber);\r\n    const _devSetDay = useCurriculumStore(s => s._devSetDay);\r\n    const _devCompleteDay = useCurriculumStore(s => s._devCompleteDay);\r\n    const logLegCompletion = useCurriculumStore(s => s.logLegCompletion);\r\n    const dayCompletions = useCurriculumStore(s => s.dayCompletions);\r\n    const legCompletions = useCurriculumStore(s => s.legCompletions);\r\n    const _devReset = useCurriculumStore(s => s._devReset);\r\n    const getActiveCurriculum = useCurriculumStore(s => s.getActiveCurriculum);\r\n\r\n    const curriculum = getActiveCurriculum();\r\n    const totalDays = curriculum?.duration || 14;\r\n    const totalLegsPerDay = curriculum?.days?.[0]?.legs?.length || 2;\r\n\r\n    const currentDay = getCurrentDayNumber();\r\n    const completedDays = Object.keys(dayCompletions).filter(d => dayCompletions[d].completed).length;\r\n    const completedLegs = Object.keys(legCompletions).length;\r\n\r\n    const [simDays, setSimDays] = React.useState(totalDays);\r\n    const [simLegs, setSimLegs] = React.useState(totalLegsPerDay);\r\n\r\n    const simulateEntireProgram = () => {\r\n        // Simulate full curriculum with configurable days and legs\r\n        for (let day = 1; day <= simDays; day++) {\r\n            for (let leg = 1; leg <= simLegs; leg++) {\r\n                logLegCompletion(day, leg, {\r\n                    duration: 5 + Math.floor(Math.random() * 3), // 5-7 min\r\n                    focusRating: 3 + Math.floor(Math.random() * 3), // 3-5 stars\r\n                    challenges: [],\r\n                    notes: `Dev simulated day ${day}, leg ${leg}`,\r\n                });\r\n            }\r\n        }\r\n        console.log(`Γ£à Simulated ${simDays} days with ${simLegs} legs each`);\r\n    };\r\n\r\n    const completeCurrentDay = () => {\r\n        // Complete both legs for the current day\r\n        logLegCompletion(currentDay, 1, {\r\n            duration: 5,\r\n            focusRating: 4,\r\n            challenges: [],\r\n            notes: 'Dev completed leg 1',\r\n        });\r\n        logLegCompletion(currentDay, 2, {\r\n            duration: 5,\r\n            focusRating: 5,\r\n            challenges: [],\r\n            notes: 'Dev completed leg 2',\r\n        });\r\n        console.log(`Γ£à Completed both legs for Day ${currentDay}`);\r\n    };\r\n\r\n    const populateSampleThoughts = () => {\r\n        const { completeOnboarding, practiceTimeSlots } = useCurriculumStore.getState();\r\n        const sampleThoughts = [\r\n            { text: 'I am not good enough', weight: 1 },\r\n            { text: 'I always mess things up', weight: 1 },\r\n            { text: 'Everyone else has it figured out', weight: 0 },\r\n            { text: 'I should be better by now', weight: 0 },\r\n            { text: 'Nothing ever works out', weight: 0 },\r\n            { text: 'I am capable of growth', weight: 0 },\r\n            { text: 'This moment is full of potential', weight: 0 },\r\n        ];\r\n        completeOnboarding(practiceTimeSlots, sampleThoughts);\r\n        console.log('Γ£à Populated 7 sample thoughts (2 priority, 5 normal)');\r\n    };\r\n\r\n    const testWeightedRandom = () => {\r\n        const { getWeightedRandomThought } = useCurriculumStore.getState();\r\n        const thought = getWeightedRandomThought();\r\n        if (thought) {\r\n            console.log('≡ƒÄ▓ Random thought selected:', thought.text, `(weight: ${thought.weight})`);\r\n        } else {\r\n            console.log('Γ¥î No thoughts in catalog');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Section\r\n            title=\"Curriculum Simulation\"\r\n            expanded={expanded}\r\n            onToggle={onToggle}\r\n            isLight={isLight}\r\n        >\r\n            {/* Stats */}\r\n            <div className=\"grid grid-cols-3 gap-2 mb-4 text-xs\">\r\n                <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                    <div className=\"text-white/40\">Current Day</div>\r\n                    <div className=\"text-white/90 font-mono\">{currentDay}/{totalDays}</div>\r\n                </div>\r\n                <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                    <div className=\"text-white/40\">Days Done</div>\r\n                    <div className=\"text-white/90 font-mono\">{completedDays}</div>\r\n                </div>\r\n                <div className=\"bg-white/5 rounded-lg px-3 py-2\">\r\n                    <div className=\"text-white/40\">Legs Done</div>\r\n                    <div className=\"text-white/90 font-mono\">{completedLegs}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Day Navigation */}\r\n            <div className=\"grid grid-cols-4 gap-2 mb-3\">\r\n                <DevButton onClick={() => _devSetDay(1)}>Day 1</DevButton>\r\n                <DevButton onClick={() => _devSetDay(Math.floor(totalDays / 2))}>Mid</DevButton>\r\n                <DevButton onClick={() => _devSetDay(totalDays)}>End</DevButton>\r\n                <DevButton onClick={() => _devSetDay(Math.min(currentDay + 1, totalDays))}>+1 Day</DevButton>\r\n            </div>\r\n\r\n            {/* Simulation Controls */}\r\n            <div className=\"mb-3\">\r\n                <div className=\"text-xs text-white/50 mb-2\">Simulation Settings</div>\r\n                <div className=\"grid grid-cols-2 gap-2 mb-2\">\r\n                    <div>\r\n                        <label className=\"text-[10px] text-white/40 block mb-1\">Days</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            max=\"365\"\r\n                            value={simDays}\r\n                            onChange={(e) => setSimDays(parseInt(e.target.value) || 1)}\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-xs text-white/90\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-[10px] text-white/40 block mb-1\">Legs/Day</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            max=\"10\"\r\n                            value={simLegs}\r\n                            onChange={(e) => setSimLegs(parseInt(e.target.value) || 1)}\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-xs text-white/90\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Completion Actions */}\r\n            <div className=\"grid grid-cols-2 gap-2 mb-3\">\r\n                <DevButton onClick={completeCurrentDay}>Complete Today</DevButton>\r\n                <DevButton onClick={simulateEntireProgram}>Complete All {simDays} Days</DevButton>\r\n            </div>\r\n\r\n            {/* Thought Catalog Testing */}\r\n            <div className=\"border-t border-white/10 pt-3 mt-3 mb-3\">\r\n                <div className=\"text-xs text-white/50 mb-2\">Thought Catalog Testing</div>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                    <DevButton onClick={populateSampleThoughts}>Add Sample Thoughts</DevButton>\r\n                    <DevButton onClick={testWeightedRandom}>Test Random Selection</DevButton>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Reset curriculum (destructive) */}\r\n            <DestructiveButton\r\n                label=\"Reset Curriculum\"\r\n                armed={armed === 'curriculum'}\r\n                onArm={() => handleDestructive('curriculum', _devReset)}\r\n            />\r\n        </Section>\r\n    );\r\n}\r\n\r\nfunction Section({ title, expanded, onToggle, children, isLight = false }) {\r\n    return (\r\n        <div className=\"border rounded-xl overflow-hidden\" style={{\r\n            background: isLight ? 'rgba(180, 155, 110, 0.08)' : 'rgba(255, 255, 255, 0.03)',\r\n            borderColor: isLight ? 'rgba(180, 155, 110, 0.2)' : 'rgba(255, 255, 255, 0.1)'\r\n        }}>\r\n            <button\r\n                onClick={onToggle}\r\n                className=\"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-white/5 transition-colors\"\r\n            >\r\n                <span className=\"text-sm font-medium\" style={{\r\n                    color: isLight ? 'rgba(45, 40, 35, 0.85)' : 'rgba(255, 255, 255, 0.8)'\r\n                }}>{title}</span>\r\n                <span style={{ color: isLight ? 'rgba(60, 50, 40, 0.5)' : 'rgba(255, 255, 255, 0.4)' }}>{expanded ? 'Γû╝' : 'Γû╢'}</span>\r\n            </button>\r\n            {expanded && (\r\n                <div className=\"px-4 pb-4 pt-2 border-t border-white/5\">\r\n                    {children}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction DevButton({ onClick, children }) {\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            className=\"bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg px-3 py-2 text-xs text-white/70 hover:text-white/90 transition-all\"\r\n        >\r\n            {children}\r\n        </button>\r\n    );\r\n}\r\n\r\nfunction DestructiveButton({ label, armed, onArm }) {\r\n    return (\r\n        <button\r\n            onClick={onArm}\r\n            className={`w-full rounded-lg px-3 py-2 text-xs font-medium transition-all ${armed\r\n                ? 'bg-red-500/30 border-2 border-red-500 text-red-300 animate-pulse'\r\n                : 'bg-red-500/10 border border-red-500/30 text-red-400/70 hover:bg-red-500/20'\r\n                }`}\r\n        >\r\n            {armed ? `ΓÜá∩╕Å CONFIRM: ${label}?` : label}\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default DevPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\DishonorBadge.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'totalPractices' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"totalPractices"},"fix":{"range":[414,472],"text":""},"desc":"Remove unused variable 'totalPractices'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/DishonorBadge.jsx\r\n// \"The Unwitnessed Path\" - Shows when honor ratio exceeds 50%\r\n// This is a mirror, not a punishment\r\n\r\nimport React from 'react';\r\nimport { useProgressStore } from '../state/progressStore.js';\r\n\r\nexport function DishonorBadge({ showAlways = false }) {\r\n    const { getHonorStatus, sessions, honorLogs } = useProgressStore();\r\n    const honorStatus = getHonorStatus();\r\n\r\n    const totalPractices = sessions.length + honorLogs.length;\r\n    const { ratio, hasDishonorBadge } = honorStatus;\r\n\r\n    // Only show if: enough data (ΓëÑ10 practices) AND ratio > 50%\r\n    // OR if showAlways is true (for settings/debug)\r\n    if (!showAlways && !hasDishonorBadge) {\r\n        return null;\r\n    }\r\n\r\n    // Calculate percentage for display\r\n    const honorPercent = Math.round(ratio * 100);\r\n\r\n    return (\r\n        <div\r\n            className=\"rounded-xl p-4 relative overflow-hidden\"\r\n            style={{\r\n                background: 'linear-gradient(135deg, rgba(120,53,15,0.15) 0%, rgba(146,64,14,0.08) 100%)',\r\n                border: '1px solid rgba(217,119,6,0.25)'\r\n            }}\r\n        >\r\n            {/* Subtle pattern overlay */}\r\n            <div\r\n                className=\"absolute inset-0 opacity-5 pointer-events-none\"\r\n                style={{\r\n                    backgroundImage: `repeating-linear-gradient(\r\n            45deg,\r\n            transparent,\r\n            transparent 10px,\r\n            rgba(217,119,6,0.3) 10px,\r\n            rgba(217,119,6,0.3) 11px\r\n          )`\r\n                }}\r\n            />\r\n\r\n            <div className=\"relative flex items-start gap-3\">\r\n                {/* Icon */}\r\n                <div\r\n                    className=\"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\"\r\n                    style={{\r\n                        background: 'rgba(217,119,6,0.15)',\r\n                        border: '1px solid rgba(217,119,6,0.3)'\r\n                    }}\r\n                >\r\n                    <span className=\"text-lg opacity-80\">≡ƒæü∩╕ÅΓÇì≡ƒù¿∩╕Å</span>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                        <h3\r\n                            className=\"text-sm font-semibold\"\r\n                            style={{\r\n                                color: '#d97706',\r\n                                fontFamily: 'var(--font-display)',\r\n                                letterSpacing: 'var(--tracking-mythic)'\r\n                            }}\r\n                        >\r\n                            The Unwitnessed Path\r\n                        </h3>\r\n                    </div>\r\n\r\n                    <p className=\"text-[10px] text-[rgba(253,251,245,0.55)] leading-relaxed mb-2\">\r\n                        {honorPercent}% of your practice is self-reported.\r\n                        This badge reflects your current balance, not judgment.\r\n                    </p>\r\n\r\n                    {/* Progress bar showing ratio */}\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div\r\n                            className=\"flex-1 h-1.5 rounded-full overflow-hidden\"\r\n                            style={{ background: 'rgba(253,251,245,0.1)' }}\r\n                        >\r\n                            <div\r\n                                className=\"h-full rounded-full transition-all duration-500\"\r\n                                style={{\r\n                                    width: `${honorPercent}%`,\r\n                                    background: 'linear-gradient(90deg, #d97706 0%, #92400e 100%)'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <span className=\"text-[9px] text-[rgba(217,119,6,0.8)] font-medium\">\r\n                            {honorPercent}%\r\n                        </span>\r\n                    </div>\r\n\r\n                    {/* Breakdown */}\r\n                    <div className=\"mt-2 flex gap-4 text-[9px] text-[rgba(253,251,245,0.4)]\">\r\n                        <span>≡ƒô▒ In-app: {sessions.length}</span>\r\n                        <span>≡ƒÖÅ Honor: {honorLogs.length}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Wisdom quote */}\r\n            <div\r\n                className=\"mt-3 pt-3 border-t border-[rgba(253,251,245,0.08)] text-[9px] italic text-[rgba(253,251,245,0.4)] text-center\"\r\n                style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.05em' }}\r\n            >\r\n                \"The path walked in silence still leads somewhere.\"\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Compact version for inline display\r\n */\r\nexport function DishonorBadgeCompact() {\r\n    const { getHonorStatus } = useProgressStore();\r\n    const { hasDishonorBadge, ratio } = getHonorStatus();\r\n\r\n    if (!hasDishonorBadge) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"inline-flex items-center gap-1.5 px-2 py-1 rounded-full text-[9px]\"\r\n            style={{\r\n                background: 'rgba(217,119,6,0.15)',\r\n                border: '1px solid rgba(217,119,6,0.25)',\r\n                color: '#d97706'\r\n            }}\r\n            title={`${Math.round(ratio * 100)}% of practice is self-reported`}\r\n        >\r\n            <span>≡ƒæü∩╕ÅΓÇì≡ƒù¿∩╕Å</span>\r\n            <span>Unwitnessed</span>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\DisplayModeToggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\EnsoStroke.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  116 |     useEffect(() => {\n  117 |         if (!isActive) {\n> 118 |             setDrawProgress(0);\n      |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  119 |             return;\n  120 |         }\n  121 |","line":118,"column":13,"nodeType":null,"endLine":118,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/EnsoStroke.jsx\r\n// Generates a proper brush-stroke enso with variable width and drawing animation\r\n\r\nimport React, { useMemo, useState, useEffect } from 'react';\r\n\r\nfunction generateEnsoPath(centerX, centerY, radius, segments = 80) {\r\n    const points = [];\r\n    const startAngle = -Math.PI * 0.1;  // Start just before top\r\n    const endAngle = Math.PI * 1.75;     // End with ~30┬░ gap\r\n\r\n    for (let i = 0; i <= segments; i++) {\r\n        const t = i / segments;\r\n        const angle = startAngle + (endAngle - startAngle) * t;\r\n\r\n        // Add subtle wobble for organic feel\r\n        const wobble = Math.sin(angle * 3) * 1.5 + Math.sin(angle * 7) * 0.8;\r\n        const r = radius + wobble;\r\n\r\n        points.push({\r\n            x: centerX + Math.cos(angle) * r,\r\n            y: centerY + Math.sin(angle) * r,\r\n            angle: angle,\r\n            t: t  // progress along stroke (0 to 1)\r\n        });\r\n    }\r\n\r\n    return points;\r\n}\r\n\r\nfunction getStrokeWidth(t) {\r\n    // t = 0 at start, t = 1 at end\r\n\r\n    if (t < 0.1) {\r\n        // Start: medium, quickly thickening\r\n        return 5 + (t / 0.1) * 7;  // 5px ΓåÆ 12px\r\n    } else if (t < 0.3) {\r\n        // Early curve: thick with variation\r\n        return 12 + Math.sin((t - 0.1) / 0.2 * Math.PI) * 3;  // 12px ΓåÆ 15px ΓåÆ 12px\r\n    } else if (t < 0.7) {\r\n        // Middle: consistently thick with slight variation\r\n        return 11 + Math.sin(t * Math.PI * 3) * 2;  // 9-13px\r\n    } else if (t < 0.9) {\r\n        // Releasing: tapering\r\n        const release = (t - 0.7) / 0.2;\r\n        return 11 * (1 - release * 0.65);  // 11px ΓåÆ 3.85px\r\n    } else {\r\n        // End: thin trail\r\n        const trail = (t - 0.9) / 0.1;\r\n        return 3.85 * (1 - trail * 0.9);  // 3.85px ΓåÆ 0.385px\r\n    }\r\n}\r\n\r\nfunction generateEnsoShape(centerPath) {\r\n    const outerEdge = [];\r\n    const innerEdge = [];\r\n\r\n    for (let i = 0; i < centerPath.length; i++) {\r\n        const point = centerPath[i];\r\n        const width = getStrokeWidth(point.t);\r\n\r\n        // Calculate normal (perpendicular to path direction)\r\n        const prev = centerPath[Math.max(0, i - 1)];\r\n        const next = centerPath[Math.min(centerPath.length - 1, i + 1)];\r\n\r\n        const dx = next.x - prev.x;\r\n        const dy = next.y - prev.y;\r\n        const len = Math.sqrt(dx * dx + dy * dy);\r\n\r\n        // Normal vector (perpendicular)\r\n        const nx = -dy / len;\r\n        const ny = dx / len;\r\n\r\n        // Add edge wobble for brush texture (deterministic based on position)\r\n        const edgeWobble = Math.sin(point.angle * 11) * 0.8 + Math.sin(point.angle * 23) * 0.4;\r\n\r\n        outerEdge.push({\r\n            x: point.x + nx * (width / 2 + edgeWobble),\r\n            y: point.y + ny * (width / 2 + edgeWobble)\r\n        });\r\n\r\n        innerEdge.push({\r\n            x: point.x - nx * (width / 2 + edgeWobble * 0.7),\r\n            y: point.y - ny * (width / 2 + edgeWobble * 0.7)\r\n        });\r\n    }\r\n\r\n    return { outerEdge, innerEdge };\r\n}\r\n\r\nfunction buildEnsoSVGPath(outerEdge, innerEdge) {\r\n    let d = `M ${outerEdge[0].x} ${outerEdge[0].y}`;\r\n\r\n    // Outer edge (forward) - use smooth curves\r\n    for (let i = 1; i < outerEdge.length; i++) {\r\n        d += ` L ${outerEdge[i].x} ${outerEdge[i].y}`;\r\n    }\r\n\r\n    // Connect to inner edge at the end\r\n    const lastInner = innerEdge[innerEdge.length - 1];\r\n    d += ` L ${lastInner.x} ${lastInner.y}`;\r\n\r\n    // Inner edge (backward)\r\n    for (let i = innerEdge.length - 2; i >= 0; i--) {\r\n        d += ` L ${innerEdge[i].x} ${innerEdge[i].y}`;\r\n    }\r\n\r\n    d += ' Z'; // Close path\r\n\r\n    return d;\r\n}\r\n\r\nexport function EnsoStroke({ centerX = 200, centerY = 200, radius = 140, accuracy = 'good', isActive = true }) {\r\n    const [drawProgress, setDrawProgress] = useState(0);\r\n\r\n    // Animate drawing from 0 to 1\r\n    useEffect(() => {\r\n        if (!isActive) {\r\n            setDrawProgress(0);\r\n            return;\r\n        }\r\n\r\n        const duration = accuracy === 'perfect' ? 400 : accuracy === 'good' ? 400 : 300;\r\n        const startTime = Date.now();\r\n\r\n        const animate = () => {\r\n            const elapsed = Date.now() - startTime;\r\n            const progress = Math.min(elapsed / duration, 1);\r\n\r\n            // Ease out cubic\r\n            const eased = 1 - Math.pow(1 - progress, 3);\r\n            setDrawProgress(eased);\r\n\r\n            if (progress < 1) {\r\n                requestAnimationFrame(animate);\r\n            }\r\n        };\r\n\r\n        requestAnimationFrame(animate);\r\n    }, [isActive, accuracy]);\r\n\r\n    const ensoPath = useMemo(() => {\r\n        const centerPath = generateEnsoPath(centerX, centerY, radius);\r\n        const { outerEdge, innerEdge } = generateEnsoShape(centerPath);\r\n        return buildEnsoSVGPath(outerEdge, innerEdge);\r\n    }, [centerX, centerY, radius]);\r\n\r\n    // Create clip path that reveals along the arc\r\n    const clipPath = useMemo(() => {\r\n        const startAngle = -Math.PI * 0.1;\r\n        const totalAngle = Math.PI * 1.85; // Full enso arc\r\n        const currentAngle = startAngle + (totalAngle * drawProgress);\r\n\r\n        // Create a pie slice that reveals the enso\r\n        const outerRadius = radius * 2;\r\n        const x1 = centerX + Math.cos(startAngle) * outerRadius;\r\n        const y1 = centerY + Math.sin(startAngle) * outerRadius;\r\n        const x2 = centerX + Math.cos(currentAngle) * outerRadius;\r\n        const y2 = centerY + Math.sin(currentAngle) * outerRadius;\r\n\r\n        const largeArc = (currentAngle - startAngle) > Math.PI ? 1 : 0;\r\n\r\n        return `M ${centerX} ${centerY} L ${x1} ${y1} A ${outerRadius} ${outerRadius} 0 ${largeArc} 1 ${x2} ${y2} Z`;\r\n    }, [centerX, centerY, radius, drawProgress]);\r\n\r\n    // Gradient coordinates along the stroke\r\n    const gradientStart = { x: centerX, y: centerY - radius };\r\n    const gradientEnd = { x: centerX + radius * 0.7, y: centerY + radius * 0.7 };\r\n\r\n    return (\r\n        <svg width=\"128\" height=\"128\" viewBox=\"0 0 128 128\" style={{ overflow: 'visible' }}>\r\n            <defs>\r\n                <clipPath id=\"ensoRevealClip\">\r\n                    <path d={clipPath} />\r\n                </clipPath>\r\n\r\n                <linearGradient\r\n                    id=\"ensoGradient\"\r\n                    gradientUnits=\"userSpaceOnUse\"\r\n                    x1={gradientStart.x}\r\n                    y1={gradientStart.y}\r\n                    x2={gradientEnd.x}\r\n                    y2={gradientEnd.y}\r\n                >\r\n                    <stop offset=\"0%\" stopColor=\"#d4a847\" stopOpacity=\"0.72\" />\r\n                    <stop offset=\"30%\" stopColor=\"#fcd34d\" stopOpacity=\"0.81\" />\r\n                    <stop offset=\"70%\" stopColor=\"#fcd34d\" stopOpacity=\"0.78\" />\r\n                    <stop offset=\"95%\" stopColor=\"#b8942d\" stopOpacity=\"0.42\" />\r\n                    <stop offset=\"100%\" stopColor=\"#b8942d\" stopOpacity=\"0.08\" />\r\n                </linearGradient>\r\n\r\n                <filter id=\"enso3D\">\r\n                    {/* Inner highlight for 3D effect */}\r\n                    <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"2\" result=\"innerBlur\" />\r\n                    <feOffset in=\"innerBlur\" dx=\"-1\" dy=\"-1\" result=\"innerOffset\" />\r\n                    <feFlood floodColor=\"#fffef0\" floodOpacity=\"0.3\" result=\"innerColor\" />\r\n                    <feComposite in=\"innerColor\" in2=\"innerOffset\" operator=\"in\" result=\"innerHighlight\" />\r\n\r\n                    {/* Outer glow for depth */}\r\n                    <feGaussianBlur in=\"SourceAlpha\" stdDeviation={accuracy === 'perfect' ? '6' : accuracy === 'good' ? '4' : '3'} result=\"outerBlur\" />\r\n                    <feOffset in=\"outerBlur\" dx=\"1\" dy=\"1\" result=\"outerOffset\" />\r\n                    <feFlood floodColor=\"#d4a847\" floodOpacity=\"0.4\" result=\"outerColor\" />\r\n                    <feComposite in=\"outerColor\" in2=\"outerOffset\" operator=\"in\" result=\"outerGlow\" />\r\n\r\n                    <feMerge>\r\n                        <feMergeNode in=\"outerGlow\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                        <feMergeNode in=\"innerHighlight\" />\r\n                    </feMerge>\r\n                </filter>\r\n            </defs>\r\n\r\n            <g clipPath=\"url(#ensoRevealClip)\">\r\n                <path\r\n                    d={ensoPath}\r\n                    fill=\"url(#ensoGradient)\"\r\n                    filter=\"url(#enso3D)\"\r\n                />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ErrorBoundary.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":13,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[405,410],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/ErrorBoundary.jsx\r\n// Phase 5: Catch and display errors gracefully\r\n\r\nimport React from 'react';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\n\r\nexport class ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null, errorInfo: null };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        console.error('Error caught by boundary:', error, errorInfo);\r\n        this.setState({ error, errorInfo });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <ErrorDisplay error={this.state.error} errorInfo={this.state.errorInfo} onReset={() => this.setState({ hasError: false, error: null, errorInfo: null })} />;\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nfunction ErrorDisplay({ error, errorInfo, onReset }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const bgColor = isLight ? 'rgba(245, 240, 230, 0.98)' : 'rgba(10, 15, 25, 0.98)';\r\n    const textColor = isLight ? 'rgba(35, 20, 10, 0.95)' : 'rgba(253, 251, 245, 0.95)';\r\n    const borderColor = isLight ? 'rgba(180, 120, 40, 0.15)' : 'rgba(255, 255, 255, 0.1)';\r\n\r\n    return (\r\n        <div style={{ padding: '40px 20px', backgroundColor: bgColor, color: textColor, minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            <div style={{ maxWidth: '600px', border: `1px solid ${borderColor}`, borderRadius: '12px', padding: '40px', backgroundColor: isLight ? 'rgba(255,255,255,0.3)' : 'rgba(0,0,0,0.2)' }}>\r\n                <h1 style={{ margin: '0 0 16px 0', fontSize: '24px', fontWeight: 'bold', color: '#ef4444' }}>ΓÜá∩╕Å Something went wrong</h1>\r\n                <p style={{ margin: '0 0 20px 0', fontSize: '14px', opacity: 0.8, lineHeight: '1.6' }}>An unexpected error occurred. The error has been logged and our team will investigate.</p>\r\n                {error && (\r\n                    <details style={{ marginBottom: '20px', padding: '12px', backgroundColor: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)', borderRadius: '6px', border: `1px solid ${borderColor}`, cursor: 'pointer' }}>\r\n                        <summary style={{ fontWeight: '600', fontSize: '12px', userSelect: 'none' }}>Error details</summary>\r\n                        <pre style={{ margin: '12px 0 0 0', fontSize: '11px', overflow: 'auto', maxHeight: '200px', opacity: 0.7, whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>{error.toString()}{errorInfo?.componentStack}</pre>\r\n                    </details>\r\n                )}\r\n                <button onClick={onReset} style={{ padding: '12px 24px', backgroundColor: '#3b82f6', border: 'none', borderRadius: '6px', color: '#fff', cursor: 'pointer', fontSize: '13px', fontWeight: '600' }}>Try Again</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ErrorBoundary;","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ExportArchiveButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ExportDataButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\FlowingWave.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'height' is assigned a value but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"height"},"fix":{"range":[567,580],"text":""},"desc":"Remove unused variable 'height'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/FlowingWave.jsx\r\n// Animated SVG wave component for decorative flowing line effects\r\n\r\nimport React from 'react';\r\n\r\n/**\r\n * FlowingWave - Animated SVG wave decoration\r\n * Creates smooth, flowing curves that animate horizontally\r\n * \r\n * @param {number} height - Height of the wave container (default: 100)\r\n * @param {string} color - Wave stroke color (default: uses CSS variable)\r\n * @param {number} opacity - Wave opacity (default: 0.3)\r\n * @param {boolean} animate - Whether to animate the wave (default: true)\r\n */\r\nfunction FlowingWave({\r\n    height = 100,\r\n    color = 'var(--accent-color)',\r\n    opacity = 0.3,\r\n    animate = true\r\n}) {\r\n    return (\r\n        <div\r\n            className=\"absolute inset-0 pointer-events-none overflow-hidden\"\r\n            style={{ opacity }}\r\n        >\r\n            <svg\r\n                viewBox=\"0 0 1200 200\"\r\n                preserveAspectRatio=\"none\"\r\n                className=\"absolute w-[200%] h-full\"\r\n                style={{\r\n                    animation: animate ? 'waveFlow 20s ease-in-out infinite' : 'none',\r\n                    left: '-50%',\r\n                }}\r\n            >\r\n                <defs>\r\n                    {/* Gradient for luminous glow effect */}\r\n                    <linearGradient id=\"waveGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                        <stop offset=\"0%\" stopColor={color} stopOpacity=\"0\" />\r\n                        <stop offset=\"20%\" stopColor={color} stopOpacity=\"0.8\" />\r\n                        <stop offset=\"50%\" stopColor=\"rgba(255, 255, 255, 0.9)\" />\r\n                        <stop offset=\"80%\" stopColor={color} stopOpacity=\"0.8\" />\r\n                        <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                    </linearGradient>\r\n\r\n                    {/* Glow filter */}\r\n                    <filter id=\"waveGlow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                        <feGaussianBlur stdDeviation=\"3\" result=\"blur\" />\r\n                        <feMerge>\r\n                            <feMergeNode in=\"blur\" />\r\n                            <feMergeNode in=\"SourceGraphic\" />\r\n                        </feMerge>\r\n                    </filter>\r\n                </defs>\r\n\r\n                {/* Primary wave - smooth flowing curve */}\r\n                <path\r\n                    d=\"M0,100 C150,60 300,140 450,100 C600,60 750,140 900,100 C1050,60 1200,140 1200,100\"\r\n                    fill=\"none\"\r\n                    stroke=\"url(#waveGradient)\"\r\n                    strokeWidth=\"2\"\r\n                    filter=\"url(#waveGlow)\"\r\n                    style={{\r\n                        opacity: 0.8,\r\n                    }}\r\n                />\r\n\r\n                {/* Secondary wave - offset for depth */}\r\n                <path\r\n                    d=\"M0,120 C200,80 400,160 600,120 C800,80 1000,160 1200,120\"\r\n                    fill=\"none\"\r\n                    stroke=\"url(#waveGradient)\"\r\n                    strokeWidth=\"1.5\"\r\n                    filter=\"url(#waveGlow)\"\r\n                    style={{\r\n                        opacity: 0.5,\r\n                    }}\r\n                />\r\n\r\n                {/* Tertiary wave - subtle background layer */}\r\n                <path\r\n                    d=\"M0,80 C250,120 500,40 750,80 C1000,120 1200,40 1200,80\"\r\n                    fill=\"none\"\r\n                    stroke=\"url(#waveGradient)\"\r\n                    strokeWidth=\"1\"\r\n                    filter=\"url(#waveGlow)\"\r\n                    style={{\r\n                        opacity: 0.3,\r\n                    }}\r\n                />\r\n            </svg>\r\n\r\n            {/* CSS animation keyframes injected via style tag */}\r\n            <style>{`\r\n        @keyframes waveFlow {\r\n          0%, 100% {\r\n            transform: translateX(0);\r\n          }\r\n          50% {\r\n            transform: translateX(25%);\r\n          }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport { FlowingWave };\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\FoundationCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\FourModesHome.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[239,246],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/FourModesHome.jsx\r\n// The Transmutation Chain - Horizontal progression: Mirror ΓåÆ Prism ΓåÆ Wave ΓåÆ Sword\r\n// State of Matter metaphor: Solid ΓåÆ Refraction ΓåÆ Liquid ΓåÆ Fire\r\n\r\nimport React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { FOUR_MODES } from '../data/fourModes.js';\r\nimport { useChainStore } from '../state/chainStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\n// Image filename mapping using existing mode images\r\nconst MODE_IMAGE_MAP = {\r\n    mirror: 'mode-mirror.png',\r\n    prism: 'mode-prism.png',\r\n    wave: 'mode-resonator.png',\r\n    sword: 'mode-sword.png',\r\n};\r\n\r\n// State metaphor labels\r\nconst STATE_METAPHOR = {\r\n    mirror: { state: 'Solid', essence: 'Facts' },\r\n    prism: { state: 'Refraction', essence: 'Story Breaking' },\r\n    wave: { state: 'Liquid', essence: 'Feeling' },\r\n    sword: { state: 'Fire', essence: 'Action' },\r\n};\r\n\r\n// Chain Node - Compact icon with hover expansion\r\nfunction ChainNode({ mode, onEnter, isLocked, isComplete, isActive, onHover, isLight }) {\r\n    const metaphor = STATE_METAPHOR[mode.id];\r\n\r\n    return (\r\n        <motion.button\r\n            className=\"relative flex flex-col items-center group\"\r\n            onClick={() => !isLocked && onEnter(mode.id)}\r\n            onMouseEnter={() => onHover(mode.id)}\r\n            onMouseLeave={() => onHover(null)}\r\n            disabled={isLocked}\r\n            whileHover={!isLocked ? { scale: 1.08 } : {}}\r\n            whileTap={!isLocked ? { scale: 0.95 } : {}}\r\n            style={{ cursor: isLocked ? 'not-allowed' : 'pointer' }}\r\n        >\r\n            {/* Icon Container */}\r\n            <motion.div\r\n                className=\"relative w-16 h-16 rounded-xl overflow-hidden\"\r\n                animate={{\r\n                    opacity: isLocked ? 0.4 : isActive ? 1 : 0.85,\r\n                    scale: isActive ? 1.1 : 1,\r\n                }}\r\n                style={{\r\n                    border: `2px solid ${isComplete\r\n                        ? (isLight ? 'rgba(180, 140, 90, 0.8)' : 'var(--accent-color)')\r\n                        : isLocked\r\n                            ? (isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.1)')\r\n                            : (isLight ? 'rgba(180, 140, 90, 0.4)' : 'rgba(255,220,120,0.3)')}`,\r\n                    boxShadow: isActive\r\n                        ? (isLight\r\n                            ? '0 10px 25px rgba(180, 140, 90, 0.2), 0 4px 12px rgba(0,0,0,0.1)'\r\n                            : '0 0 25px rgba(255,220,120,0.4), 0 8px 24px rgba(0,0,0,0.5)')\r\n                        : '0 4px 16px rgba(0,0,0,0.3)',\r\n                }}\r\n            >\r\n                {/* Mode image */}\r\n                <img\r\n                    src={`${import.meta.env.BASE_URL}modes/${MODE_IMAGE_MAP[mode.id]}`}\r\n                    alt={mode.name}\r\n                    className=\"absolute inset-0 w-full h-full object-cover\"\r\n                    style={{\r\n                        filter: isLocked ? 'grayscale(0.7) brightness(0.5)' : 'none',\r\n                    }}\r\n                />\r\n\r\n                {/* Complete overlay */}\r\n                {isComplete && (\r\n                    <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center\">\r\n                        <span className=\"text-xl text-white\">Γ£ô</span>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Lock overlay */}\r\n                {isLocked && (\r\n                    <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center\">\r\n                        <span className=\"text-sm opacity-60 text-white\">≡ƒöÆ</span>\r\n                    </div>\r\n                )}\r\n            </motion.div>\r\n\r\n            {/* Mode name - always visible */}\r\n            <motion.span\r\n                className=\"mt-3 text-[10px] uppercase tracking-[0.2em] font-bold\"\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    color: isActive\r\n                        ? (isLight ? 'rgba(180, 120, 40, 1)' : 'var(--accent-color)')\r\n                        : isLocked\r\n                            ? (isLight ? 'rgba(0,0,0,0.25)' : 'rgba(255,255,255,0.3)')\r\n                            : (isLight ? 'rgba(100, 80, 60, 0.7)' : 'rgba(255,255,255,0.7)'),\r\n                }}\r\n                animate={{ y: isActive ? -2 : 0 }}\r\n            >\r\n                {mode.name}\r\n            </motion.span>\r\n\r\n            {/* State metaphor - shows on hover */}\r\n            <AnimatePresence>\r\n                {isActive && (\r\n                    <motion.span\r\n                        initial={{ opacity: 0, y: -5 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -5 }}\r\n                        className=\"text-[9px] italic mt-0.5\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            color: isLight ? 'rgba(160, 110, 50, 0.7)' : 'rgba(255,220,120,0.6)',\r\n                            letterSpacing: '0.02em',\r\n                            fontWeight: 600\r\n                        }}\r\n                    >\r\n                        {metaphor.state} ┬╖ {metaphor.essence}\r\n                    </motion.span>\r\n                )}\r\n            </AnimatePresence>\r\n        </motion.button>\r\n    );\r\n}\r\n\r\n// Connecting Thread between nodes\r\nfunction ChainThread({ isComplete, isNext, isLight }) {\r\n    return (\r\n        <div className=\"flex-1 flex items-center justify-center px-1 h-16\">\r\n            {/* Thread line */}\r\n            <motion.div\r\n                className=\"w-full h-[1px] relative\"\r\n                style={{\r\n                    background: isComplete\r\n                        ? (isLight ? 'linear-gradient(90deg, #B48C5A, #DFC6A8)' : 'linear-gradient(90deg, var(--accent-color), var(--accent-70))')\r\n                        : (isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.1)'),\r\n                    boxShadow: isComplete && !isLight ? '0 0 8px var(--accent-40)' : 'none',\r\n                }}\r\n            >\r\n                {/* Glow for next accessible */}\r\n                {isNext && !isComplete && (\r\n                    <motion.div\r\n                        className=\"absolute inset-0\"\r\n                        animate={{\r\n                            opacity: [0.3, 0.7, 0.3],\r\n                        }}\r\n                        transition={{\r\n                            duration: 2,\r\n                            repeat: Infinity,\r\n                        }}\r\n                        style={{\r\n                            background: isLight\r\n                                ? 'linear-gradient(90deg, transparent, rgba(180, 140, 90, 0.3), transparent)'\r\n                                : 'linear-gradient(90deg, transparent, rgba(255,220,120,0.4), transparent)',\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* Arrow indicator */}\r\n                <div\r\n                    className=\"absolute right-0 top-1/2 -translate-y-1/2 text-[8px]\"\r\n                    style={{ color: isComplete ? (isLight ? '#B48C5A' : 'var(--accent-color)') : (isLight ? 'rgba(0,0,0,0.2)' : 'rgba(255,255,255,0.3)') }}\r\n                >\r\n                    ΓåÆ\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function FourModesHome({ onSelectMode, onClose }) {\r\n    const { activeChain, isModeAccessible, startNewChain } = useChainStore();\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    const [hoveredMode, setHoveredMode] = useState(null);\r\n\r\n    const handleStartChain = () => {\r\n        startNewChain();\r\n    };\r\n\r\n    const handleEnterMode = (modeId) => {\r\n        // Start chain if none active and entering Mirror\r\n        if (!activeChain && modeId === 'mirror') {\r\n            startNewChain();\r\n        }\r\n        onSelectMode(modeId);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-12 max-w-lg mx-auto py-8\">\r\n            {/* Header */}\r\n            <div className=\"text-center space-y-2\">\r\n                <h2\r\n                    className=\"text-[14px] uppercase tracking-[0.25em] font-bold\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        color: isLight ? 'rgba(180, 120, 40, 1)' : 'var(--accent-color)'\r\n                    }}\r\n                >\r\n                    The Transmutation Chain\r\n                </h2>\r\n                <p\r\n                    className=\"text-[11px] italic font-medium\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-body)',\r\n                        color: isLight ? 'rgba(100, 80, 60, 0.5)' : 'rgba(253,251,245,0.5)',\r\n                        letterSpacing: '0.05em'\r\n                    }}\r\n                >\r\n                    Observation ΓåÆ Separation ΓåÆ Capacity ΓåÆ Commitment\r\n                </p>\r\n            </div>\r\n\r\n            {/* Start New Chain Button (when no active chain) */}\r\n            {!activeChain && (\r\n                <div className=\"flex justify-center\">\r\n                    <motion.button\r\n                        onClick={handleStartChain}\r\n                        className=\"px-8 py-3 rounded-full border transition-all\"\r\n                        whileHover={{ scale: 1.05, boxShadow: isLight ? '0 10px 20px rgba(180, 140, 90, 0.1)' : '0 0 20px rgba(255,220,120,0.2)' }}\r\n                        whileTap={{ scale: 0.95 }}\r\n                        style={{\r\n                            borderColor: isLight ? 'rgba(180, 140, 90, 0.4)' : 'var(--accent-color)',\r\n                            color: isLight ? 'rgba(140, 100, 40, 1)' : 'var(--accent-color)',\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontSize: '11px',\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            fontWeight: 700,\r\n                            background: isLight ? 'rgba(180, 140, 90, 0.05)' : 'rgba(255,220,120,0.05)',\r\n                        }}\r\n                    >\r\n                        BEGIN THE CHAIN\r\n                    </motion.button>\r\n                </div>\r\n            )}\r\n\r\n            {/* The Chain - Horizontal Layout - Focused Centering */}\r\n            <div className=\"flex items-start justify-center gap-0 px-4\">\r\n                {FOUR_MODES.map((mode, idx) => {\r\n                    const isAccessible = isModeAccessible(mode.id);\r\n                    const isComplete = activeChain?.[mode.id]?.locked || activeChain?.[mode.id]?.skipped || activeChain?.[mode.id]?.aborted;\r\n                    const isLocked = activeChain && !isAccessible && !isComplete;\r\n                    const isActive = hoveredMode === mode.id;\r\n\r\n                    // Check if next mode is accessible (for thread glow)\r\n                    const nextMode = FOUR_MODES[idx + 1];\r\n                    const isNextAccessible = nextMode ? isModeAccessible(nextMode.id) : false;\r\n\r\n                    return (\r\n                        <React.Fragment key={mode.id}>\r\n                            <ChainNode\r\n                                mode={mode}\r\n                                onEnter={handleEnterMode}\r\n                                isLocked={isLocked}\r\n                                isComplete={isComplete}\r\n                                isActive={isActive}\r\n                                onHover={setHoveredMode}\r\n                                isLight={isLight}\r\n                            />\r\n\r\n                            {/* Thread between nodes */}\r\n                            {idx < 3 && (\r\n                                <ChainThread\r\n                                    isComplete={isComplete}\r\n                                    isNext={isNextAccessible && !isComplete}\r\n                                    isLight={isLight}\r\n                                />\r\n                            )}\r\n                        </React.Fragment>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Expanded Mode Detail - shows tagline on hover */}\r\n            <div className=\"h-12 flex items-center justify-center\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {hoveredMode && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: 10 }}\r\n                            className=\"text-center px-4\"\r\n                        >\r\n                            <p\r\n                                className=\"text-[12px] italic max-w-sm mx-auto\"\r\n                                style={{\r\n                                    fontFamily: 'var(--font-body)',\r\n                                    color: isLight ? 'rgba(80, 60, 40, 0.7)' : 'rgba(253,251,245,0.7)',\r\n                                    letterSpacing: '0.01em',\r\n                                    fontWeight: 500\r\n                                }}\r\n                            >\r\n                                {FOUR_MODES.find(m => m.id === hoveredMode)?.tagline}\r\n                            </p>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Status & Exit Info */}\r\n            <div className=\"flex flex-col items-center gap-6 pt-4\">\r\n                {/* Chain Status Indicator */}\r\n                {activeChain && (\r\n                    <div className=\"flex justify-center gap-1.5 items-center\">\r\n                        {FOUR_MODES.map((mode, idx) => {\r\n                            const isComplete = activeChain[mode.id]?.locked || activeChain[mode.id]?.skipped || activeChain[mode.id]?.aborted;\r\n                            const isCurrent = isModeAccessible(mode.id) && !isComplete;\r\n                            return (\r\n                                <React.Fragment key={mode.id}>\r\n                                    <motion.div\r\n                                        className=\"w-1.5 h-1.5 rounded-full\"\r\n                                        animate={{\r\n                                            scale: isCurrent ? [1, 1.3, 1] : 1,\r\n                                        }}\r\n                                        transition={{\r\n                                            duration: 1.5,\r\n                                            repeat: isCurrent ? Infinity : 0,\r\n                                        }}\r\n                                        style={{\r\n                                            background: isComplete\r\n                                                ? (isLight ? '#B48C5A' : 'var(--accent-color)')\r\n                                                : isCurrent\r\n                                                    ? (isLight ? 'rgba(180, 120, 40, 0.6)' : 'rgba(255, 220, 120, 0.7)')\r\n                                                    : (isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255, 255, 255, 0.15)'),\r\n                                        }}\r\n                                    />\r\n                                    {idx < 3 && (\r\n                                        <div\r\n                                            className=\"w-4 h-px\"\r\n                                            style={{ background: isComplete ? (isLight ? 'rgba(180, 140, 90, 0.3)' : 'var(--accent-50)') : (isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.1)') }}\r\n                                        />\r\n                                    )}\r\n                                </React.Fragment>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n                {/* Return Button */}\r\n                <div className=\"flex justify-center mt-4\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-6 py-2 rounded-full text-[10px] uppercase tracking-[0.2em] font-bold transition-all\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            color: isLight ? 'rgba(100, 80, 60, 0.4)' : 'rgba(255, 255, 255, 0.4)',\r\n                            border: isLight ? '1px solid rgba(0, 0, 0, 0.05)' : '1px solid rgba(255, 255, 255, 0.1)',\r\n                            background: isLight ? 'rgba(0, 0, 0, 0.02)' : 'rgba(255, 255, 255, 0.02)',\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            e.target.style.color = isLight ? 'rgba(100, 80, 60, 0.8)' : 'rgba(255, 255, 255, 0.8)';\r\n                            e.target.style.borderColor = isLight ? 'rgba(180, 140, 90, 0.3)' : 'rgba(255, 255, 255, 0.2)';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            e.target.style.color = isLight ? 'rgba(100, 80, 60, 0.4)' : 'rgba(255, 255, 255, 0.4)';\r\n                            e.target.style.borderColor = isLight ? 'rgba(0, 0, 0, 0.05)' : 'rgba(255, 255, 255, 0.1)';\r\n                        }}\r\n                    >\r\n                        Return to Sealing\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\GoldCartouche.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'stageColor' is defined but never used.","line":5,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"stageColor"},"fix":{"range":[178,190],"text":""},"desc":"Remove unused variable 'stageColor'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/GoldCartouche.jsx\r\n// Authority Material Component - Polished Gold Seal for State Indicators\r\nimport React from 'react';\r\n\r\nexport function GoldCartouche({ text, stageColor, isLight = false, onStateChange = false }) {\r\n  return (\r\n    <div className=\"gold-cartouche inline-block\">\r\n      <div className={`cartouche-plate ${onStateChange ? 'state-change' : ''}`}>\r\n        {/* Layer 1: Base gold texture (CSS-generated micro grain) */}\r\n        <div className=\"gold-base\" />\r\n\r\n        {/* Layer 2: Specular gradient (controlled lighting) */}\r\n        <div className=\"gold-specular\" />\r\n\r\n        {/* Layer 3: Text content with emboss */}\r\n        <span className=\"cartouche-text\">{text}</span>\r\n      </div>\r\n\r\n      <style>{`\r\n        .gold-cartouche {\r\n          vertical-align: middle;\r\n        }\r\n\r\n        .cartouche-plate {\r\n          position: relative;\r\n          display: inline-block;\r\n          border-radius: 6px;\r\n          padding: 4px 12px 5px;\r\n          overflow: hidden;\r\n          \r\n          /* Deckle edge - subtle irregularity for hand-torn parchment */\r\n          clip-path: polygon(\r\n            1% 2%, 3% 1%, 97% 0%, 99% 2%,\r\n            100% 98%, 98% 99%, 2% 100%, 0% 97%\r\n          );\r\n          \r\n          /* Material selection: Gold for Light, Obsidian for Dark */\r\n          background: ${isLight ? '#D4AF37' : '#1A0F1C'};\r\n          \r\n          /* Layer 3: Edge bevel (metal depth) */\r\n          box-shadow: \r\n            /* Outer shadows (depth below surface) */\r\n            0 2px 4px rgba(0, 0, 0, ${isLight ? '0.25' : '0.6'}),\r\n            0 1px 2px rgba(0, 0, 0, ${isLight ? '0.15' : '0.4'}),\r\n            /* Inner highlight (top rim catch-light) */\r\n            inset 0 1px 0 rgba(255, 255, 255, ${isLight ? '0.5' : '0.1'}),\r\n            /* Inner shadow (bottom bevel) */\r\n            inset 0 -1px 0 rgba(0, 0, 0, ${isLight ? '0.25' : '0.5'});\r\n          \r\n          border: ${isLight ? 'none' : '0.5px solid rgba(255, 255, 255, 0.05)'};\r\n        }\r\n\r\n        /* Layer 1: Base texture */\r\n        .gold-base {\r\n          position: absolute;\r\n          inset: 0;\r\n          background-image: url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='${isLight ? '0.15' : '0.3'}'/%3E%3C/svg%3E\");\r\n          background-size: 128px 128px;\r\n          opacity: ${isLight ? '0.5' : '0.3'};\r\n          mix-blend-mode: ${isLight ? 'multiply' : 'overlay'};\r\n        }\r\n\r\n        /* Layer 2: Specular gradient */\r\n        .gold-specular {\r\n          position: absolute;\r\n          inset: 0;\r\n          background: ${isLight\r\n          ? `linear-gradient(\r\n                135deg,\r\n                rgba(255, 245, 200, 0.6) 0%,\r\n                rgba(212, 175, 55, 0.2) 50%,\r\n                rgba(180, 140, 30, 0.4) 100%\r\n              )`\r\n          : `linear-gradient(\r\n                135deg,\r\n                rgba(167, 139, 250, 0.1) 0%,\r\n                rgba(0, 0, 0, 0) 50%,\r\n                rgba(0, 0, 0, 0.4) 100%\r\n              )`\r\n        };\r\n          mix-blend-mode: overlay;\r\n          pointer-events: none;\r\n        }\r\n\r\n        /* State change shimmer animation */\r\n        .cartouche-plate.state-change .gold-specular {\r\n          animation: goldShimmer 0.6s ease-out;\r\n        }\r\n\r\n        @keyframes goldShimmer {\r\n          0%, 100% { opacity: 1; }\r\n          50% { opacity: ${isLight ? '1.15' : '1.3'}; }\r\n        }\r\n\r\n        /* Typography (embossed/debossed text) */\r\n        .cartouche-text {\r\n          position: relative;\r\n          z-index: 1;\r\n          display: inline-block;\r\n          font-family: var(--font-display);\r\n          font-variant: small-caps;\r\n          font-size: 11px;\r\n          font-weight: 600;\r\n          letter-spacing: 0.14em;\r\n          color: ${isLight ? '#3d2a1a' : 'rgba(253, 251, 245, 0.85)'};\r\n          \r\n          /* Restrained emboss: 1 highlight + 1 shadow */\r\n          text-shadow: \r\n            0 1px 0 rgba(255, 255, 255, ${isLight ? '0.25' : '0.05'}),\r\n            0 -1px 0 rgba(0, 0, 0, ${isLight ? '0.45' : '0.8'});\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\HardwareGuide.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[12,26],"text":""},"desc":"Remove unused variable 'useState'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[51,58],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport function HardwareGuide({ isOpen, onClose }) {\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"fixed inset-0 z-[5000] bg-black/90 backdrop-blur-md flex items-center justify-center p-6\"\r\n            >\r\n                <div className=\"max-w-sm w-full space-y-8\">\r\n                    <div className=\"text-center space-y-2\">\r\n                        <h2 className=\"text-xl font-display tracking-widest text-amber-200 uppercase\">\r\n                            Physical Bind\r\n                        </h2>\r\n                        <p className=\"text-sm text-slate-400 font-serif italic\">\r\n                            Linking the OS to your device's physical essence.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-6\">\r\n                        <GuideSection\r\n                            title=\"iOS (Action Button)\"\r\n                            steps={[\r\n                                \"Open 'Shortcuts' app\",\r\n                                \"Create new shortcut: 'Open URL'\",\r\n                                \"Set URL to your Immanence /trace link\",\r\n                                \"Go to Settings > Action Button > Shortcut\",\r\n                                \"Select your new Trace shortcut\"\r\n                            ]}\r\n                        />\r\n\r\n                        <GuideSection\r\n                            title=\"Android (Side Key)\"\r\n                            steps={[\r\n                                \"Go to Settings > Advanced Features\",\r\n                                \"Select 'Side Key' or 'Double Press'\",\r\n                                \"Set it to 'Open App'\",\r\n                                \"Long-press the Immanence icon on home screen\",\r\n                                \"Drag the 'Trace' shortcut to your home screen\"\r\n                            ]}\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"w-full py-4 mt-8 border border-amber-500/20 text-amber-500/60 uppercase tracking-widest text-xs hover:text-amber-400 transition-colors\"\r\n                    >\r\n                        I understand\r\n                    </button>\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n\r\nfunction GuideSection({ title, steps }) {\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            <h3 className=\"text-xs font-display text-slate-500 tracking-widest uppercase\">{title}</h3>\r\n            <ul className=\"space-y-2\">\r\n                {steps.map((step, i) => (\r\n                    <li key={i} className=\"flex gap-3 text-sm text-slate-300 font-serif\">\r\n                        <span className=\"text-amber-500/40 tabular-nums\">{i + 1}.</span>\r\n                        <span>{step}</span>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\HomeHub.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'plateauMaterial' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"plateauMaterial"},"fix":{"range":[943,959],"text":""},"desc":"Remove unused variable 'plateauMaterial'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'innerGlowStyle' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":19,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":79,"suggestions":[{"messageId":"removeVar","data":{"varName":"innerGlowStyle"},"fix":{"range":[996,1012],"text":""},"desc":"Remove unused variable 'innerGlowStyle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":38,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"progress"},"fix":{"range":[2150,2160],"text":""},"desc":"Remove unused variable 'progress'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'cloudBackground' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":45,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"cloudBackground"},"fix":{"range":[2468,2483],"text":""},"desc":"Remove unused variable 'cloudBackground'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'contentMaxWidth' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":64,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"contentMaxWidth"},"fix":{"range":[3435,3503],"text":""},"desc":"Remove unused variable 'contentMaxWidth'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'totalSessions' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":71,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"totalSessions"},"fix":{"range":[3682,3730],"text":""},"desc":"Remove unused variable 'totalSessions'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'weeklyConsistency' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":72,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"weeklyConsistency"},"fix":{"range":[3734,3797],"text":""},"desc":"Remove unused variable 'weeklyConsistency'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentStreak' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":74,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentStreak"},"fix":{"range":[3854,3895],"text":""},"desc":"Remove unused variable 'currentStreak'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'nextStage' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":77,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"nextStage"},"fix":{"range":[3995,4046],"text":""},"desc":"Remove unused variable 'nextStage'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'accuracyPct' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":103,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"accuracyPct"},"fix":{"range":[4931,4981],"text":""},"desc":"Remove unused variable 'accuracyPct'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'progressPct' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":104,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"progressPct"},"fix":{"range":[4985,5043],"text":""},"desc":"Remove unused variable 'progressPct'."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Improved HomeHub component with stats overview and better visual hierarchy\r\n// BUILD: 2025-12-31T20:46 - Removed constellation completely\r\n\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { AnimatePresence } from \"framer-motion\";\r\nimport { Avatar } from \"./avatar\";\r\nimport { StageTitle } from \"./StageTitle.jsx\";\r\nimport { STAGE_COLORS } from \"../constants/stageColors.js\";\r\nimport { HubCardSwiper } from \"./HubCardSwiper.jsx\";\r\nimport { CompactStatsCard } from \"./CompactStatsCard.jsx\";\r\nimport { ApplicationTrackingCard } from \"./ApplicationTrackingCard.jsx\";\r\nimport { TrajectoryCard } from \"./TrajectoryCard.jsx\";\r\nimport { ExportDataButton } from \"./ExportDataButton.jsx\";\r\nimport { HubStagePanel } from \"./HubStagePanel.jsx\";\r\nimport { HonorLogModal } from \"./HonorLogModal.jsx\";\r\nimport { SessionHistoryView } from \"./SessionHistoryView.jsx\";\r\nimport { SideNavigation } from \"./SideNavigation.jsx\";\r\nimport { plateauMaterial, noiseOverlayStyle, sheenOverlayStyle, innerGlowStyle } from \"../styles/cardMaterial.js\";\r\nimport { useProgressStore } from \"../state/progressStore.js\";\r\nimport { useLunarStore } from \"../state/lunarStore.js\";\r\nimport { STAGES } from \"../state/stageConfig.js\";\r\nimport { useDisplayModeStore } from \"../state/displayModeStore.js\";\r\nimport { calculateGradientAngle, getAvatarCenter, getDynamicGoldGradient } from \"../utils/dynamicLighting.js\";\r\nimport { SimpleModeButton } from \"./SimpleModeButton.jsx\";\r\nimport { DailyPracticeCard } from \"./DailyPracticeCard.jsx\";\r\nimport { CurriculumHub } from \"./CurriculumHub.jsx\";\r\nimport { CurriculumCompletionReport } from \"./CurriculumCompletionReport.jsx\";\r\nimport { useCurriculumStore } from \"../state/curriculumStore.js\";\r\n\r\n// Available paths that match image filenames\r\nconst PATHS = ['Soma', 'Prana', 'Dhyana', 'Drishti', 'Jnana', 'Samyoga'];\r\n\r\n\r\nfunction HomeHub({ onSelectSection, onStageChange, currentStage, previewPath, previewShowCore, previewAttention, onOpenHardwareGuide, isPracticing = false }) {\r\n  // Real data from stores\r\n  const { getStreakInfo, getDomainStats, getWeeklyPattern } = useProgressStore();\r\n  const { getCurrentStage, progress, getDaysUntilNextStage } = useLunarStore();\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const displayMode = useDisplayModeStore(s => s.mode);\r\n  const isLight = colorScheme === 'light';\r\n  const isSanctuary = displayMode === 'sanctuary';\r\n\r\n  // Cloud background test state\r\n  const [cloudBackground, setCloudBackground] = useState('cloudier'); // 'light_clouds', 'cloudier', 'cloudiest', or 'none'\r\n  \r\n  // Curriculum state\r\n  const curriculumActive = useCurriculumStore(s => s.onboardingComplete);\r\n  const isCurriculumComplete = useCurriculumStore(s => s.isCurriculumComplete);\r\n  const [showCurriculumHub, setShowCurriculumHub] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Listen for DevPanel cloud background changes\r\n    const handleCloudChange = (e) => setCloudBackground(e.detail);\r\n    window.addEventListener('dev-cloud-change', handleCloudChange);\r\n    return () => window.removeEventListener('dev-cloud-change', handleCloudChange);\r\n  }, []);\r\n\r\n  // Honor log modal state (moved from TrackingHub)\r\n  const [showHonorModal, setShowHonorModal] = useState(false);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n\r\n  // Dynamic max-width based on display mode: sanctuary=1024px, hearth=580px (narrower for visual balance)\r\n  const contentMaxWidth = isSanctuary ? 'max-w-5xl' : 'max-w-[580px]';\r\n\r\n  const streakInfo = getStreakInfo();\r\n  const breathStats = getDomainStats('breathwork');\r\n  const weeklyPattern = getWeeklyPattern();\r\n\r\n  // Derive stats from real data\r\n  const totalSessions = breathStats.totalSessions;\r\n  const weeklyConsistency = weeklyPattern.filter(Boolean).length;\r\n  const avgAccuracy = breathStats.avgAccuracy || 0;\r\n  const currentStreak = streakInfo.current;\r\n  const daysUntilNext = getDaysUntilNextStage() || 0;\r\n  const lunarStage = getCurrentStage();\r\n  const nextStage = STAGES[lunarStage]?.next || null;\r\n  const progressToNextStage = daysUntilNext > 0\r\n    ? (STAGES[lunarStage]?.duration - daysUntilNext) / STAGES[lunarStage]?.duration\r\n    : 0;\r\n\r\n\r\n  // Format last practiced time\r\n  const formatLastPracticed = (isoDate) => {\r\n    if (!isoDate) return 'Never';\r\n    const now = new Date();\r\n    const then = new Date(isoDate);\r\n    const diffMs = now - then;\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return 'Just now';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    if (diffDays === 1) return 'Yesterday';\r\n    if (diffDays < 7) return `${diffDays}d ago`;\r\n    return then.toLocaleDateString();\r\n  };\r\n\r\n  const lastPracticed = formatLastPracticed(breathStats.lastPracticed);\r\n\r\n  const accuracyPct = Math.round(avgAccuracy * 100);\r\n  const progressPct = Math.round(progressToNextStage * 100);\r\n\r\n  // Listen for DevPanel cloud background changes\r\n  useEffect(() => {\r\n    const handleCloudChange = (e) => setCloudBackground(e.detail);\r\n    window.addEventListener('dev-cloud-change', handleCloudChange);\r\n    return () => window.removeEventListener('dev-cloud-change', handleCloudChange);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full flex flex-col items-center relative overflow-visible\">\r\n      {/* Background is handled by Background.jsx globally */}\r\n\r\n      {/* ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n          AVATAR & HUB INSTRUMENT - Full-Bleed Altar (Cosmic Zone)\r\n          ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ */}\r\n      <div className=\"w-full flex flex-col items-center gap-0 py-1 transition-all duration-500 overflow-visible\">\r\n        <div className=\"relative w-full flex items-center justify-center overflow-visible\">\r\n          {/* Cloud Background - NO LONGER HERE, moved to full-page layer */}\r\n\r\n          {/* Bloom halo - EXPANDED in Sanctuary mode to fill space */}\r\n          <div\r\n            className=\"absolute transition-all duration-500\"\r\n            style={{\r\n              top: '50%',\r\n              left: '50%',\r\n              transform: 'translate(-50%, -50%)',\r\n              width: isSanctuary ? 'min(120%, 900px)' : 'min(100%, 600px)',\r\n              height: isSanctuary ? 'min(120%, 700px)' : 'min(100%, 600px)',\r\n              background: 'radial-gradient(circle, var(--accent-glow) 0%, var(--accent-glow)25 15%, var(--accent-glow)08 40%, transparent 70%)',\r\n              filter: isSanctuary ? 'blur(100px)' : 'blur(80px)',\r\n              opacity: isSanctuary ? 0.2 : 0.15,\r\n              pointerEvents: 'none',\r\n              zIndex: 0,\r\n            }}\r\n          />\r\n\r\n          {/* Diagonal Grounding Shadow - Cast by central instrument (Radial Lighting) */}\r\n          <div\r\n            className=\"absolute pointer-events-none\"\r\n            style={{\r\n              width: '180%',\r\n              height: '40px',\r\n              background: isLight\r\n                ? 'radial-gradient(ellipse at center, rgba(120, 90, 60, 0.15) 0%, transparent 70%)'\r\n                : 'radial-gradient(ellipse at center, rgba(0, 0, 0, 0.2) 0%, transparent 75%)',\r\n              top: '65%',\r\n              left: '55%',\r\n              transform: 'translate(-50%, -50%) rotate(-15deg)',\r\n              filter: isLight ? 'blur(60px)' : 'blur(40px)',\r\n              zIndex: -2,\r\n            }}\r\n          />\r\n\r\n          {/* Avatar with multi-layered shadows for depth */}\r\n          <div\r\n            className=\"relative z-10 transition-all duration-500\"\r\n            style={{\r\n              filter: isLight\r\n                ? `drop-shadow(0 4px 12px ${STAGE_COLORS[currentStage]?.shadow || 'rgba(120, 90, 60, 0.4)'})\r\n                   drop-shadow(0 12px 32px ${STAGE_COLORS[currentStage]?.shadow || 'rgba(120, 90, 60, 0.25)'})\r\n                   drop-shadow(0 20px 60px rgba(0, 0, 0, 0.12))\r\n                   drop-shadow(0 6px 20px ${STAGE_COLORS[currentStage]?.shadowDeep || 'rgba(100, 75, 50, 0.5)'})\r\n                   drop-shadow(0 0 40px ${STAGE_COLORS[currentStage]?.shadow || 'rgba(120, 90, 60, 0.15)'})`\r\n                : `drop-shadow(0 8px 20px ${STAGE_COLORS[currentStage]?.shadowDark || 'rgba(0, 0, 0, 0.7)'})\r\n                   drop-shadow(0 16px 48px ${STAGE_COLORS[currentStage]?.shadowDark || 'rgba(0, 0, 0, 0.6)'})\r\n                   drop-shadow(0 10px 30px ${STAGE_COLORS[currentStage]?.shadowDeep || 'rgba(0, 0, 0, 0.8)'})\r\n                   drop-shadow(0 0 60px ${STAGE_COLORS[currentStage]?.shadowDark || 'rgba(0, 0, 0, 0.4)'})`,\r\n              transform: isSanctuary ? 'scale(1.35)' : 'scale(1)',\r\n            }}\r\n          >\r\n            {/* Avatar without side navigation */}\r\n            <Avatar\r\n              mode=\"hub\"\r\n              onStageChange={onStageChange}\r\n              stage={currentStage}\r\n              path={previewPath}\r\n              showCore={previewShowCore}\r\n              isPracticing={isPracticing}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* STATUS & CONTROL INSTRUMENT - Agency | Continuity (No StageTitle - moved to top) */}\r\n        <HubStagePanel\r\n          stage={currentStage}\r\n          path={previewPath}\r\n          showCore={previewShowCore}\r\n          attention={previewAttention}\r\n          lastPracticed={lastPracticed}\r\n          streakInfo={streakInfo}\r\n          onOpenHardwareGuide={onOpenHardwareGuide}\r\n          onOpenHonorLog={() => setShowHonorModal(true)}\r\n          hideStageTitle={true}\r\n        />\r\n      </div>\r\n\r\n      {/* Honor Log Modal */}\r\n      <HonorLogModal\r\n        isOpen={showHonorModal}\r\n        onClose={() => setShowHonorModal(false)}\r\n      />\r\n\r\n      {/* ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n          CONTENT SECTIONS - Full width, controlled by parent container\r\n          ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ */}\r\n      <div className=\"w-full px-4 flex flex-col items-center gap-1 pb-4\">\r\n\r\n{/* DAILY PRACTICE CARD (Curriculum) */}\r\n{curriculumActive && (\r\n  <div className=\"w-full\">\r\n    <DailyPracticeCard\r\n      onStartPractice={() => onSelectSection('practice')}\r\n      onViewCurriculum={() => setShowCurriculumHub(true)}\r\n      onNavigate={onSelectSection}\r\n    />\r\n  </div>\r\n)}\r\n\r\n        {/* TRACKING HUB - Swipeable Stats Cards */}\r\n        <div className=\"w-full\">\r\n          <HubCardSwiper cards={[\r\n            <CompactStatsCard key=\"breathwork\" domain=\"breathwork\" streakInfo={streakInfo} onOpenArchive={() => setShowHistory(true)} />,\r\n            <TrajectoryCard key=\"trajectory\" onTap={() => console.log('TODO: Open TrajectoryReport')} />,\r\n            <ApplicationTrackingCard key=\"application\" />\r\n          ]} />\r\n        </div>\r\n\r\n\r\n        {/* MODES SELECTION - Container with consistent width */}\r\n\r\n        {/* Session History Overlay */}\r\n        {showHistory && <SessionHistoryView onClose={() => setShowHistory(false)} />}\r\n        \r\n        {/* Curriculum Hub/Report Modal */}\r\n        {showCurriculumHub && (\r\n          isCurriculumComplete() ? (\r\n            // Show completion report if curriculum is done\r\n            <CurriculumCompletionReport\r\n              onDismiss={() => setShowCurriculumHub(false)}\r\n            />\r\n          ) : (\r\n            // Show curriculum hub if still in progress\r\n            <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4\">\r\n              <div className=\"w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-3xl shadow-2xl relative\">\r\n                <button\r\n                  onClick={() => setShowCurriculumHub(false)}\r\n                  className=\"absolute top-4 right-4 z-50 w-8 h-8 flex items-center justify-center rounded-full bg-black/20 hover:bg-black/40 text-white transition-colors\"\r\n                >\r\n                  Γ£ò\r\n                </button>\r\n                <div className=\"overflow-y-auto max-h-[90vh]\">\r\n                  <CurriculumHub onClose={() => setShowCurriculumHub(false)} />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )\r\n        )}\r\n        <div\r\n          className=\"w-full mt-2 transition-all duration-700\"\r\n          style={{\r\n            maxWidth: isSanctuary ? '600px' : '430px',\r\n            margin: '0 auto',\r\n          }}\r\n        >\r\n          <div\r\n            className=\"text-[11px] font-black uppercase tracking-[0.3em] text-center mb-5 opacity-40 transition-colors duration-500\"\r\n            style={{\r\n              color: isLight ? 'var(--light-text-secondary)' : 'var(--text-accent-muted)',\r\n              textShadow: isLight ? 'none' : '0 2px 6px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5)',\r\n            }}\r\n          >\r\n            Explore Modes\r\n          </div>\r\n\r\n          {/* Horizontal Row - Simple circular buttons */}\r\n          <div className=\"flex justify-center items-center gap-6\">\r\n            <SimpleModeButton\r\n              title=\"Practice\"\r\n              onClick={() => onSelectSection(\"practice\")}\r\n              icon=\"practice\"\r\n            />\r\n            <SimpleModeButton\r\n              title=\"Wisdom\"\r\n              onClick={() => onSelectSection(\"wisdom\")}\r\n              gradient=\"linear-gradient(135deg, #B4E6D4 0%, #7FD4B8 100%)\"\r\n              icon=\"wisdom\"\r\n            />\r\n            <SimpleModeButton\r\n              title=\"Application\"\r\n              onClick={() => onSelectSection(\"application\")}\r\n              gradient=\"linear-gradient(135deg, #FFD97D 0%, #FFB85C 100%)\"\r\n              icon=\"application\"\r\n            />\r\n            <SimpleModeButton\r\n              title=\"Navigation\"\r\n              onClick={() => onSelectSection(\"navigation\")}\r\n              gradient=\"linear-gradient(135deg, #E5C4FF 0%, #B88FD9 100%)\"\r\n              icon=\"navigation\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </div>\r\n      {/* Session History Overlay - Placed at root for visibility */}\r\n      {showHistory && <SessionHistoryView onClose={() => setShowHistory(false)} />}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Arc Mode Button - Circular button with AAA-quality layered shadows for bioluminescent glow\r\nfunction ArcModeButton({ title, onClick, image, isLight }) {\r\n  const buttonSize = 80; // Diameter in px\r\n\r\n  // AAA-quality layered glow (GPU-accelerated)\r\n  const getGlowShadow = (isHovered = false) => {\r\n    const baseColor = isLight ? 'var(--accent-r), var(--accent-g), var(--accent-b)' : 'var(--accent-r), var(--accent-g), var(--accent-b)';\r\n    const intensity = isHovered ? 1.5 : 1;\r\n\r\n    return `\r\n      0 0 ${2 * intensity}px rgba(${baseColor}, ${0.8 * intensity}),\r\n      0 0 ${15 * intensity}px rgba(${baseColor}, ${0.4 * intensity}),\r\n      0 0 ${45 * intensity}px rgba(${baseColor}, ${0.1 * intensity})\r\n      `;\r\n  };\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      className=\"group relative overflow-hidden\"\r\n      style={{\r\n        width: `${buttonSize}px`,\r\n        height: `${buttonSize}px`,\r\n        borderRadius: '50%',\r\n        cursor: 'pointer',\r\n        transition: 'all 300ms cubic-bezier(0.4, 0, 0.2, 1)',\r\n        border: isLight\r\n          ? '2px solid var(--light-accent-muted)'\r\n          : '2px solid rgba(255, 255, 255, 0.2)',\r\n        background: isLight\r\n          ? 'linear-gradient(135deg, rgba(255, 250, 235, 0.95) 0%, rgba(253, 248, 230, 0.9) 100%)'\r\n          : 'linear-gradient(135deg, rgba(26, 15, 28, 0.92) 0%, rgba(21, 11, 22, 0.95) 100%)',\r\n        boxShadow: getGlowShadow(false),\r\n        padding: 0,\r\n      }}\r\n      onMouseEnter={(e) => {\r\n        e.currentTarget.style.transform = 'scale(1.1)';\r\n        e.currentTarget.style.boxShadow = getGlowShadow(true);\r\n        e.currentTarget.style.borderColor = isLight\r\n          ? 'var(--light-accent)'\r\n          : 'var(--accent-60)';\r\n      }}\r\n      onMouseLeave={(e) => {\r\n        e.currentTarget.style.transform = 'scale(1)';\r\n        e.currentTarget.style.boxShadow = getGlowShadow(false);\r\n        e.currentTarget.style.borderColor = isLight\r\n          ? 'var(--light-accent-muted)'\r\n          : 'rgba(255, 255, 255, 0.2)';\r\n      }}\r\n      aria-label={title}\r\n    >\r\n      {/* Background Image */}\r\n      <div\r\n        className=\"absolute inset-0 transition-transform duration-500 group-hover:scale-110\"\r\n        style={{\r\n          backgroundImage: `url(${image})`,\r\n          backgroundSize: 'cover',\r\n          backgroundPosition: 'center',\r\n          borderRadius: '50%',\r\n          opacity: 1.0,\r\n          mixBlendMode: 'normal',\r\n        }}\r\n      />\r\n\r\n      {/* Specular Shimmer Effect */}\r\n      <div\r\n        className=\"absolute inset-0 pointer-events-none\"\r\n        style={{\r\n          borderRadius: '50%',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            top: '-50%',\r\n            left: '-50%',\r\n            width: '200%',\r\n            height: '200%',\r\n            background: 'linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.25) 50%, transparent 100%)',\r\n            transform: 'translateX(-100%) rotate(45deg)',\r\n            animation: 'shimmer 10s infinite linear',\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Label overlay */}\r\n      <div\r\n        className=\"absolute inset-x-0 bottom-0 flex items-center justify-center pb-1\"\r\n        style={{\r\n          background: isLight\r\n            ? 'linear-gradient(to top, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.6) 70%, transparent 100%)'\r\n            : 'linear-gradient(to top, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.5) 70%, transparent 100%)',\r\n          borderBottomLeftRadius: '50%',\r\n          borderBottomRightRadius: '50%',\r\n        }}\r\n      >\r\n        <span\r\n          style={{\r\n            fontSize: '7px',\r\n            fontWeight: '700',\r\n            letterSpacing: '0.08em',\r\n            textTransform: 'uppercase',\r\n            color: isLight ? 'var(--light-accent)' : 'rgba(253, 251, 245, 0.95)',\r\n            textShadow: isLight\r\n              ? '0 1px 2px rgba(255, 255, 255, 0.8)'\r\n              : '0 1px 3px rgba(0, 0, 0, 0.9)',\r\n            userSelect: 'none',\r\n          }}\r\n        >\r\n          {title}\r\n        </span>\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction ModeButton({ title, onClick, image, colorGrade = 'gold' }) {\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n\r\n  const cardRef = useRef(null);\r\n  const [gradientAngle, setGradientAngle] = useState(135);\r\n\r\n  useEffect(() => {\r\n    if (cardRef.current) {\r\n      const rect = cardRef.current.getBoundingClientRect();\r\n      const avatarCenter = getAvatarCenter();\r\n      const angle = calculateGradientAngle(rect, avatarCenter);\r\n      setGradientAngle(angle);\r\n    }\r\n  }, []);\r\n\r\n  // Per-mode color grading for subtle identity\r\n  const colorGrades = {\r\n    gold: isLight ? 'rgba(180, 140, 60, 0.03)' : 'rgba(255, 255, 255, 0.03)',\r\n    amberViolet: isLight ? 'rgba(124, 92, 174, 0.03)' : 'rgba(180, 120, 200, 0.06)',\r\n    indigo: isLight ? 'rgba(14, 116, 144, 0.03)' : 'rgba(100, 130, 220, 0.06)',\r\n    goldBlue: isLight ? 'rgba(100, 110, 140, 0.03)' : 'rgba(180, 190, 220, 0.05)',\r\n  };\r\n  const gradeOverlay = colorGrades[colorGrade] || colorGrades.gold;\r\n\r\n  const circleSize = 150; // Circle diameter in px\r\n\r\n  return (\r\n    <button\r\n      ref={cardRef}\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      className=\"group relative overflow-hidden transition-all duration-300\"\r\n      style={{\r\n        width: `${circleSize}px`,\r\n        height: `${circleSize}px`,\r\n        borderRadius: '50%',\r\n\r\n        // Refined Gold Border - circular\r\n        border: '2px solid transparent',\r\n        backgroundImage: isLight\r\n          ? `\r\n            linear-gradient(var(--light-bg-surface), var(--light-bg-surface)),\r\n            ${getDynamicGoldGradient(gradientAngle, true)}\r\n          `\r\n          : `\r\n            linear-gradient(rgba(26, 15, 28, 0.92), rgba(21, 11, 22, 0.95)),\r\n            linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.01))\r\n          `,\r\n        backgroundOrigin: 'border-box',\r\n        backgroundClip: 'padding-box, border-box',\r\n\r\n        boxShadow: isLight\r\n          ? `\r\n            0 0 0 0.5px #AF8B2C,\r\n            inset 1px 1px 0 0.5px rgba(255, 250, 235, 0.9),\r\n            0 4px 20px var(--light-shadow-tint),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.8)\r\n          `\r\n          : `\r\n            0 0 0 0.5px rgba(255, 255, 255, 0.1),\r\n            0 8px 32px rgba(0, 0, 0, 0.6),\r\n            0 2px 8px var(--accent-15),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.08),\r\n            inset 0 -3px 12px rgba(0, 0, 0, 0.4),\r\n            inset 0 0 40px rgba(0, 0, 0, 0.25)\r\n          `,\r\n      }}\r\n      onMouseEnter={(e) => {\r\n        if (isLight) {\r\n          e.currentTarget.style.boxShadow = `\r\n            0 8px 30px var(--light-shadow-tint),\r\n            0 0 20px var(--light-accent-muted),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.9)\r\n          `;\r\n        } else {\r\n          e.currentTarget.style.boxShadow = `\r\n            0 12px 40px rgba(0, 0, 0, 0.7),\r\n            0 0 40px var(--accent-25),\r\n            0 0 80px var(--accent-10),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.12),\r\n            inset 0 -3px 12px rgba(0, 0, 0, 0.4),\r\n            inset 0 0 40px rgba(0, 0, 0, 0.25)\r\n          `;\r\n        }\r\n        e.currentTarget.style.transform = 'scale(1.05)';\r\n      }}\r\n      onMouseLeave={(e) => {\r\n        if (isLight) {\r\n          e.currentTarget.style.boxShadow = `\r\n            0 0 0 0.5px #AF8B2C,\r\n            inset 1px 1px 0 0.5px rgba(255, 250, 235, 0.9),\r\n            0 4px 20px var(--light-shadow-tint),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.8)\r\n          `;\r\n        } else {\r\n          e.currentTarget.style.boxShadow = `\r\n            0 0 0 0.5px rgba(255, 255, 255, 0.1),\r\n            0 8px 32px rgba(0, 0, 0, 0.6),\r\n            0 2px 8px var(--accent-15),\r\n            inset 0 1px 0 rgba(255, 255, 255, 0.08),\r\n            inset 0 -3px 12px rgba(0, 0, 0, 0.4),\r\n            inset 0 0 40px rgba(0, 0, 0, 0.25)\r\n          `;\r\n        }\r\n        e.currentTarget.style.transform = 'scale(1)';\r\n      }}\r\n    >\r\n      {/* Background Image Layer - masked to circle */}\r\n      {image && (\r\n        <div\r\n          className=\"absolute inset-0 transition-all duration-500 group-hover:scale-110\"\r\n          style={{\r\n            backgroundImage: `url(${image})`,\r\n            backgroundSize: 'cover',\r\n            backgroundPosition: 'center',\r\n            opacity: 1.0,\r\n            mixBlendMode: isLight ? 'multiply' : 'normal',\r\n            borderRadius: '50%',\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Dark gradient overlay for text legibility (dark mode only) */}\r\n      {!isLight && (\r\n        <div\r\n          className=\"absolute inset-0 pointer-events-none\"\r\n          style={{\r\n            background: `\r\n              radial-gradient(circle at center, \r\n                rgba(0, 0, 0, 0.1) 0%, \r\n                rgba(0, 0, 0, 0.4) 50%, \r\n                rgba(0, 0, 0, 0.8) 100%\r\n              )\r\n            `,\r\n            borderRadius: '50%',\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Noise texture overlay */}\r\n      <div\r\n        style={{\r\n          ...noiseOverlayStyle,\r\n          opacity: isLight ? 0.015 : 0.05,\r\n          borderRadius: '50%',\r\n        }}\r\n      />\r\n\r\n      {/* Sheen overlay (dark mode) / Inset shadow (light mode) */}\r\n      {isLight ? (\r\n        <div\r\n          className=\"absolute inset-0 pointer-events-none\"\r\n          style={{\r\n            boxShadow: 'inset 0 1px 4px rgba(0,0,0,0.03)',\r\n            borderRadius: '50%',\r\n          }}\r\n        />\r\n      ) : (\r\n        <div style={{ ...sheenOverlayStyle, borderRadius: '50%' }} />\r\n      )}\r\n\r\n      {/* Color grade overlay - per-mode identity */}\r\n      <div\r\n        className=\"absolute inset-0 pointer-events-none\"\r\n        style={{\r\n          background: gradeOverlay,\r\n          borderRadius: '50%',\r\n        }}\r\n      />\r\n\r\n      {/* Text Content - positioned at bottom */}\r\n      <div className=\"absolute inset-x-0 bottom-0 flex items-center justify-center pb-4 z-10\">\r\n        {/* Light mode: Add a semi-transparent backdrop for text legibility */}\r\n        {isLight && (\r\n          <div\r\n            className=\"absolute inset-0\"\r\n            style={{\r\n              background: 'linear-gradient(to top, rgba(255, 255, 255, 0.85) 0%, rgba(255, 255, 255, 0.5) 70%, transparent 100%)',\r\n              backdropFilter: 'blur(2px)',\r\n              WebkitBackdropFilter: 'blur(2px)',\r\n              borderBottomLeftRadius: '50%',\r\n              borderBottomRightRadius: '50%',\r\n            }}\r\n          />\r\n        )}\r\n        <div\r\n          className=\"text-sm font-bold tracking-wide transition-colors relative\"\r\n          style={{\r\n            color: isLight ? 'var(--light-accent)' : 'var(--accent-color)',\r\n            fontFamily: 'var(--font-display)',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.05em',\r\n            textShadow: isLight\r\n              ? '0 1px 2px rgba(255, 255, 255, 1), 0 2px 12px rgba(255, 255, 255, 0.9), 0 0 20px rgba(255, 255, 255, 0.7), 1px 1px 0 rgba(0, 0, 0, 0.25), -1px -1px 0 rgba(0, 0, 0, 0.15)'\r\n              : '0 2px 12px rgba(0, 0, 0, 0.95), 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 20px rgba(0, 0, 0, 0.7)',\r\n          }}\r\n        >\r\n          {title}\r\n        </div>\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n\r\nexport { HomeHub };\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\HonorLogModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\HubCardSwiper.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[157,164],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/HubCardSwiper.jsx\r\n// Swipeable container for Home Hub cards with smooth transitions\r\n\r\nimport React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nconst swipeConfidenceThreshold = 10000;\r\nconst swipePower = (offset, velocity) => {\r\n    return Math.abs(offset) * velocity;\r\n};\r\n\r\nexport function HubCardSwiper({ cards }) {\r\n    const [[page, direction], setPage] = useState([0, 0]);\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    const displayMode = useDisplayModeStore(s => s.mode);\r\n    const isSanctuary = displayMode === 'sanctuary';\r\n\r\n    const cardIndex = ((page % cards.length) + cards.length) % cards.length;\r\n\r\n    const paginate = (newDirection) => {\r\n        setPage([page + newDirection, newDirection]);\r\n    };\r\n\r\n    const variants = {\r\n        enter: (direction) => ({\r\n            x: direction > 0 ? 1000 : -1000,\r\n            opacity: 0\r\n        }),\r\n        center: {\r\n            zIndex: 1,\r\n            x: 0,\r\n            opacity: 1\r\n        },\r\n        exit: (direction) => ({\r\n            zIndex: 0,\r\n            x: direction < 0 ? 1000 : -1000,\r\n            opacity: 0\r\n        })\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative w-full transition-all duration-700\" style={{ maxWidth: '430px', margin: '0 auto' }}>\r\n            {/* Dot Indicators - Moved above card */}\r\n            {cards.length > 1 && (\r\n                <div className=\"flex justify-center items-center gap-2 mb-3\">\r\n                    {cards.map((_, index) => (\r\n                        <button\r\n                            key={index}\r\n                            onClick={() => {\r\n                                const newDirection = index > cardIndex ? 1 : -1;\r\n                                setPage([index, newDirection]);\r\n                            }}\r\n                            className=\"w-2 h-2 rounded-full transition-all duration-300\"\r\n                            style={{\r\n                                background: index === cardIndex\r\n                                    ? (isLight ? 'rgba(180, 120, 40, 0.9)' : 'var(--accent-color)')\r\n                                    : (isLight ? 'rgba(180, 120, 40, 0.2)' : 'rgba(253, 251, 245, 0.2)'),\r\n                                boxShadow: index === cardIndex\r\n                                    ? `0 0 8px ${isLight ? 'rgba(180, 120, 40, 0.4)' : 'var(--accent-glow)'}`\r\n                                    : 'none',\r\n                                transform: index === cardIndex ? 'scale(1.3)' : 'scale(1)',\r\n                                cursor: 'pointer'\r\n                            }}\r\n                            aria-label={`Go to card ${index + 1}`}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Swipeable Card Container - Tightened for symmetry */}\r\n            <div className=\"relative overflow-visible\" style={{ minHeight: isSanctuary ? '420px' : '400px' }}>\r\n                <AnimatePresence initial={false} custom={direction} mode=\"wait\">\r\n                    <motion.div\r\n                        key={page}\r\n                        custom={direction}\r\n                        variants={variants}\r\n                        initial=\"enter\"\r\n                        animate=\"center\"\r\n                        exit=\"exit\"\r\n                        transition={{\r\n                            x: { type: 'spring', stiffness: 300, damping: 30 },\r\n                            opacity: { duration: 0.2 }\r\n                        }}\r\n                        drag=\"x\"\r\n                        dragConstraints={{ left: 0, right: 0 }}\r\n                        dragElastic={1}\r\n                        onDragEnd={(e, { offset, velocity }) => {\r\n                            const swipe = swipePower(offset.x, velocity.x);\r\n\r\n                            if (swipe < -swipeConfidenceThreshold) {\r\n                                paginate(1);\r\n                            } else if (swipe > swipeConfidenceThreshold) {\r\n                                paginate(-1);\r\n                            }\r\n                        }}\r\n                        className=\"absolute w-full\"\r\n                    >\r\n                        {cards[cardIndex]}\r\n                    </motion.div>\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Swipe Hint (subtle, fades after first interaction) */}\r\n            {page === 0 && cards.length > 1 && (\r\n                <motion.div\r\n                    initial={{ opacity: 0.5 }}\r\n                    animate={{ opacity: 0 }}\r\n                    transition={{ delay: 3, duration: 1 }}\r\n                    className=\"absolute bottom-20 left-1/2 -translate-x-1/2 text-[10px] uppercase tracking-[0.2em] pointer-events-none\"\r\n                    style={{\r\n                        color: isLight ? 'rgba(100, 80, 60, 0.4)' : 'rgba(253, 251, 245, 0.3)',\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600\r\n                    }}\r\n                >\r\n                    ΓåÉ Swipe ΓåÆ\r\n                </motion.div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default HubCardSwiper;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\HubStagePanel.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'showCore' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"showCore"},"fix":{"range":[416,431],"text":""},"desc":"Remove unused variable 'showCore'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'lastPracticed' is defined but never used.","line":15,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastPracticed"},"fix":{"range":[447,467],"text":""},"desc":"Remove unused variable 'lastPracticed'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'streakInfo' is defined but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"streakInfo"},"fix":{"range":[467,484],"text":""},"desc":"Remove unused variable 'streakInfo'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onOpenHardwareGuide' is defined but never used.","line":17,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"onOpenHardwareGuide"},"fix":{"range":[484,510],"text":""},"desc":"Remove unused variable 'onOpenHardwareGuide'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onOpenHonorLog' is defined but never used.","line":18,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"onOpenHonorLog"},"fix":{"range":[510,531],"text":""},"desc":"Remove unused variable 'onOpenHonorLog'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'textPrimary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":27,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"textPrimary"},"fix":{"range":[815,897],"text":""},"desc":"Remove unused variable 'textPrimary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'textSecondary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":28,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"textSecondary"},"fix":{"range":[903,989],"text":""},"desc":"Remove unused variable 'textSecondary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'textMuted' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":29,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"textMuted"},"fix":{"range":[995,1078],"text":""},"desc":"Remove unused variable 'textMuted'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'accentColor' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":31,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"accentColor"},"fix":{"range":[1179,1255],"text":""},"desc":"Remove unused variable 'accentColor'."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/HubStagePanel.jsx\r\n// Status & Control Instrument ΓÇö INSCRIPTION AESTHETIC\r\n// Typographic hierarchy, no layering, all content within spine\r\n\r\nimport React from 'react';\r\nimport { VacationToggle } from './VacationToggle.jsx';\r\nimport { StageTitle } from './StageTitle.jsx';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nexport function HubStagePanel({\r\n    stage,\r\n    path,\r\n    showCore,\r\n    attention,\r\n    lastPracticed,\r\n    streakInfo,\r\n    onOpenHardwareGuide,\r\n    onOpenHonorLog,\r\n    hideStageTitle = false,\r\n}) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    const stageKey = (stage || 'flame').toLowerCase();\r\n    const auroraAsset = `aurora_${stageKey}.png`;\r\n\r\n    // Color tokens\r\n    const textPrimary = isLight ? 'rgba(45, 40, 35, 0.98)' : 'rgba(253, 251, 245, 1)';\r\n    const textSecondary = isLight ? 'rgba(60, 50, 40, 0.9)' : 'rgba(253, 251, 245, 0.85)';\r\n    const textMuted = isLight ? 'rgba(90, 77, 60, 0.45)' : 'rgba(253, 251, 245, 0.35)';\r\n    const dividerColor = isLight ? 'rgba(180, 155, 110, 0.25)' : 'rgba(253, 251, 245, 0.15)';\r\n    const accentColor = isLight ? 'var(--light-accent)' : 'var(--accent-color)';\r\n\r\n    return (\r\n        <div className=\"w-full flex flex-col items-center px-4 relative\" style={{ maxWidth: '430px' }}>\r\n            {/* Global Aurora \"Crown\" for Stage Title Backdrop (Light Mode) */}\r\n            {isLight && !hideStageTitle && (\r\n                <div\r\n                    className=\"absolute inset-x-0 -top-24 pointer-events-none z-0\"\r\n                    style={{\r\n                        backgroundImage: `url(${import.meta.env.BASE_URL}assets/${auroraAsset})`,\r\n                        backgroundSize: '150% auto',\r\n                        backgroundPosition: 'top center',\r\n                        height: '240px',\r\n                        opacity: 0.5,\r\n                        mixBlendMode: 'multiply',\r\n                        maskImage: 'linear-gradient(to bottom, transparent 0%, black 20%, black 60%, transparent 95%)',\r\n                        WebkitMaskImage: 'linear-gradient(to bottom, transparent 0%, black 20%, black 60%, transparent 95%)',\r\n                    }}\r\n                />\r\n            )}\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                STAGE NAME ΓÇö Shared ceremonial inscription\r\n               ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n            {!hideStageTitle && (\r\n                <div className=\"-mt-16 mb-1.5 relative overflow-visible z-10\">\r\n                    <StageTitle\r\n                        stage={stage}\r\n                        path={path}\r\n                        attention={attention}\r\n                        showWelcome={false}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                Tracking content starts immediately after stage title\r\n               ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n\r\n            {/* Attention Vector (if active) ΓÇö MEASURED READOUT */}\r\n            {attention && attention !== 'none' && (\r\n                <div\r\n                    className=\"mt-6 text-[10px] uppercase tracking-[0.4em] font-mono font-medium border-t border-b py-1 px-4\"\r\n                    style={{\r\n                        color: isLight ? 'rgba(20, 120, 60, 0.8)' : '#4ade80',\r\n                        borderColor: dividerColor,\r\n                        background: isLight ? 'rgba(0,0,0,0.02)' : 'rgba(255,255,255,0.02)'\r\n                    }}\r\n                >\r\n                    {attention}\r\n                </div>\r\n            )}\r\n\r\n            {/* metadata row moved below buttons for a cleaner instrument spine */}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\HubTrackingSwiper.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[161,168],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/HubTrackingSwiper.jsx\r\n// Swipeable container for Practice Hub and Application Hub cards\r\n\r\nimport React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { TrackingHub } from './TrackingHub.jsx';\r\nimport { ApplicationTrackingCard } from './ApplicationTrackingCard.jsx';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nconst PAGES = [\r\n    { id: 0, name: 'Practice Hub', component: TrackingHub },\r\n    { id: 1, name: 'Application Hub', component: ApplicationTrackingCard }\r\n];\r\n\r\nexport function HubTrackingSwiper({ streakInfo }) {\r\n    const [page, setPage] = useState(0);\r\n    const [direction, setDirection] = useState(0);\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const paginate = (newDirection) => {\r\n        const newPage = page + newDirection;\r\n        if (newPage >= 0 && newPage < PAGES.length) {\r\n            setDirection(newDirection);\r\n            setPage(newPage);\r\n        }\r\n    };\r\n\r\n    const swipeConfidenceThreshold = 10000;\r\n    const swipePower = (offset, velocity) => {\r\n        return Math.abs(offset) * velocity;\r\n    };\r\n\r\n    const variants = {\r\n        enter: (direction) => ({\r\n            x: direction > 0 ? 1000 : -1000,\r\n            opacity: 0\r\n        }),\r\n        center: {\r\n            zIndex: 1,\r\n            x: 0,\r\n            opacity: 1\r\n        },\r\n        exit: (direction) => ({\r\n            zIndex: 0,\r\n            x: direction < 0 ? 1000 : -1000,\r\n            opacity: 0\r\n        })\r\n    };\r\n\r\n    const CurrentPage = PAGES[page].component;\r\n\r\n    return (\r\n        <div className=\"w-full relative\">\r\n            {/* Page Indicators */}\r\n            <div className=\"flex items-center justify-center gap-3 mb-12\">\r\n                {PAGES.map((p, index) => (\r\n                    <button\r\n                        key={p.id}\r\n                        onClick={() => {\r\n                            setDirection(index > page ? 1 : -1);\r\n                            setPage(index);\r\n                        }}\r\n                        className=\"transition-all duration-300\"\r\n                        style={{\r\n                            opacity: index === page ? 1 : 0.3,\r\n                            transform: index === page ? 'scale(1.2)' : 'scale(1)'\r\n                        }}\r\n                    >\r\n                        {/* Cymatic glyph indicators */}\r\n                        {index === 0 ? (\r\n                            // Practice: Concentric circles\r\n                            <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\r\n                                <circle cx=\"10\" cy=\"10\" r=\"7\" fill=\"none\"\r\n                                    stroke={index === page ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.35)' : 'rgba(253,251,245,0.25)')}\r\n                                    strokeWidth={index === page ? \"1.2\" : \"0.8\"}\r\n                                    opacity={index === page ? 0.4 : 0.5} />\r\n                                <circle cx=\"10\" cy=\"10\" r=\"5\" fill=\"none\"\r\n                                    stroke={index === page ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.4)' : 'rgba(253,251,245,0.3)')}\r\n                                    strokeWidth={index === page ? \"1.5\" : \"1\"}\r\n                                    opacity={index === page ? 0.7 : 0.6} />\r\n                                <circle cx=\"10\" cy=\"10\" r=\"2.5\"\r\n                                    fill={index === page ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.2)' : 'rgba(253,251,245,0.15)')}\r\n                                    opacity={index === page ? 0.6 : 0.4} />\r\n                            </svg>\r\n                        ) : (\r\n                            // Application: Triple horizontal lines (field tracking)\r\n                            <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\r\n                                <line x1=\"5\" y1=\"7\" x2=\"15\" y2=\"7\"\r\n                                    stroke={index === page ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.35)' : 'rgba(253,251,245,0.25)')}\r\n                                    strokeWidth={index === page ? \"1.5\" : \"1\"}\r\n                                    opacity={index === page ? 1 : 0.6} />\r\n                                <line x1=\"5\" y1=\"10\" x2=\"15\" y2=\"10\"\r\n                                    stroke={index === page ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.35)' : 'rgba(253,251,245,0.25)')}\r\n                                    strokeWidth={index === page ? \"1.5\" : \"1\"}\r\n                                    opacity={index === page ? 1 : 0.6} />\r\n                                <line x1=\"5\" y1=\"13\" x2=\"15\" y2=\"13\"\r\n                                    stroke={index === page ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.35)' : 'rgba(253,251,245,0.25)')}\r\n                                    strokeWidth={index === page ? \"1.5\" : \"1\"}\r\n                                    opacity={index === page ? 1 : 0.6} />\r\n                            </svg>\r\n                        )}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Swipeable Container */}\r\n            <div className=\"relative overflow-hidden\">\r\n                <AnimatePresence initial={false} custom={direction} mode=\"wait\">\r\n                    <motion.div\r\n                        key={page}\r\n                        custom={direction}\r\n                        variants={variants}\r\n                        initial=\"enter\"\r\n                        animate=\"center\"\r\n                        exit=\"exit\"\r\n                        transition={{\r\n                            x: { type: \"spring\", stiffness: 300, damping: 30 },\r\n                            opacity: { duration: 0.2 }\r\n                        }}\r\n                        drag=\"x\"\r\n                        dragConstraints={{ left: 0, right: 0 }}\r\n                        dragElastic={1}\r\n                        onDragEnd={(e, { offset, velocity }) => {\r\n                            const swipe = swipePower(offset.x, velocity.x);\r\n\r\n                            if (swipe < -swipeConfidenceThreshold) {\r\n                                paginate(1);\r\n                            } else if (swipe > swipeConfidenceThreshold) {\r\n                                paginate(-1);\r\n                            }\r\n                        }}\r\n                    >\r\n                        <CurrentPage streakInfo={streakInfo} />\r\n                    </motion.div>\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\IdleHearth.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\IndrasNet.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\InstallPrompt.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[62,69],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport function InstallPrompt() {\r\n    const [isVisible, setIsVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Detect if on iOS Safari in browser mode\r\n        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n        const isStandalone = window.navigator.standalone === true;\r\n        const hasBeenDismissed = localStorage.getItem('immanence_install_dismissed') === 'true';\r\n\r\n        if (isIOS && !isStandalone && !hasBeenDismissed) {\r\n            // Delay to allow app load feel\r\n            const timer = setTimeout(() => setIsVisible(true), 2000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, []);\r\n\r\n    const handleDismiss = (permanent = false) => {\r\n        setIsVisible(false);\r\n        if (permanent) {\r\n            localStorage.setItem('immanence_install_dismissed', 'true');\r\n        }\r\n    };\r\n\r\n    if (!isVisible) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                className=\"fixed inset-0 z-[2000] flex items-end justify-center px-4 pb-8 sm:items-center sm:pb-0 pointer-events-none\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n            >\r\n                {/* Backdrop overlay */}\r\n                <div\r\n                    className=\"absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto\"\r\n                    onClick={() => handleDismiss()}\r\n                />\r\n\r\n                {/* Modal Content */}\r\n                <motion.div\r\n                    className=\"relative w-full max-w-sm bg-[#0a0a12] border border-amber-500/30 rounded-2xl overflow-hidden shadow-2xl pointer-events-auto\"\r\n                    initial={{ y: 100, scale: 0.9 }}\r\n                    animate={{ y: 0, scale: 1 }}\r\n                    exit={{ y: 100, scale: 0.9 }}\r\n                    transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n                >\r\n                    {/* Header Glow */}\r\n                    <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-amber-500/50 to-transparent\" />\r\n\r\n                    <div className=\"p-6 pt-8 space-y-6\">\r\n                        <div className=\"text-center space-y-2\">\r\n                            <h3 className=\"text-xl font-display tracking-widest text-amber-200 uppercase\">\r\n                                Install Presence\r\n                            </h3>\r\n                            <p className=\"text-sm text-slate-400 font-serif leading-relaxed italic\">\r\n                                Enclose the OS within your home field for frictionless tracking.\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* Instruction Steps */}\r\n                        <div className=\"space-y-4 py-2\">\r\n                            <Step number=\"1\" text=\"Tap the Share icon below\">\r\n                                <ShareIcon />\r\n                            </Step>\r\n                            <Step number=\"2\" text=\"Select 'Add to Home Screen'\">\r\n                                <PlusIcon />\r\n                            </Step>\r\n                        </div>\r\n\r\n                        {/* Actions */}\r\n                        <div className=\"flex flex-col gap-3 pt-2\">\r\n                            <button\r\n                                onClick={() => handleDismiss()}\r\n                                className=\"w-full py-3 text-xs tracking-widest uppercase border border-amber-500/20 text-amber-500/60 hover:text-amber-400 hover:border-amber-500/40 transition-all rounded-lg\"\r\n                            >\r\n                                Maybe Later\r\n                            </button>\r\n                            <button\r\n                                onClick={() => handleDismiss(true)}\r\n                                className=\"w-full text-[10px] tracking-widest uppercase text-slate-600 hover:text-slate-400 transition-colors\"\r\n                            >\r\n                                Don't show again\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n\r\nfunction Step({ number, text, children }) {\r\n    return (\r\n        <div className=\"flex items-center gap-4 text-slate-300\">\r\n            <div className=\"flex-shrink-0 w-8 h-8 rounded-full border border-amber-500/20 flex items-center justify-center text-xs font-mono text-amber-400/60\">\r\n                {number}\r\n            </div>\r\n            <div className=\"flex-grow text-sm font-serif\">{text}</div>\r\n            <div className=\"flex-shrink-0\">{children}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ShareIcon() {\r\n    return (\r\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-sky-400\">\r\n            <path d=\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-8\" />\r\n            <polyline points=\"16 6 12 2 8 6\" />\r\n            <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"15\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\nfunction PlusIcon() {\r\n    return (\r\n        <div className=\"w-5 h-5 border-2 border-slate-400 rounded flex items-center justify-center text-slate-400\">\r\n            <span className=\"text-sm font-bold leading-none\">+</span>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\LightModeInstrumentRing.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isPracticing' is assigned a value but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"isPracticing"},"fix":{"range":[347,374],"text":""},"desc":"Remove unused variable 'isPracticing'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect } from 'react';\r\n\r\n/**\r\n * LightModeInstrumentRing\r\n * A high-fidelity \"Carved Stone + Glass\" instrument ring for Light Mode.\r\n * Focuses on material truth: engraved cuts, edge compression, and directional light.\r\n */\r\nexport function LightModeInstrumentRing({\r\n    size = 288,\r\n    accent = 'var(--accent-color)',\r\n    isPracticing = false,\r\n    lightDirection = 315 // Degrees (top-right light source)\r\n}) {\r\n    const canvasRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n        const dpr = window.devicePixelRatio || 1;\r\n\r\n        canvas.width = size * dpr;\r\n        canvas.height = size * dpr;\r\n        ctx.scale(dpr, dpr);\r\n\r\n        const center = size / 2;\r\n        const radius = (size / 2) * 0.92;\r\n        const ringWidth = size * 0.08;\r\n\r\n        const draw = () => {\r\n            ctx.clearRect(0, 0, size, size);\r\n\r\n            // 1. Thickness Logic ΓÇö Inner Rim (Seat Depth)\r\n            // Tighter, darker shadow where the stone meets the jewel\r\n            ctx.globalCompositeOperation = 'multiply';\r\n            const innerSeat = ctx.createRadialGradient(center, center, radius - ringWidth, center, center, radius - ringWidth + 4);\r\n            innerSeat.addColorStop(0, 'rgba(45,40,35,0.22)');\r\n            innerSeat.addColorStop(1, 'rgba(45,40,35,0)');\r\n            ctx.fillStyle = innerSeat;\r\n            ctx.beginPath();\r\n            ctx.arc(center, center, radius, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // 2. Thickness Logic ΓÇö Outer Rim (Erosion Falloff)\r\n            // Broader, softer shadow at the outer edge to imply age and roundness\r\n            const outerErosion = ctx.createRadialGradient(center, center, radius, center, center, radius - 8);\r\n            outerErosion.addColorStop(0, 'rgba(45,40,35,0.12)');\r\n            outerErosion.addColorStop(1, 'rgba(45,40,35,0)');\r\n            ctx.fillStyle = outerErosion;\r\n            ctx.fill();\r\n\r\n            // 3. Directional Influence (Top-Right Shadow Bias)\r\n            // We subtly darken the bottom-left to emphasize the light source\r\n            ctx.globalCompositeOperation = 'multiply';\r\n            const lightRad = (lightDirection * Math.PI) / 180;\r\n            const biasGrad = ctx.createLinearGradient(\r\n                center + Math.cos(lightRad) * radius,\r\n                center + Math.sin(lightRad) * radius,\r\n                center - Math.cos(lightRad) * radius,\r\n                center - Math.sin(lightRad) * radius\r\n            );\r\n            biasGrad.addColorStop(0, 'rgba(45,40,35,0)');\r\n            biasGrad.addColorStop(1, 'rgba(45,40,35,0.08)');\r\n            ctx.fillStyle = biasGrad;\r\n            ctx.fill();\r\n\r\n            // 4. Micro-Texture (Stone Grain)\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.arc(center, center, radius, 0, Math.PI * 2);\r\n            ctx.arc(center, center, radius - ringWidth, 0, Math.PI * 2, true);\r\n            ctx.clip();\r\n\r\n            ctx.globalCompositeOperation = 'soft-light';\r\n            for (let i = 0; i < 300; i++) {\r\n                const rx = Math.random() * size;\r\n                const ry = Math.random() * size;\r\n                ctx.fillStyle = `rgba(45,40,35,${0.02 + Math.random() * 0.03})`;\r\n                ctx.fillRect(rx, ry, 1, 1);\r\n            }\r\n            ctx.restore();\r\n\r\n            // 5. Directional Highlight (Ivory Edge)\r\n            // A VERY subtle highlight only on the top-right facing edge\r\n            ctx.globalCompositeOperation = 'screen';\r\n            const edgeHighlight = ctx.createLinearGradient(\r\n                center + Math.cos(lightRad) * radius,\r\n                center + Math.sin(lightRad) * radius,\r\n                center - Math.cos(lightRad) * radius,\r\n                center - Math.sin(lightRad) * radius\r\n            );\r\n            edgeHighlight.addColorStop(0, 'rgba(255,255,255,0.12)');\r\n            edgeHighlight.addColorStop(0.4, 'rgba(255,255,255,0)');\r\n            ctx.strokeStyle = edgeHighlight;\r\n            ctx.lineWidth = 1.2;\r\n            ctx.beginPath();\r\n            ctx.arc(center, center, radius - 0.5, lightRad - 0.8, lightRad + 0.8);\r\n            ctx.stroke();\r\n        };\r\n\r\n        draw();\r\n    }, [size, lightDirection]);\r\n\r\n    const renderEngraving = () => {\r\n        const radius = 45.2;\r\n        const ringWidth = 7.5;\r\n\r\n        const arcPath = (r, startDeg, endDeg) => {\r\n            const toRad = (d) => (d * Math.PI) / 180;\r\n            const sx = 50 + r * Math.cos(toRad(startDeg - 90));\r\n            const sy = 50 + r * Math.sin(toRad(startDeg - 90));\r\n            const ex = 50 + r * Math.cos(toRad(endDeg - 90));\r\n            const ey = 50 + r * Math.sin(toRad(endDeg - 90));\r\n            const large = endDeg - startDeg > 180 ? 1 : 0;\r\n            return `M ${sx} ${sy} A ${r} ${r} 0 ${large} 1 ${ex} ${ey}`;\r\n        };\r\n\r\n        const ticks = [];\r\n        for (let i = 0; i < 60; i++) {\r\n            const isMajor = i % 5 === 0;\r\n            const angle = (i / 60) * 360;\r\n            const len = isMajor ? 5.5 : 3.2;\r\n\r\n            // High-fidelity Engraving: Shadow Core (Cut) + Ivory Lip (Highlight)\r\n            // The ivory highlight aligns with the top-right light source.\r\n            // WhenSource is at 315 deg, we offset the highlight lip slightly toward source.\r\n            const highlightOffset = 0.55;\r\n\r\n            ticks.push(\r\n                <g key={`t-inc-${i}`}>\r\n                    {/* Highlight Lip (Light facing side) */}\r\n                    <line\r\n                        x1=\"50.2\" y1={50 - radius - highlightOffset}\r\n                        x2=\"50.2\" y2={50 - radius + len - highlightOffset}\r\n                        stroke=\"rgba(255,255,255,0.18)\"\r\n                        strokeWidth={isMajor ? 0.75 : 0.55}\r\n                        strokeLinecap=\"round\"\r\n                        transform={`rotate(${angle} 50 50)`}\r\n                    />\r\n                    {/* Shadow Core (Cut) */}\r\n                    <line\r\n                        x1=\"50\" y1={50 - radius}\r\n                        x2=\"50\" y2={50 - radius + len}\r\n                        stroke=\"rgba(45,40,35,0.3)\"\r\n                        strokeWidth={isMajor ? 0.7 : 0.5}\r\n                        strokeLinecap=\"round\"\r\n                        transform={`rotate(${angle} 50 50)`}\r\n                    />\r\n                </g>\r\n            );\r\n        }\r\n\r\n        const arcs = [\r\n            { start: 12, end: 38, r: 40.2, w: 1.1, a: 0.12, c: 'rgba(45,40,35,' },\r\n            { start: 112, end: 141, r: 41.6, w: 0.9, a: 0.10, c: 'rgba(45,40,35,' },\r\n            { start: 206, end: 232, r: 39.1, w: 1.0, a: 0.10, c: 'rgba(45,40,35,' },\r\n            { start: 302, end: 344, r: 43.1, w: 1.2, a: 0.14, c: accent },\r\n        ];\r\n\r\n        const cardinalMarks = [0, 90, 180, 270].map(angle => (\r\n            <path\r\n                key={`card-${angle}`}\r\n                d=\"M 49 4 L 50 6.5 L 51 4 Z\"\r\n                fill=\"rgba(45,40,35,0.35)\"\r\n                transform={`rotate(${angle} 50 50) translate(0, ${50 - radius - 2.5})`}\r\n            />\r\n        ));\r\n\r\n        return (\r\n            <svg viewBox=\"0 0 100 100\" className=\"absolute inset-0 w-full h-full pointer-events-none\">\r\n                <circle cx=\"50\" cy=\"50\" r={radius} fill=\"none\" stroke=\"rgba(45,40,35,0.18)\" strokeWidth=\"0.4\" />\r\n                <circle cx=\"50\" cy=\"50\" r={radius - ringWidth} fill=\"none\" stroke=\"rgba(45,40,35,0.14)\" strokeWidth=\"0.3\" />\r\n                <g>{ticks}</g>\r\n                <g>\r\n                    {arcs.map((arc, i) => (\r\n                        <path\r\n                            key={`arc-${i}`}\r\n                            d={arcPath(arc.r, arc.start, arc.end)}\r\n                            fill=\"none\"\r\n                            stroke={arc.c.endsWith(',') ? `${arc.c}${arc.a})` : arc.c}\r\n                            strokeWidth={arc.w}\r\n                            strokeLinecap=\"round\"\r\n                            style={{ opacity: arc.c.endsWith(',') ? 1 : arc.a }}\r\n                        />\r\n                    ))}\r\n                </g>\r\n                <g>{cardinalMarks}</g>\r\n            </svg>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"absolute flex items-center justify-center pointer-events-none\" style={{ width: size, height: size }}>\r\n            <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full pointer-events-none\" style={{ width: '100%', height: '100%' }} />\r\n            {renderEngraving()}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\LivingBreathWave.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\LoadingIndicator.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ModeDetail.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'modeId' is defined but never used.","line":18,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"modeId"},"fix":{"range":[873,880],"text":""},"desc":"Remove unused variable 'modeId'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  122 |     useEffect(() => {\n  123 |         if (autoStartTraining) {\n> 124 |             setTrainingOpen(true);\n      |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  125 |         }\n  126 |     }, [autoStartTraining, modeId]);\n  127 |","line":124,"column":13,"nodeType":null,"endLine":124,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/ModeDetail.jsx\r\n// Four Modes detail page - Threshold, not button\r\n// Temporal arc: Orientation ΓåÆ Engagement ΓåÆ Integration\r\nimport React, { useState, useEffect } from 'react';\r\nimport { FOUR_MODES_BY_ID } from '../data/fourModes.js';\r\nimport { ModeTraining } from './Application/ModeTraining.jsx';\r\nimport { PRACTICE_DEFINITIONS } from '../state/practiceConfig.js';\r\n\r\n// Mode-specific consequence anchors (IE v1 - gravity without authority)\r\nconst MODE_CONSEQUENCES = {\r\n    mirror: \"What you can't see accurately, you can't respond to accurately.\",\r\n    prism: \"The story you tell yourself becomes the world you live in.\",\r\n    wave: \"Unfelt intensity doesn't disappear. It modulates behavior.\",\r\n    sword: \"Uncommitted action drifts. Named action can be tracked.\",\r\n};\r\n\r\n// Responsive Beacon Component - Active field, not logo\r\nfunction ModeBeacon({ modeId, practice }) {\r\n    const [pulsePhase, setPulsePhase] = useState(0);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n    // Slow phase-based modulation\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setPulsePhase(p => (p + 1) % 360);\r\n        }, 50);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const glowIntensity = 0.3 + Math.sin(pulsePhase * Math.PI / 180) * 0.15;\r\n    const scale = 1 + Math.sin(pulsePhase * Math.PI / 90) * 0.02;\r\n\r\n    return (\r\n        <div\r\n            className=\"relative w-32 h-32 mx-auto transition-all duration-300\"\r\n            style={{\r\n                transform: `scale(${isHovered ? scale * 1.05 : scale})`,\r\n            }}\r\n            onMouseEnter={() => setIsHovered(true)}\r\n            onMouseLeave={() => setIsHovered(false)}\r\n        >\r\n            {/* Field glow - originates from within */}\r\n            <div\r\n                className=\"absolute inset-0 rounded-full\"\r\n                style={{\r\n                    background: `radial-gradient(circle, ${practice?.accent}${Math.round(glowIntensity * 100).toString(16).padStart(2, '0')} 0%, transparent 70%)`,\r\n                    filter: 'blur(20px)',\r\n                    transition: 'opacity 0.5s ease',\r\n                    opacity: isHovered ? 1 : 0.8,\r\n                }}\r\n            />\r\n\r\n            {/* Concentric rings - continuous, no terminations */}\r\n            <svg\r\n                className=\"absolute inset-0 w-full h-full\"\r\n                viewBox=\"0 0 128 128\"\r\n                style={{ opacity: isHovered ? 0.9 : 0.6 }}\r\n            >\r\n                {[40, 52, 64].map((r, i) => (\r\n                    <circle\r\n                        key={r}\r\n                        cx=\"64\"\r\n                        cy=\"64\"\r\n                        r={r}\r\n                        fill=\"none\"\r\n                        stroke={practice?.accent || 'var(--accent-color)'}\r\n                        strokeWidth=\"0.5\"\r\n                        opacity={0.3 + i * 0.1}\r\n                        style={{\r\n                            transform: `rotate(${pulsePhase * (i % 2 === 0 ? 1 : -1) * 0.3}deg)`,\r\n                            transformOrigin: 'center',\r\n                        }}\r\n                    />\r\n                ))}\r\n                {/* Central point - subtle, not focal */}\r\n                <circle cx=\"64\" cy=\"64\" r=\"3\" fill={practice?.accent} opacity=\"0.5\" />\r\n            </svg>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Cyclic Section Component - stations on a loop, not list items\r\nfunction CyclicStation({ title, children, accent, index }) {\r\n    const markers = ['Γùç', 'Γùï', 'Γû│'];\r\n\r\n    return (\r\n        <div className=\"relative pl-8\">\r\n            {/* Glyph marker - suggests recurrence */}\r\n            <div\r\n                className=\"absolute left-0 top-1 text-[10px]\"\r\n                style={{ color: accent, opacity: 0.5 }}\r\n            >\r\n                {markers[index % 3]}\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"space-y-2\">\r\n                <h3\r\n                    className=\"text-[11px] uppercase tracking-[0.12em]\"\r\n                    style={{ color: accent, opacity: 0.8 }}\r\n                >\r\n                    {title}\r\n                </h3>\r\n                <div\r\n                    className=\"text-[13px] leading-relaxed\"\r\n                    style={{ fontFamily: 'var(--font-body)', color: 'rgba(253,251,245,0.65)', letterSpacing: '0.01em' }}\r\n                >\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function ModeDetail({ modeId, onBack, autoStartTraining = false }) {\r\n    const [trainingOpen, setTrainingOpen] = useState(false);\r\n    const [ctaHovered, setCtaHovered] = useState(false);\r\n    const mode = FOUR_MODES_BY_ID[modeId];\r\n    const practice = PRACTICE_DEFINITIONS[modeId];\r\n\r\n    // Handle auto-start from chain transitions\r\n    useEffect(() => {\r\n        if (autoStartTraining) {\r\n            setTrainingOpen(true);\r\n        }\r\n    }, [autoStartTraining, modeId]);\r\n\r\n    if (!mode) {\r\n        return (\r\n            <div className=\"text-center py-12 text-[rgba(253,251,245,0.5)]\">\r\n                Mode not found.\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                ORIENTATION LAYER ΓÇö Where am I right now?\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n\r\n            {/* Breadcrumb - minimal */}\r\n            <button\r\n                onClick={onBack}\r\n                className=\"flex items-center gap-2 text-[10px] uppercase tracking-[0.12em] transition-all hover:opacity-100\"\r\n                style={{ color: practice?.accent || 'var(--accent-color)', opacity: 0.5 }}\r\n            >\r\n                <span>ΓåÉ</span>\r\n                <span>Four Modes</span>\r\n                <span style={{ color: 'rgba(253,251,245,0.3)' }}>ΓÇ║</span>\r\n                <span>{mode.name}</span>\r\n            </button>\r\n\r\n            {/* Beacon - Active field, not logo */}\r\n            <ModeBeacon modeId={modeId} practice={practice} />\r\n\r\n            {/* Mode identity */}\r\n            <div className=\"text-center space-y-2\">\r\n                <h2\r\n                    className=\"text-[20px] uppercase tracking-[0.2em] font-bold\"\r\n                    style={{ fontFamily: 'var(--font-display)', color: 'var(--accent-color)' }}\r\n                >\r\n                    {mode.name}\r\n                </h2>\r\n                <p\r\n                    className=\"text-[13px] italic font-medium\"\r\n                    style={{ fontFamily: 'var(--font-body)', color: 'rgba(253,251,245,0.6)', letterSpacing: '0.01em' }}\r\n                >\r\n                    \"{mode.tagline}\"\r\n                </p>\r\n            </div>\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                ENGAGEMENT LAYER ΓÇö The threshold\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n\r\n            {/* CTA - Entry, not navigation */}\r\n            <div\r\n                className=\"flex justify-center py-6\"\r\n                style={{\r\n                    // Subtle visual separation - threshold zone\r\n                    background: ctaHovered\r\n                        ? `radial-gradient(ellipse 100% 100% at center, ${practice?.accent}10, transparent 70%)`\r\n                        : 'transparent',\r\n                    transition: 'background 0.5s ease',\r\n                }}\r\n            >\r\n                <button\r\n                    onClick={() => setTrainingOpen(true)}\r\n                    onMouseEnter={() => setCtaHovered(true)}\r\n                    onMouseLeave={() => setCtaHovered(false)}\r\n                    className=\"px-10 py-5 rounded-2xl border transition-all duration-300\"\r\n                    style={{\r\n                        background: ctaHovered\r\n                            ? `linear-gradient(145deg, ${practice?.accent}20, ${practice?.accent}08)`\r\n                            : 'transparent',\r\n                        borderColor: ctaHovered\r\n                            ? practice?.accent\r\n                            : `${practice?.accent}40`,\r\n                        boxShadow: ctaHovered\r\n                            ? `0 8px 32px ${practice?.accent}25, inset 0 0 20px ${practice?.accent}10`\r\n                            : 'none',\r\n                        transform: ctaHovered ? 'scale(1.02)' : 'scale(1)',\r\n                    }}\r\n                >\r\n                    <span\r\n                        className=\"text-[11px] uppercase tracking-[0.2em] font-bold\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            color: practice?.accent,\r\n                            opacity: ctaHovered ? 1 : 0.8,\r\n                        }}\r\n                    >\r\n                        Enter {mode.name} Practice\r\n                    </span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                INTEGRATION LAYER ΓÇö What does this touch after?\r\n                ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n\r\n            {/* Cyclic sections - stations on a loop */}\r\n            <div\r\n                className=\"space-y-6 pt-4\"\r\n                style={{\r\n                    borderTop: `1px solid ${practice?.accent}15`,\r\n                }}\r\n            >\r\n                <CyclicStation title=\"What is active\" accent={practice?.accent} index={0}>\r\n                    <p>{mode.description}</p>\r\n                </CyclicStation>\r\n\r\n                <CyclicStation title=\"How it announces itself\" accent={practice?.accent} index={1}>\r\n                    <p style={{ fontStyle: 'italic' }}>\r\n                        {modeId === 'mirror' && \"When reactions are running ahead of awareness. When you don't have a neutral anchor.\"}\r\n                        {modeId === 'prism' && \"When you catch yourself saying 'obviously' or 'clearly'. When the interpretation feels like fact.\"}\r\n                        {modeId === 'wave' && \"When the urge to act is stronger than the clarity about what to do. When intensity needs to move but shouldn't discharge.\"}\r\n                        {modeId === 'sword' && \"When clarity exists but action doesn't follow. When you know what's needed but haven't named it.\"}\r\n                    </p>\r\n                </CyclicStation>\r\n\r\n                <CyclicStation title=\"The constraint\" accent={practice?.accent} index={2}>\r\n                    <p style={{ fontStyle: 'italic' }}>\r\n                        {modeId === 'mirror' && \"No adjectives. No identity labels. No assumed intent. Would a camera capture this?\"}\r\n                        {modeId === 'prism' && \"Every thought must be categorized. Supported only if the Mirror text proves it explicitly.\"}\r\n                        {modeId === 'wave' && \"You cannot act on impulses during the timer. Observe until it moves.\"}\r\n                        {modeId === 'sword' && \"No vague intentions. Specific action, named cost, time-bound commitment.\"}\r\n                    </p>\r\n                </CyclicStation>\r\n            </div>\r\n\r\n            {/* Consequence anchor - gravity without authority */}\r\n            <div\r\n                className=\"text-center pt-8 pb-4\"\r\n                style={{\r\n                    borderTop: `1px solid rgba(255,255,255,0.05)`,\r\n                }}\r\n            >\r\n                <p\r\n                    className=\"text-[12px] italic max-w-xs mx-auto font-medium\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-body)',\r\n                        color: practice?.accent,\r\n                        opacity: 0.7,\r\n                        lineHeight: 1.6,\r\n                        letterSpacing: '0.01em'\r\n                    }}\r\n                >\r\n                    {MODE_CONSEQUENCES[modeId]}\r\n                </p>\r\n            </div>\r\n\r\n            {/* Training Modal */}\r\n            <ModeTraining\r\n                mode={modeId}\r\n                isOpen={trainingOpen}\r\n                onClose={() => setTrainingOpen(false)}\r\n                onSwitchMode={(nextModeId) => {\r\n                    // Signal to parent we want to switch to next mode\r\n                    // The parent will set the new mode and we'll auto-open via useEffect\r\n                    if (onBack) {\r\n                        onBack(nextModeId);\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\MoonGlowLayer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\MoonOrbit.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'recentActivity' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":24,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"recentActivity"},"fix":{"range":[816,876],"text":""},"desc":"Remove unused variable 'recentActivity'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sparkleMode' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":25,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"sparkleMode"},"fix":{"range":[882,936],"text":""},"desc":"Remove unused variable 'sparkleMode'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sparkles' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":32,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"sparkles"},"fix":{"range":[1198,1206],"text":""},"desc":"Remove unused variable 'sparkles'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setSparkles' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":32,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSparkles"},"fix":{"range":[1206,1219],"text":""},"desc":"Remove unused variable 'setSparkles'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/MoonOrbit.jsx\r\n// Moon Atmosphere FX ΓÇö realistic-mystical light behavior\r\n// 3-Layer System: Atmospheric Halo + Ghost Echo Arc + Phase Rimlight\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { useLunarStore } from '../state/lunarStore';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\nimport { MoonGlowLayer } from './MoonGlowLayer';\r\nimport './moonAnimations.css';\r\n\r\nconst TWO_PI = Math.PI * 2;\r\n\r\n// Normalize angle to 0-2╧Ç range\r\nfunction normalizeAngle(angle) {\r\n    const a = angle % TWO_PI;\r\n    return a < 0 ? a + TWO_PI : a;\r\n}\r\n\r\n/**\r\n * MoonOrbit ΓÇö Atmospheric moon with volumetric light behavior\r\n */\r\nexport function MoonOrbit({ avatarRadius = 138, centerX = 300, centerY = 300 }) {\r\n    const progress = useLunarStore(s => s.progress);\r\n    const recentActivity = useLunarStore(s => s.recentActivity);\r\n    const sparkleMode = useLunarStore(s => s.sparkleMode);\r\n\r\n    // Track previous progress for ghost echo\r\n    const prevProgressRef = useRef(progress);\r\n    const prevAngleRef = useRef(null);\r\n    const [ghostEcho, setGhostEcho] = useState(null);\r\n    const [isWobbling, setIsWobbling] = useState(false);\r\n    const [sparkles, setSparkles] = useState([]);\r\n\r\n    // Detect progress changes for animations\r\n    useEffect(() => {\r\n        const prevProgress = prevProgressRef.current;\r\n        const prevAngle = (prevProgress / 12) * TWO_PI - Math.PI / 2;\r\n        const newAngle = (progress / 12) * TWO_PI - Math.PI / 2;\r\n\r\n        if (progress > prevProgress) {\r\n            // Trigger ghost echo\r\n            setGhostEcho({\r\n                startAngle: prevAngle,\r\n                endAngle: newAngle,\r\n                key: Date.now(),\r\n            });\r\n            // Trigger wobble\r\n            setIsWobbling(true);\r\n            setTimeout(() => setIsWobbling(false), 600);\r\n            // Clear ghost after animation\r\n            setTimeout(() => setGhostEcho(null), 500);\r\n        }\r\n\r\n        prevProgressRef.current = progress;\r\n        prevAngleRef.current = newAngle;\r\n    }, [progress]);\r\n\r\n    const isLight = useDisplayModeStore(s => s.colorScheme === 'light');\r\n\r\n    const moonAngle = (progress / 12) * TWO_PI - Math.PI / 2; // Start at 12 o'clock\r\n    const phase = getMoonPhase(progress);\r\n    const orbitRadius = avatarRadius * 1.4;\r\n    const moonRadius = 8;\r\n\r\n    // Moon position\r\n    const moonX = centerX + Math.cos(moonAngle) * orbitRadius;\r\n    const moonY = centerY + Math.sin(moonAngle) * orbitRadius;\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // LIGHT MODE: Return nothing - no SVG elements\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    if (isLight) {\r\n        return null;\r\n    }\r\n\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    // RENDER PATH: DARK MODE (Volumetric Cosmic)\r\n    // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n    const illumination = getIllumination(phase);\r\n    const isDormant = progress === 0;\r\n    const haloRadius = moonRadius * (1.5 + illumination * 0.5);\r\n    const haloOpacity = isDormant ? 0 : (0.12 + illumination * 0.08);\r\n    const rimlightWidth = 0.5 + illumination * 2;\r\n    const rimlightOpacity = 0.3 + illumination * 0.5;\r\n\r\n    return (\r\n        <g className=\"moon-orbit-dark\">\r\n            <defs>\r\n                <radialGradient id=\"moonHaloGradient\" cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n                    <stop offset=\"0%\" stopColor=\"var(--accent-color)\" stopOpacity=\"0.4\" />\r\n                    <stop offset=\"40%\" stopColor=\"var(--accent-color)\" stopOpacity=\"0.15\" />\r\n                    <stop offset=\"100%\" stopColor=\"var(--accent-color)\" stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id=\"rimlightBlur\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"1\" />\r\n                </filter>\r\n                <filter id=\"ghostBlur\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"2\" />\r\n                </filter>\r\n            </defs>\r\n\r\n            {/* Orbit Path */}\r\n            <circle\r\n                cx={centerX}\r\n                cy={centerY}\r\n                r={orbitRadius}\r\n                fill=\"none\"\r\n                stroke=\"var(--accent-color)\"\r\n                strokeWidth={1}\r\n                strokeOpacity={0.08}\r\n            />\r\n\r\n            {/* Ghost Echo */}\r\n            {ghostEcho && (\r\n                <path\r\n                    key={ghostEcho.key}\r\n                    d={describeArc(centerX, centerY, orbitRadius, ghostEcho.startAngle, ghostEcho.endAngle)}\r\n                    fill=\"none\"\r\n                    stroke=\"rgba(255, 250, 240, 0.3)\"\r\n                    strokeWidth={2}\r\n                    strokeLinecap=\"round\"\r\n                    filter=\"url(#ghostBlur)\"\r\n                    className=\"ghost-echo-arc\"\r\n                />\r\n            )}\r\n\r\n            {/* Atmospheric Halo */}\r\n            <circle\r\n                cx={moonX}\r\n                cy={moonY}\r\n                r={haloRadius}\r\n                fill=\"url(#moonHaloGradient)\"\r\n                opacity={haloOpacity}\r\n                className={`moon-star-breathe ${isWobbling ? 'moon-halo-wobble' : ''}`}\r\n            />\r\n\r\n            {/* Core Glow */}\r\n            <circle\r\n                cx={moonX}\r\n                cy={moonY}\r\n                r={haloRadius * 0.6}\r\n                fill=\"var(--accent-color)\"\r\n                opacity={haloOpacity * 0.4}\r\n                className={`moon-star-breathe ${isWobbling ? 'moon-halo-wobble' : ''}`}\r\n            />\r\n\r\n            {/* Phase Rimlight */}\r\n            {!isDormant && (\r\n                <circle\r\n                    cx={moonX}\r\n                    cy={moonY}\r\n                    r={moonRadius + 1}\r\n                    fill=\"none\"\r\n                    stroke=\"rgba(255, 250, 240, 0.7)\"\r\n                    strokeWidth={rimlightWidth}\r\n                    strokeOpacity={rimlightOpacity}\r\n                    filter=\"url(#rimlightBlur)\"\r\n                />\r\n            )}\r\n\r\n            {/* Standard MoonGlowLayer (fallback/combined) */}\r\n            <MoonGlowLayer\r\n                progress={progress}\r\n                centerX={centerX}\r\n                centerY={centerY}\r\n                orbitRadius={orbitRadius}\r\n            />\r\n\r\n            {/* Phase shadows... */}\r\n            {phase === 'firstQuarter' && (\r\n                <ellipse cx={moonX - moonRadius * 0.3} cy={moonY} rx={moonRadius * 0.7} ry={moonRadius} fill=\"rgba(10, 10, 18, 0.75)\" />\r\n            )}\r\n            {phase === 'lastQuarter' && (\r\n                <ellipse cx={moonX + moonRadius * 0.3} cy={moonY} rx={moonRadius * 0.7} ry={moonRadius} fill=\"rgba(10, 10, 18, 0.75)\" />\r\n            )}\r\n            {phase === 'new' && (\r\n                <ellipse cx={moonX + moonRadius * 0.4} cy={moonY} rx={moonRadius * 0.8} ry={moonRadius} fill=\"rgba(10, 10, 18, 0.85)\" />\r\n            )}\r\n        </g>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// HELPER FUNCTIONS\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n\r\nfunction getMoonPhase(progress) {\r\n    if (progress === 0) return 'new';\r\n    if (progress < 4) return 'crescent';\r\n    if (progress < 6) return 'firstQuarter';\r\n    if (progress < 9) return 'full';\r\n    return 'lastQuarter';\r\n}\r\n\r\nfunction getIllumination(phase) {\r\n    return {\r\n        new: 0.15,\r\n        firstQuarter: 0.5,\r\n        full: 1.0,\r\n        lastQuarter: 0.5,\r\n    }[phase];\r\n}\r\n\r\nfunction describeArc(cx, cy, r, startAngle, endAngle) {\r\n    let start = normalizeAngle(startAngle);\r\n    let end = normalizeAngle(endAngle);\r\n\r\n    // Handle wrap-around\r\n    if (end <= start) {\r\n        end += TWO_PI;\r\n    }\r\n\r\n    // If no meaningful arc, return empty\r\n    if (end - start < 0.01) return '';\r\n\r\n    const startPoint = {\r\n        x: cx + Math.cos(start) * r,\r\n        y: cy + Math.sin(start) * r,\r\n    };\r\n    const endPoint = {\r\n        x: cx + Math.cos(end) * r,\r\n        y: cy + Math.sin(end) * r,\r\n    };\r\n    const largeArc = (end - start) > Math.PI ? 1 : 0;\r\n\r\n    return `M ${startPoint.x} ${startPoint.y} A ${r} ${r} 0 ${largeArc} 1 ${endPoint.x} ${endPoint.y}`;\r\n}\r\n\r\nexport default MoonOrbit;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\NavigationSection.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'previewAttention' is defined but never used.","line":17,"column":96,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":112,"suggestions":[{"messageId":"removeVar","data":{"varName":"previewAttention"},"fix":{"range":[968,986],"text":""},"desc":"Remove unused variable 'previewAttention'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onOpenHardwareGuide' is defined but never used.","line":17,"column":126,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":145,"suggestions":[{"messageId":"removeVar","data":{"varName":"onOpenHardwareGuide"},"fix":{"range":[998,1019],"text":""},"desc":"Remove unused variable 'onOpenHardwareGuide'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/NavigationSection.jsx\r\nimport React, { useRef, useState } from 'react';\r\nimport { useNavigationStore } from '../state/navigationStore.js';\r\nimport { PathSelectionGrid } from './PathSelectionGrid.jsx';\r\nimport { PathOverviewPanel } from './PathOverviewPanel.jsx';\r\nimport { ActivePathState } from './ActivePathState.jsx';\r\nimport { FoundationCard } from './FoundationCard.jsx';\r\nimport { PathFinderCard } from './PathFinderCard.jsx';\r\nimport { CodexChamber } from './Codex/CodexChamber.jsx';\r\nimport { Avatar } from './avatar';\r\nimport { StageTitle } from './StageTitle.jsx';\r\nimport { NavigationSelectionModal } from './NavigationSelectionModal.jsx';\r\nimport { ConsistencyFoundation } from './Cycle/ConsistencyFoundation.jsx';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { getPathById } from '../data/navigationData.js';\r\n\r\nexport function NavigationSection({ onStageChange, currentStage, previewPath, previewShowCore, previewAttention, onNavigate, onOpenHardwareGuide }) {\r\n  const { selectedPathId, activePath } = useNavigationStore();\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n  const pathGridRef = useRef(null);\r\n  const [showCodex, setShowCodex] = useState(false);\r\n  const [navModalOpen, setNavModalOpen] = useState(false);\r\n\r\n  const handlePathRecommended = (pathId) => {\r\n    if (pathId && pathGridRef.current) {\r\n      // Scroll to path grid with smooth behavior\r\n      pathGridRef.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'nearest'\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-6xl mx-auto space-y-8 pb-12\">\r\n      {/* Avatar - consistent across sections */}\r\n      <div className=\"flex flex-col items-center pt-8\">\r\n        <div style={{ transform: 'scale(0.65)' }}>\r\n          <Avatar mode=\"navigation\" onStageChange={onStageChange} stage={currentStage} path={previewPath} showCore={previewShowCore} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Cycle & Consistency System */}\r\n      <div className=\"space-y-4 pt-4\">\r\n        <ConsistencyFoundation />\r\n      </div>\r\n\r\n      {/* The Threshold - Foundation & Path Finder (only show if no active path) */}\r\n      {!activePath && (\r\n        <div className=\"space-y-6 pt-8\">\r\n          {/* Foundation Card */}\r\n          <FoundationCard />\r\n\r\n          {/* Ornamental Divider */}\r\n          <div className=\"flex items-center justify-center py-2\">\r\n            <div className=\"flex items-center gap-4\" style={{ color: isLight ? 'rgba(180, 140, 90, 0.3)' : 'var(--accent-30)' }}>\r\n              <div className={`w-32 h-[1px] bg-gradient-to-r from-transparent ${isLight ? 'to-[rgba(180,140,90,0.4)]' : 'to-[var(--accent-30)]'}`} />\r\n              <div style={{ fontSize: '12px' }}>Γùå</div>\r\n              <div className={`w-32 h-[1px] bg-gradient-to-l from-transparent ${isLight ? 'to-[rgba(180,140,90,0.4)]' : 'to-[var(--accent-30)]'}`} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Path Finder Card */}\r\n          <PathFinderCard onPathRecommended={handlePathRecommended} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Navigation Selector - Dropdown Style (matching practice menu) */}\r\n      <div className=\"mb-6\" style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '12px' }}>\r\n        {/* Text prompt above button */}\r\n        <div\r\n          style={{\r\n            fontFamily: 'var(--font-body)',\r\n            fontSize: '11px',\r\n            letterSpacing: 'var(--tracking-wide)',\r\n            color: isLight ? 'rgba(90, 77, 60, 0.5)' : 'rgba(253,251,245,0.4)',\r\n            textTransform: 'uppercase',\r\n            fontStyle: 'italic'\r\n          }}\r\n        >\r\n          Choose direction. Progress deliberately.\r\n        </div>\r\n        <button\r\n          onClick={() => setNavModalOpen(true)}\r\n          className=\"px-6 py-3 rounded-full\"\r\n          style={{\r\n            fontFamily: 'var(--font-display)',\r\n            fontSize: '12px',\r\n            fontWeight: 500,\r\n            letterSpacing: 'var(--tracking-wide)',\r\n            color: isLight ? (showCodex ? 'rgba(140, 100, 40, 1)' : 'rgba(180, 120, 40, 1)') : (showCodex ? 'rgba(220, 210, 180, 1)' : '#F5D18A'),\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '12px',\r\n            background: isLight\r\n              ? 'rgba(255, 255, 255, 0.4)'\r\n              : 'linear-gradient(135deg, rgba(255,255,255,0.08) 0%, transparent 100%)',\r\n            border: isLight\r\n              ? (showCodex ? '1px solid rgba(140, 100, 40, 0.4)' : '1px solid rgba(180, 140, 90, 0.4)')\r\n              : (showCodex ? '1px solid rgba(220, 210, 180, 0.4)' : '1px solid rgba(250, 208, 120, 0.4)'),\r\n            boxShadow: isLight\r\n              ? '0 4px 12px rgba(180, 140, 90, 0.1)'\r\n              : (showCodex\r\n                ? '0 0 25px rgba(220, 210, 180, 0.15), inset 0 0 20px rgba(220, 210, 180, 0.08)'\r\n                : '0 0 25px rgba(250, 208, 120, 0.15), inset 0 0 20px rgba(250, 208, 120, 0.08)'),\r\n            transform: navModalOpen ? 'scale(1.06)' : 'scale(1)',\r\n            transition: 'transform 300ms ease-out, background 300ms ease-out, box-shadow 300ms ease-out',\r\n          }}\r\n        >\r\n          <span>{showCodex ? 'Γùê Compass' : 'Γùç Paths'}</span>\r\n          {/* Chevron */}\r\n          <span\r\n            style={{\r\n              fontSize: '10px',\r\n              transform: navModalOpen ? 'rotate(180deg)' : 'rotate(0deg)',\r\n              transition: 'transform 200ms ease-out',\r\n            }}\r\n          >\r\n            Γû╝\r\n          </span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Content Container */}\r\n      <div>\r\n        {/* Simple conditional rendering - no complex crossfade */}\r\n        {showCodex ? (\r\n          <CodexChamber onClose={() => setShowCodex(false)} onNavigate={onNavigate} />\r\n        ) : (\r\n          <div className=\"space-y-6\" ref={pathGridRef}>\r\n            {/* Path Selection Grid - always visible */}\r\n            <PathSelectionGrid />\r\n\r\n            {/* Path panels - simple conditional */}\r\n            {activePath ? (\r\n              <ActivePathState />\r\n            ) : selectedPathId ? (\r\n              <PathOverviewPanel\r\n                path={getPathById(selectedPathId)}\r\n                onClose={() => useNavigationStore.getState().setSelectedPath(null)}\r\n              />\r\n            ) : (\r\n              <div className=\"text-center py-12\">\r\n                <p\r\n                  className=\"text-sm italic font-medium\"\r\n                  style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    letterSpacing: '0.01em',\r\n                    color: isLight ? 'rgba(90, 77, 60, 0.5)' : 'rgba(253,251,245,0.5)'\r\n                  }}\r\n                >\r\n                  Select a path to view details and begin your journey\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Navigation Selection Modal */}\r\n      <NavigationSelectionModal\r\n        isOpen={navModalOpen}\r\n        onClose={() => setNavModalOpen(false)}\r\n        currentView={showCodex ? 'compass' : 'paths'}\r\n        onSelectView={(view) => setShowCodex(view === 'compass')}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\NavigationSelectionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\OculusRing.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is assigned a value but never used.","line":9,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"progress"},"fix":{"range":[222,241],"text":""},"desc":"Remove unused variable 'progress'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'accentColor' is assigned a value but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"accentColor"},"fix":{"range":[309,351],"text":""},"desc":"Remove unused variable 'accentColor'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/OculusRing.jsx\r\n// The \"Targeting Frame\" - SVG-based HUD ring with breathing animation\r\n\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nexport function OculusRing({\r\n    children,\r\n    size = 300,\r\n    progress = 0, // 0-1 for step progress\r\n    totalSteps = 4,\r\n    currentStep = 0,\r\n    accentColor = 'var(--accent-color)',\r\n    breathDuration = 6, // 6-second breath cycle\r\n}) {\r\n    // Breathing animation state (0 to 1, where 0.5 is neutral)\r\n    const [breathPhase, setBreathPhase] = useState(0);\r\n\r\n    useEffect(() => {\r\n        let animationFrame;\r\n        const startTime = Date.now();\r\n\r\n        const animate = () => {\r\n            const elapsed = (Date.now() - startTime) / 1000;\r\n            // Sine wave from 0 to 1 over the breath duration\r\n            const phase = (Math.sin((elapsed / breathDuration) * Math.PI * 2) + 1) / 2;\r\n            setBreathPhase(phase);\r\n            animationFrame = requestAnimationFrame(animate);\r\n        };\r\n\r\n        animate();\r\n        return () => cancelAnimationFrame(animationFrame);\r\n    }, [breathDuration]);\r\n\r\n    // Calculate breathing effects\r\n    const breathScale = 1 + breathPhase * 0.03; // Subtle 3% expansion\r\n    const breathOpacity = 0.6 + breathPhase * 0.4; // 60% to 100% opacity\r\n    const glowIntensity = 1 + breathPhase * 1.5; // Glow pulsing\r\n\r\n    // Calculate step positions around the ring (4 cardinal + additional steps)\r\n    const stepAngles = Array.from({ length: totalSteps }, (_, i) =>\r\n        (i / totalSteps) * 360 - 90 // Start from top (-90 degrees)\r\n    );\r\n\r\n    return (\r\n        <div\r\n            className=\"relative flex items-center justify-center\"\r\n            style={{ width: size, height: size }}\r\n        >\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                ECLIPSE RIM - Ancient Artifact Physical Ring\r\n                Using CSS shadows for volume instead of flat SVG lines\r\n            ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n\r\n            {/* Base \"Obsidian\" Ring Body */}\r\n            <div\r\n                className=\"absolute rounded-full\"\r\n                style={{\r\n                    width: '92%',\r\n                    height: '92%',\r\n                    background: 'linear-gradient(135deg, rgba(20,20,30,0.4) 0%, rgba(5,5,10,0.6) 100%)',\r\n                    border: '1px solid rgba(255,215,0,0.1)',\r\n                    boxShadow: `\r\n                        0 0 0 1px rgba(0,0,0,0.8),                /* Outer edge definition */\r\n                        inset 0 0 20px rgba(0,0,0,0.9),           /* Inner depth */\r\n                        0 0 ${20 * glowIntensity}px rgba(255, 200, 100, ${0.1 * breathPhase}) /* Breathing subtle ambient glow */\r\n                    `,\r\n                    backdropFilter: 'blur(4px)',\r\n                    transform: `scale(${breathScale})`,\r\n                    transition: 'transform 0.1s ease-out, box-shadow 0.1s ease-out',\r\n                }}\r\n            />\r\n\r\n            {/* The \"Golden Wire\" - Fine metal rim */}\r\n            <div\r\n                className=\"absolute rounded-full pointer-events-none\"\r\n                style={{\r\n                    width: '92%',\r\n                    height: '92%',\r\n                    border: '1px solid rgba(253, 224, 71, 0.4)', // Amber-gold\r\n                    boxShadow: `\r\n                        inset 0 0 10px rgba(253, 224, 71, 0.2),\r\n                        0 0 ${10 * glowIntensity}px rgba(253, 224, 71, ${0.3 * breathOpacity})\r\n                    `,\r\n                    opacity: 0.8,\r\n                    transform: `scale(${breathScale})`,\r\n                    transition: 'all 0.1s ease-out',\r\n                }}\r\n            />\r\n\r\n            {/* Inner \"Void\" Bezel - Creates the recessed lens look */}\r\n            <div\r\n                className=\"absolute rounded-full pointer-events-none\"\r\n                style={{\r\n                    width: '84%',\r\n                    height: '84%',\r\n                    boxShadow: 'inset 0 0 20px 5px rgba(0,0,0,0.9)', // Deep inner shadow\r\n                    border: '1px solid rgba(255,255,255,0.05)',\r\n                    transform: `scale(${breathScale})`,\r\n                    transition: 'transform 0.1s ease-out',\r\n                }}\r\n            />\r\n\r\n            {/* ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n                 GEMSTONE INDICATORS - Physical Step Markers\r\n            ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ */}\r\n            <div className=\"absolute inset-0 pointer-events-none\" style={{ transform: `scale(${breathScale})`, transition: 'transform 0.1s ease-out' }}>\r\n                {stepAngles.map((angle, i) => {\r\n                    const radian = (angle * Math.PI) / 180;\r\n                    const radiusPercent = 46; // Matches the 92% width ring (46% radius)\r\n                    const xPercent = 50 + Math.cos(radian) * radiusPercent;\r\n                    const yPercent = 50 + Math.sin(radian) * radiusPercent;\r\n\r\n                    const isCompleted = i < currentStep;\r\n                    const isCurrent = i === currentStep;\r\n\r\n                    return (\r\n                        <div\r\n                            key={i}\r\n                            className=\"absolute rounded-full flex items-center justify-center\"\r\n                            style={{\r\n                                left: `${xPercent}%`,\r\n                                top: `${yPercent}%`,\r\n                                width: isCurrent ? '12px' : '8px',\r\n                                height: isCurrent ? '12px' : '8px',\r\n                                transform: 'translate(-50%, -50%)',\r\n                                background: isCompleted || isCurrent\r\n                                    ? 'radial-gradient(circle at 30% 30%, #fff 0%, #fbbf24 30%, #92400e 100%)' // PBR Gold Gem\r\n                                    : 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, rgba(100,100,100,0.2) 100%)', // Dull Glass\r\n                                boxShadow: isCurrent\r\n                                    ? `0 0 10px #fbbf24, 0 0 20px rgba(251, 191, 36, 0.4)` // Active Glow\r\n                                    : 'inset 0 1px 2px rgba(0,0,0,0.5)',\r\n                                border: '1px solid rgba(0,0,0,0.5)',\r\n                                zIndex: 10,\r\n                                transition: 'all 0.5s ease-out'\r\n                            }}\r\n                        />\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* The Content Layer (Image/Icon goes here) - NOW TRANSPARENT */}\r\n            <div\r\n                className=\"relative z-10 rounded-full overflow-hidden flex items-center justify-center\"\r\n                style={{\r\n                    width: '76%', // Matches inner void\r\n                    height: '76%',\r\n                    pointerEvents: 'none', // Let clicks pass through\r\n                }}\r\n            >\r\n                <div style={{ pointerEvents: 'auto', width: '100%', height: '100%' }}>\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathBadges.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathCeremony.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  38 |     // Check if share is available\n  39 |     useEffect(() => {\n> 40 |         setCanShare(!!navigator.share || !!navigator.clipboard);\n     |         ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  41 |     }, []);\n  42 |\n  43 |     // Show ceremony when pendingCeremony changes","line":40,"column":9,"nodeType":null,"endLine":40,"endColumn":20},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  44 |     useEffect(() => {\n  45 |         if (pendingCeremony) {\n> 46 |             setIsVisible(true);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  47 |             setAnimationPhase('entering');\n  48 |\n  49 |             // Play audio","line":46,"column":13,"nodeType":null,"endLine":46,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PathCeremony.jsx\r\n// Full-screen ceremonial modal for path emergence and shift\r\n\r\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\r\nimport { usePathStore, PATH_SYMBOLS, PATH_NAMES } from '../state/pathStore';\r\nimport { getEmergenceText, getFullShiftText } from '../data/pathDescriptions';\r\nimport { Avatar } from './avatar';\r\n\r\n/**\r\n * PathCeremony ΓÇö A full-screen ceremonial modal\r\n * \r\n * Displays when:\r\n * - Path first emerges (90 days)\r\n * - Path shifts (180 days of new pattern)\r\n * \r\n * Features:\r\n * - Full-screen overlay with dimmed backdrop\r\n * - Avatar with transitioning FX\r\n * - Path symbol + name\r\n * - Narrative text\r\n * - Audio (15s ceremony music)\r\n * - Share button (captures screenshot)\r\n * - Continue button\r\n */\r\n\r\nconst CEREMONY_AUDIO_PATH = `${import.meta.env.BASE_URL}assets/audio/path-ceremony-transition.mp3`;\r\n\r\nexport function PathCeremony({ stage = 'flame' }) {\r\n    const pendingCeremony = usePathStore(s => s.pendingCeremony);\r\n    const dismissCeremony = usePathStore(s => s.dismissCeremony);\r\n\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [animationPhase, setAnimationPhase] = useState('entering'); // entering | revealed | exiting\r\n    const [canShare, setCanShare] = useState(false);\r\n    const audioRef = useRef(null);\r\n    const containerRef = useRef(null);\r\n\r\n    // Check if share is available\r\n    useEffect(() => {\r\n        setCanShare(!!navigator.share || !!navigator.clipboard);\r\n    }, []);\r\n\r\n    // Show ceremony when pendingCeremony changes\r\n    useEffect(() => {\r\n        if (pendingCeremony) {\r\n            setIsVisible(true);\r\n            setAnimationPhase('entering');\r\n\r\n            // Play audio\r\n            if (audioRef.current) {\r\n                audioRef.current.currentTime = 0;\r\n                audioRef.current.play().catch(() => {\r\n                    // Audio autoplay may be blocked ΓÇö that's fine\r\n                });\r\n            }\r\n\r\n            // Transition to revealed phase\r\n            const timer = setTimeout(() => {\r\n                setAnimationPhase('revealed');\r\n            }, 800);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [pendingCeremony]);\r\n\r\n    // Handle continue click\r\n    const handleContinue = useCallback(() => {\r\n        setAnimationPhase('exiting');\r\n\r\n        // Stop audio\r\n        if (audioRef.current) {\r\n            audioRef.current.pause();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            setIsVisible(false);\r\n            dismissCeremony();\r\n        }, 500);\r\n    }, [dismissCeremony]);\r\n\r\n    // Handle share\r\n    const handleShare = useCallback(async () => {\r\n        if (!pendingCeremony) return;\r\n\r\n        const { type, path, previousPath } = pendingCeremony;\r\n        const stageName = stage.charAt(0).toUpperCase() + stage.slice(1);\r\n        const pathName = PATH_NAMES[path];\r\n        const symbol = PATH_SYMBOLS[path];\r\n\r\n        const shareText = type === 'emergence'\r\n            ? `My path has emerged: ${stageName} - ${pathName} Path ${symbol}\\n\\n#ImmanenceOS #Consciousness`\r\n            : `My path has shifted: ${PATH_NAMES[previousPath]} ΓåÆ ${pathName} ${symbol}\\n\\n#ImmanenceOS #Consciousness`;\r\n\r\n        try {\r\n            if (navigator.share) {\r\n                await navigator.share({\r\n                    title: 'Immanence OS - Path Ceremony',\r\n                    text: shareText,\r\n                });\r\n            } else if (navigator.clipboard) {\r\n                await navigator.clipboard.writeText(shareText);\r\n                // Could show a toast here\r\n            }\r\n        } catch (e) {\r\n            console.log('Share cancelled or failed:', e);\r\n        }\r\n    }, [pendingCeremony, stage]);\r\n\r\n    // Don't render if not visible\r\n    if (!isVisible || !pendingCeremony) {\r\n        return null;\r\n    }\r\n\r\n    const { type, path, previousPath } = pendingCeremony;\r\n    const symbol = PATH_SYMBOLS[path];\r\n    const pathName = PATH_NAMES[path];\r\n    const stageName = stage.charAt(0).toUpperCase() + stage.slice(1);\r\n\r\n    // Get ceremony text\r\n    let narrativeText = '';\r\n    if (type === 'emergence') {\r\n        narrativeText = getEmergenceText(path);\r\n    } else if (type === 'shift') {\r\n        const { fromText, toText } = getFullShiftText(previousPath, path);\r\n        narrativeText = `${fromText}\\n\\n${toText}`;\r\n    }\r\n\r\n    const title = type === 'emergence' ? 'YOUR PATH EMERGES' : 'A SHIFT EMERGES';\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className={`path-ceremony-overlay ${animationPhase}`}\r\n            style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                zIndex: 10000,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                background: 'radial-gradient(ellipse at center, rgba(10, 10, 18, 0.98) 0%, rgba(5, 5, 8, 0.99) 100%)',\r\n                opacity: animationPhase === 'exiting' ? 0 : 1,\r\n                transition: 'opacity 0.5s ease-out',\r\n                padding: '2rem',\r\n                overflow: 'auto',\r\n            }}\r\n        >\r\n            {/* Audio element */}\r\n            <audio ref={audioRef} src={CEREMONY_AUDIO_PATH} preload=\"auto\" />\r\n\r\n            {/* Title */}\r\n            <h1\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontWeight: 700,\r\n                    fontSize: '1.25rem',\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    color: 'var(--accent-color, #fcd34d)',\r\n                    marginBottom: '2rem',\r\n                    opacity: animationPhase === 'entering' ? 0 : 1,\r\n                    transform: animationPhase === 'entering' ? 'translateY(-20px)' : 'translateY(0)',\r\n                    transition: 'all 0.8s ease-out 0.2s',\r\n                    textTransform: 'uppercase'\r\n                }}\r\n            >\r\n                {title}\r\n            </h1>\r\n\r\n            {/* Avatar */}\r\n            <div\r\n                style={{\r\n                    opacity: animationPhase === 'entering' ? 0 : 1,\r\n                    transform: animationPhase === 'entering' ? 'scale(0.8)' : 'scale(1)',\r\n                    transition: 'all 0.8s ease-out 0.4s',\r\n                    marginBottom: '1.5rem',\r\n                }}\r\n            >\r\n                <Avatar\r\n                    mode=\"home\"\r\n                    stage={stage}\r\n                    path={path}\r\n                    showCore={false}\r\n                />\r\n            </div>\r\n\r\n            {/* Stage and Path */}\r\n            <div\r\n                style={{\r\n                    textAlign: 'center',\r\n                    marginBottom: '2rem',\r\n                    opacity: animationPhase === 'entering' ? 0 : 1,\r\n                    transition: 'opacity 0.8s ease-out 0.6s',\r\n                }}\r\n            >\r\n                <div\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontSize: '1.5rem',\r\n                        fontWeight: 700,\r\n                        letterSpacing: 'var(--tracking-wide)',\r\n                        color: 'var(--accent-color, #fcd34d)',\r\n                        marginBottom: '0.25rem',\r\n                    }}\r\n                >\r\n                    {stageName.toUpperCase()}\r\n                </div>\r\n                <div\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        fontSize: '1.125rem',\r\n                        color: 'rgba(255, 255, 255, 0.8)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        gap: '0.5rem',\r\n                    }}\r\n                >\r\n                    <span style={{ fontSize: '1.5rem' }}>{symbol}</span>\r\n                    <span>{pathName} Path</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Shift indicator (if shift ceremony) */}\r\n            {type === 'shift' && previousPath && (\r\n                <div\r\n                    style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '1rem',\r\n                        marginBottom: '1.5rem',\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        color: 'rgba(255, 255, 255, 0.6)',\r\n                        fontSize: '1rem',\r\n                        opacity: animationPhase === 'entering' ? 0 : 1,\r\n                        transition: 'opacity 0.8s ease-out 0.7s',\r\n                    }}\r\n                >\r\n                    <span>{PATH_SYMBOLS[previousPath]}</span>\r\n                    <span>ΓåÆ</span>\r\n                    <span style={{ color: 'var(--accent-color, #fcd34d)' }}>{symbol}</span>\r\n                </div>\r\n            )}\r\n\r\n            {/* Divider */}\r\n            <div\r\n                style={{\r\n                    width: '80%',\r\n                    maxWidth: '400px',\r\n                    height: '1px',\r\n                    background: 'linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)',\r\n                    marginBottom: '1.5rem',\r\n                    opacity: animationPhase === 'entering' ? 0 : 1,\r\n                    transition: 'opacity 0.8s ease-out 0.7s',\r\n                }}\r\n            />\r\n\r\n            {/* Narrative text */}\r\n            <div\r\n                style={{\r\n                    maxWidth: '500px',\r\n                    textAlign: 'center',\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontWeight: 500,\r\n                    letterSpacing: '0.01em',\r\n                    fontSize: '1rem',\r\n                    lineHeight: 1.8,\r\n                    color: 'rgba(255, 255, 255, 0.85)',\r\n                    marginBottom: '2rem',\r\n                    whiteSpace: 'pre-wrap',\r\n                    opacity: animationPhase === 'entering' ? 0 : 1,\r\n                    transition: 'opacity 0.8s ease-out 0.9s',\r\n                }}\r\n            >\r\n                {narrativeText}\r\n            </div>\r\n\r\n            {/* Buttons */}\r\n            <div\r\n                style={{\r\n                    display: 'flex',\r\n                    gap: '1rem',\r\n                    opacity: animationPhase === 'entering' ? 0 : 1,\r\n                    transition: 'opacity 0.8s ease-out 1.1s',\r\n                }}\r\n            >\r\n                {canShare && (\r\n                    <button\r\n                        onClick={handleShare}\r\n                        style={{\r\n                            padding: '0.75rem 1.5rem',\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 700,\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            fontSize: '0.875rem',\r\n                            background: 'transparent',\r\n                            border: '1px solid rgba(255, 255, 255, 0.3)',\r\n                            borderRadius: '2rem',\r\n                            color: 'rgba(255, 255, 255, 0.8)',\r\n                            cursor: 'pointer',\r\n                            transition: 'all 0.2s ease',\r\n                        }}\r\n                        onMouseEnter={e => {\r\n                            e.target.style.borderColor = 'var(--accent-color, #fcd34d)';\r\n                            e.target.style.color = 'var(--accent-color, #fcd34d)';\r\n                        }}\r\n                        onMouseLeave={e => {\r\n                            e.target.style.borderColor = 'rgba(255, 255, 255, 0.3)';\r\n                            e.target.style.color = 'rgba(255, 255, 255, 0.8)';\r\n                        }}\r\n                    >\r\n                        Share\r\n                    </button>\r\n                )}\r\n                <button\r\n                    onClick={handleContinue}\r\n                    style={{\r\n                        padding: '0.75rem 2rem',\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 700,\r\n                        letterSpacing: 'var(--tracking-wide)',\r\n                        fontSize: '0.875rem',\r\n                        background: 'var(--ui-button-gradient, linear-gradient(135deg, #fcd34d, #f59e0b))',\r\n                        border: 'none',\r\n                        borderRadius: '2rem',\r\n                        color: '#050508',\r\n                        cursor: 'pointer',\r\n                        transition: 'transform 0.2s ease',\r\n                    }}\r\n                    onMouseEnter={e => {\r\n                        e.target.style.transform = 'scale(1.05)';\r\n                    }}\r\n                    onMouseLeave={e => {\r\n                        e.target.style.transform = 'scale(1)';\r\n                    }}\r\n                >\r\n                    Continue\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PathCeremony;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathFinderCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathFormingIndicator.jsx","messages":[{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":56,"column":21,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":56,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PathFormingIndicator.jsx\r\n// Shows progress during first 90 days before path emerges\r\n\r\nimport React from 'react';\r\nimport { usePathStore, PATH_SYMBOLS, PATH_NAMES } from '../state/pathStore';\r\n\r\n/**\r\n * PathFormingIndicator ΓÇö Display for users in their first 90 days\r\n * \r\n * Shows:\r\n * - Progress ring toward path emergence\r\n * - Dominant tendency preview\r\n * - \"This may change\" disclaimer\r\n */\r\nexport function PathFormingIndicator({ compact = false }) {\r\n    const pathStatus = usePathStore(s => s.pathStatus);\r\n    const getFormingInfo = usePathStore(s => s.getFormingInfo);\r\n\r\n    // Only show if still forming\r\n    if (pathStatus !== 'forming') {\r\n        return null;\r\n    }\r\n\r\n    const { daysUntilEmergence, dominantTendency, progress } = getFormingInfo();\r\n\r\n    const ringSize = compact ? 60 : 100;\r\n    const strokeWidth = compact ? 4 : 6;\r\n    const radius = (ringSize - strokeWidth) / 2;\r\n    const circumference = 2 * Math.PI * radius;\r\n    const strokeDashoffset = circumference * (1 - progress);\r\n\r\n    const symbol = dominantTendency ? PATH_SYMBOLS[dominantTendency] : 'Γùï';\r\n    const tendencyName = dominantTendency ? PATH_NAMES[dominantTendency] : null;\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                gap: compact ? '0.5rem' : '1rem',\r\n                padding: compact ? '0.75rem' : '1.5rem',\r\n                background: 'rgba(255, 255, 255, 0.03)',\r\n                borderRadius: '1rem',\r\n                border: '1px solid rgba(255, 255, 255, 0.06)',\r\n            }}\r\n        >\r\n            {/* Title */}\r\n            <div\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontWeight: 700,\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    fontSize: compact ? '0.75rem' : '0.875rem',\r\n                    color: 'rgba(255, 255, 255, 0.6)',\r\n                    letterSpacing: '0.1em',\r\n                    textTransform: 'uppercase',\r\n                }}\r\n            >\r\n                Path Forming\r\n            </div>\r\n\r\n            {/* Progress Ring */}\r\n            <div style={{ position: 'relative', width: ringSize, height: ringSize }}>\r\n                <svg width={ringSize} height={ringSize} style={{ transform: 'rotate(-90deg)' }}>\r\n                    {/* Background ring */}\r\n                    <circle\r\n                        cx={ringSize / 2}\r\n                        cy={ringSize / 2}\r\n                        r={radius}\r\n                        fill=\"none\"\r\n                        stroke=\"rgba(255, 255, 255, 0.1)\"\r\n                        strokeWidth={strokeWidth}\r\n                    />\r\n                    {/* Progress ring */}\r\n                    <circle\r\n                        cx={ringSize / 2}\r\n                        cy={ringSize / 2}\r\n                        r={radius}\r\n                        fill=\"none\"\r\n                        stroke=\"var(--accent-color, #fcd34d)\"\r\n                        strokeWidth={strokeWidth}\r\n                        strokeLinecap=\"round\"\r\n                        strokeDasharray={circumference}\r\n                        strokeDashoffset={strokeDashoffset}\r\n                        style={{ transition: 'stroke-dashoffset 0.5s ease' }}\r\n                    />\r\n                </svg>\r\n                {/* Center content */}\r\n                <div\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        transform: 'translate(-50%, -50%)',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'center',\r\n                    }}\r\n                >\r\n                    <span\r\n                        style={{\r\n                            fontSize: compact ? '1.25rem' : '1.75rem',\r\n                            opacity: dominantTendency ? 0.8 : 0.4,\r\n                        }}\r\n                    >\r\n                        {symbol}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Days until emergence */}\r\n            <div\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    fontSize: compact ? '0.875rem' : '1rem',\r\n                    color: 'rgba(255, 255, 255, 0.8)',\r\n                }}\r\n            >\r\n                <span style={{ color: 'var(--accent-color, #fcd34d)', fontWeight: 600 }}>\r\n                    {daysUntilEmergence}\r\n                </span>\r\n                {' days until reveal'}\r\n            </div>\r\n\r\n            {/* Dominant tendency */}\r\n            {tendencyName && (\r\n                <div\r\n                    style={{\r\n                        textAlign: 'center',\r\n                    }}\r\n                >\r\n                    <div\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            fontSize: compact ? '0.75rem' : '0.8125rem',\r\n                            color: 'rgba(255, 255, 255, 0.5)',\r\n                        }}\r\n                    >\r\n                        Dominant tendency: <span style={{ color: 'rgba(255,255,255,0.7)' }}>{tendencyName}</span>\r\n                    </div>\r\n                    <div\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            fontWeight: 500,\r\n                            letterSpacing: '0.01em',\r\n                            fontSize: compact ? '0.6875rem' : '0.75rem',\r\n                            color: 'rgba(255, 255, 255, 0.4)',\r\n                            fontStyle: 'italic',\r\n                            marginTop: '0.25rem',\r\n                        }}\r\n                    >\r\n                        This may change\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PathFormingIndicator;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathJourneyLog.jsx","messages":[{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'fontWeight'.","line":114,"column":33,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":114,"endColumn":43},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":147,"column":29,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":147,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'pathName' is defined but never used.","line":157,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"pathName"},"fix":{"range":[6360,6370],"text":""},"desc":"Remove unused variable 'pathName'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'minutes' is defined but never used.","line":157,"column":63,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"minutes"},"fix":{"range":[6378,6387],"text":""},"desc":"Remove unused variable 'minutes'."}]},{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'letterSpacing'.","line":217,"column":29,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":217,"endColumn":42}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PathJourneyLog.jsx\r\n// Path history timeline and practice distribution stats\r\n\r\nimport React from 'react';\r\nimport { usePathStore, PATH_SYMBOLS, PATH_NAMES } from '../state/pathStore';\r\n\r\n/**\r\n * PathJourneyLog ΓÇö Shows path history timeline and practice stats\r\n * \r\n * Displays:\r\n * - Timeline of path changes\r\n * - Statistics breakdown by domain\r\n * - Charts showing practice distribution\r\n */\r\nexport function PathJourneyLog() {\r\n    const currentPath = usePathStore(s => s.currentPath);\r\n    const pathStatus = usePathStore(s => s.pathStatus);\r\n    const getPathJourney = usePathStore(s => s.getPathJourney);\r\n    const getPracticeDistribution = usePathStore(s => s.getPracticeDistribution);\r\n    const pathEmergenceDate = usePathStore(s => s.pathEmergenceDate);\r\n\r\n    const journey = getPathJourney();\r\n    const distribution = getPracticeDistribution();\r\n\r\n    // If no path yet, show minimal state\r\n    if (!currentPath && pathStatus === 'forming') {\r\n        return (\r\n            <div\r\n                style={{\r\n                    background: 'rgba(255, 255, 255, 0.03)',\r\n                    borderRadius: '1rem',\r\n                    border: '1px solid rgba(255, 255, 255, 0.06)',\r\n                    padding: '1.5rem',\r\n                    marginTop: '1.5rem',\r\n                }}\r\n            >\r\n                <h3\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 700,\r\n                        letterSpacing: 'var(--tracking-wide)',\r\n                        fontSize: '1rem',\r\n                        color: 'var(--accent-color, #fcd34d)',\r\n                        marginBottom: '1rem',\r\n                        textAlign: 'center',\r\n                    }}\r\n                >\r\n                    Path Journey\r\n                </h3>\r\n                <p\r\n                    style={{\r\n                        fontFamily: 'var(--font-body)',\r\n                        fontWeight: 500,\r\n                        letterSpacing: '0.01em',\r\n                        fontSize: '0.9375rem',\r\n                        color: 'rgba(255, 255, 255, 0.6)',\r\n                        textAlign: 'center',\r\n                        lineHeight: 1.6,\r\n                    }}\r\n                >\r\n                    Your path is still forming. Practice consistently and your unique path will emerge after 90 days.\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                background: 'rgba(255, 255, 255, 0.03)',\r\n                borderRadius: '1rem',\r\n                border: '1px solid rgba(255, 255, 255, 0.06)',\r\n                padding: '1.5rem',\r\n                marginTop: '1.5rem',\r\n            }}\r\n        >\r\n            <h3\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontWeight: 700,\r\n                    letterSpacing: 'var(--tracking-wide)',\r\n                    fontSize: '1rem',\r\n                    color: 'var(--accent-color, #fcd34d)',\r\n                    marginBottom: '1.5rem',\r\n                    textAlign: 'center',\r\n                }}\r\n            >\r\n                Path Journey\r\n            </h3>\r\n\r\n            {/* Current Path */}\r\n            {currentPath && (\r\n                <div\r\n                    style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        gap: '0.75rem',\r\n                        marginBottom: '1.5rem',\r\n                        padding: '1rem',\r\n                        background: 'rgba(255, 255, 255, 0.02)',\r\n                        borderRadius: '0.75rem',\r\n                    }}\r\n                >\r\n                    <span style={{ fontSize: '2rem' }}>{PATH_SYMBOLS[currentPath]}</span>\r\n                    <div>\r\n                        <div\r\n                            style={{\r\n                                fontFamily: 'var(--font-display)',\r\n                                fontWeight: 600,\r\n                                letterSpacing: 'var(--tracking-mythic)',\r\n                                fontSize: '1.125rem',\r\n                                color: 'var(--accent-color, #fcd34d)',\r\n                                fontWeight: 600,\r\n                            }}\r\n                        >\r\n                            {PATH_NAMES[currentPath]} Path\r\n                        </div>\r\n                        {pathEmergenceDate && (\r\n                            <div\r\n                                style={{\r\n                                    fontFamily: 'var(--font-display)',\r\n                                    fontWeight: 600,\r\n                                    letterSpacing: 'var(--tracking-mythic)',\r\n                                    fontSize: '0.75rem',\r\n                                    color: 'rgba(255, 255, 255, 0.5)',\r\n                                }}\r\n                            >\r\n                                Since {new Date(pathEmergenceDate).toLocaleDateString()}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Practice Distribution */}\r\n            {distribution && distribution.length > 0 && (\r\n                <div style={{ marginBottom: '1.5rem' }}>\r\n                    <h4\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            fontSize: '0.75rem',\r\n                            color: 'rgba(255, 255, 255, 0.5)',\r\n                            textTransform: 'uppercase',\r\n                            letterSpacing: '0.1em',\r\n                            marginBottom: '0.75rem',\r\n                        }}\r\n                    >\r\n                        Practice Distribution\r\n                    </h4>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                        {distribution\r\n                            .filter(d => d.minutes > 0)\r\n                            .sort((a, b) => b.percentage - a.percentage)\r\n                            .map(({ domain, pathName, symbol, minutes, percentage }) => (\r\n                                <div\r\n                                    key={domain}\r\n                                    style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                    }}\r\n                                >\r\n                                    <span style={{ fontSize: '0.875rem', width: '1.5rem' }}>{symbol}</span>\r\n                                    <div style={{ flex: 1 }}>\r\n                                        <div\r\n                                            style={{\r\n                                                height: '6px',\r\n                                                background: 'rgba(255, 255, 255, 0.1)',\r\n                                                borderRadius: '3px',\r\n                                                overflow: 'hidden',\r\n                                            }}\r\n                                        >\r\n                                            <div\r\n                                                style={{\r\n                                                    width: `${percentage}%`,\r\n                                                    height: '100%',\r\n                                                    background: 'var(--accent-color, #fcd34d)',\r\n                                                    opacity: percentage > 40 ? 1 : 0.6,\r\n                                                    transition: 'width 0.5s ease',\r\n                                                }}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div\r\n                                        style={{\r\n                                            fontFamily: 'var(--font-display)',\r\n                                            fontWeight: 600,\r\n                                            letterSpacing: 'var(--tracking-mythic)',\r\n                                            fontSize: '0.6875rem',\r\n                                            color: 'rgba(255, 255, 255, 0.6)',\r\n                                            width: '3rem',\r\n                                            textAlign: 'right',\r\n                                        }}\r\n                                    >\r\n                                        {percentage.toFixed(0)}%\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Journey Timeline */}\r\n            {journey.length > 0 && (\r\n                <div>\r\n                    <h4\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            fontSize: '0.75rem',\r\n                            color: 'rgba(255, 255, 255, 0.5)',\r\n                            textTransform: 'uppercase',\r\n                            letterSpacing: '0.1em',\r\n                            marginBottom: '0.75rem',\r\n                        }}\r\n                    >\r\n                        Path History\r\n                    </h4>\r\n                    <div\r\n                        style={{\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            gap: '0.75rem',\r\n                        }}\r\n                    >\r\n                        {journey.map((entry, idx) => (\r\n                            <div\r\n                                key={idx}\r\n                                style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.75rem',\r\n                                    padding: '0.5rem 0.75rem',\r\n                                    background: 'rgba(255, 255, 255, 0.02)',\r\n                                    borderRadius: '0.5rem',\r\n                                    borderLeft: '2px solid var(--accent-color, #fcd34d)',\r\n                                }}\r\n                            >\r\n                                <span style={{ fontSize: '1.25rem' }}>{entry.symbol}</span>\r\n                                <div style={{ flex: 1 }}>\r\n                                    <div\r\n                                        style={{\r\n                                            fontFamily: 'var(--font-display)',\r\n                                            fontWeight: 600,\r\n                                            letterSpacing: 'var(--tracking-mythic)',\r\n                                            fontSize: '0.875rem',\r\n                                            color: 'rgba(255, 255, 255, 0.8)',\r\n                                        }}\r\n                                    >\r\n                                        {entry.trigger === 'emergence' ? 'Path Emerged' : 'Path Shifted'}\r\n                                        {' ΓåÆ '}\r\n                                        <span style={{ color: 'var(--accent-color, #fcd34d)' }}>\r\n                                            {entry.pathName}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div\r\n                                        style={{\r\n                                            fontFamily: 'var(--font-display)',\r\n                                            fontWeight: 600,\r\n                                            letterSpacing: 'var(--tracking-mythic)',\r\n                                            fontSize: '0.6875rem',\r\n                                            color: 'rgba(255, 255, 255, 0.4)',\r\n                                        }}\r\n                                    >\r\n                                        {entry.formattedDate}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PathJourneyLog;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathOverviewPanel.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getPathById' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"getPathById"},"fix":{"range":[83,139],"text":""},"desc":"Remove unused variable 'getPathById'."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useNavigationStore\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":13,"column":27,"nodeType":"Identifier","endLine":13,"endColumn":45},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":14,"column":47,"nodeType":"Identifier","endLine":14,"endColumn":55},{"ruleId":"no-unused-vars","severity":2,"message":"'handleBegin' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":26,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleBegin"},"fix":{"range":[953,1051],"text":""},"desc":"Remove unused variable 'handleBegin'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PathOverviewPanel.jsx\r\nimport React, { useState } from 'react';\r\nimport { getPathById } from '../data/navigationData.js';\r\nimport { useNavigationStore } from '../state/navigationStore.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { treatiseChapters } from '../data/treatise.generated.js';\r\n\r\nexport function PathOverviewPanel({ path, onBegin, onClose }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    if (!path) return null;\r\n    const { beginPath } = useNavigationStore();\r\n    const [expandedWeeks, setExpandedWeeks] = useState([]);\r\n\r\n    if (!path || path.placeholder) return null;\r\n\r\n    const toggleWeek = (weekNumber) => {\r\n        setExpandedWeeks(prev =>\r\n            prev.includes(weekNumber)\r\n                ? prev.filter(w => w !== weekNumber)\r\n                : [...prev, weekNumber]\r\n        );\r\n    };\r\n\r\n    const handleBegin = () => {\r\n        beginPath(path.id); // Changed from pathId to path.id\r\n    };\r\n\r\n    // Helper to get chapter title from ID\r\n    const getChapterTitle = (chapterId) => {\r\n        const chapter = treatiseChapters.find(ch => ch.id === chapterId);\r\n        if (chapter) return chapter.title;\r\n\r\n        // Fallback: format the ID nicely\r\n        return chapterId\r\n            .replace(/chapter-/g, 'Chapter ')\r\n            .replace(/-/g, ' ')\r\n            .split(' ')\r\n            .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n            .join(' ');\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-3xl p-8 shadow-2xl relative\"\r\n            style={{\r\n                background: isLight\r\n                    ? 'linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%)'\r\n                    : 'linear-gradient(180deg, rgba(26, 15, 28, 0.98) 0%, rgba(21, 11, 22, 0.99) 100%)',\r\n                border: isLight ? '1px solid rgba(180, 140, 90, 0.3)' : '1px solid rgba(250, 208, 120, 0.3)',\r\n                boxShadow: isLight\r\n                    ? '0 20px 50px rgba(180, 140, 90, 0.15)'\r\n                    : '0 0 60px rgba(0,0,0,0.8), 0 0 20px rgba(250, 208, 120, 0.1)'\r\n            }}\r\n        >\r\n            {/* Center top ornament */}\r\n            <div className=\"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2\">\r\n                <div className=\"w-3 h-3 rotate-45 bg-gradient-to-br from-[#F5D18A] to-[#D4A84A]\" style={{ boxShadow: '0 0 12px rgba(250, 208, 120, 0.6)' }} />\r\n            </div>\r\n\r\n            {/* Close Button */}\r\n            <button\r\n                onClick={onClose}\r\n                className=\"absolute top-6 right-6 w-10 h-10 flex items-center justify-center rounded-full transition-colors\"\r\n                style={{\r\n                    background: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)',\r\n                    color: isLight ? 'rgba(0,0,0,0.4)' : 'rgba(255,255,255,0.4)'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                    e.target.style.background = isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.1)';\r\n                    e.target.style.color = isLight ? 'rgba(0,0,0,0.6)' : 'rgba(255,255,255,0.6)';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                    e.target.style.background = isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)';\r\n                    e.target.style.color = isLight ? 'rgba(0,0,0,0.4)' : 'rgba(255,255,255,0.4)';\r\n                }}\r\n            >\r\n                Γ£ò\r\n            </button>\r\n\r\n            {/* Header */}\r\n            <div className=\"border-b border-[var(--accent-15)] pb-4\">\r\n                <div className=\"mb-8 pr-12\">\r\n                    <h2\r\n                        className=\"text-3xl font-bold mb-2\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            color: isLight ? 'rgba(180, 120, 40, 0.9)' : 'var(--accent-color)'\r\n                        }}\r\n                    >\r\n                        {path.title}\r\n                    </h2>\r\n                    <p\r\n                        className=\"text-sm uppercase tracking-[0.2em]\"\r\n                        style={{ color: isLight ? 'rgba(140, 100, 40, 0.6)' : 'var(--accent-60)' }}\r\n                    >\r\n                        {path.duration} WEEK INITIATION\r\n                    </p>\r\n                </div>\r\n                <div\r\n                    className=\"rounded-2xl p-6 mb-8 border\"\r\n                    style={{\r\n                        background: isLight ? 'rgba(180, 140, 90, 0.08)' : 'rgba(250, 208, 120, 0.03)',\r\n                        borderColor: isLight ? 'rgba(180, 140, 90, 0.15)' : 'rgba(250, 208, 120, 0.1)'\r\n                    }}\r\n                >\r\n                    <p\r\n                        className=\"text-lg italic leading-relaxed text-center\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-body)',\r\n                            letterSpacing: '0.01em',\r\n                            color: isLight ? 'rgba(60, 52, 37, 0.9)' : 'rgba(253,251,245,0.95)'\r\n                        }}\r\n                    >\r\n                        \"{path.description}\"\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Practice Section */}\r\n            {path.practices.length > 0 && (\r\n                <div>\r\n                    <h3\r\n                        className=\"text-base font-bold text-[var(--accent-color)] mb-2 tracking-wide\"\r\n                        style={{ fontFamily: 'var(--font-display)' }}\r\n                    >\r\n                        Practice\r\n                    </h3>\r\n                    <ul className=\"space-y-1.5\" style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}>\r\n                        {path.practices.map((practice, idx) => (\r\n                            <li key={idx} className=\"text-sm text-[rgba(253,251,245,0.8)] flex items-center gap-2\">\r\n                                <span className=\"text-[var(--accent-50)]\">ΓÇó</span>\r\n                                {practice.type}\r\n                                {practice.pattern && ` (${practice.pattern})`}\r\n                                {practice.duration && ` - ${practice.duration}min`}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n\r\n            {/* Wisdom Section */}\r\n            {path.chapters.length > 0 && (\r\n                <div>\r\n                    <h3\r\n                        className=\"text-base font-bold text-[var(--accent-color)] mb-2 tracking-wide\"\r\n                        style={{ fontFamily: 'var(--font-display)' }}\r\n                    >\r\n                        Wisdom\r\n                    </h3>\r\n                    <ul className=\"space-y-1.5\" style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}>\r\n                        {path.chapters.map((chapterId, idx) => (\r\n                            <li key={idx} className=\"text-sm text-[rgba(253,251,245,0.8)] flex items-center gap-2\">\r\n                                <span className=\"text-[var(--accent-50)]\">ΓÇó</span>\r\n                                {getChapterTitle(chapterId)}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n\r\n            {/* Application Section */}\r\n            {path.applicationItems.length > 0 && (\r\n                <div>\r\n                    <h3\r\n                        className=\"text-base font-bold text-[var(--accent-color)] mb-2 tracking-wide\"\r\n                        style={{ fontFamily: 'var(--font-display)' }}\r\n                    >\r\n                        Application\r\n                    </h3>\r\n                    <ul className=\"space-y-1.5\" style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}>\r\n                        {path.applicationItems.map((item, idx) => (\r\n                            <li key={idx} className=\"text-sm text-[rgba(253,251,245,0.8)] flex items-center gap-2\">\r\n                                <span className=\"text-[var(--accent-50)]\">Γûí</span>\r\n                                {item}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n\r\n            {/* Weekly Timeline */}\r\n            {path.weeks.length > 0 && (\r\n                <div>\r\n                    <h3\r\n                        className=\"text-base font-bold text-[var(--accent-color)] mb-3 tracking-wide\"\r\n                        style={{ fontFamily: 'var(--font-display)' }}\r\n                    >\r\n                        Weekly Timeline\r\n                    </h3>\r\n                    <div className=\"flex items-center gap-2 mb-4\">\r\n                        {path.weeks.map((week, idx) => (\r\n                            <React.Fragment key={week.number}>\r\n                                <div\r\n                                    className=\"flex flex-col items-center gap-1\"\r\n                                    title={week.title}\r\n                                >\r\n                                    <div className=\"w-3 h-3 rounded-full border border-[var(--accent-30)] bg-[var(--accent-10)]\" />\r\n                                    <div className=\"text-[9px] text-[var(--accent-40)]\">{week.number}</div>\r\n                                </div>\r\n                                {idx < path.weeks.length - 1 && (\r\n                                    <div className=\"flex-1 h-[1px] bg-[var(--accent-15)]\" />\r\n                                )}\r\n                            </React.Fragment>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Weekly Breakdown */}\r\n            {path.weeks.length > 0 && (\r\n                <div className=\"mb-8\">\r\n                    <h3\r\n                        className=\"text-base font-bold mb-4 flex items-center gap-2\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            letterSpacing: 'var(--tracking-wide)',\r\n                            color: isLight ? 'rgba(180, 140, 90, 0.8)' : 'var(--accent-60)'\r\n                        }}\r\n                    >\r\n                        <span className=\"w-8 h-[1px]\" style={{ background: isLight ? 'rgba(180, 140, 90, 0.3)' : 'var(--accent-20)' }} />\r\n                        CURRICULUM OVERVIEW\r\n                        <span className=\"w-8 h-[1px]\" style={{ background: isLight ? 'rgba(180, 140, 90, 0.3)' : 'var(--accent-20)' }} />\r\n                    </h3>\r\n                    <div className=\"space-y-2\">\r\n                        {path.weeks.map((week) => {\r\n                            const isExpanded = expandedWeeks.includes(week.number);\r\n\r\n                            return (\r\n                                <div\r\n                                    key={week.number}\r\n                                    className=\"border border-[var(--accent-10)] rounded-xl overflow-hidden transition-all duration-[1500ms] ease-in-out\"\r\n                                >\r\n                                    <button\r\n                                        onClick={() => toggleWeek(week.number)}\r\n                                        className=\"w-full px-4 py-3 flex items-center gap-3 hover:bg-[var(--accent-10)] transition-colors text-left\"\r\n                                    >\r\n                                        <span className=\"text-[var(--accent-50)] transition-transform duration-[1000ms] ease-in-out\" style={{ transform: isExpanded ? 'rotate(0deg)' : 'rotate(-90deg)' }}>\r\n                                            Γû╛\r\n                                        </span>\r\n                                        <div\r\n                                            className=\"p-4 rounded-xl border transition-colors\"\r\n                                            style={{\r\n                                                background: isLight ? 'rgba(255, 255, 255, 0.4)' : 'rgba(253, 251, 245, 0.02)',\r\n                                                borderColor: isLight ? 'rgba(180, 140, 90, 0.15)' : 'rgba(253, 251, 245, 0.05)'\r\n                                            }}\r\n                                        >\r\n                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                <h4\r\n                                                    className=\"text-base font-bold\"\r\n                                                    style={{\r\n                                                        fontFamily: 'var(--font-display)',\r\n                                                        color: isLight ? 'rgba(180, 120, 40, 0.9)' : 'var(--accent-color)'\r\n                                                    }}\r\n                                                >\r\n                                                    Week {week.number}: {week.title}\r\n                                                </h4>\r\n                                            </div>\r\n                                            <p\r\n                                                className=\"text-sm italic\"\r\n                                                style={{ color: isLight ? 'rgba(90, 77, 60, 0.65)' : 'rgba(253,251,245,0.6)' }}\r\n                                            >\r\n                                                {week.focus}\r\n                                            </p>\r\n                                        </div>\r\n                                    </button>\r\n\r\n                                    {isExpanded && (\r\n                                        <div className=\"px-4 pb-4 space-y-3 border-t border-[var(--accent-10)] pt-3 transition-all duration-[1500ms] ease-in-out\" style={{ opacity: 1, transform: 'scaleY(1)', transformOrigin: 'top' }}>\r\n                                            {/* Focus */}\r\n                                            <div>\r\n                                                <div className=\"text-xs text-[var(--accent-60)] uppercase tracking-wider mb-1\">Focus</div>\r\n                                                <p\r\n                                                    className=\"text-sm text-[rgba(253,251,245,0.8)] italic leading-relaxed font-medium\"\r\n                                                    style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em' }}\r\n                                                >\r\n                                                    {week.focus}\r\n                                                </p>\r\n                                            </div>\r\n\r\n                                            {/* Practices */}\r\n                                            {week.practices.length > 0 && (\r\n                                                <div>\r\n                                                    <div className=\"text-[10px] uppercase tracking-wider mb-2\" style={{ color: isLight ? 'rgba(140, 100, 40, 0.7)' : 'var(--accent-40)' }}>Practices</div>\r\n                                                    <ul className=\"space-y-1\" style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}>\r\n                                                        {week.practices.map((practice, idx) => (\r\n                                                            <li key={idx} className=\"text-sm flex items-start gap-2\" style={{ color: isLight ? 'rgba(90, 77, 60, 0.75)' : 'rgba(253,251,245,0.75)' }}>\r\n                                                                <span style={{ color: isLight ? 'rgba(180, 140, 90, 0.4)' : 'var(--accent-40)' }} className=\"mt-0.5\">ΓÇó</span>\r\n                                                                <span>{practice}</span>\r\n                                                            </li>\r\n                                                        ))}\r\n                                                    </ul>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {/* Reading */}\r\n                                            {week.reading && week.reading.length > 0 && (\r\n                                                <div>\r\n                                                    <div className=\"text-[10px] uppercase tracking-wider mb-2\" style={{ color: isLight ? 'rgba(140, 100, 40, 0.7)' : 'var(--accent-40)' }}>Reading</div>\r\n                                                    <ul className=\"space-y-1\" style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}>\r\n                                                        {week.reading.map((chapterId, idx) => (\r\n                                                            <li key={idx} className=\"text-sm flex items-start gap-2\" style={{ color: isLight ? 'rgba(90, 77, 60, 0.75)' : 'rgba(253,251,245,0.75)' }}>\r\n                                                                <span style={{ color: isLight ? 'rgba(180, 140, 90, 0.4)' : 'var(--accent-40)' }} className=\"mt-0.5\">ΓÇó</span>\r\n                                                                <span>{getChapterTitle(chapterId)}</span>\r\n                                                            </li>\r\n                                                        ))}\r\n                                                    </ul>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {/* Tracking */}\r\n                                            {week.tracking && (\r\n                                                <div>\r\n                                                    <div className=\"text-[10px] uppercase tracking-wider mb-2\" style={{ color: isLight ? 'rgba(140, 100, 40, 0.7)' : 'var(--accent-40)' }}>Tracking Focus</div>\r\n                                                    <p\r\n                                                        className=\"text-sm font-medium\"\r\n                                                        style={{\r\n                                                            fontFamily: 'var(--font-body)',\r\n                                                            letterSpacing: '0.01em',\r\n                                                            color: isLight ? 'rgba(90, 77, 60, 0.75)' : 'rgba(253,251,245,0.75)'\r\n                                                        }}\r\n                                                    >\r\n                                                        {week.tracking}\r\n                                                    </p>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Ornamental Divider */}\r\n            <div className=\"flex items-center justify-center py-2\">\r\n                <div className=\"flex items-center gap-4 text-[var(--accent-30)]\">\r\n                    <div className=\"w-24 h-[1px] bg-gradient-to-r from-transparent to-[var(--accent-30)]\" />\r\n                    <div style={{ fontSize: '10px' }}>Γùå</div>\r\n                    <div className=\"w-24 h-[1px] bg-gradient-to-l from-transparent to-[var(--accent-30)]\" />\r\n                </div>\r\n            </div>\r\n\r\n            {/* BEGIN Button */}\r\n            <div className=\"border-t pt-8\" style={{ borderColor: isLight ? 'rgba(180, 140, 90, 0.15)' : 'rgba(250, 208, 120, 0.1)' }}>\r\n                <button\r\n                    onClick={() => onBegin(path.id)}\r\n                    className=\"w-full py-4 rounded-full font-bold text-lg transition-all group relative overflow-hidden\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        background: isLight\r\n                            ? 'rgba(180, 140, 90, 0.8)'\r\n                            : 'linear-gradient(to bottom right, var(--accent-color), var(--accent-secondary))',\r\n                        color: isLight ? 'white' : '#050508',\r\n                        boxShadow: isLight ? '0 10px 30px rgba(180, 140, 90, 0.3)' : '0 0 30px var(--accent-30)'\r\n                    }}\r\n                >\r\n                    <span className=\"relative z-10\">BEGIN THIS PATH</span>\r\n                    <div\r\n                        className=\"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                        style={{ background: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.1)' }}\r\n                    />\r\n                </button>\r\n                <p\r\n                    className=\"text-center text-xs mt-4 italic\"\r\n                    style={{ color: isLight ? 'rgba(140, 100, 40, 0.5)' : 'var(--accent-40)' }}\r\n                >\r\n                    This will become your active focus for the next {path.duration} weeks.\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathParticles.jsx","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":109,"column":21,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":109,"endColumn":76,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4839,5106],"text":"{ const emberAngle = angle + (Math.random() - 0.5) * 0.3;\r\n                    x = centerX + Math.cos(emberAngle) * ringRadius;\r\n                    y = centerY + Math.sin(emberAngle) * ringRadius;\r\n                    distance = ringRadius;\r\n                    break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":800,"column":25,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":800,"endColumn":91,"suggestions":[{"messageId":"addBrackets","fix":{"range":[40523,41814],"text":"{ const baseAngle = direction > 0 ? Math.PI * 0.35 : Math.PI * 0.65;\r\n                        const streakAngle = baseAngle + particle.driftAngle;\r\n                        const streakSpeed = baseSpeed * 200 * (0.8 + particle.streakMult * 0.2);\r\n\r\n                        particle.x += Math.cos(streakAngle) * streakSpeed * dt;\r\n                        particle.y += Math.sin(streakAngle) * streakSpeed * dt;\r\n                        particle.opacity = Math.min(0.8 * particle.brightMult, particle.opacity + dt * 2);\r\n                        particle.streakAngle = streakAngle;\r\n                        particle.streakLength = 8 * particle.streakMult;\r\n\r\n                        if (particle.y > centerY + size * 0.4) {\r\n                            // Γÿà STREAK DISSOLVE - spawn mini-sparks effect\r\n                            particle.isDissolving = true;\r\n                            particle.dissolveTime = 0.15;\r\n\r\n                            // Reset\r\n                            particle.x = centerX + (Math.random() - 0.5) * size * 1.0;\r\n                            particle.y = cloudY + Math.random() * size * 0.1;\r\n                            particle.opacity = 0.5;\r\n                            particle.isDissolving = false;\r\n                        }\r\n                        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":801,"column":25,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":801,"endColumn":77,"suggestions":[{"messageId":"addBrackets","fix":{"range":[40523,41814],"text":"{ const baseAngle = direction > 0 ? Math.PI * 0.35 : Math.PI * 0.65;\r\n                        const streakAngle = baseAngle + particle.driftAngle;\r\n                        const streakSpeed = baseSpeed * 200 * (0.8 + particle.streakMult * 0.2);\r\n\r\n                        particle.x += Math.cos(streakAngle) * streakSpeed * dt;\r\n                        particle.y += Math.sin(streakAngle) * streakSpeed * dt;\r\n                        particle.opacity = Math.min(0.8 * particle.brightMult, particle.opacity + dt * 2);\r\n                        particle.streakAngle = streakAngle;\r\n                        particle.streakLength = 8 * particle.streakMult;\r\n\r\n                        if (particle.y > centerY + size * 0.4) {\r\n                            // Γÿà STREAK DISSOLVE - spawn mini-sparks effect\r\n                            particle.isDissolving = true;\r\n                            particle.dissolveTime = 0.15;\r\n\r\n                            // Reset\r\n                            particle.x = centerX + (Math.random() - 0.5) * size * 1.0;\r\n                            particle.y = cloudY + Math.random() * size * 0.1;\r\n                            particle.opacity = 0.5;\r\n                            particle.isDissolving = false;\r\n                        }\r\n                        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":802,"column":25,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":802,"endColumn":97,"suggestions":[{"messageId":"addBrackets","fix":{"range":[40523,41814],"text":"{ const baseAngle = direction > 0 ? Math.PI * 0.35 : Math.PI * 0.65;\r\n                        const streakAngle = baseAngle + particle.driftAngle;\r\n                        const streakSpeed = baseSpeed * 200 * (0.8 + particle.streakMult * 0.2);\r\n\r\n                        particle.x += Math.cos(streakAngle) * streakSpeed * dt;\r\n                        particle.y += Math.sin(streakAngle) * streakSpeed * dt;\r\n                        particle.opacity = Math.min(0.8 * particle.brightMult, particle.opacity + dt * 2);\r\n                        particle.streakAngle = streakAngle;\r\n                        particle.streakLength = 8 * particle.streakMult;\r\n\r\n                        if (particle.y > centerY + size * 0.4) {\r\n                            // Γÿà STREAK DISSOLVE - spawn mini-sparks effect\r\n                            particle.isDissolving = true;\r\n                            particle.dissolveTime = 0.15;\r\n\r\n                            // Reset\r\n                            particle.x = centerX + (Math.random() - 0.5) * size * 1.0;\r\n                            particle.y = cloudY + Math.random() * size * 0.1;\r\n                            particle.opacity = 0.5;\r\n                            particle.isDissolving = false;\r\n                        }\r\n                        break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has an unnecessary dependency: 'ringScale'. Either exclude it or remove the dependency array.","line":1185,"column":8,"nodeType":"ArrayExpression","endLine":1185,"endColumn":97,"suggestions":[{"desc":"Update the dependencies array to be: [fx.motionPattern, fx.particleSize, breathParams, size, phase, ringRadiusProp]","fix":{"range":[59602,59691],"text":"[fx.motionPattern, fx.particleSize, breathParams, size, phase, ringRadiusProp]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'ringScale'. Either include it or remove the dependency array.","line":2134,"column":8,"nodeType":"ArrayExpression","endLine":2134,"endColumn":142,"suggestions":[{"desc":"Update the dependencies array to be: [pathId, fxPreset, isActive, size, accentColor, fx, initParticles, applyMotion, drawParticle, parseColor, getModifiedColor, intensity, ringScale]","fix":{"range":[107016,107150],"text":"[pathId, fxPreset, isActive, size, accentColor, fx, initParticles, applyMotion, drawParticle, parseColor, getModifiedColor, intensity, ringScale]"}}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PathParticles.jsx\r\n// Canvas-based particle system - refined FX presets v7\r\n\r\nimport React, { useRef, useEffect, useCallback } from 'react';\r\nimport { getPathFX, getDefaultFX } from '../data/pathFX.js';\r\nimport { clampPreset, MAX_PARTICLE_COUNT, MAX_TRAIL_LENGTH } from '../data/ringFXPresets.js';\r\n\r\nexport function PathParticles({\r\n    pathId,\r\n    fxPreset = null,\r\n    intensity = 0.5,\r\n    ringScale = 1.0,\r\n    ringRadius: ringRadiusProp = null,  // Explicit ring radius in pixels (optional)\r\n    phase = 'rest',\r\n    size = 300,\r\n    accentColor = '#d4af37',\r\n    isActive = true,\r\n    isLight = false  // Light mode flag for color inversion\r\n}) {\r\n    const canvasRef = useRef(null);\r\n    const particlesRef = useRef([]);\r\n    const animationRef = useRef(null);\r\n    const lastTimeRef = useRef(0);\r\n    const prevPresetIdRef = useRef(null);\r\n    const cycleDirectionRef = useRef(1);\r\n    const prevPhaseRef = useRef('rest');\r\n\r\n    const rawFx = fxPreset ? clampPreset(fxPreset) : (getPathFX(pathId) || getDefaultFX());\r\n    const fx = {\r\n        ...rawFx,\r\n        particleCount: Math.min(rawFx.particleCount || 12, MAX_PARTICLE_COUNT),\r\n        trailLength: Math.min(rawFx.trailLength || 0.3, MAX_TRAIL_LENGTH)\r\n    };\r\n    const breathParams = fx.breathSync[phase] || fx.breathSync.rest;\r\n\r\n    useEffect(() => {\r\n        if (prevPhaseRef.current === 'exhale' && phase === 'rest') {\r\n            cycleDirectionRef.current *= -1;\r\n        }\r\n        prevPhaseRef.current = phase;\r\n    }, [phase]);\r\n\r\n    const parseColor = useCallback((hex) => {\r\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : { r: 212, g: 175, b: 55 };\r\n    }, []);\r\n\r\n    const getColorVariation = useCallback((particleId, totalParticles) => {\r\n        const numVariations = Math.min(6, Math.max(3, Math.floor(totalParticles / 8)));\r\n        const variationIndex = particleId % numVariations;\r\n        const brightnessOffset = (variationIndex / (numVariations - 1) - 0.5) * 0.4;\r\n        const hueOffset = (variationIndex / (numVariations - 1) - 0.5) * 30;\r\n        return { brightnessOffset, hueOffset };\r\n    }, []);\r\n\r\n    const getModifiedColor = useCallback((baseColor, opacity = 1, brightnessBoost = 0, hueBoost = 0) => {\r\n        const { hueShift, saturation, brightness } = fx.colorModifier;\r\n        let { r, g, b } = baseColor;\r\n        const actualBrightness = brightness + brightnessBoost;\r\n        r = Math.min(255, r * actualBrightness);\r\n        g = Math.min(255, g * actualBrightness);\r\n        b = Math.min(255, b * actualBrightness);\r\n        const gray = (r + g + b) / 3;\r\n        r = gray + (r - gray) * saturation;\r\n        g = gray + (g - gray) * saturation;\r\n        b = gray + (b - gray) * saturation;\r\n        const totalHueShift = hueShift + hueBoost;\r\n        if (totalHueShift !== 0) {\r\n            const hueRad = totalHueShift * Math.PI / 180;\r\n            const cosH = Math.cos(hueRad);\r\n            const sinH = Math.sin(hueRad);\r\n            const newR = r * (0.213 + cosH * 0.787 - sinH * 0.213) + g * (0.715 - cosH * 0.715 - sinH * 0.715) + b * (0.072 - cosH * 0.072 + sinH * 0.928);\r\n            const newG = r * (0.213 - cosH * 0.213 + sinH * 0.143) + g * (0.715 + cosH * 0.285 + sinH * 0.140) + b * (0.072 - cosH * 0.072 - sinH * 0.283);\r\n            const newB = r * (0.213 - cosH * 0.213 - sinH * 0.787) + g * (0.715 - cosH * 0.715 + sinH * 0.715) + b * (0.072 + cosH * 0.928 + sinH * 0.072);\r\n            r = Math.max(0, Math.min(255, newR));\r\n            g = Math.max(0, Math.min(255, newG));\r\n            b = Math.max(0, Math.min(255, newB));\r\n        }\r\n\r\n        // LIGHT MODE: Invert colors to make particles visible on light background\r\n        if (isLight) {\r\n            r = 255 - r;\r\n            g = 255 - g;\r\n            b = 255 - b;\r\n        }\r\n\r\n        return `rgba(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)}, ${Math.max(0.1, opacity * fx.colorModifier.opacity)})`;\r\n    }, [fx.colorModifier, isLight]);\r\n\r\n    const initParticles = useCallback(() => {\r\n        const particles = [];\r\n        const centerX = size / 2;\r\n        const centerY = size / 2;\r\n        // Use explicit ringRadius prop if provided, otherwise calculate from size\r\n        const ringRadius = ringRadiusProp || (size * 0.4);\r\n\r\n        for (let i = 0; i < fx.particleCount; i++) {\r\n            const angle = (i / fx.particleCount) * Math.PI * 2;\r\n            let x, y, distance;\r\n            const colorVar = getColorVariation(i, fx.particleCount);\r\n\r\n            switch (fx.motionPattern) {\r\n                case 'ember-mixed':\r\n                    // ALL embers spawn from the ring itself\r\n                    const emberAngle = angle + (Math.random() - 0.5) * 0.3;\r\n                    x = centerX + Math.cos(emberAngle) * ringRadius;\r\n                    y = centerY + Math.sin(emberAngle) * ringRadius;\r\n                    distance = ringRadius;\r\n                    break;\r\n                case 'electric-varied':\r\n                    distance = ringRadius;\r\n                    x = centerX + Math.cos(angle) * distance;\r\n                    y = centerY + Math.sin(angle) * distance;\r\n                    break;\r\n                case 'meteor-cycle':\r\n                    // Wider spread - 40% more (was 0.7, now ~1.0 width)\r\n                    x = centerX + (Math.random() - 0.5) * size * 1.0;\r\n                    y = centerY - size * 0.5 - Math.random() * size * 0.15;\r\n                    distance = 0;\r\n                    break;\r\n                case 'snowglobe-active':\r\n                    distance = Math.random() * ringRadius * 1.1;\r\n                    x = centerX + Math.cos(angle) * distance;\r\n                    y = centerY + Math.sin(angle) * distance;\r\n                    break;\r\n                case 'hyperspace-rays':\r\n                    distance = ringRadius * 1.2;\r\n                    x = centerX + Math.cos(angle) * distance;\r\n                    y = centerY + Math.sin(angle) * distance;\r\n                    break;\r\n                case 'starfield-smooth':\r\n                    distance = ringRadius * (0.2 + Math.random() * 0.8);\r\n                    x = centerX + Math.cos(angle) * distance;\r\n                    y = centerY + Math.sin(angle) * distance;\r\n                    break;\r\n                default:\r\n                    distance = ringRadius * (0.6 + Math.random() * 0.4);\r\n                    x = centerX + Math.cos(angle) * distance;\r\n                    y = centerY + Math.sin(angle) * distance;\r\n            }\r\n\r\n            particles.push({\r\n                id: i,\r\n                x, y,\r\n                baseX: x, baseY: y,\r\n                angle, distance,\r\n                baseDistance: distance,\r\n                size: fx.particleSize.min + Math.random() * (fx.particleSize.max - fx.particleSize.min),\r\n                speed: 0.3 + Math.random() * 0.7,\r\n                phase: Math.random() * Math.PI * 2,\r\n                opacity: fx.motionPattern === 'meteor-cycle' ? 0 : (0.4 + Math.random() * 0.6),\r\n                twinklePhase: Math.random() * Math.PI * 2,\r\n                popTimer: Math.random() * 2,\r\n                colorVar,\r\n                rotationSpeed: 0.5 + Math.random() * 1.5,\r\n                rotationDir: Math.random() > 0.5 ? 1 : -1,\r\n                arcLength: 0.3 + Math.random() * 0.4,\r\n                arcSegments: [],\r\n                trail: []\r\n            });\r\n        }\r\n        return particles;\r\n    }, [fx.particleCount, fx.particleSize, fx.motionPattern, size, getColorVariation, ringRadiusProp]);\r\n\r\n    const applyMotion = useCallback((particle, dt, centerX, centerY, currentRingScale) => {\r\n        const baseSpeed = breathParams.speed * particle.speed;\r\n        // Use explicit ringRadius prop if provided, otherwise calculate from size\r\n        const baseRingRadius = ringRadiusProp || (size * 0.4);\r\n        // Scale ring radius to match BreathingRing's dynamic scale (default 1.0-1.2)\r\n        const ringRadius = baseRingRadius * currentRingScale;\r\n\r\n        switch (fx.motionPattern) {\r\n            // HYPERSPACE-RAYS - Upgraded: breath pulsation + shimmer + dual layers\r\n            case 'hyperspace-rays': {\r\n                const raySpeed = breathParams.raySpeed || 0.5;\r\n                const rayLength = breathParams.rayLength || 1.0;\r\n                const isInhale = phase === 'inhale';\r\n                const isExhale = phase === 'exhale';\r\n\r\n                // Γÿà DUAL RAY LAYERS - assign layer based on particle id\r\n                if (!particle.rayLayer) {\r\n                    particle.rayLayer = particle.id % 3 === 0 ? 'outer' : 'inner';\r\n                    particle.layerLengthMult = particle.rayLayer === 'outer' ? 1.4 : 0.7;\r\n                    particle.layerBrightMult = particle.rayLayer === 'outer' ? 1.0 : 0.6;\r\n                }\r\n\r\n                // Γÿà ANGULAR SHIMMER - subtle ┬▒1┬░ noise each frame\r\n                particle.shimmerPhase = (particle.shimmerPhase || Math.random() * Math.PI * 2) + Math.random() * 0.1;\r\n                const shimmerAngle = Math.sin(particle.shimmerPhase) * 0.017; // ~1 degree\r\n\r\n                // Γÿà BREATH-SYNCED RAY LENGTH PULSATION\r\n                const breathMod = isInhale ? 1.08 : (isExhale ? 0.92 : 1.0);\r\n\r\n                if (isInhale) {\r\n                    particle.distance -= dt * raySpeed * 30;\r\n                    if (particle.distance < ringRadius * 0.1) {\r\n                        particle.distance = ringRadius * 0.1;\r\n                    }\r\n                    particle.opacity = 0.7 * particle.layerBrightMult;\r\n                } else if (isExhale) {\r\n                    particle.distance += dt * raySpeed * 120;\r\n                    particle.opacity = Math.max(0, 1 - (particle.distance / (ringRadius * 1.8))) * particle.layerBrightMult;\r\n                } else {\r\n                    particle.distance += dt * raySpeed * 20;\r\n                }\r\n\r\n                if (particle.distance > ringRadius * 1.8) {\r\n                    particle.distance = ringRadius * 0.15;\r\n                    particle.opacity = 0.85 * particle.layerBrightMult;\r\n                    particle.angle = Math.random() * Math.PI * 2;\r\n                }\r\n\r\n                // Apply layer-adjusted ray length with breath pulsation\r\n                particle.rayLength = rayLength * particle.layerLengthMult * breathMod;\r\n\r\n                // Apply shimmer to angle\r\n                const finalAngle = particle.angle + shimmerAngle;\r\n                particle.x = centerX + Math.cos(finalAngle) * particle.distance;\r\n                particle.y = centerY + Math.sin(finalAngle) * particle.distance;\r\n                break;\r\n            }\r\n\r\n            // STARFIELD-SMOOTH - Upgraded: radiate bursts + easing + breath sync\r\n            case 'starfield-smooth': {\r\n                const targetScale = breathParams.scale || 1.0;\r\n                const currentScale = particle.currentScale || 1.0;\r\n                particle.currentScale = currentScale + (targetScale - currentScale) * dt * 2;\r\n\r\n                // Γÿà BREATH SYNC: modify behavior based on phase\r\n                const isHold = phase === 'holdIn' || phase === 'holdOut';\r\n                const isInhale = phase === 'inhale';\r\n                const speedMult = isHold ? 0.1 : (isInhale ? 1.5 : 0.8);\r\n\r\n                const dx = particle.baseX - centerX;\r\n                const dy = particle.baseY - centerY;\r\n\r\n                // Γÿà CENTER-OUT RADIATING BURST\r\n                particle.burstTimer = (particle.burstTimer || Math.random() * 8) - dt;\r\n                if (particle.burstTimer <= 0 && !particle.isBursting) {\r\n                    // Random chance to start bursting\r\n                    if (Math.random() < 0.15) {\r\n                        particle.isBursting = true;\r\n                        particle.burstProgress = 0;\r\n                        particle.burstDuration = 0.4 + Math.random() * 0.2;\r\n                    }\r\n                    particle.burstTimer = 4 + Math.random() * 4;\r\n                }\r\n\r\n                if (particle.isBursting) {\r\n                    particle.burstProgress += dt / particle.burstDuration;\r\n                    // Γÿà CUBIC EASE OUT for burst expansion\r\n                    const eased = 1 - Math.pow(1 - particle.burstProgress, 3);\r\n                    const burstScale = 1 + eased * 0.5;\r\n                    particle.x = centerX + dx * particle.currentScale * burstScale;\r\n                    particle.y = centerY + dy * particle.currentScale * burstScale;\r\n                    particle.opacity = 1 - eased; // Fade as it expands\r\n\r\n                    if (particle.burstProgress >= 1) {\r\n                        particle.isBursting = false;\r\n                        particle.opacity = 0.3;\r\n                    }\r\n                } else {\r\n                    particle.x = centerX + dx * particle.currentScale;\r\n                    particle.y = centerY + dy * particle.currentScale;\r\n\r\n                    // Γÿà CUBIC EASE IN/OUT for opacity (premium fade)\r\n                    particle.lifePhase = (particle.lifePhase || Math.random() * Math.PI * 2) + dt * 0.5 * speedMult;\r\n                    const t = (Math.sin(particle.lifePhase) + 1) / 2; // 0-1\r\n                    const eased = t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\r\n                    particle.opacity = 0.2 + eased * 0.6;\r\n                }\r\n\r\n                // Γÿà MULTI-PHASE STAR BEHAVIOR: tiny drift\r\n                particle.driftPhase = (particle.driftPhase || Math.random() * Math.PI * 2) + dt * 0.8;\r\n                const drift = Math.sin(particle.driftPhase) * 2;\r\n                particle.x += drift * dt;\r\n                particle.y += drift * dt * 0.5;\r\n\r\n                particle.twinklePhase += dt * 5 * speedMult;\r\n                if (breathParams.twinkle && !particle.isBursting) {\r\n                    particle.opacity = Math.min(particle.opacity, 0.5 + Math.abs(Math.sin(particle.twinklePhase)) * 0.5);\r\n                }\r\n                break;\r\n            }\r\n\r\n            // EMBER-MIXED - Upgraded: orbit drift + size flicker + temperature shift\r\n            case 'ember-mixed': {\r\n                // Initialize ember-specific properties\r\n                particle.emberAge = (particle.emberAge || 0) + dt;\r\n                particle.driftPhase = (particle.driftPhase || Math.random() * Math.PI * 2) + dt * 2;\r\n                particle.flickerPhase = (particle.flickerPhase || Math.random() * Math.PI * 2) + dt * 8;\r\n\r\n                // Base upward movement\r\n                particle.y -= dt * baseSpeed * 45;\r\n\r\n                const riseHeight = Math.max(0, (centerY - particle.y) / (size * 0.4));\r\n                const shimmer = Math.sin(particle.phase * 3 + Date.now() * 0.006) * (6 + riseHeight * 10);\r\n\r\n                // Γÿà MICRO ORBIT DRIFT - sine wave horizontal drift (3-5px)\r\n                const driftAmp = 3 + Math.sin(particle.phase) * 2;\r\n                const orbitDrift = Math.sin(particle.driftPhase) * driftAmp;\r\n                particle.x += (shimmer + orbitDrift) * dt * 2.5;\r\n\r\n                // Γÿà SIZE FLICKER - organic flame-particle feel (┬▒15%)\r\n                const sizeFlicker = 0.85 + Math.sin(particle.flickerPhase) * 0.15 + Math.random() * 0.1;\r\n\r\n                particle.popTimer -= dt;\r\n                if (particle.popTimer <= 0) {\r\n                    particle.opacity = Math.min(1, particle.opacity + 0.4);\r\n                    particle.size = Math.min(fx.particleSize.max * 1.5, particle.size * 1.35);\r\n                    particle.popTimer = 0.25 + Math.random() * 0.7;\r\n                } else {\r\n                    particle.size *= (1 - dt * 2.5);\r\n                    if (particle.size < fx.particleSize.min) particle.size = fx.particleSize.min;\r\n                }\r\n\r\n                // Apply size flicker\r\n                particle.displaySize = particle.size * sizeFlicker;\r\n\r\n                // Γÿà TEMPERATURE COLOR SHIFT (warm inhale ΓåÆ cooler exhale)\r\n                const isInhale = phase === 'inhale';\r\n                particle.temperatureShift = isInhale ? 15 : -10; // Hue shift\r\n\r\n                particle.opacity = Math.max(0.15, particle.opacity - dt * 0.55);\r\n\r\n                if (particle.y < centerY - size * 0.42) {\r\n                    if (breathParams.spawn !== false) {\r\n                        // Always spawn from ring\r\n                        const newAngle = Math.random() * Math.PI * 2;\r\n                        particle.x = centerX + Math.cos(newAngle) * ringRadius;\r\n                        particle.y = centerY + Math.sin(newAngle) * ringRadius;\r\n                        particle.opacity = 0.9;\r\n                        particle.size = fx.particleSize.min + Math.random() * (fx.particleSize.max - fx.particleSize.min);\r\n                        particle.emberAge = 0;\r\n                    } else {\r\n                        particle.opacity = 0;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // ELECTRIC-VARIED v2: Plasma Conduit - Continuous parametric curve\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'electric-varied': {\r\n                // Time-based animation for smooth continuous motion\r\n                particle.time = (particle.time || Math.random() * 100) + dt * 0.8;\r\n\r\n                // Generate FULL RING arc points with smooth noise displacement\r\n                const segmentCount = 90; // High resolution for smooth curve\r\n                const noiseAmplitude = 3 + breathParams.intensity * 2; // Subtle: 3-5px displacement\r\n                const microJitterAmp = 1.5; // Very small micro-jitter on top\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n\r\n                    // Smooth noise displacement (simulated with layered sine waves)\r\n                    const noise1 = Math.sin(angle * 3 + particle.time * 2) * 0.4;\r\n                    const noise2 = Math.sin(angle * 7 + particle.time * 1.3) * 0.25;\r\n                    const noise3 = Math.sin(angle * 13 + particle.time * 0.7) * 0.15;\r\n                    const smoothNoise = (noise1 + noise2 + noise3) * noiseAmplitude;\r\n\r\n                    // Micro-jitter on top of smooth curve (changes each frame)\r\n                    const microJitter = (Math.random() - 0.5) * microJitterAmp;\r\n\r\n                    const r = ringRadius + smoothNoise + microJitter;\r\n                    const px = centerX + Math.cos(angle) * r;\r\n                    const py = centerY + Math.sin(angle) * r;\r\n\r\n                    particle.arcSegments.push({ x: px, y: py, angle });\r\n                }\r\n\r\n                // Store offset phase for ghost lines\r\n                particle.ghostPhase1 = 0.15;\r\n                particle.ghostPhase2 = 0.35;\r\n\r\n                // Particle position for drift spark (subtle, slow circulation)\r\n                particle.angle += dt * 0.3 * particle.rotationDir; // Very slow drift\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n\r\n                // Reduced opacity for subtlety\r\n                particle.opacity = 0.35; // 65% reduction from 1.0\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PLASMA-DIRECTIONAL: Sci-fi style with visible directional flow\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'plasma-directional': {\r\n                // Continuous time for directional sliding\r\n                const flowSpeed = breathParams.flowSpeed || 1.0;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * flowSpeed;\r\n\r\n                // Generate FULL RING arc with DIRECTIONAL phase shift\r\n                const segmentCount = 120; // Higher resolution for sharper detail\r\n                const noiseAmplitude = 4 + breathParams.intensity * 3; // Slightly more amplitude\r\n                const microJitterAmp = 2.5; // Sharper micro-jitter\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n\r\n                    // DIRECTIONAL FLOW: noise slides around the ring over time\r\n                    // The key difference: (angle - particle.time * 0.5) creates phase drift\r\n                    const phaseAngle = angle - particle.time * 0.5;\r\n\r\n                    // Layered noise with phase offset for directional movement\r\n                    const noise1 = Math.sin(phaseAngle * 4) * 0.5;\r\n                    const noise2 = Math.sin(phaseAngle * 9 + 0.3) * 0.3;\r\n                    const noise3 = Math.sin(phaseAngle * 17 + 0.7) * 0.15;\r\n                    const smoothNoise = (noise1 + noise2 + noise3) * noiseAmplitude;\r\n\r\n                    // Sharper micro-jitter for \"electric snap\" feel\r\n                    const microJitter = (Math.random() - 0.5) * microJitterAmp;\r\n\r\n                    const r = ringRadius + smoothNoise + microJitter;\r\n                    const px = centerX + Math.cos(angle) * r;\r\n                    const py = centerY + Math.sin(angle) * r;\r\n\r\n                    particle.arcSegments.push({ x: px, y: py, angle });\r\n                }\r\n\r\n                // Echo line phase offsets (for 2 trailing lines)\r\n                particle.echo1Phase = 0.08;\r\n                particle.echo2Phase = 0.18;\r\n\r\n                // Drift spark position (faster than shimmer, following flow direction)\r\n                particle.angle += dt * 0.8 * particle.rotationDir;\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n\r\n                // More visible than shimmer, but still restrained\r\n                particle.opacity = 0.55;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PLASMA-REFINED: v2 with inner core, echo, amplitude variation\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'plasma-refined': {\r\n                const flowSpeed = breathParams.flowSpeed || 1.0;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * flowSpeed;\r\n\r\n                // Amplitude variation over time (slow breathing)\r\n                particle.ampVar = (particle.ampVar || Math.random() * 100) + dt * 0.3;\r\n                const ampMod = 1 + Math.sin(particle.ampVar) * 0.3; // ┬▒30% variation\r\n\r\n                const segmentCount = 120;\r\n                const baseAmplitude = 4 + breathParams.intensity * 3;\r\n                const noiseAmplitude = baseAmplitude * ampMod;\r\n                const microJitterAmp = 2 * ampMod;\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const phaseAngle = angle - particle.time * 0.6;\r\n\r\n                    const noise1 = Math.sin(phaseAngle * 4) * 0.5;\r\n                    const noise2 = Math.sin(phaseAngle * 11 + 0.3) * 0.3;\r\n                    const noise3 = Math.sin(phaseAngle * 19 + 0.7) * 0.15;\r\n                    const smoothNoise = (noise1 + noise2 + noise3) * noiseAmplitude;\r\n                    const microJitter = (Math.random() - 0.5) * microJitterAmp;\r\n\r\n                    const r = ringRadius + smoothNoise + microJitter;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r, angle });\r\n                }\r\n\r\n                particle.hasInnerCore = true;\r\n                particle.echo1Phase = 0.06;\r\n                particle.echo2Phase = 0.14;\r\n                particle.angle += dt * 0.9 * particle.rotationDir;\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n                particle.opacity = 0.6;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // RIBBON-FLOW: Elegant, silk-like flowing energy\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'ribbon-flow': {\r\n                const flowSpeed = breathParams.flowSpeed || 0.8;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * flowSpeed;\r\n\r\n                const segmentCount = 180; // Very smooth\r\n                const noiseAmplitude = 2 + breathParams.intensity * 1.5; // Low amplitude\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const phaseAngle = angle - particle.time * 0.3;\r\n\r\n                    // Very smooth, single-frequency noise (silk-like)\r\n                    const smoothNoise = Math.sin(phaseAngle * 2) * noiseAmplitude;\r\n                    const r = ringRadius + smoothNoise;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r });\r\n                }\r\n\r\n                particle.angle += dt * 0.2 * particle.rotationDir;\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n                particle.opacity = 0.45;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // CIRCUIT-PULSE: Digital, sharp, with pulse animation\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'circuit-pulse': {\r\n                const pulseRate = breathParams.pulseRate || 1.0;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * pulseRate;\r\n\r\n                const segmentCount = 90;\r\n                const baseJitter = 3 + breathParams.intensity * 2;\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n\r\n                    // Sharp digital jitter (steps not smooth)\r\n                    const step = Math.floor(angle * 8 + particle.time * 3) % 4;\r\n                    const digitalNoise = (step === 0 ? 1 : step === 2 ? -1 : 0) * baseJitter;\r\n                    const spike = Math.random() > 0.95 ? (Math.random() - 0.5) * 8 : 0;\r\n\r\n                    const r = ringRadius + digitalNoise + spike;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r });\r\n                }\r\n\r\n                // Pulse opacity\r\n                particle.pulsePhase = (particle.pulsePhase || 0) + dt * pulseRate * 2;\r\n                particle.opacity = 0.5 + Math.sin(particle.pulsePhase) * 0.2;\r\n                particle.angle += dt * 1.0 * particle.rotationDir;\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // FLARE-TURBULENCE: Heat distortion, turbulent movement\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'flare-turbulence': {\r\n                const turbulence = breathParams.turbulence || 1.0;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * turbulence * 0.8;\r\n\r\n                const segmentCount = 100;\r\n                const noiseAmp = 5 + breathParams.intensity * 4;\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const phaseAngle = angle + particle.time;\r\n\r\n                    // Turbulent, multi-layer noise\r\n                    const turb1 = Math.sin(phaseAngle * 5 + Math.sin(phaseAngle * 3)) * 0.5;\r\n                    const turb2 = Math.sin(phaseAngle * 11 + Math.cos(phaseAngle * 7)) * 0.3;\r\n                    const turb3 = (Math.random() - 0.5) * 0.4 * turbulence;\r\n                    const noise = (turb1 + turb2 + turb3) * noiseAmp;\r\n\r\n                    const r = ringRadius + noise;\r\n                    // Store angle for hue gradient\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r, angle });\r\n                }\r\n\r\n                particle.isFlare = true;\r\n                particle.angle += dt * 0.4 * particle.rotationDir;\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n                particle.opacity = 0.65;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // WISP-DRIFT: Magical wisps traveling around the ring\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'wisp-drift': {\r\n                const wispSpeed = breathParams.wispSpeed || 0.5;\r\n                particle.angle += dt * wispSpeed * particle.rotationDir;\r\n\r\n                // Wisps have no arc segments - just particle positions\r\n                particle.arcSegments = null;\r\n\r\n                // More pronounced vertical oscillation\r\n                particle.wispPhase = (particle.wispPhase || Math.random() * Math.PI * 2) + dt * 2.0;\r\n                const vertOffset = Math.sin(particle.wispPhase) * 8;\r\n\r\n                // Position on ring with wider offset\r\n                const baseR = ringRadius + (Math.random() - 0.5) * 10;\r\n                particle.x = centerX + Math.cos(particle.angle) * baseR;\r\n                particle.y = centerY + Math.sin(particle.angle) * baseR + vertOffset;\r\n\r\n                // Higher visibility, slower fade\r\n                particle.lifePhase = (particle.lifePhase || Math.random()) + dt * 0.2;\r\n                particle.opacity = 0.55 + Math.sin(particle.lifePhase * Math.PI) * 0.35;\r\n                particle.wispSize = 1.5 + Math.sin(particle.lifePhase * Math.PI * 0.5) * 0.5;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // CHAOS-ELECTRIC: Aggressive, high amplitude, with branching\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'chaos-electric': {\r\n                const chaosLevel = breathParams.chaosLevel || 1.0;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * chaosLevel;\r\n\r\n                const segmentCount = 80;\r\n                const baseAmp = 8 + breathParams.intensity * 6;\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const phaseAngle = angle - particle.time * 0.8;\r\n\r\n                    // High chaos noise\r\n                    const chaos1 = Math.sin(phaseAngle * 6) * 0.6;\r\n                    const chaos2 = Math.sin(phaseAngle * 13 + particle.time) * 0.4;\r\n                    const chaos3 = (Math.random() - 0.5) * chaosLevel * 0.8;\r\n                    const spike = Math.random() > 0.92 ? (Math.random() - 0.5) * 15 * chaosLevel : 0;\r\n                    const noise = (chaos1 + chaos2 + chaos3) * baseAmp + spike;\r\n\r\n                    const r = ringRadius + noise;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r, angle });\r\n                }\r\n\r\n                particle.isChaos = true;\r\n                particle.angle += dt * 1.2 * particle.rotationDir;\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n                particle.opacity = 0.7;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // QUANTUM-WAVE: Sine-based radius ripples, futuristic\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'quantum-wave': {\r\n                const waveFreq = breathParams.waveFreq || 4;\r\n                const waveAmp = breathParams.waveAmp || 8;  // Much higher amplitude\r\n                particle.time = (particle.time || Math.random() * 100) + dt * 1.2;\r\n\r\n                const segmentCount = 120;\r\n\r\n                particle.arcSegments = [];\r\n\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n\r\n                    // Stronger sine wave ripples with secondary harmonic\r\n                    const wave1 = Math.sin(angle * waveFreq + particle.time * 2.5) * waveAmp;\r\n                    const wave2 = Math.sin(angle * (waveFreq * 2) + particle.time * 1.5) * (waveAmp * 0.3);\r\n                    const r = ringRadius + wave1 + wave2;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r, angle });\r\n                }\r\n\r\n                particle.isQuantum = true;\r\n                particle.angle += dt * 0.6 * particle.rotationDir;\r\n                particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n                particle.opacity = 0.7;\r\n                break;\r\n            }\r\n\r\n            // SNOWGLOBE-ACTIVE - Upgraded: parallax layers + swirl + twinkle\r\n            case 'snowglobe-active': {\r\n                const globeRadius = ringRadius * 1.15;\r\n\r\n                // Γÿà PARALLAX LAYER SYSTEM - assign layer based on particle id\r\n                if (!particle.snowLayer) {\r\n                    const layerRoll = particle.id % 10;\r\n                    if (layerRoll < 3) {\r\n                        particle.snowLayer = 'foreground'; // 30% - large, fast, bright\r\n                        particle.layerSpeed = 1.4;\r\n                        particle.layerSize = 1.3;\r\n                        particle.layerOpacity = 0.8;\r\n                    } else if (layerRoll < 7) {\r\n                        particle.snowLayer = 'midground'; // 40% - medium\r\n                        particle.layerSpeed = 1.0;\r\n                        particle.layerSize = 1.0;\r\n                        particle.layerOpacity = 0.6;\r\n                    } else {\r\n                        particle.snowLayer = 'background'; // 30% - tiny, slow, dim\r\n                        particle.layerSpeed = 0.6;\r\n                        particle.layerSize = 0.6;\r\n                        particle.layerOpacity = 0.35;\r\n                    }\r\n                }\r\n\r\n                // Γÿà SLOW BOWL ROTATION (swirl around center)\r\n                particle.bowlAngle = (particle.bowlAngle || Math.random() * Math.PI * 2) + dt * 0.15;\r\n                const swirl = Math.sin(particle.bowlAngle) * 3;\r\n\r\n                // Γÿà CURL MOTION - spiral as it falls\r\n                particle.curlPhase = (particle.curlPhase || Math.random() * Math.PI * 2) + dt * 1.5;\r\n                const curl = Math.sin(particle.curlPhase) * 4 * particle.layerSpeed;\r\n\r\n                // Layer-adjusted falling speed\r\n                particle.y += dt * baseSpeed * 20 * particle.layerSpeed;\r\n                particle.angle += dt * baseSpeed * 0.3;\r\n                const swirlOffset = Math.sin(particle.angle) * 8;\r\n                particle.x += (swirlOffset + curl + swirl) * dt;\r\n\r\n                if (breathParams.shake) {\r\n                    particle.x += (Math.random() - 0.5) * 40 * dt;\r\n                    particle.y += (Math.random() - 0.5) * 25 * dt;\r\n                }\r\n\r\n                const dx = particle.x - centerX;\r\n                const dy = particle.y - centerY;\r\n                const dist = Math.sqrt(dx * dx + dy * dy);\r\n                if (dist > globeRadius) {\r\n                    particle.x = centerX + (dx / dist) * globeRadius * 0.95;\r\n                    particle.y = centerY + (dy / dist) * globeRadius * 0.95;\r\n                }\r\n\r\n                if (particle.y > centerY + globeRadius * 0.9) {\r\n                    particle.y = centerY - globeRadius * 0.85;\r\n                    particle.x = centerX + (Math.random() - 0.5) * globeRadius * 1.8;\r\n                }\r\n\r\n                // Γÿà OCCASIONAL TWINKLE SPARK\r\n                particle.twinkleTimer = (particle.twinkleTimer || Math.random() * 5) - dt;\r\n                if (particle.twinkleTimer <= 0) {\r\n                    particle.isTwinkling = true;\r\n                    particle.twinkleTimer = 3 + Math.random() * 4;\r\n                } else if (particle.twinkleTimer > 0.1) {\r\n                    particle.isTwinkling = false;\r\n                }\r\n\r\n                particle.opacity = particle.layerOpacity + Math.random() * 0.15;\r\n                particle.displaySize = particle.size * particle.layerSize;\r\n                break;\r\n            }\r\n\r\n            // METEOR-CYCLE - Upgraded: 3-layer streaks + radial drift + dissolve\r\n            case 'meteor-cycle': {\r\n                const meteorPhase = breathParams.phase || 'fade';\r\n                const cloudY = centerY - size * 0.48;\r\n                const direction = cycleDirectionRef.current;\r\n\r\n                // Γÿà 3-LAYER STREAK SYSTEM - assign layer based on particle id\r\n                if (!particle.meteorLayer) {\r\n                    const layerRoll = particle.id % 10;\r\n                    if (layerRoll < 2) {\r\n                        particle.meteorLayer = 'long';    // 20% - bright streaks\r\n                        particle.streakMult = 2.0;\r\n                        particle.brightMult = 1.3;\r\n                    } else if (layerRoll < 6) {\r\n                        particle.meteorLayer = 'medium';  // 40% - standard\r\n                        particle.streakMult = 1.0;\r\n                        particle.brightMult = 1.0;\r\n                    } else {\r\n                        particle.meteorLayer = 'micro';   // 40% - tiny, dim\r\n                        particle.streakMult = 0.5;\r\n                        particle.brightMult = 0.6;\r\n                    }\r\n                }\r\n\r\n                // Γÿà SLOW RADIAL DRIFT - trajectory rotation over time\r\n                particle.driftAngle = (particle.driftAngle || 0) + dt * 0.0015;\r\n\r\n                switch (meteorPhase) {\r\n                    case 'cloud':\r\n                        if (particle.opacity < 0.35) {\r\n                            particle.opacity += dt * 0.6;\r\n                        }\r\n                        particle.x += Math.sin(particle.phase + Date.now() * 0.004) * 12 * dt;\r\n                        particle.y += Math.cos(particle.phase * 1.5 + Date.now() * 0.003) * 6 * dt;\r\n                        particle.y += (cloudY - particle.y) * dt * 0.5;\r\n                        if (particle.y > cloudY + size * 0.15) {\r\n                            particle.y = cloudY;\r\n                        }\r\n                        break;\r\n\r\n                    case 'stop':\r\n                        particle.x += Math.sin(particle.phase + Date.now() * 0.002) * 5 * dt;\r\n                        particle.y += Math.cos(particle.phase * 1.5 + Date.now() * 0.0015) * 3 * dt;\r\n                        break;\r\n\r\n                    case 'rain':\r\n                        const baseAngle = direction > 0 ? Math.PI * 0.35 : Math.PI * 0.65;\r\n                        const streakAngle = baseAngle + particle.driftAngle;\r\n                        const streakSpeed = baseSpeed * 200 * (0.8 + particle.streakMult * 0.2);\r\n\r\n                        particle.x += Math.cos(streakAngle) * streakSpeed * dt;\r\n                        particle.y += Math.sin(streakAngle) * streakSpeed * dt;\r\n                        particle.opacity = Math.min(0.8 * particle.brightMult, particle.opacity + dt * 2);\r\n                        particle.streakAngle = streakAngle;\r\n                        particle.streakLength = 8 * particle.streakMult;\r\n\r\n                        if (particle.y > centerY + size * 0.4) {\r\n                            // Γÿà STREAK DISSOLVE - spawn mini-sparks effect\r\n                            particle.isDissolving = true;\r\n                            particle.dissolveTime = 0.15;\r\n\r\n                            // Reset\r\n                            particle.x = centerX + (Math.random() - 0.5) * size * 1.0;\r\n                            particle.y = cloudY + Math.random() * size * 0.1;\r\n                            particle.opacity = 0.5;\r\n                            particle.isDissolving = false;\r\n                        }\r\n                        break;\r\n\r\n                    case 'fade':\r\n                    default:\r\n                        particle.opacity = Math.max(0, particle.opacity - dt * 1.2);\r\n                        if (particle.opacity <= 0.05) {\r\n                            particle.x = centerX + (Math.random() - 0.5) * size * 1.0;\r\n                            particle.y = cloudY + Math.random() * size * 0.1;\r\n                            particle.opacity = 0;\r\n                        }\r\n                        break;\r\n                }\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // AETHER-FLOW: Flowing river of particles along the ring path\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'aether-flow': {\r\n                const flowSpeed = breathParams.flowSpeed || 0.8;\r\n                particle.pathProgress = (particle.pathProgress || Math.random()) + dt * flowSpeed * 0.3;\r\n                if (particle.pathProgress > 1) particle.pathProgress -= 1;\r\n\r\n                const angle = particle.pathProgress * Math.PI * 2;\r\n                // Slight radial wobble for organic feel\r\n                const wobble = Math.sin(particle.pathProgress * 8 + Date.now() * 0.002) * 2;\r\n                const r = ringRadius + wobble;\r\n\r\n                particle.x = centerX + Math.cos(angle) * r;\r\n                particle.y = centerY + Math.sin(angle) * r;\r\n                particle.opacity = 0.5 + Math.sin(particle.pathProgress * Math.PI * 2) * 0.3;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // SINGULARITY-WARP: Spacetime distortion curves\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'singularity-warp': {\r\n                const distortAmp = breathParams.distortAmp || 8;\r\n                const noiseScale = breathParams.noiseScale || 3.0;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * 0.8;\r\n\r\n                const segmentCount = 100;\r\n                particle.arcSegments = [];\r\n\r\n                // Main distortion ring\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const noise = Math.sin(angle * noiseScale + particle.time) * distortAmp;\r\n                    const r = ringRadius + noise;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r });\r\n                }\r\n\r\n                // Inner ripple\r\n                particle.innerArcSegments = [];\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const noise = Math.sin(angle * 3 + particle.time * 0.5) * (distortAmp * 0.5);\r\n                    const r = ringRadius - 4 + noise;\r\n                    particle.innerArcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r });\r\n                }\r\n\r\n                particle.opacity = 0.5;\r\n                particle.x = centerX;\r\n                particle.y = centerY;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // CELESTIAL-OSCILLATE: Mandala-like oscillating rings\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'celestial-oscillate': {\r\n                const amplitude = breathParams.amplitude || 6;\r\n                const frequencies = breathParams.frequencies || [3, 5, 7, 9];\r\n                particle.time = (particle.time || 0) + dt * 0.8;\r\n\r\n                const segmentCount = 100;\r\n                const layerIndex = particle.id % 4;\r\n                const freq = frequencies[layerIndex] || 3;\r\n\r\n                particle.arcSegments = [];\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const wave = Math.sin(angle * freq + particle.time) * amplitude * (1 + layerIndex * 0.3);\r\n                    const r = ringRadius + wave;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r });\r\n                }\r\n\r\n                // Flash when harmonic phases align\r\n                particle.harmonicFlash = Math.abs(Math.sin(particle.time * freq)) > 0.98 ? 1.5 : 1.0;\r\n                particle.opacity = 0.35 * particle.harmonicFlash;\r\n                particle.x = centerX;\r\n                particle.y = centerY;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // DRAGON-FLOW: Serpentine ley line arcs\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'dragon-flow': {\r\n                const amplitude = breathParams.amplitude || 10;\r\n                const jitter = breathParams.jitter || 0.3;\r\n                particle.time = (particle.time || Math.random() * 100) + dt * 0.4;\r\n\r\n                const segmentCount = 100;\r\n                particle.arcSegments = [];\r\n\r\n                // Primary serpentine path\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2;\r\n                    const phaseAngle = angle - particle.time * 0.3;\r\n                    const serpentine = Math.sin(phaseAngle * 1.2) * amplitude;\r\n                    const microJitter = (Math.random() - 0.5) * jitter * 2;\r\n                    const r = ringRadius + serpentine + microJitter;\r\n                    particle.arcSegments.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r, angle });\r\n                }\r\n\r\n                // Secondary offset arc\r\n                particle.secondaryArc = [];\r\n                for (let i = 0; i <= segmentCount; i++) {\r\n                    const t = i / segmentCount;\r\n                    const angle = t * Math.PI * 2 + 0.07;\r\n                    const serpentine = Math.sin((angle - particle.time * 0.3 + 0.2) * 1.2) * amplitude;\r\n                    const r = ringRadius + serpentine;\r\n                    particle.secondaryArc.push({ x: centerX + Math.cos(angle) * r, y: centerY + Math.sin(angle) * r });\r\n                }\r\n\r\n                particle.opacity = 0.85;\r\n                particle.x = centerX;\r\n                particle.y = centerY;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // ORBITAL-FIRE: Embers orbiting the ring smoothly\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'orbital-fire': {\r\n                const orbitSpeed = breathParams.orbitSpeed || 0.8;\r\n                particle.orbitAngle = (particle.orbitAngle || particle.angle) + dt * orbitSpeed * particle.rotationDir;\r\n\r\n                // Slight radial noise\r\n                const noise = Math.sin(particle.orbitAngle * 3 + Date.now() * 0.003) * 3;\r\n                const r = ringRadius + noise;\r\n\r\n                particle.x = centerX + Math.cos(particle.orbitAngle) * r;\r\n                particle.y = centerY + Math.sin(particle.orbitAngle) * r;\r\n\r\n                // Occasional flare\r\n                particle.flareTimer = (particle.flareTimer || Math.random() * 3) - dt;\r\n                if (particle.flareTimer <= 0) {\r\n                    particle.isFlaring = true;\r\n                    particle.flareTimer = 2 + Math.random() * 3;\r\n                } else if (particle.flareTimer > 0.2) {\r\n                    particle.isFlaring = false;\r\n                }\r\n\r\n                particle.opacity = particle.isFlaring ? 1.0 : 0.7;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // VOID-PULSE: Radial pulses emanating from the ring\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'void-pulse': {\r\n                const pulseRate = breathParams.pulseRate || 0.5;\r\n                const pulseAmp = breathParams.pulseAmp || 30;\r\n\r\n                // Initialize pulse\r\n                if (!particle.pulseRadius) {\r\n                    particle.pulseRadius = ringRadius;\r\n                    particle.pulseOpacity = 0.4;\r\n                    particle.pulseDelay = particle.id * 0.5;\r\n                }\r\n\r\n                particle.pulseDelay -= dt;\r\n                if (particle.pulseDelay <= 0) {\r\n                    particle.pulseRadius += dt * pulseAmp * pulseRate;\r\n                    particle.pulseOpacity *= 0.97;\r\n\r\n                    // Reset when faded\r\n                    if (particle.pulseOpacity < 0.02) {\r\n                        particle.pulseRadius = ringRadius;\r\n                        particle.pulseOpacity = 0.4;\r\n                        particle.pulseDelay = 1.5 + Math.random();\r\n                    }\r\n                }\r\n\r\n                particle.x = centerX;\r\n                particle.y = centerY;\r\n                particle.opacity = particle.pulseOpacity;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PRISMATIC-SPLIT: Refraction sparkles with color splitting\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'prismatic-split': {\r\n                const splitChance = breathParams.splitChance || 0.3;\r\n                const hueShift = breathParams.hueShift || 12;\r\n\r\n                // Orbit around ring\r\n                particle.angle += dt * baseSpeed * 0.5 * particle.rotationDir;\r\n                const baseR = ringRadius + (Math.random() - 0.5) * 8;\r\n                particle.x = centerX + Math.cos(particle.angle) * baseR;\r\n                particle.y = centerY + Math.sin(particle.angle) * baseR;\r\n\r\n                // Splitting behavior\r\n                particle.splitTimer = (particle.splitTimer || Math.random() * 2) - dt;\r\n                if (particle.splitTimer <= 0 && !particle.isSplitting) {\r\n                    if (Math.random() < splitChance) {\r\n                        particle.isSplitting = true;\r\n                        particle.splitProgress = 0;\r\n                        particle.splitHue1 = hueShift;\r\n                        particle.splitHue2 = -hueShift;\r\n                    }\r\n                    particle.splitTimer = 1 + Math.random() * 2;\r\n                }\r\n\r\n                if (particle.isSplitting) {\r\n                    particle.splitProgress += dt * 3;\r\n                    if (particle.splitProgress >= 1) {\r\n                        particle.isSplitting = false;\r\n                    }\r\n                }\r\n\r\n                particle.opacity = 0.7 + Math.sin(particle.angle * 4) * 0.2;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // STARDUST-DRIFT: Hypnotic dust flowing along the ring\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'stardust-drift': {\r\n                const flowSpeed = breathParams.flowSpeed || 0.6;\r\n                const fallChance = breathParams.fallChance || 0.02;\r\n\r\n                // Tangential movement along ring\r\n                particle.angle += dt * flowSpeed * 0.4 * particle.rotationDir;\r\n\r\n                // Falling behavior\r\n                if (!particle.isFalling && Math.random() < fallChance * dt) {\r\n                    particle.isFalling = true;\r\n                    particle.fallVelocity = 0;\r\n                }\r\n\r\n                if (particle.isFalling) {\r\n                    particle.fallVelocity += dt * 20;\r\n                    particle.y += particle.fallVelocity * dt;\r\n                    particle.opacity -= dt * 0.5;\r\n\r\n                    if (particle.opacity <= 0 || particle.y > centerY + size * 0.5) {\r\n                        // Reset\r\n                        particle.isFalling = false;\r\n                        particle.angle = Math.random() * Math.PI * 2;\r\n                        particle.opacity = 0.8;\r\n                        particle.fallVelocity = 0;\r\n                    }\r\n                } else {\r\n                    particle.x = centerX + Math.cos(particle.angle) * ringRadius;\r\n                    particle.y = centerY + Math.sin(particle.angle) * ringRadius;\r\n                    particle.opacity = 0.7 + Math.sin(particle.angle * 2) * 0.2;\r\n                }\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // SPIRIT-ORBIT: Two spirit lights chasing each other\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'spirit-orbit': {\r\n                const speed1 = breathParams.speed1 || 1.2;\r\n                const speed2 = breathParams.speed2 || 1.5;\r\n\r\n                // Assign speeds based on particle id\r\n                const mySpeed = particle.id === 0 ? speed1 : speed2;\r\n                particle.spiritAngle = (particle.spiritAngle || particle.id * Math.PI) + dt * mySpeed;\r\n\r\n                particle.x = centerX + Math.cos(particle.spiritAngle) * ringRadius;\r\n                particle.y = centerY + Math.sin(particle.spiritAngle) * ringRadius;\r\n\r\n                // Glint when close to other spirit (angle diff < 0.3 rad)\r\n                const otherAngle = particle.id === 0 ? particle.spiritAngle + Math.PI : particle.spiritAngle - Math.PI;\r\n                const angleDiff = Math.abs(Math.sin(particle.spiritAngle - otherAngle * (speed2 / speed1)));\r\n                particle.isGlinting = angleDiff < 0.15;\r\n\r\n                particle.opacity = particle.isGlinting ? 1.0 : 0.75;\r\n                break;\r\n            }\r\n\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // FOREST-DRIFT: Leaf-shaped particles drifting from the ring\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            case 'forest-drift': {\r\n                const fallSpeed = breathParams.fallSpeed || 0.5;\r\n                const rotSpeed = breathParams.rotSpeed || 0.5;\r\n\r\n                // Initialize from ring\r\n                if (!particle.hasSpawned) {\r\n                    particle.hasSpawned = true;\r\n                    const spawnAngle = Math.random() * Math.PI * 2;\r\n                    particle.x = centerX + Math.cos(spawnAngle) * ringRadius;\r\n                    particle.y = centerY + Math.sin(spawnAngle) * ringRadius;\r\n                    particle.leafRotation = Math.random() * Math.PI * 2;\r\n                    particle.driftPhase = Math.random() * Math.PI * 2;\r\n                }\r\n\r\n                // Falling with gentle sway\r\n                particle.y += dt * fallSpeed * 30;\r\n                particle.driftPhase += dt * 2;\r\n                particle.x += Math.sin(particle.driftPhase) * dt * 15;\r\n                particle.leafRotation += dt * rotSpeed * 2;\r\n\r\n                // Reset when fallen too far\r\n                if (particle.y > centerY + size * 0.5) {\r\n                    const spawnAngle = Math.random() * Math.PI * 2;\r\n                    particle.x = centerX + Math.cos(spawnAngle) * ringRadius;\r\n                    particle.y = centerY + Math.sin(spawnAngle) * ringRadius;\r\n                    particle.opacity = 0.5;\r\n                }\r\n\r\n                particle.opacity = Math.max(0.1, 0.5 - (particle.y - centerY) / (size * 0.4) * 0.3);\r\n                break;\r\n            }\r\n\r\n            // Legacy patterns\r\n            case 'orbit-steady': {\r\n                particle.angle += dt * baseSpeed * 0.3;\r\n                const wobble = Math.sin(particle.phase + Date.now() * 0.002) * 5;\r\n                particle.x = centerX + Math.cos(particle.angle) * (particle.distance + wobble);\r\n                particle.y = centerY + Math.sin(particle.angle) * (particle.distance + wobble);\r\n                break;\r\n            }\r\n\r\n            case 'burst': {\r\n                if (breathParams.disperse) {\r\n                    particle.distance += dt * baseSpeed * 50;\r\n                    if (particle.distance > size * 0.5) particle.distance = size * 0.1;\r\n                } else {\r\n                    particle.distance *= 0.99;\r\n                }\r\n                particle.angle += dt * baseSpeed * 0.3;\r\n                particle.x = centerX + Math.cos(particle.angle) * particle.distance;\r\n                particle.y = centerY + Math.sin(particle.angle) * particle.distance;\r\n                break;\r\n            }\r\n\r\n            case 'drift': {\r\n                const driftX = Math.sin(particle.phase + Date.now() * 0.0008) * 15;\r\n                const driftY = Math.cos(particle.phase * 1.3 + Date.now() * 0.0006) * 12;\r\n                particle.x = particle.baseX + driftX;\r\n                particle.y = particle.baseY + driftY;\r\n                break;\r\n            }\r\n\r\n            default:\r\n                particle.angle += dt * baseSpeed * 0.3;\r\n                particle.x = centerX + Math.cos(particle.angle) * particle.distance;\r\n                particle.y = centerY + Math.sin(particle.angle) * particle.distance;\r\n        }\r\n\r\n        return particle;\r\n    }, [fx.motionPattern, fx.particleSize, breathParams, size, phase, ringScale, ringRadiusProp]);\r\n\r\n    const drawParticle = useCallback((ctx, particle, color) => {\r\n        const glowIntensity = breathParams.glow * intensity;\r\n        const baseOpacity = particle.opacity * intensity;\r\n        const s = particle.size * (0.8 + intensity * 0.4);\r\n        const colorVar = particle.colorVar || { brightnessOffset: 0, hueOffset: 0 };\r\n\r\n        ctx.save();\r\n\r\n        // Electric arcs use absolute coordinates, others use translate\r\n        if (fx.particleType === 'lightning-arc') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PLASMA CONDUIT v2: Continuous ring with core + 2 ghost offset lines\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const colorVar = particle.colorVar || { brightnessOffset: 0, hueOffset: 0 };\r\n\r\n                // MUCH reduced brightness (60-70% reduction)\r\n                const masterOpacity = baseOpacity * 0.35;\r\n\r\n                // Use lighter blending for subtle glow\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // --- GHOST LINE 1: Faint offset (behind, phase shifted) ---\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.4, colorVar.brightnessOffset - 0.15, colorVar.hueOffset);\r\n                ctx.lineWidth = 2;\r\n                ctx.shadowBlur = 8;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.3, colorVar.brightnessOffset, colorVar.hueOffset);\r\n\r\n                ctx.beginPath();\r\n                for (let i = 0; i < particle.arcSegments.length; i++) {\r\n                    const seg = particle.arcSegments[i];\r\n                    // Offset by phase shift (use nearby segment with wrap)\r\n                    const offsetIdx = (i + Math.floor(particle.arcSegments.length * (particle.ghostPhase1 || 0.15))) % particle.arcSegments.length;\r\n                    const offsetSeg = particle.arcSegments[offsetIdx];\r\n                    const offsetX = (seg.x - offsetSeg.x) * 0.3;\r\n                    const offsetY = (seg.y - offsetSeg.y) * 0.3;\r\n                    if (i === 0) {\r\n                        ctx.moveTo(seg.x + offsetX, seg.y + offsetY);\r\n                    } else {\r\n                        ctx.lineTo(seg.x + offsetX, seg.y + offsetY);\r\n                    }\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // --- GHOST LINE 2: Even fainter offset (different phase) ---\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.25, colorVar.brightnessOffset - 0.2, colorVar.hueOffset + 10);\r\n                ctx.lineWidth = 1.5;\r\n                ctx.shadowBlur = 6;\r\n\r\n                ctx.beginPath();\r\n                for (let i = 0; i < particle.arcSegments.length; i++) {\r\n                    const seg = particle.arcSegments[i];\r\n                    const offsetIdx = (i + Math.floor(particle.arcSegments.length * (particle.ghostPhase2 || 0.35))) % particle.arcSegments.length;\r\n                    const offsetSeg = particle.arcSegments[offsetIdx];\r\n                    const offsetX = (seg.x - offsetSeg.x) * 0.2;\r\n                    const offsetY = (seg.y - offsetSeg.y) * 0.2;\r\n                    if (i === 0) {\r\n                        ctx.moveTo(seg.x - offsetX, seg.y - offsetY);\r\n                    } else {\r\n                        ctx.lineTo(seg.x - offsetX, seg.y - offsetY);\r\n                    }\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // --- MAIN CORE LINE: Sharp, brightest (but still subtle) ---\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.8, colorVar.brightnessOffset, colorVar.hueOffset);\r\n                ctx.lineWidth = 1.2;\r\n                ctx.shadowBlur = 4;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.5, colorVar.brightnessOffset + 0.1, colorVar.hueOffset);\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Reset composite operation\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n            // Drift spark at particle position (very subtle, small)\r\n            ctx.shadowBlur = 6;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.5, colorVar.brightnessOffset, colorVar.hueOffset);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.4, 0, Math.PI * 2);\r\n            ctx.fill();\r\n        } else if (fx.particleType === 'plasma-arc') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PLASMA-ARC: Sci-fi style with sharper core + echo lines + visible sparks\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const colorVar = particle.colorVar || { brightnessOffset: 0, hueOffset: 0 };\r\n\r\n                // Higher opacity than shimmer (more sci-fi visible)\r\n                const masterOpacity = baseOpacity * 0.5;\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // --- ECHO LINE 1: Trailing offset (faint, behind main) ---\r\n                const echo1Offset = Math.floor(particle.arcSegments.length * (particle.echo1Phase || 0.08));\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.35, colorVar.brightnessOffset - 0.1, colorVar.hueOffset + 5);\r\n                ctx.lineWidth = 2.5;\r\n                ctx.shadowBlur = 10;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.4, colorVar.brightnessOffset, colorVar.hueOffset);\r\n\r\n                ctx.beginPath();\r\n                for (let i = 0; i < particle.arcSegments.length; i++) {\r\n                    const idx = (i + echo1Offset) % particle.arcSegments.length;\r\n                    const seg = particle.arcSegments[idx];\r\n                    if (i === 0) {\r\n                        ctx.moveTo(seg.x, seg.y);\r\n                    } else {\r\n                        ctx.lineTo(seg.x, seg.y);\r\n                    }\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // --- ECHO LINE 2: Second trailing offset (even fainter) ---\r\n                const echo2Offset = Math.floor(particle.arcSegments.length * (particle.echo2Phase || 0.18));\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.2, colorVar.brightnessOffset - 0.15, colorVar.hueOffset + 10);\r\n                ctx.lineWidth = 1.8;\r\n                ctx.shadowBlur = 6;\r\n\r\n                ctx.beginPath();\r\n                for (let i = 0; i < particle.arcSegments.length; i++) {\r\n                    const idx = (i + echo2Offset) % particle.arcSegments.length;\r\n                    const seg = particle.arcSegments[idx];\r\n                    if (i === 0) {\r\n                        ctx.moveTo(seg.x, seg.y);\r\n                    } else {\r\n                        ctx.lineTo(seg.x, seg.y);\r\n                    }\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // --- MAIN CORE LINE: Sharp, bright, visible backbone ---\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 1.0, colorVar.brightnessOffset + 0.1, colorVar.hueOffset);\r\n                ctx.lineWidth = 1.8;\r\n                ctx.shadowBlur = 6;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.7, colorVar.brightnessOffset + 0.15, colorVar.hueOffset);\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Reset composite operation\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n            // Drift spark at particle position (more visible, follows flow)\r\n            ctx.shadowBlur = 10;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.8, colorVar.brightnessOffset + 0.15, colorVar.hueOffset);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.6, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // Spark glow halo\r\n            ctx.shadowBlur = 15;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.3, colorVar.brightnessOffset, colorVar.hueOffset);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 1.2, 0, Math.PI * 2);\r\n            ctx.fill();\r\n        } else if (fx.particleType === 'plasma-v2') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PLASMA V2: With inner core line + amplitude-modulated rendering\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const colorVar = particle.colorVar || { brightnessOffset: 0, hueOffset: 0 };\r\n                const masterOpacity = baseOpacity * 0.55;\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // Echo lines\r\n                const echo1Off = Math.floor(particle.arcSegments.length * (particle.echo1Phase || 0.06));\r\n                const echo2Off = Math.floor(particle.arcSegments.length * (particle.echo2Phase || 0.14));\r\n\r\n                // Echo 1\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.3, colorVar.brightnessOffset - 0.1, colorVar.hueOffset);\r\n                ctx.lineWidth = 2.5;\r\n                ctx.shadowBlur = 10;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.4, 0, 0);\r\n                ctx.beginPath();\r\n                for (let i = 0; i < particle.arcSegments.length; i++) {\r\n                    const idx = (i + echo1Off) % particle.arcSegments.length;\r\n                    const seg = particle.arcSegments[idx];\r\n                    if (i === 0) ctx.moveTo(seg.x, seg.y);\r\n                    else ctx.lineTo(seg.x, seg.y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Echo 2\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.2, colorVar.brightnessOffset - 0.15, colorVar.hueOffset + 10);\r\n                ctx.lineWidth = 1.8;\r\n                ctx.shadowBlur = 6;\r\n                ctx.beginPath();\r\n                for (let i = 0; i < particle.arcSegments.length; i++) {\r\n                    const idx = (i + echo2Off) % particle.arcSegments.length;\r\n                    const seg = particle.arcSegments[idx];\r\n                    if (i === 0) ctx.moveTo(seg.x, seg.y);\r\n                    else ctx.lineTo(seg.x, seg.y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Main core line\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.9, colorVar.brightnessOffset + 0.1, colorVar.hueOffset);\r\n                ctx.lineWidth = 1.8;\r\n                ctx.shadowBlur = 5;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.7, 0.15, 0);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // INNER CORE: Sharp 1px bright line\r\n                if (particle.hasInnerCore) {\r\n                    ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 1.2, colorVar.brightnessOffset + 0.25, colorVar.hueOffset - 5);\r\n                    ctx.lineWidth = 1;\r\n                    ctx.shadowBlur = 3;\r\n                    ctx.shadowColor = 'rgba(255,255,255,0.6)';\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                    for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                        ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                    }\r\n                    ctx.closePath();\r\n                    ctx.stroke();\r\n                }\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n            // Drift spark\r\n            ctx.shadowBlur = 12;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.9, colorVar.brightnessOffset + 0.2, colorVar.hueOffset);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.7, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n        } else if (fx.particleType === 'plasma-ribbon') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PLASMA RIBBON: Silk-like, smooth flowing glow\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const masterOpacity = baseOpacity * 0.4;\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // Soft outer glow\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.3, -0.1, 10);\r\n                ctx.lineWidth = 6;\r\n                ctx.shadowBlur = 20;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.4, 0, 0);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Core ribbon\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.7, 0.05, 0);\r\n                ctx.lineWidth = 2;\r\n                ctx.shadowBlur = 8;\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n        } else if (fx.particleType === 'circuit-line') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // CIRCUIT LINE: Digital, sharp, pulse animation\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const masterOpacity = baseOpacity * particle.opacity;\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'butt'; // Sharp edges for digital look\r\n                ctx.lineJoin = 'miter';\r\n\r\n                // Main circuit line\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.8, 0.1, 0);\r\n                ctx.lineWidth = 1.5;\r\n                ctx.shadowBlur = 8;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.6, 0.15, 0);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n            // Pulse spark\r\n            ctx.shadowBlur = 10;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 1.0, 0.2, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.6, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n        } else if (fx.particleType === 'solar-flare') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // SOLAR FLARE: Heat distortion with orange-red gradient feel\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const masterOpacity = baseOpacity * 0.6;\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // Outer corona glow\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.25, -0.1, -20);\r\n                ctx.lineWidth = 8;\r\n                ctx.shadowBlur = 25;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.5, 0, -15);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Inner heat core\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.7, 0.15, 0);\r\n                ctx.lineWidth = 2.5;\r\n                ctx.shadowBlur = 10;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.8, 0.2, 10);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n            // Flare spark\r\n            ctx.shadowBlur = 15;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.9, 0.25, 15);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.8, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n        } else if (fx.particleType === 'wisp-particle') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // WISP PARTICLE: Floating wisps - much more visible now\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            ctx.globalCompositeOperation = 'lighter';\r\n            const wispMult = particle.wispSize || 1.5;\r\n\r\n            // Outer halo (large, faint)\r\n            ctx.shadowBlur = 25;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.6, 0, 5);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.4, -0.1, 10);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 3 * wispMult, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // Wisp glow (medium)\r\n            ctx.shadowBlur = 18;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.7, 0, 0);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.7, 0.05, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 1.8 * wispMult, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // Wisp core (bright)\r\n            ctx.shadowBlur = 8;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 1.0, 0.2, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.8 * wispMult, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            ctx.globalCompositeOperation = 'source-over';\r\n\r\n        } else if (fx.particleType === 'chaos-arc') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // CHAOS ARC: Aggressive, high contrast, with occasional flicker\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const flickerMod = Math.random() > 0.9 ? 0.5 : 1.0; // Occasional flicker\r\n                const masterOpacity = baseOpacity * 0.65 * flickerMod;\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // Outer chaos glow\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.4, -0.05, 5);\r\n                ctx.lineWidth = 5;\r\n                ctx.shadowBlur = 18;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.6, 0, 0);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Core chaos line\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 1.0, 0.15, 0);\r\n                ctx.lineWidth = 2;\r\n                ctx.shadowBlur = 8;\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n            // Chaos spark\r\n            ctx.shadowBlur = 12;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 1.0, 0.2, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.7, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n        } else if (fx.particleType === 'ripple-wave') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // RIPPLE WAVE: Quantum sine-based - much more visible\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const masterOpacity = baseOpacity * 0.7;  // Much higher\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // Outer wave glow (wider, brighter)\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 0.5, -0.05, 15);\r\n                ctx.lineWidth = 6;\r\n                ctx.shadowBlur = 20;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.6, 0, 10);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Inner wave core (sharper)\r\n                ctx.strokeStyle = getModifiedColor(baseColor, masterOpacity * 1.0, 0.15, 0);\r\n                ctx.lineWidth = 2;\r\n                ctx.shadowBlur = 8;\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n            // Quantum spark (larger)\r\n            ctx.shadowBlur = 15;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.9, 0.15, 5);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.8, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n        } else if (fx.particleType === 'aether-mote') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // AETHER MOTE: Flowing river particles with soft glow\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            ctx.globalCompositeOperation = 'lighter';\r\n\r\n            // Outer glow\r\n            ctx.shadowBlur = 12;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.5, 0, 0);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.5, 0, 10);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 2, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // Core\r\n            ctx.shadowBlur = 6;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.9, 0.15, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.8, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            ctx.globalCompositeOperation = 'source-over';\r\n\r\n        } else if (fx.particleType === 'distortion-arc') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // DISTORTION ARC: Spacetime warping rings\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // Main distortion ring\r\n                ctx.strokeStyle = getModifiedColor(baseColor, baseOpacity * 0.2, 0, 0);\r\n                ctx.lineWidth = 2;\r\n                ctx.shadowBlur = 10;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.3, 0, 0);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                // Inner ripple\r\n                if (particle.innerArcSegments && particle.innerArcSegments.length > 1) {\r\n                    ctx.strokeStyle = getModifiedColor(baseColor, baseOpacity * 0.12, -0.1, 10);\r\n                    ctx.lineWidth = 1.5;\r\n                    ctx.shadowBlur = 6;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(particle.innerArcSegments[0].x, particle.innerArcSegments[0].y);\r\n                    for (let i = 1; i < particle.innerArcSegments.length; i++) {\r\n                        ctx.lineTo(particle.innerArcSegments[i].x, particle.innerArcSegments[i].y);\r\n                    }\r\n                    ctx.closePath();\r\n                    ctx.stroke();\r\n                }\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n        } else if (fx.particleType === 'harmonic-ring') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // HARMONIC RING: Mandala-like oscillating curves\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n                const flashMod = particle.harmonicFlash || 1.0;\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                ctx.strokeStyle = getModifiedColor(baseColor, baseOpacity * 0.15 * flashMod, 0.05, 0);\r\n                ctx.lineWidth = 1.5;\r\n                ctx.shadowBlur = 8 * flashMod;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.4, 0, 0);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n        } else if (fx.particleType === 'dragon-arc') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // DRAGON ARC: Serpentine ley line energy\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.arcSegments && particle.arcSegments.length > 1) {\r\n                const baseColor = parseColor(accentColor);\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.lineCap = 'round';\r\n                ctx.lineJoin = 'round';\r\n\r\n                // Secondary arc (behind)\r\n                if (particle.secondaryArc && particle.secondaryArc.length > 1) {\r\n                    ctx.strokeStyle = getModifiedColor(baseColor, baseOpacity * 0.25, -0.1, -15);\r\n                    ctx.lineWidth = 3;\r\n                    ctx.shadowBlur = 12;\r\n                    ctx.shadowColor = getModifiedColor(baseColor, 0.4, 0, -10);\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(particle.secondaryArc[0].x, particle.secondaryArc[0].y);\r\n                    for (let i = 1; i < particle.secondaryArc.length; i++) {\r\n                        ctx.lineTo(particle.secondaryArc[i].x, particle.secondaryArc[i].y);\r\n                    }\r\n                    ctx.closePath();\r\n                    ctx.stroke();\r\n                }\r\n\r\n                // Primary serpentine\r\n                ctx.strokeStyle = getModifiedColor(baseColor, baseOpacity * 0.55, 0.1, 0);\r\n                ctx.lineWidth = 2;\r\n                ctx.shadowBlur = 8;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.6, 0.15, 0);\r\n                ctx.beginPath();\r\n                ctx.moveTo(particle.arcSegments[0].x, particle.arcSegments[0].y);\r\n                for (let i = 1; i < particle.arcSegments.length; i++) {\r\n                    ctx.lineTo(particle.arcSegments[i].x, particle.arcSegments[i].y);\r\n                }\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n        } else if (fx.particleType === 'orbital-ember') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // ORBITAL EMBER: Orbiting ember with flare effect\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            ctx.globalCompositeOperation = 'lighter';\r\n            const flareMod = particle.isFlaring ? 1.8 : 1.0;\r\n\r\n            // Outer glow\r\n            ctx.shadowBlur = 15 * flareMod;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.6, 0, -15);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.4 * flareMod, -0.1, -10);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 2.5 * flareMod, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // Core\r\n            ctx.shadowBlur = 8;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.9, 0.2, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.8, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            ctx.globalCompositeOperation = 'source-over';\r\n\r\n        } else if (fx.particleType === 'bloom-pulse') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // BLOOM PULSE: Expanding pulse ring\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            if (particle.pulseRadius) {\r\n                const baseColor = parseColor(accentColor);\r\n\r\n                ctx.globalCompositeOperation = 'lighter';\r\n                ctx.strokeStyle = getModifiedColor(baseColor, particle.pulseOpacity || 0.3, 0, 0);\r\n                ctx.lineWidth = 3;\r\n                ctx.shadowBlur = 15;\r\n                ctx.shadowColor = getModifiedColor(baseColor, 0.4, 0, 0);\r\n\r\n                ctx.beginPath();\r\n                ctx.arc(particle.x, particle.y, particle.pulseRadius, 0, Math.PI * 2);\r\n                ctx.stroke();\r\n\r\n                ctx.globalCompositeOperation = 'source-over';\r\n            }\r\n\r\n        } else if (fx.particleType === 'prism-spark') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // PRISM SPARK: Splitting refraction sparkle\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            ctx.globalCompositeOperation = 'lighter';\r\n\r\n            if (particle.isSplitting) {\r\n                const splitOffset = particle.splitProgress * 4;\r\n\r\n                // Split shard 1\r\n                ctx.shadowBlur = 10;\r\n                ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.8, 0.1, particle.splitHue1 || 15);\r\n                ctx.beginPath();\r\n                ctx.arc(particle.x + splitOffset, particle.y - splitOffset * 0.5, s * 0.8, 0, Math.PI * 2);\r\n                ctx.fill();\r\n\r\n                // Split shard 2\r\n                ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.8, 0.1, particle.splitHue2 || -15);\r\n                ctx.beginPath();\r\n                ctx.arc(particle.x - splitOffset, particle.y + splitOffset * 0.5, s * 0.6, 0, Math.PI * 2);\r\n                ctx.fill();\r\n            }\r\n\r\n            // Main spark\r\n            ctx.shadowBlur = 12;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.6, 0, 0);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity, 0.2, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            ctx.globalCompositeOperation = 'source-over';\r\n\r\n        } else if (fx.particleType === 'dust-mote') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // DUST MOTE: Flowing stardust\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            ctx.globalCompositeOperation = 'lighter';\r\n\r\n            ctx.shadowBlur = 8;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.4, 0, 0);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.6, 0.1, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            ctx.globalCompositeOperation = 'source-over';\r\n\r\n        } else if (fx.particleType === 'spirit-light') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // SPIRIT LIGHT: Chasing spirit orb with glint\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            ctx.globalCompositeOperation = 'lighter';\r\n            const glintMod = particle.isGlinting ? 1.6 : 1.0;\r\n\r\n            // Outer halo\r\n            ctx.shadowBlur = 20 * glintMod;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.6, 0, 0);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.3 * glintMod, -0.05, 10);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 3 * glintMod, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // Middle glow\r\n            ctx.shadowBlur = 12;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.6, 0.05, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 1.5, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            // Core\r\n            ctx.shadowBlur = 6;\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 1.0, 0.2, 0);\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, s * 0.6, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            ctx.globalCompositeOperation = 'source-over';\r\n\r\n        } else if (fx.particleType === 'leaf-mote') {\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            // LEAF MOTE: Falling leaf-shaped particle\r\n            // ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n            ctx.globalCompositeOperation = 'lighter';\r\n\r\n            ctx.save();\r\n            ctx.translate(particle.x, particle.y);\r\n            ctx.rotate(particle.leafRotation || 0);\r\n\r\n            // Leaf shape (elongated ellipse)\r\n            ctx.shadowBlur = 8;\r\n            ctx.shadowColor = getModifiedColor(parseColor(accentColor), 0.4, 0, 0);\r\n            ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.5, 0, 0);\r\n            ctx.beginPath();\r\n            ctx.ellipse(0, 0, s * 0.4, s * 1.2, 0, 0, Math.PI * 2);\r\n            ctx.fill();\r\n\r\n            ctx.restore();\r\n            ctx.globalCompositeOperation = 'source-over';\r\n\r\n        } else {\r\n            ctx.translate(particle.x, particle.y);\r\n\r\n            if (glowIntensity > 0.3) {\r\n                ctx.shadowBlur = particle.size * 2 * glowIntensity;\r\n                ctx.shadowColor = color;\r\n            }\r\n\r\n            switch (fx.particleType) {\r\n                case 'thin-ray': {\r\n                    const rayLen = s * 5 * (particle.rayLength || 1);\r\n                    ctx.strokeStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.9, colorVar.brightnessOffset, colorVar.hueOffset);\r\n                    ctx.lineWidth = Math.max(0.5, s * 0.2);\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(0, 0);\r\n                    ctx.lineTo(Math.cos(particle.angle) * rayLen, Math.sin(particle.angle) * rayLen);\r\n                    ctx.stroke();\r\n                    break;\r\n                }\r\n\r\n                case 'twinkle-star': {\r\n                    const twinkle = 0.5 + Math.sin(particle.twinklePhase || 0) * 0.5;\r\n                    const rayLen = s * 0.6 * (0.7 + twinkle * 0.4);\r\n                    ctx.strokeStyle = getModifiedColor(parseColor(accentColor), baseOpacity * twinkle, colorVar.brightnessOffset, colorVar.hueOffset);\r\n                    ctx.lineWidth = Math.max(0.5, s * 0.25);\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(0, -rayLen);\r\n                    ctx.lineTo(0, rayLen);\r\n                    ctx.moveTo(-rayLen, 0);\r\n                    ctx.lineTo(rayLen, 0);\r\n                    ctx.stroke();\r\n                    ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * twinkle * 0.7, colorVar.brightnessOffset, colorVar.hueOffset);\r\n                    ctx.beginPath();\r\n                    ctx.arc(0, 0, s * 0.25, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                    break;\r\n                }\r\n\r\n                case 'ember-pop': {\r\n                    const emberGrad = ctx.createRadialGradient(0, 0, 0, 0, 0, s * 1.2);\r\n                    emberGrad.addColorStop(0, getModifiedColor(parseColor(accentColor), baseOpacity * 1.3, colorVar.brightnessOffset + 0.1, colorVar.hueOffset));\r\n                    emberGrad.addColorStop(0.3, getModifiedColor(parseColor(accentColor), baseOpacity * 0.9, colorVar.brightnessOffset, colorVar.hueOffset));\r\n                    emberGrad.addColorStop(0.7, getModifiedColor(parseColor(accentColor), baseOpacity * 0.4, colorVar.brightnessOffset - 0.1, colorVar.hueOffset));\r\n                    emberGrad.addColorStop(1, 'rgba(0, 0, 0, 0)');\r\n                    ctx.fillStyle = emberGrad;\r\n                    ctx.beginPath();\r\n                    ctx.arc(0, 0, s * 1.2, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                    ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 1.1, colorVar.brightnessOffset + 0.15, colorVar.hueOffset);\r\n                    ctx.beginPath();\r\n                    ctx.arc(0, 0, s * 0.35, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                    break;\r\n                }\r\n\r\n                case 'snow-varied': {\r\n                    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, s);\r\n                    gradient.addColorStop(0, getModifiedColor(parseColor(accentColor), baseOpacity, colorVar.brightnessOffset, colorVar.hueOffset));\r\n                    gradient.addColorStop(1, getModifiedColor(parseColor(accentColor), 0, colorVar.brightnessOffset, colorVar.hueOffset));\r\n                    ctx.fillStyle = gradient;\r\n                    ctx.beginPath();\r\n                    ctx.arc(0, 0, s, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                    break;\r\n                }\r\n\r\n                case 'meteor-thin': {\r\n                    const isStreaking = breathParams.phase === 'rain';\r\n                    const elongation = isStreaking ? 7 : 2;\r\n                    const direction = cycleDirectionRef.current;\r\n                    const streakAngle = particle.streakAngle || (direction > 0 ? Math.PI * 0.35 : Math.PI * 0.65);\r\n\r\n                    ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity * 0.55, colorVar.brightnessOffset, colorVar.hueOffset);\r\n                    ctx.beginPath();\r\n                    ctx.ellipse(0, 0, s * elongation, s * 0.3, streakAngle, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                    break;\r\n                }\r\n\r\n                case 'soft-circle': {\r\n                    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, s);\r\n                    gradient.addColorStop(0, getModifiedColor(parseColor(accentColor), baseOpacity, colorVar.brightnessOffset, colorVar.hueOffset));\r\n                    gradient.addColorStop(1, getModifiedColor(parseColor(accentColor), 0, colorVar.brightnessOffset, colorVar.hueOffset));\r\n                    ctx.fillStyle = gradient;\r\n                    ctx.beginPath();\r\n                    ctx.arc(0, 0, s, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                    break;\r\n                }\r\n\r\n                default:\r\n                    ctx.fillStyle = getModifiedColor(parseColor(accentColor), baseOpacity, colorVar.brightnessOffset, colorVar.hueOffset);\r\n                    ctx.beginPath();\r\n                    ctx.arc(0, 0, s, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n            }\r\n        }\r\n\r\n        ctx.restore();\r\n    }, [fx.particleType, breathParams, intensity, accentColor, parseColor, getModifiedColor]);\r\n\r\n    useEffect(() => {\r\n        if (!canvasRef.current || !isActive) return;\r\n\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        const currentPresetId = fxPreset?.id || pathId;\r\n        if (particlesRef.current.length !== fx.particleCount || prevPresetIdRef.current !== currentPresetId) {\r\n            particlesRef.current = initParticles();\r\n            prevPresetIdRef.current = currentPresetId;\r\n        }\r\n\r\n        const animate = (timestamp) => {\r\n            const dt = Math.min(0.05, (timestamp - lastTimeRef.current) / 1000);\r\n            lastTimeRef.current = timestamp;\r\n\r\n            ctx.clearRect(0, 0, size, size);\r\n\r\n            const centerX = size / 2;\r\n            const centerY = size / 2;\r\n            const color = accentColor;\r\n\r\n            particlesRef.current = particlesRef.current.map(particle => {\r\n                const updated = applyMotion(particle, dt, centerX, centerY, ringScale);\r\n\r\n                if (fx.trailLength > 0 && updated.trail && updated.opacity > 0.1 && fx.particleType !== 'lightning-arc') {\r\n                    updated.trail.push({ x: updated.x, y: updated.y });\r\n                    if (updated.trail.length > 10 * fx.trailLength) {\r\n                        updated.trail.shift();\r\n                    }\r\n\r\n                    const colorVar = updated.colorVar || { brightnessOffset: 0, hueOffset: 0 };\r\n                    updated.trail.forEach((pos, i) => {\r\n                        const trailOpacity = (i / updated.trail.length) * 0.2 * intensity;\r\n                        ctx.fillStyle = getModifiedColor(parseColor(accentColor), trailOpacity, colorVar.brightnessOffset, colorVar.hueOffset);\r\n                        ctx.beginPath();\r\n                        ctx.arc(pos.x, pos.y, updated.size * 0.2, 0, Math.PI * 2);\r\n                        ctx.fill();\r\n                    });\r\n                }\r\n\r\n                if (updated.opacity > 0.05) {\r\n                    drawParticle(ctx, updated, color);\r\n                }\r\n                return updated;\r\n            });\r\n\r\n            animationRef.current = requestAnimationFrame(animate);\r\n        };\r\n\r\n        animationRef.current = requestAnimationFrame(animate);\r\n\r\n        return () => {\r\n            if (animationRef.current) {\r\n                cancelAnimationFrame(animationRef.current);\r\n            }\r\n        };\r\n    }, [pathId, fxPreset, isActive, size, accentColor, fx, initParticles, applyMotion, drawParticle, parseColor, getModifiedColor, intensity]);\r\n\r\n    useEffect(() => {\r\n        particlesRef.current = initParticles();\r\n    }, [pathId, fxPreset?.id, initParticles]);\r\n\r\n    return (\r\n        <canvas\r\n            ref={canvasRef}\r\n            width={size}\r\n            height={size}\r\n            className=\"absolute inset-0 pointer-events-none\"\r\n            style={{\r\n                width: size,\r\n                height: size,\r\n                opacity: 0.9 + intensity * 0.1\r\n            }}\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathSelectionGrid.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PathShiftWarning.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentPath' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":28,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentPath"},"fix":{"range":[754,766],"text":""},"desc":"Remove unused variable 'currentPath'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'pendingPath' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":29,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"pendingPath"},"fix":{"range":[765,787],"text":""},"desc":"Remove unused variable 'pendingPath'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PathShiftWarning.jsx\r\n// Shows when user's practice is shifting toward a new path\r\n\r\nimport React from 'react';\r\nimport { usePathStore, PATH_SYMBOLS, PATH_NAMES } from '../state/pathStore';\r\n\r\n/**\r\n * PathShiftWarning ΓÇö Display when path is shifting\r\n * \r\n * Shows:\r\n * - Current path ΓåÆ Pending path\r\n * - Days until shift completes\r\n * - Progress indicator\r\n */\r\nexport function PathShiftWarning({ compact = false }) {\r\n    const pathStatus = usePathStore(s => s.pathStatus);\r\n    const getShiftInfo = usePathStore(s => s.getShiftInfo);\r\n\r\n    // Only show if shifting\r\n    if (pathStatus !== 'shifting') {\r\n        return null;\r\n    }\r\n\r\n    const shiftInfo = getShiftInfo();\r\n    if (!shiftInfo) return null;\r\n\r\n    const {\r\n        currentPath,\r\n        pendingPath,\r\n        daysUntilShift,\r\n        progress,\r\n        currentSymbol,\r\n        pendingSymbol,\r\n        pendingPathName,\r\n    } = shiftInfo;\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                gap: compact ? '0.5rem' : '0.75rem',\r\n                padding: compact ? '0.75rem 1rem' : '1rem 1.5rem',\r\n                background: 'rgba(255, 200, 100, 0.05)',\r\n                borderRadius: '0.75rem',\r\n                border: '1px solid rgba(255, 200, 100, 0.15)',\r\n            }}\r\n        >\r\n            {/* Shift direction */}\r\n            <div\r\n                style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.75rem',\r\n                    fontSize: compact ? '1rem' : '1.25rem',\r\n                }}\r\n            >\r\n                <span style={{ opacity: 0.5 }}>{currentSymbol}</span>\r\n                <span style={{ color: 'rgba(255, 255, 255, 0.4)', fontSize: '0.875rem' }}>ΓåÆ</span>\r\n                <span style={{ color: 'var(--accent-color, #fcd34d)' }}>{pendingSymbol}</span>\r\n            </div>\r\n\r\n            {/* Message */}\r\n            <div\r\n                style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontWeight: 500,\r\n                    letterSpacing: '0.01em',\r\n                    fontSize: compact ? '0.8125rem' : '0.9375rem',\r\n                    color: 'rgba(255, 255, 255, 0.7)',\r\n                    textAlign: 'center',\r\n                    lineHeight: 1.5,\r\n                }}\r\n            >\r\n                Your practice is shifting toward{' '}\r\n                <span style={{ color: 'var(--accent-color, #fcd34d)' }}>{pendingPathName}</span>\r\n            </div>\r\n\r\n            {/* Progress bar */}\r\n            <div\r\n                style={{\r\n                    width: '100%',\r\n                    maxWidth: '200px',\r\n                    height: '4px',\r\n                    background: 'rgba(255, 255, 255, 0.1)',\r\n                    borderRadius: '2px',\r\n                    overflow: 'hidden',\r\n                }}\r\n            >\r\n                <div\r\n                    style={{\r\n                        width: `${progress * 100}%`,\r\n                        height: '100%',\r\n                        background: 'var(--accent-color, #fcd34d)',\r\n                        transition: 'width 0.5s ease',\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Days remaining */}\r\n            <div\r\n                style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    fontSize: compact ? '0.6875rem' : '0.75rem',\r\n                    color: 'rgba(255, 255, 255, 0.5)',\r\n                }}\r\n            >\r\n                {daysUntilShift} days until complete\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PathShiftWarning;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PostSessionJournal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[184,195],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[222,229],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'progressStore' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":45,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"progressStore"},"fix":{"range":[1658,1699],"text":""},"desc":"Remove unused variable 'progressStore'."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  45 |     const progressStore = useProgressStore();\n  46 |\n> 47 |     const [placeholderIndex] = useState(Math.floor(Math.random() * TECH_NOTE_PLACEHOLDERS.length));\n     |                                                    ^^^^^^^^^^^^^ Cannot call impure function\n  48 |\n  49 |     // Auto-advance after attention selection\n  50 |     const handleAttentionSelect = (quality) => {","line":47,"column":52,"nodeType":null,"endLine":47,"endColumn":65}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PostSessionJournal.jsx\r\n// Post-Session Capture Modal\r\n// Phase 2: Routes to CircuitJournalForm for circuits, micro-note form for sessions\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useJournalStore, ATTENTION_QUALITIES, TECH_NOTE_PLACEHOLDERS, CHALLENGE_TAXONOMY } from '../state/journalStore.js';\r\nimport { useProgressStore } from '../state/progressStore.js';\r\nimport { useLunarStore } from '../state/lunarStore.js';\r\nimport { CircuitJournalForm } from './CircuitJournalForm.jsx';\r\n\r\nexport function PostSessionJournal({ sessionId, completedCircuitLog, onComplete }) {\r\n    // Phase 2: Check if this is a circuit or single session\r\n    // If completedCircuitLog is provided, it's a circuit\r\n    const isCircuit = !!completedCircuitLog;\r\n    \r\n    if (isCircuit) {\r\n        // Route to circuit-specific form\r\n        return (\r\n            <CircuitJournalForm\r\n                completedCircuitLog={completedCircuitLog}\r\n                onClose={onComplete}\r\n            />\r\n        );\r\n    }\r\n    \r\n    // Otherwise, show single session micro-note form (Phase 1 behavior)\r\n    return <SingleSessionJournalForm sessionId={sessionId} onComplete={onComplete} />;\r\n}\r\n\r\n/**\r\n * SingleSessionJournalForm\r\n * Original micro-note capture for single practice sessions (Phase 1)\r\n */\r\nfunction SingleSessionJournalForm({ sessionId, onComplete }) {\r\n    const { stage } = useLunarStore();\r\n    const {\r\n        pendingMicroNote,\r\n        updateMicroNote,\r\n        nextMicroNoteStep,\r\n        completeMicroNote,\r\n        cancelMicroNote\r\n    } = useJournalStore();\r\n\r\n    const progressStore = useProgressStore();\r\n\r\n    const [placeholderIndex] = useState(Math.floor(Math.random() * TECH_NOTE_PLACEHOLDERS.length));\r\n\r\n    // Auto-advance after attention selection\r\n    const handleAttentionSelect = (quality) => {\r\n        updateMicroNote('attentionQuality', quality);\r\n        setTimeout(() => nextMicroNoteStep(), 300);\r\n    };\r\n\r\n    // Skip technical note\r\n    const handleSkipNote = () => {\r\n        nextMicroNoteStep();\r\n    };\r\n\r\n    // Auto-advance after resistance selection\r\n    const handleResistanceSelect = (flag) => {\r\n        updateMicroNote('resistanceFlag', flag);\r\n        setTimeout(() => nextMicroNoteStep(), 300);\r\n    };\r\n\r\n    // Complete and close\r\n    const handleComplete = () => {\r\n        completeMicroNote();\r\n        onComplete?.();\r\n    };\r\n\r\n    if (!pendingMicroNote || pendingMicroNote.sessionId !== sessionId) {\r\n        return null;\r\n    }\r\n\r\n    const { step, formData } = pendingMicroNote;\r\n    const isLight = stage === 'flame';\r\n\r\n    // Stage-adaptive colors\r\n    const bgColor = isLight ? 'rgba(245, 239, 230, 0.98)' : 'rgba(10, 15, 25, 0.98)';\r\n    const textMain = isLight ? 'rgba(35, 20, 10, 0.95)' : 'rgba(253, 251, 245, 0.95)';\r\n    const textSub = isLight ? 'rgba(65, 45, 25, 0.7)' : 'rgba(253, 251, 245, 0.6)';\r\n    const borderColor = isLight ? 'rgba(160, 140, 120, 0.3)' : 'rgba(253, 251, 245, 0.15)';\r\n    const accentColor = isLight ? 'rgba(139, 159, 136, 0.9)' : 'rgba(126, 217, 87, 0.9)';\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\r\n            style={{ backgroundColor: 'rgba(0, 0, 0, 0.6)', backdropFilter: 'blur(8px)' }}\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n        >\r\n            <motion.div\r\n                className=\"relative w-full max-w-md rounded-2xl shadow-2xl overflow-hidden\"\r\n                style={{ backgroundColor: bgColor }}\r\n                initial={{ scale: 0.9, opacity: 0 }}\r\n                animate={{ scale: 1, opacity: 1 }}\r\n                exit={{ scale: 0.9, opacity: 0 }}\r\n                transition={{ type: 'spring', damping: 25 }}\r\n            >\r\n                {/* Header */}\r\n                <div className=\"px-6 pt-6 pb-4 border-b\" style={{ borderColor }}>\r\n                    <h2 className=\"text-2xl font-bold text-center\" style={{ color: textMain }}>\r\n                        Session Complete\r\n                    </h2>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"px-6 py-6\">\r\n                    <AnimatePresence mode=\"wait\">\r\n                        {/* Step 1: Attention Quality */}\r\n                        {step === 'attention' && (\r\n                            <motion.div\r\n                                key=\"attention\"\r\n                                initial={{ opacity: 0, x: 20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: -20 }}\r\n                                className=\"space-y-4\"\r\n                            >\r\n                                <p className=\"text-center text-sm font-medium\" style={{ color: textSub }}>\r\n                                    How was your attention today?\r\n                                </p>\r\n                                <div className=\"grid grid-cols-2 gap-3\">\r\n                                    {ATTENTION_QUALITIES.map((quality) => (\r\n                                        <button\r\n                                            key={quality}\r\n                                            onClick={() => handleAttentionSelect(quality)}\r\n                                            className=\"px-4 py-3 rounded-lg font-medium text-sm capitalize transition-all hover:scale-105\"\r\n                                            style={{\r\n                                                backgroundColor: formData.attentionQuality === quality ? accentColor : borderColor,\r\n                                                color: formData.attentionQuality === quality ? '#fff' : textMain,\r\n                                                border: `1px solid ${borderColor}`\r\n                                            }}\r\n                                        >\r\n                                            {quality}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Step 2: Technical Note */}\r\n                        {step === 'note' && (\r\n                            <motion.div\r\n                                key=\"note\"\r\n                                initial={{ opacity: 0, x: 20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: -20 }}\r\n                                className=\"space-y-4\"\r\n                            >\r\n                                <p className=\"text-center text-sm font-medium\" style={{ color: textSub }}>\r\n                                    Any technique observations?\r\n                                </p>\r\n                                <textarea\r\n                                    value={formData.technicalNote || ''}\r\n                                    onChange={(e) => updateMicroNote('technicalNote', e.target.value.slice(0, 140))}\r\n                                    placeholder={TECH_NOTE_PLACEHOLDERS[placeholderIndex]}\r\n                                    maxLength={140}\r\n                                    rows={3}\r\n                                    className=\"w-full px-4 py-3 rounded-lg resize-none text-sm\"\r\n                                    style={{\r\n                                        backgroundColor: isLight ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.3)',\r\n                                        color: textMain,\r\n                                        border: `1px solid ${borderColor}`,\r\n                                        outline: 'none'\r\n                                    }}\r\n                                />\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"text-xs\" style={{ color: textSub }}>\r\n                                        {(formData.technicalNote || '').length}/140\r\n                                    </span>\r\n                                    <button\r\n                                        onClick={handleSkipNote}\r\n                                        className=\"text-sm font-medium underline\"\r\n                                        style={{ color: textSub }}\r\n                                    >\r\n                                        Skip\r\n                                    </button>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => nextMicroNoteStep()}\r\n                                    className=\"w-full py-3 rounded-lg font-medium text-sm transition-all hover:scale-105\"\r\n                                    style={{ backgroundColor: accentColor, color: '#fff' }}\r\n                                >\r\n                                    Continue\r\n                                </button>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Step 3: Resistance Flag */}\r\n                        {step === 'resistance' && (\r\n                            <motion.div\r\n                                key=\"resistance\"\r\n                                initial={{ opacity: 0, x: 20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: -20 }}\r\n                                className=\"space-y-4\"\r\n                            >\r\n                                <p className=\"text-center text-sm font-medium\" style={{ color: textSub }}>\r\n                                    Did you experience resistance before or during practice?\r\n                                </p>\r\n                                <div className=\"grid grid-cols-2 gap-3\">\r\n                                    <button\r\n                                        onClick={() => handleResistanceSelect(true)}\r\n                                        className=\"px-6 py-3 rounded-lg font-medium text-sm transition-all hover:scale-105\"\r\n                                        style={{\r\n                                            backgroundColor: formData.resistanceFlag === true ? accentColor : borderColor,\r\n                                            color: formData.resistanceFlag === true ? '#fff' : textMain,\r\n                                            border: `1px solid ${borderColor}`\r\n                                        }}\r\n                                    >\r\n                                        Yes\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleResistanceSelect(false)}\r\n                                        className=\"px-6 py-3 rounded-lg font-medium text-sm transition-all hover:scale-105\"\r\n                                        style={{\r\n                                            backgroundColor: formData.resistanceFlag === false ? accentColor : borderColor,\r\n                                            color: formData.resistanceFlag === false ? '#fff' : textMain,\r\n                                            border: `1px solid ${borderColor}`\r\n                                        }}\r\n                                    >\r\n                                        No\r\n                                    </button>\r\n                                </div>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Step 4: Challenge Tag */}\r\n                        {step === 'challenge' && (\r\n                            <motion.div\r\n                                key=\"challenge\"\r\n                                initial={{ opacity: 0, x: 20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: -20 }}\r\n                                className=\"space-y-4\"\r\n                            >\r\n                                <p className=\"text-center text-sm font-medium\" style={{ color: textSub }}>\r\n                                    What was the main challenge?\r\n                                </p>\r\n                                <div className=\"grid grid-cols-2 gap-2\">\r\n                                    {Object.entries(CHALLENGE_TAXONOMY).map(([key, category]) => (\r\n                                        <button\r\n                                            key={key}\r\n                                            onClick={() => {\r\n                                                updateMicroNote('challengeTag', key);\r\n                                                setTimeout(() => nextMicroNoteStep(), 300);\r\n                                            }}\r\n                                            className=\"px-3 py-2 rounded-lg font-medium text-xs transition-all hover:scale-105\"\r\n                                            style={{\r\n                                                backgroundColor: formData.challengeTag === key ? accentColor : borderColor,\r\n                                                color: formData.challengeTag === key ? '#fff' : textMain,\r\n                                                border: `1px solid ${borderColor}`\r\n                                            }}\r\n                                        >\r\n                                            {category.label}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => nextMicroNoteStep()}\r\n                                    className=\"w-full py-2 rounded-lg font-medium text-sm mt-2\"\r\n                                    style={{ backgroundColor: borderColor, color: textMain }}\r\n                                >\r\n                                    Skip Challenge Tag\r\n                                </button>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Step 5: Complete */}\r\n                        {step === 'done' && (\r\n                            <motion.div\r\n                                key=\"done\"\r\n                                initial={{ opacity: 0, x: 20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: -20 }}\r\n                                className=\"space-y-4 text-center\"\r\n                            >\r\n                                <p className=\"text-lg font-bold\" style={{ color: textMain }}>\r\n                                    ├ó┼ôΓÇ£ Session logged\r\n                                </p>\r\n                                <p className=\"text-sm\" style={{ color: textSub }}>\r\n                                    Your practice reflects the nature of your being\r\n                                </p>\r\n                                <button\r\n                                    onClick={handleComplete}\r\n                                    className=\"w-full py-3 rounded-lg font-medium text-sm transition-all hover:scale-105\"\r\n                                    style={{ backgroundColor: accentColor, color: '#fff' }}\r\n                                >\r\n                                    Done\r\n                                </button>\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </div>\r\n\r\n                {/* Footer: Cancel Button */}\r\n                {step !== 'done' && (\r\n                    <div className=\"px-6 pb-6\">\r\n                        <button\r\n                            onClick={() => cancelMicroNote()}\r\n                            className=\"w-full py-2 text-sm font-medium rounded-lg\"\r\n                            style={{ backgroundColor: borderColor, color: textSub }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PracticeSection.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getCategories' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":21,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"getCategories"},"fix":{"range":[1348,1363],"text":""},"desc":"Remove unused variable 'getCategories'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  52 |     const index = options.indexOf(value);\n  53 |     if (index !== -1) {\n> 54 |       setScrollOffset(index * itemHeight);\n     |       ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  55 |     }\n  56 |   }, [value, options, itemHeight]);\n  57 |","line":54,"column":7,"nodeType":null,"endLine":54,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'practiceModalOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":180,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"practiceModalOpen"},"fix":{"range":[7259,7276],"text":""},"desc":"Remove unused variable 'practiceModalOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setPracticeModalOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":180,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"setPracticeModalOpen"},"fix":{"range":[7276,7298],"text":""},"desc":"Remove unused variable 'setPracticeModalOpen'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'executeStart' and 'getActivePracticeLeg'. Either include them or remove the dependency array.","line":220,"column":6,"nodeType":"ArrayExpression","endLine":220,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [activePracticeSession, executeStart, getActivePracticeLeg]","fix":{"range":[8605,8628],"text":"[activePracticeSession, executeStart, getActivePracticeLeg]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'chevronAngle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":222,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":222,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"chevronAngle"},"fix":{"range":[8643,8655],"text":""},"desc":"Remove unused variable 'chevronAngle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'haloPulse' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":223,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":223,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"haloPulse"},"fix":{"range":[8699,8708],"text":""},"desc":"Remove unused variable 'haloPulse'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setVipassanaTheme' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":230,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":230,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"setVipassanaTheme"},"fix":{"range":[9139,9158],"text":""},"desc":"Remove unused variable 'setVipassanaTheme'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setVipassanaElement' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":231,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":231,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setVipassanaElement"},"fix":{"range":[9225,9246],"text":""},"desc":"Remove unused variable 'setVipassanaElement'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier2Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":246,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":246,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier2Expanded"},"fix":{"range":[9984,9997],"text":""},"desc":"Remove unused variable 'tier2Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier2Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":246,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":246,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier2Expanded"},"fix":{"range":[9997,10015],"text":""},"desc":"Remove unused variable 'setTier2Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier3Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":247,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":247,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier3Expanded"},"fix":{"range":[10045,10058],"text":""},"desc":"Remove unused variable 'tier3Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier3Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":247,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":247,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier3Expanded"},"fix":{"range":[10058,10076],"text":""},"desc":"Remove unused variable 'setTier3Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'lastSessionId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":254,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":254,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastSessionId"},"fix":{"range":[10289,10302],"text":""},"desc":"Remove unused variable 'lastSessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier2Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":257,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":257,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier2Hovered"},"fix":{"range":[10419,10431],"text":""},"desc":"Remove unused variable 'tier2Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier2Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":257,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":257,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier2Hovered"},"fix":{"range":[10431,10448],"text":""},"desc":"Remove unused variable 'setTier2Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier3Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":258,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":258,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier3Hovered"},"fix":{"range":[10479,10491],"text":""},"desc":"Remove unused variable 'tier3Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier3Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":258,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":258,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier3Hovered"},"fix":{"range":[10491,10508],"text":""},"desc":"Remove unused variable 'setTier3Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'circuitSavedPractice' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":263,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":263,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"circuitSavedPractice"},"fix":{"range":[10739,10759],"text":""},"desc":"Remove unused variable 'circuitSavedPractice'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'lastErrorMs' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":266,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":266,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastErrorMs"},"fix":{"range":[10867,10878],"text":""},"desc":"Remove unused variable 'lastErrorMs'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'visualizationCycles' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":278,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":278,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"visualizationCycles"},"fix":{"range":[11489,11508],"text":""},"desc":"Remove unused variable 'visualizationCycles'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handlePatternChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":443,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":443,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"handlePatternChange"},"fix":{"range":[16868,17043],"text":""},"desc":"Remove unused variable 'handlePatternChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionPayload' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":503,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":503,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionPayload"},"fix":{"range":[18828,19150],"text":""},"desc":"Remove unused variable 'sessionPayload'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleSelectRitual' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":743,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":743,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSelectRitual"},"fix":{"range":[27071,27372],"text":""},"desc":"Remove unused variable 'handleSelectRitual'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleNextStep' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":752,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":752,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleNextStep"},"fix":{"range":[27378,27587],"text":""},"desc":"Remove unused variable 'handleNextStep'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'advanceCircuitExercise', 'circuitConfig', and 'handleStop'. Either include them or remove the dependency array.","line":804,"column":6,"nodeType":"ArrayExpression","endLine":804,"endColumn":54,"suggestions":[{"desc":"Update the dependencies array to be: [isRunning, timeLeft, practice, activeCircuitId, circuitConfig, advanceCircuitExercise, handleStop]","fix":{"range":[28759,28807],"text":"[isRunning, timeLeft, practice, activeCircuitId, circuitConfig, advanceCircuitExercise, handleStop]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'pathD' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":862,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":862,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"pathD"},"fix":{"range":[30485,30619],"text":""},"desc":"Remove unused variable 'pathD'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'primary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":878,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":878,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"primary"},"fix":{"range":[30826,30834],"text":""},"desc":"Remove unused variable 'primary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'secondary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":878,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":878,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"secondary"},"fix":{"range":[30833,30844],"text":""},"desc":"Remove unused variable 'secondary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'muted' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":878,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":878,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"muted"},"fix":{"range":[30844,30851],"text":""},"desc":"Remove unused variable 'muted'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'glow' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":878,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":878,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"glow"},"fix":{"range":[30851,30857],"text":""},"desc":"Remove unused variable 'glow'."}]}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from \"react\";\r\nimport { BreathingRing } from \"./BreathingRing.jsx\";\r\nimport { VisualizationCanvas } from \"./VisualizationCanvas.jsx\";\r\nimport { CymaticsVisualization } from \"./CymaticsVisualization.jsx\";\r\nimport { SensorySession } from \"./SensorySession.jsx\";\r\nimport { VipassanaVisual } from \"./vipassana/VipassanaVisual.jsx\";\r\nimport { VipassanaVariantSelector } from \"./vipassana/VipassanaVariantSelector.jsx\";\r\nimport { RitualPortal } from \"./RitualPortal.jsx\";\r\nimport { CircuitConfig } from \"./Cycle/CircuitConfig.jsx\";\r\nimport { useTheme } from \"../context/ThemeContext.jsx\";\r\nimport { VIPASSANA_THEMES } from \"../data/vipassanaThemes.js\";\r\nimport { SoundConfig, BINAURAL_PRESETS, ISOCHRONIC_PRESETS, SOUND_TYPES } from \"./SoundConfig.jsx\";\r\nimport { BreathConfig, BREATH_PRESETS } from \"./BreathConfig.jsx\";\r\nimport { SensoryConfig, SENSORY_TYPES } from \"./SensoryConfig.jsx\";\r\nimport { VisualizationConfig } from \"./VisualizationConfig.jsx\";\r\nimport { CymaticsConfig } from \"./CymaticsConfig.jsx\";\r\nimport { SOLFEGGIO_SET } from \"../utils/frequencyLibrary.js\";\r\nimport { useProgressStore } from \"../state/progressStore.js\";\r\nimport { syncFromProgressStore } from \"../state/mandalaStore.js\";\r\nimport { loadPreferences, savePreferences } from \"../state/practiceStore.js\";\r\nimport { ringFXPresets, getCategories } from \"../data/ringFXPresets.js\";\r\nimport { useSessionInstrumentation } from \"../hooks/useSessionInstrumentation.js\";\r\nimport { logPractice } from '../services/cycleManager.js';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { logCircuitCompletion } from '../services/circuitManager.js';\r\nimport { PracticeSelectionModal } from \"./PracticeSelectionModal.jsx\";\r\nimport { SacredTimeSlider } from \"./SacredTimeSlider.jsx\";\r\nimport { PeripheralHalo } from \"./ui/PeripheralHalo.jsx\";\r\nimport { BreathPatternPreview } from \"./BreathPatternPreview.jsx\";\r\nimport { SessionSummaryModal } from \"./practice/SessionSummaryModal.jsx\";\r\nimport { plateauMaterial, innerGlowStyle, getCardMaterial, getInnerGlowStyle } from \"../styles/cardMaterial.js\";\r\nimport { useDisplayModeStore } from \"../state/displayModeStore.js\";\r\nimport { PostSessionJournal } from \"./PostSessionJournal.jsx\";\r\nimport { useJournalStore } from \"../state/journalStore.js\";\r\n\r\nconst DEV_FX_GALLERY_ENABLED = true;\r\n\r\nconst PRACTICES = [\"Breath & Stillness\", \"Ritual\", \"Circuit\", \"Cognitive Vipassana\", \"Somatic Vipassana\", \"Sound\", \"Visualization\", \"Cymatics\"];\r\nconst DURATIONS = [3, 5, 7, 10, 12, 15, 20, 25, 30, 40, 50, 60];\r\n\r\nfunction ScrollingWheel({ value, onChange, options, colorScheme = 'dark' }) {\r\n  const isLight = colorScheme === 'light';\r\n  const wheelRef = useRef(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startY, setStartY] = useState(0);\r\n  const [scrollOffset, setScrollOffset] = useState(0);\r\n\r\n  const itemHeight = 48;\r\n  const visibleItems = 3;\r\n\r\n  useEffect(() => {\r\n    const index = options.indexOf(value);\r\n    if (index !== -1) {\r\n      setScrollOffset(index * itemHeight);\r\n    }\r\n  }, [value, options, itemHeight]);\r\n\r\n  const handleMouseDown = (e) => {\r\n    setIsDragging(true);\r\n    setStartY(e.clientY);\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDragging) return;\r\n    const deltaY = startY - e.clientY;\r\n    const newOffset = Math.max(0, Math.min(scrollOffset + deltaY, (options.length - 1) * itemHeight));\r\n    setScrollOffset(newOffset);\r\n    setStartY(e.clientY);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    if (!isDragging) return;\r\n    setIsDragging(false);\r\n\r\n    const nearestIndex = Math.round(scrollOffset / itemHeight);\r\n    const snappedOffset = nearestIndex * itemHeight;\r\n    setScrollOffset(snappedOffset);\r\n    onChange(options[nearestIndex]);\r\n  };\r\n\r\n  const handleWheel = (e) => {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? itemHeight : -itemHeight;\r\n    const newOffset = Math.max(0, Math.min(scrollOffset + delta, (options.length - 1) * itemHeight));\r\n    setScrollOffset(newOffset);\r\n\r\n    const nearestIndex = Math.round(newOffset / itemHeight);\r\n    setScrollOffset(nearestIndex * itemHeight);\r\n    onChange(options[nearestIndex]);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={wheelRef}\r\n      className=\"relative overflow-hidden select-none\"\r\n      style={{\r\n        height: `${itemHeight * visibleItems}px`,\r\n        width: \"120px\",\r\n      }}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n      onMouseLeave={handleMouseUp}\r\n      onWheel={handleWheel}\r\n    >\r\n      <div\r\n        className=\"absolute top-0 left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          height: `${itemHeight}px`,\r\n          background: isLight\r\n            ? \"linear-gradient(180deg, var(--light-bg-surface) 0%, transparent 100%)\"\r\n            : \"linear-gradient(180deg, rgba(15,15,26,1) 0%, transparent 100%)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute bottom-0 left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          height: `${itemHeight}px`,\r\n          background: isLight\r\n            ? \"linear-gradient(0deg, var(--light-bg-surface) 0%, transparent 100%)\"\r\n            : \"linear-gradient(0deg, rgba(15,15,26,1) 0%, transparent 100%)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          top: `${itemHeight}px`,\r\n          height: `${itemHeight}px`,\r\n          border: \"1px solid var(--accent-20)\",\r\n          borderRadius: \"8px\",\r\n          background: \"rgba(255,255,255,0.02)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute w-full transition-transform duration-200\"\r\n        style={{\r\n          transform: `translateY(${itemHeight - scrollOffset}px)`,\r\n          cursor: isDragging ? 'grabbing' : 'grab'\r\n        }}\r\n      >\r\n        {options.map((option, index) => {\r\n          const offset = Math.abs(index * itemHeight - scrollOffset);\r\n          const opacity = Math.max(0.2, 1 - offset / (itemHeight * 2));\r\n          const scale = Math.max(0.7, 1 - offset / (itemHeight * 3));\r\n\r\n          return (\r\n            <div\r\n              key={option}\r\n              className=\"flex items-center justify-center\"\r\n              style={{\r\n                fontSize: \"22px\",\r\n                fontWeight: 600,\r\n                letterSpacing: \"var(--tracking-wide)\",\r\n                color: \"var(--text-primary)\",\r\n                opacity,\r\n                transform: `scale(${scale})`,\r\n                transition: \"opacity 0.2s, transform 0.2s\"\r\n              }}\r\n            >\r\n              {option}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PracticeSection({ onPracticingChange, onBreathStateChange, avatarPath, showCore, showFxGallery = DEV_FX_GALLERY_ENABLED }) {\r\n  const instrumentation = useSessionInstrumentation();\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n  const savedPrefs = loadPreferences();\r\n\r\n  // FIX: Guard practice initialization with fallback to first practice\r\n  const [practice, setPractice] = useState(savedPrefs.practice || PRACTICES[0]);\r\n  const [practiceModalOpen, setPracticeModalOpen] = useState(false);\r\n\r\n  // CURRICULUM INTEGRATION\r\n  const {\r\n    getActivePracticeDay,\r\n    getActivePracticeLeg,\r\n    activePracticeSession,\r\n    clearActivePracticeSession,\r\n  } = useCurriculumStore();\r\n\r\n  // Load curriculum day settings when active session changes\r\n  useEffect(() => {\r\n    if (!activePracticeSession) return;\r\n\r\n    // Get the active leg (specific practice within the day)\r\n    const activeLeg = getActivePracticeLeg();\r\n\r\n    if (activeLeg) {\r\n      // Load practice config from the active leg\r\n      setPractice(activeLeg.practiceType);\r\n\r\n      if (activeLeg.practiceConfig?.duration) {\r\n        setDuration(activeLeg.practiceConfig.duration);\r\n        setTimeLeft(activeLeg.practiceConfig.duration * 60);\r\n      }\r\n\r\n      // If there's a breathPattern specified, set it as preset\r\n      if (activeLeg.practiceConfig?.breathPattern) {\r\n        setPreset(activeLeg.practiceConfig.breathPattern);\r\n      }\r\n\r\n      // Auto-start the practice immediately (skip configuration screen entirely)\r\n      // Set isRunning first to hide the config screen, then execute start\r\n      setIsRunning(true);\r\n      setTimeout(() => {\r\n        executeStart();\r\n      }, 100);\r\n    } else {\r\n      console.warn('[useEffect] No active leg found for session:', activePracticeSession);\r\n    }\r\n  }, [activePracticeSession]);\r\n\r\n  const [chevronAngle, setChevronAngle] = useState(0);\r\n  const [haloPulse, setHaloPulse] = useState(0);\r\n  const [duration, setDuration] = useState(savedPrefs.duration);\r\n  const [preset, setPreset] = useState(savedPrefs.preset);\r\n  const [pattern, setPattern] = useState(savedPrefs.pattern);\r\n\r\n  const [sensoryType, setSensoryType] = useState(savedPrefs.sensoryType || SENSORY_TYPES[0].id);\r\n  const [soundType, setSoundType] = useState(savedPrefs.soundType || SOUND_TYPES[0]);\r\n  const [vipassanaTheme, setVipassanaTheme] = useState(savedPrefs.vipassanaTheme);\r\n  const [vipassanaElement, setVipassanaElement] = useState(savedPrefs.vipassanaElement);\r\n\r\n  const [vipassanaVariant, setVipassanaVariant] = useState('thought-labeling');\r\n  const [showVipassanaVariantModal, setShowVipassanaVariantModal] = useState(false);\r\n\r\n  const [binauralPreset, setBinauralPreset] = useState(BINAURAL_PRESETS[2]);\r\n  const [isochronicPreset, setIsochronicPreset] = useState(ISOCHRONIC_PRESETS[1]);\r\n  const [mantraPreset, setMantraPreset] = useState(null);\r\n  const [naturePreset, setNaturePreset] = useState(null);\r\n  const [carrierFrequency, setCarrierFrequency] = useState(200);\r\n  const [soundVolume, setSoundVolume] = useState(0.5);\r\n\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(10 * 60);\r\n\r\n  const [tier2Expanded, setTier2Expanded] = useState(true);\r\n  const [tier3Expanded, setTier3Expanded] = useState(true);\r\n\r\n  const [isStarting, setIsStarting] = useState(false);\r\n\r\n  const [showSummary, setShowSummary] = useState(false);\r\n  const [sessionSummary, setSessionSummary] = useState(null);\r\n\r\n  const [lastSessionId, setLastSessionId] = useState(null);\r\n  const { startMicroNote, pendingMicroNote } = useJournalStore();\r\n\r\n  const [tier2Hovered, setTier2Hovered] = useState(false);\r\n  const [tier3Hovered, setTier3Hovered] = useState(false);\r\n\r\n  const [activeCircuitId, setActiveCircuitId] = useState(null);\r\n  const [circuitConfig, setCircuitConfig] = useState(null);\r\n  const [circuitExerciseIndex, setCircuitExerciseIndex] = useState(0);\r\n  const [circuitSavedPractice, setCircuitSavedPractice] = useState(null);\r\n\r\n  const [tapErrors, setTapErrors] = useState([]);\r\n  const [lastErrorMs, setLastErrorMs] = useState(null);\r\n  const [lastSignedErrorMs, setLastSignedErrorMs] = useState(null);\r\n\r\n  const [breathCount, setBreathCount] = useState(0);\r\n  const [sessionStartTime, setSessionStartTime] = useState(null);\r\n\r\n  const [geometry, setGeometry] = useState(savedPrefs.geometry);\r\n  const [fadeInDuration, setFadeInDuration] = useState(2.5);\r\n  const [displayDuration, setDisplayDuration] = useState(10);\r\n  const [fadeOutDuration, setFadeOutDuration] = useState(2.5);\r\n  const [voidDuration, setVoidDuration] = useState(10);\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  const [visualizationCycles, setVisualizationCycles] = useState(0);\r\n\r\n  const [frequencySet, setFrequencySet] = useState('solfeggio');\r\n  const [selectedFrequency, setSelectedFrequency] = useState(SOLFEGGIO_SET[4]);\r\n  const [driftEnabled, setDriftEnabled] = useState(false);\r\n\r\n  const [activeRitual, setActiveRitual] = useState(null);\r\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\r\n\r\n  const [currentFxIndex, setCurrentFxIndex] = useState(0);\r\n  const currentFxPreset = showFxGallery ? ringFXPresets[currentFxIndex] : null;\r\n\r\n  const handlePrevFx = () => {\r\n    setCurrentFxIndex(prev => (prev - 1 + ringFXPresets.length) % ringFXPresets.length);\r\n  };\r\n\r\n  const handleNextFx = () => {\r\n    setCurrentFxIndex(prev => (prev + 1) % ringFXPresets.length);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isRunning) {\r\n      setTimeLeft(duration * 60);\r\n    }\r\n  }, [duration, isRunning]);\r\n\r\n  useEffect(() => {\r\n    let animationId;\r\n    const startTime = Date.now();\r\n\r\n    const animate = () => {\r\n      const elapsed = Date.now() - startTime;\r\n\r\n      const chevronPhase = (elapsed % 3000) / 3000;\r\n      const angle = Math.sin(chevronPhase * Math.PI * 2) * 8;\r\n      setChevronAngle(angle);\r\n\r\n      const haloPhase = (elapsed % 5000) / 5000;\r\n      const pulse = (Math.sin(haloPhase * Math.PI * 2) + 1) / 2;\r\n      setHaloPulse(pulse);\r\n\r\n      animationId = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animationId = requestAnimationFrame(animate);\r\n    return () => cancelAnimationFrame(animationId);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (preset && BREATH_PRESETS[preset]) {\r\n      setPattern(BREATH_PRESETS[preset]);\r\n    }\r\n  }, [preset]);\r\n\r\n  useEffect(() => {\r\n    if (practice === \"Circuit\" && !circuitConfig) {\r\n      const defaultExercises = [\r\n        { exercise: { id: 'breath', name: 'Breath Training', type: 'breath', practiceType: 'Breath & Stillness', preset: 'box' }, duration: 5 },\r\n        { exercise: { id: 'cognitive', name: 'Cognitive Vipassana', type: 'focus', practiceType: 'Cognitive Vipassana' }, duration: 5 },\r\n        { exercise: { id: 'somatic', name: 'Somatic Vipassana', type: 'body', practiceType: 'Somatic Vipassana', sensoryType: 'body' }, duration: 5 },\r\n      ];\r\n      setCircuitConfig({ exercises: defaultExercises, exerciseDuration: 5 });\r\n    }\r\n  }, [practice, circuitConfig]);\r\n\r\n  const setupCircuitExercise = (exerciseItem) => {\r\n    const { exercise, duration: exDuration } = exerciseItem;\r\n\r\n    if (exercise.practiceType === 'Breath & Stillness') {\r\n      setPractice('Breath & Stillness');\r\n      if (exercise.preset) {\r\n        const presetKey = Object.keys(BREATH_PRESETS).find(\r\n          k => k.toLowerCase() === exercise.preset.toLowerCase()\r\n        );\r\n        if (presetKey && BREATH_PRESETS[presetKey]) {\r\n          setPattern(BREATH_PRESETS[presetKey]);\r\n          setPreset(presetKey);\r\n        }\r\n      }\r\n    } else if (exercise.practiceType === 'Cognitive Vipassana') {\r\n      setPractice('Cognitive Vipassana');\r\n    } else if (exercise.practiceType === 'Somatic Vipassana') {\r\n      setPractice('Somatic Vipassana');\r\n      if (exercise.sensoryType) {\r\n        setSensoryType(exercise.sensoryType);\r\n      }\r\n    } else {\r\n      setPractice(exercise.practiceType || 'Breath & Stillness');\r\n    }\r\n\r\n    setDuration(exDuration);\r\n    setTimeLeft(exDuration * 60);\r\n\r\n    setIsRunning(true);\r\n    onPracticingChange && onPracticingChange(true);\r\n    setSessionStartTime(performance.now());\r\n    setTapErrors([]);\r\n    setLastErrorMs(null);\r\n    setLastSignedErrorMs(null);\r\n    setBreathCount(0);\r\n  };\r\n\r\n  const handleExerciseComplete = () => {\r\n    if (activeCircuitId && circuitConfig) {\r\n      advanceCircuitExercise();\r\n    } else {\r\n      handleStop();\r\n    }\r\n  };\r\n\r\n  const advanceCircuitExercise = () => {\r\n    if (!activeCircuitId || !circuitConfig) return;\r\n\r\n    const nextIndex = circuitExerciseIndex + 1;\r\n    if (nextIndex < circuitConfig.exercises.length) {\r\n      setCircuitExerciseIndex(nextIndex);\r\n      const nextExercise = circuitConfig.exercises[nextIndex];\r\n      setupCircuitExercise(nextExercise);\r\n    } else {\r\n      handleCircuitComplete();\r\n    }\r\n  };\r\n\r\n  const handleCircuitComplete = () => {\r\n    clearActivePracticeSession();\r\n    setIsRunning(false);\r\n    onPracticingChange && onPracticingChange(false);\r\n\r\n    logCircuitCompletion('custom', circuitConfig.exercises);\r\n\r\n    const totalDuration = circuitConfig.exercises.reduce((sum, e) => sum + e.duration, 0);\r\n\r\n    let recordedSession = null;\r\n    try {\r\n      recordedSession = useProgressStore.getState().recordSession({\r\n        domain: 'circuit-training',\r\n        duration: totalDuration,\r\n        metadata: {\r\n          circuitName: 'Custom Circuit',\r\n          exerciseCount: circuitConfig.exercises.length,\r\n          legacyImport: false\r\n        },\r\n      });\r\n    } catch (e) {\r\n      console.error(\"Failed to save circuit session:\", e);\r\n    }\r\n\r\n    setSessionSummary({\r\n      type: 'circuit',\r\n      circuitName: 'Custom Circuit',\r\n      exercisesCompleted: circuitConfig.exercises.length,\r\n      totalDuration: totalDuration,\r\n    });\r\n    setShowSummary(true);\r\n\r\n    if (recordedSession) {\r\n      setLastSessionId(recordedSession.id);\r\n      startMicroNote(recordedSession.id);\r\n    }\r\n\r\n    setActiveCircuitId(null);\r\n    setCircuitExerciseIndex(0);\r\n    setPractice('Circuit');\r\n  };\r\n\r\n  const handlePatternChange = (key, value) => {\r\n    setPattern((prev) => ({\r\n      ...prev,\r\n      [key]: Number.parseInt(value, 10) || 0,\r\n    }));\r\n    setPreset(null);\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const m = Math.floor(seconds / 60);\r\n    const s = seconds % 60;\r\n    return `${m}:${s.toString().padStart(2, \"0\")} `;\r\n  };\r\n\r\n  const handleStop = () => {\r\n    // Capture curriculum context BEFORE clearing\r\n    const savedActivePracticeSession = activePracticeSession;\r\n    const isCircuitSession = activeCircuitId && circuitConfig;\r\n\r\n    // If this is a circuit session, delegate to circuit handler\r\n    if (isCircuitSession) {\r\n      handleCircuitComplete();\r\n      return;\r\n    }\r\n    const wasFromCurriculum = savedActivePracticeSession;\r\n\r\n    // Now clear the session\r\n    clearActivePracticeSession();\r\n    setIsRunning(false);\r\n    onPracticingChange && onPracticingChange(false);\r\n    onBreathStateChange && onBreathStateChange(null);\r\n\r\n    const exitType = timeLeft <= 0 ? 'completed' : 'abandoned';\r\n    const instrumentationData = instrumentation.endSession(exitType);\r\n\r\n    const id =\r\n      typeof crypto !== \"undefined\" && crypto.randomUUID\r\n        ? crypto.randomUUID()\r\n        : String(Date.now());\r\n\r\n    const tapCount = tapErrors.length;\r\n    let avgErrorMs = null;\r\n    let bestErrorMs = null;\r\n\r\n    if (tapCount > 0) {\r\n      avgErrorMs = Math.round(\r\n        tapErrors.reduce((sum, v) => sum + Math.abs(v), 0) / tapCount\r\n      );\r\n      bestErrorMs = Math.round(\r\n        Math.min(...tapErrors.map(e => Math.abs(e)))\r\n      );\r\n    }\r\n\r\n    let subType = null;\r\n    if (practice === \"Somatic Vipassana\") subType = sensoryType;\r\n    if (practice === \"Sound\") subType = soundType;\r\n    if (practice === \"Visualization\") subType = geometry;\r\n    if (practice === \"Cymatics\") subType = `${selectedFrequency.hz} Hz - ${selectedFrequency.name} `;\r\n    if (practice === \"Ritual\") subType = activeRitual?.id;\r\n\r\n    const sessionPayload = {\r\n      id,\r\n      date: new Date().toISOString(),\r\n      type: practice.toLowerCase(),\r\n      subType,\r\n      durationMinutes: duration,\r\n      pattern: practice === \"Breath & Stillness\" ? { ...pattern } : null,\r\n      tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n    };\r\n\r\n    let recordedSession = null;\r\n    try {\r\n      let domain = 'breathwork';\r\n      const p = practice.toLowerCase();\r\n      if (p.includes('visual') || p.includes('cymatics')) domain = 'visualization';\r\n      else if (p === 'somatic vipassana') domain = sensoryType;\r\n      else if (p === 'ritual') domain = 'ritual';\r\n      else if (p === 'sound') domain = 'sound';\r\n\r\n      recordedSession = useProgressStore.getState().recordSession({\r\n        domain,\r\n        duration: duration,\r\n        metadata: {\r\n          subType,\r\n          pattern: practice === \"Breath & Stillness\" ? { ...pattern } : null,\r\n          tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n          ritualId: activeRitual?.id,\r\n          legacyImport: false\r\n        },\r\n        instrumentation: instrumentationData,\r\n      });\r\n\r\n      if (duration >= 10) {\r\n        const now = new Date();\r\n        const timeOfDay = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}`;\r\n\r\n        logPractice({\r\n          type: domain === 'breathwork' ? 'breath' : domain === 'visualization' ? 'focus' : 'body',\r\n          duration: duration,\r\n          timeOfDay: timeOfDay,\r\n        });\r\n      }\r\n\r\n      syncFromProgressStore();\r\n    } catch (e) {\r\n      console.error(\"Failed to save session:\", e);\r\n    }\r\n\r\n    setActiveRitual(null);\r\n    setCurrentStepIndex(0);\r\n\r\n    // Use instrumentation duration (in milliseconds) for accurate session length\r\n    const actualDurationSeconds = Math.floor(instrumentationData.duration_ms / 1000);\r\n    const shouldJournal = practice !== 'Ritual' && actualDurationSeconds >= 30;\r\n\r\n    // Reset timeLeft for next session\r\n    setTimeLeft(duration * 60);\r\n\r\n    // Log leg completion if from curriculum\r\n    let nextLegInfo = null;\r\n    let currentLegNumber = null;\r\n    let totalLegsForDay = null;\r\n    let dailyStatsInfo = null;\r\n\r\n    if (wasFromCurriculum && exitType === 'completed') {\r\n      const {\r\n        logLegCompletion,\r\n        getNextIncompleteLeg,\r\n        getDayLegsWithStatus,\r\n        getCurriculumDay,\r\n        practiceTimeSlots\r\n      } = useCurriculumStore.getState();\r\n      const curriculumDay = getActivePracticeDay();\r\n\r\n      if (curriculumDay) {\r\n        // Find which leg was just completed\r\n        const completedLegs = getDayLegsWithStatus(savedActivePracticeSession).filter(leg => leg.completed);\r\n        currentLegNumber = completedLegs.length + 1; // Next leg to complete\r\n        totalLegsForDay = curriculumDay.legs ? curriculumDay.legs.length : 1;\r\n\r\n        // Log this leg as complete\r\n        logLegCompletion(savedActivePracticeSession, currentLegNumber, {\r\n          duration: actualDurationSeconds / 60,\r\n          focusRating: null, // Will be collected in session summary\r\n          challenges: [],\r\n          notes: '',\r\n        });\r\n\r\n        // Get next incomplete leg for \"What's Next\" display\r\n        const nextLeg = getNextIncompleteLeg();\r\n        if (nextLeg) {\r\n          nextLegInfo = nextLeg.leg;\r\n        }\r\n\r\n        // If this is the last leg, calculate daily stats\r\n        if (!nextLeg || currentLegNumber === totalLegsForDay) {\r\n          const allLegsWithStatus = getDayLegsWithStatus(savedActivePracticeSession);\r\n          const totalMinutes = allLegsWithStatus.reduce((sum, leg) =>\r\n            sum + (leg.completion?.duration || 0), 0\r\n          );\r\n\r\n          // Calculate precision score from tap stats (if available)\r\n          let precisionScore = 'N/A';\r\n          if (avgErrorMs !== null) {\r\n            // Convert avg error to precision: < 50ms = 5*, < 100ms = 4*, etc.\r\n            if (avgErrorMs < 50) precisionScore = 'ΓÿàΓÿàΓÿàΓÿàΓÿà';\r\n            else if (avgErrorMs < 100) precisionScore = 'ΓÿàΓÿàΓÿàΓÿàΓÿå';\r\n            else if (avgErrorMs < 150) precisionScore = 'ΓÿàΓÿàΓÿàΓÿåΓÿå';\r\n            else if (avgErrorMs < 200) precisionScore = 'ΓÿàΓÿàΓÿåΓÿåΓÿå';\r\n            else precisionScore = 'ΓÿàΓÿåΓÿåΓÿåΓÿå';\r\n          }\r\n\r\n          // Get tomorrow's practice info\r\n          const tomorrowDay = getCurriculumDay(savedActivePracticeSession + 1);\r\n          const nextPracticeTime = tomorrowDay?.legs?.[0]?.time || practiceTimeSlots[0] || '06:00';\r\n          const nextPracticeType = tomorrowDay?.legs?.[0]?.practiceType || 'Breath & Stillness';\r\n\r\n          dailyStatsInfo = {\r\n            totalMinutes: Math.round(totalMinutes),\r\n            precisionScore,\r\n            nextPracticeTime,\r\n            nextPracticeType,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    // Show summary if session was long enough\r\n    if (shouldJournal) {\r\n      setSessionSummary({\r\n        practice,\r\n        duration,\r\n        tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n        breathCount,\r\n        exitType,\r\n        nextLeg: nextLegInfo,\r\n        curriculumDayNumber: wasFromCurriculum ? savedActivePracticeSession : null,\r\n        legNumber: currentLegNumber,\r\n        totalLegs: totalLegsForDay,\r\n        dailyStats: dailyStatsInfo,\r\n      });\r\n      setShowSummary(true);\r\n\r\n      if (recordedSession) {\r\n        setLastSessionId(recordedSession.id);\r\n        startMicroNote(recordedSession.id);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFocusRating = (rating) => {\r\n    // Update the leg completion with focus rating\r\n    if (sessionSummary?.curriculumDayNumber) {\r\n      const { logLegCompletion, getDayLegsWithStatus } = useCurriculumStore.getState();\r\n      const completedLegs = getDayLegsWithStatus(sessionSummary.curriculumDayNumber).filter(leg => leg.completed);\r\n      const currentLegNumber = completedLegs.length; // The one that was just marked complete\r\n\r\n      // Re-log with focus rating\r\n      logLegCompletion(sessionSummary.curriculumDayNumber, currentLegNumber, {\r\n        duration: sessionSummary.duration,\r\n        focusRating: rating,\r\n        challenges: [],\r\n        notes: '',\r\n      });\r\n    }\r\n  };\r\n\r\n  const executeStart = () => {\r\n    // FIX: Guard against null practice\r\n    if (!practice) {\r\n      console.error(\"Cannot start practice: practice is null or undefined\");\r\n      return;\r\n    }\r\n\r\n\r\n    savePreferences({\r\n      practice,\r\n      duration,\r\n      preset,\r\n      pattern,\r\n      sensoryType,\r\n      vipassanaTheme,\r\n      vipassanaElement,\r\n      soundType,\r\n      geometry,\r\n    });\r\n\r\n    if (practice === \"Circuit\") {\r\n      if (!circuitConfig || circuitConfig.exercises.length === 0) {\r\n        console.error('[executeStart] Circuit practice but no config');\r\n        return;\r\n      }\r\n      setCircuitSavedPractice(practice);\r\n      setActiveCircuitId('custom');\r\n      setCircuitExerciseIndex(0);\r\n\r\n      const firstExercise = circuitConfig.exercises[0];\r\n      setupCircuitExercise(firstExercise);\r\n      return;\r\n    }\r\n\r\n    if (practice === \"Cognitive Vipassana\") {\r\n      setShowVipassanaVariantModal(true);\r\n      // NOTE: After modal selection, the modal's onSelect will close itself\r\n      // We need to start the session AFTER the variant is selected\r\n      // So we don't set isRunning here - the modal callback should do it\r\n      return; // IMPORTANT: Return here to prevent auto-starting\r\n    }\r\n\r\n    setIsRunning(true);\r\n    onPracticingChange && onPracticingChange(true);\r\n    setSessionStartTime(performance.now());\r\n    setTapErrors([]);\r\n    setLastErrorMs(null);\r\n    setLastSignedErrorMs(null);\r\n    setBreathCount(0);\r\n\r\n    const p = practice.toLowerCase();\r\n    let domain = 'breathwork';\r\n    if (p.includes('visual') || p.includes('cymatics')) domain = 'visualization';\r\n    else if (p === 'sensory') domain = sensoryType;\r\n    else if (p === 'ritual') domain = 'ritual';\r\n    else if (p === 'sound') domain = 'sound';\r\n\r\n    instrumentation.startSession(\r\n      domain,\r\n      activeRitual?.category || null,\r\n      p === 'somatic vipassana' ? sensoryType : null\r\n    );\r\n  };\r\n\r\n  const handleStart = () => {\r\n    setIsStarting(true);\r\n\r\n    setTimeout(() => {\r\n      setIsStarting(false);\r\n      executeStart();\r\n    }, 1400);\r\n  };\r\n\r\n  const handleSelectRitual = (ritual) => {\r\n    setActiveRitual(ritual);\r\n    setCurrentStepIndex(0);\r\n    const totalSeconds = ritual.steps?.reduce((sum, s) => sum + (s.duration || 60), 0) || 600;\r\n    setDuration(Math.ceil(totalSeconds / 60));\r\n    setTimeLeft(totalSeconds);\r\n    handleStart();\r\n  };\r\n\r\n  const handleNextStep = () => {\r\n    if (!activeRitual) return;\r\n    const nextIndex = currentStepIndex + 1;\r\n    if (nextIndex < activeRitual.steps.length) {\r\n      setCurrentStepIndex(nextIndex);\r\n    }\r\n  };\r\n\r\n  const handleRitualComplete = () => {\r\n    handleStop();\r\n\r\n    // Navigate back to home after ritual completion\r\n    // (ritual doesn't show summary, so we reset to practice selection which shows home)\r\n    setTimeout(() => {\r\n      setPractice(PRACTICES[0]); // Reset to practice selection menu\r\n    }, 300);\r\n  };\r\n\r\n  const handleAccuracyTap = (errorMs) => {\r\n    if (!isRunning) return;\r\n\r\n    instrumentation.recordAliveSignal();\r\n\r\n    setLastErrorMs(Math.abs(errorMs));\r\n    setLastSignedErrorMs(errorMs);\r\n\r\n    setTapErrors(prev => {\r\n      const updated = [...prev, errorMs];\r\n      if (updated.length > 50) updated.shift();\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isRunning) return;\r\n    if (practice === \"Ritual\") return;\r\n\r\n    let interval = null;\r\n    if (timeLeft > 0) {\r\n      interval = setInterval(() => {\r\n        setTimeLeft((prev) => prev - 1);\r\n      }, 1000);\r\n    } else if (timeLeft === 0) {\r\n      if (activeCircuitId && circuitConfig) {\r\n        advanceCircuitExercise();\r\n      } else {\r\n        handleStop();\r\n      }\r\n    }\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, [isRunning, timeLeft, practice, activeCircuitId]);\r\n\r\n  useEffect(() => {\r\n    if (!onBreathStateChange) return;\r\n    if (!isRunning || practice !== \"Breath & Stillness\") {\r\n      onBreathStateChange(null);\r\n      return;\r\n    }\r\n    const total = pattern.inhale + pattern.hold1 + pattern.exhale + pattern.hold2;\r\n    if (!total) {\r\n      onBreathStateChange(null);\r\n      return;\r\n    }\r\n\r\n    const now = performance.now() / 1000;\r\n    const cyclePos = (now % total);\r\n\r\n    let phase = \"inhale\";\r\n    let phaseProgress = 0;\r\n\r\n    if (cyclePos < pattern.inhale) {\r\n      phase = \"inhale\";\r\n      phaseProgress = cyclePos / pattern.inhale;\r\n    } else if (cyclePos < pattern.inhale + pattern.hold1) {\r\n      phase = \"holdTop\";\r\n      phaseProgress =\r\n        (cyclePos - pattern.inhale) / Math.max(pattern.hold1, 0.0001);\r\n    } else if (\r\n      cyclePos <\r\n      pattern.inhale + pattern.hold1 + pattern.exhale\r\n    ) {\r\n      phase = \"exhale\";\r\n      phaseProgress =\r\n        (cyclePos - (pattern.inhale + pattern.hold1)) /\r\n        Math.max(pattern.exhale, 0.0001);\r\n    } else {\r\n      phase = \"holdBottom\";\r\n      phaseProgress =\r\n        (cyclePos -\r\n          (pattern.inhale + pattern.hold1 + pattern.exhale)) /\r\n        Math.max(pattern.hold2 || 1, 1);\r\n    }\r\n\r\n    onBreathStateChange({\r\n      phase,\r\n      phaseProgress,\r\n    });\r\n  }, [isRunning, practice, pattern, onBreathStateChange]);\r\n\r\n  const totalDuration =\r\n    pattern.inhale + pattern.hold1 + pattern.exhale + pattern.hold2 || 1;\r\n  const width = 100;\r\n  const height = 40;\r\n\r\n  const iW = (pattern.inhale / totalDuration) * width;\r\n  const h1W = (pattern.hold1 / totalDuration) * width;\r\n  const eW = (pattern.exhale / totalDuration) * width;\r\n\r\n  const pathD = `\r\n    M 0 ${height}\r\n    L ${iW} 0\r\n    L ${iW + h1W} 0\r\n    L ${iW + h1W + eW} ${height}\r\n    L ${width} ${height}\r\n`;\r\n\r\n  const breathingPatternForRing = {\r\n    inhale: pattern.inhale,\r\n    holdTop: pattern.hold1,\r\n    exhale: pattern.exhale,\r\n    holdBottom: pattern.hold2,\r\n  };\r\n\r\n  const theme = useTheme();\r\n  const { primary, secondary, muted, glow } = theme.accent;\r\n\r\n  // RENDER PRIORITY 1: Active Practice Session\r\n  if (isRunning) {\r\n    if (practice === \"Ritual\") {\r\n      return (\r\n        <section className=\"w-full h-full min-h-[600px] flex flex-col items-center justify-center overflow-visible pb-12\">\r\n          <RitualPortal\r\n            onComplete={handleRitualComplete}\r\n            onStop={handleStop}\r\n          />\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (practice === \"Cognitive Vipassana\") {\r\n      if (showVipassanaVariantModal) {\r\n        return (\r\n          <VipassanaVariantSelector\r\n            onSelect={(variant) => {\r\n              setVipassanaVariant(variant);\r\n              setShowVipassanaVariantModal(false);\r\n\r\n              // NOW start the session after variant is selected\r\n              setIsRunning(true);\r\n              onPracticingChange && onPracticingChange(true);\r\n              setSessionStartTime(performance.now());\r\n              setTapErrors([]);\r\n              setLastErrorMs(null);\r\n              setLastSignedErrorMs(null);\r\n              setBreathCount(0);\r\n\r\n              instrumentation.startSession(\r\n                'focus', // Cognitive Vipassana maps to focus domain\r\n                null,\r\n                null\r\n              );\r\n            }}\r\n            onCancel={() => {\r\n              setShowVipassanaVariantModal(false);\r\n              handleStop();\r\n            }}\r\n          />\r\n        );\r\n      }\r\n\r\n      return (\r\n        <section className=\"w-full h-full min-h-[600px] flex flex-col items-center justify-center overflow-visible pb-12\">\r\n          <div className=\"flex-1 flex items-center justify-center w-full relative\">\r\n            <VipassanaVisual\r\n              isActive={isRunning}\r\n              variant={vipassanaVariant}\r\n              wallpaperId={vipassanaTheme}\r\n              themeId={vipassanaElement}\r\n              durationSeconds={duration * 60}\r\n              stage={theme.stage || 'flame'}\r\n              onComplete={handleExerciseComplete}\r\n              onExit={activeCircuitId ? handleCircuitComplete : handleStop}\r\n              onCancel={handleStop}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-center z-50 mt-8\">\r\n            <button\r\n              onClick={handleStop}\r\n              className=\"rounded-full px-7 py-2.5 transition-all duration-200 hover:-translate-y-0.5 min-w-[200px] relative overflow-hidden\"\r\n              style={{\r\n                fontFamily: \"var(--font-display)\",\r\n                fontSize: \"11px\",\r\n                letterSpacing: \"var(--tracking-mythic)\",\r\n                textTransform: \"uppercase\",\r\n                fontWeight: 600,\r\n                background: 'linear-gradient(180deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)',\r\n                color: \"#050508\",\r\n                boxShadow: '0 0 24px var(--accent-30), inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)',\r\n                borderRadius: \"999px\",\r\n              }}\r\n            >\r\n              <span>Stop</span>\r\n            </button>\r\n            <div\r\n              className=\"mt-5\"\r\n              style={{\r\n                fontFamily: \"var(--font-display)\",\r\n                fontSize: \"12px\",\r\n                fontWeight: 600,\r\n                letterSpacing: \"var(--tracking-mythic)\",\r\n                textTransform: \"uppercase\",\r\n                color: \"var(--text-primary)\",\r\n              }}\r\n            >\r\n              {formatTime(timeLeft)}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    let buttonBg = 'linear-gradient(180deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)';\r\n    let radialGlow = '';\r\n    let buttonShadow = 'inset 0 1px 0 rgba(255,255,255,0.35)';\r\n\r\n    let feedbackColor = 'var(--accent-primary)';\r\n    let feedbackText = \"\";\r\n    let feedbackShadow = \"none\";\r\n\r\n    if (lastSignedErrorMs !== null && practice === \"Breath & Stillness\") {\r\n      const absError = Math.round(Math.abs(lastSignedErrorMs));\r\n\r\n      if (absError > 1000) {\r\n        feedbackColor = '#ef4444';\r\n        feedbackText = \"OUT OF BOUNDS\";\r\n        feedbackShadow = \"0 0 8px rgba(239, 68, 68, 0.5)\";\r\n        buttonBg = isLight ? 'linear-gradient(180deg, #9ca3af 0%, #6b7280 100%)' : 'linear-gradient(180deg, rgba(100,100,100,0.3) 0%, rgba(60,60,60,0.4) 100%)';\r\n        radialGlow = '';\r\n      } else if (absError <= 30) {\r\n        feedbackColor = isLight ? 'var(--text-primary)' : \"#f8fafc\";\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = isLight ? \"none\" : \"0 0 12px rgba(255,255,255,0.6)\";\r\n        buttonBg = isLight ? \"linear-gradient(180deg, var(--accent-color) 0%, var(--accent-secondary) 100%)\" : \"linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%)\";\r\n        radialGlow = isLight ? '0 0 40px var(--accent-30)' : '0 0 60px 15px rgba(255,255,255,0.5), 0 0 30px rgba(255,255,255,0.7)';\r\n      } else if (absError <= 100) {\r\n        feedbackColor = 'var(--accent-color)';\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = '0 0 10px var(--accent-50)';\r\n        buttonBg = 'linear-gradient(180deg, var(--accent-color) 0%, var(--accent-secondary) 100%)';\r\n        radialGlow = '0 0 50px 12px var(--accent-40), 0 0 25px var(--accent-60)';\r\n      } else if (absError <= 300) {\r\n        feedbackColor = '#d97706';\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = \"0 0 8px rgba(217, 119, 6, 0.4)\";\r\n        buttonBg = 'linear-gradient(180deg, #d97706 0%, #92400e 100%)';\r\n        radialGlow = '0 0 40px 10px rgba(217, 119, 6, 0.3), 0 0 20px rgba(217, 119, 6, 0.5)';\r\n      } else {\r\n        feedbackColor = isLight ? 'var(--text-muted)' : '#9ca3af';\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = \"0 0 6px rgba(156, 163, 175, 0.3)\";\r\n        buttonBg = 'linear-gradient(180deg, #9ca3af 0%, #6b7280 100%)';\r\n        radialGlow = '0 0 35px 8px rgba(156, 163, 175, 0.25), 0 0 18px rgba(156, 163, 175, 0.4)';\r\n      }\r\n    }\r\n\r\n    return (\r\n      <section className=\"w-full h-full min-h-[600px] flex flex-col items-center justify-center pb-12\">\r\n        {activeCircuitId && circuitConfig && (\r\n          <div\r\n            className=\"fixed top-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-2 px-4 py-2 rounded-full\"\r\n            style={{\r\n              background: isLight ? 'var(--light-bg-surface)' : 'rgba(0,0,0,0.7)',\r\n              border: isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-30)',\r\n              backdropFilter: 'blur(8px)',\r\n            }}\r\n          >\r\n            <span style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '10px', letterSpacing: 'var(--tracking-mythic)', color: 'var(--text-secondary)', textTransform: 'uppercase' }}>\r\n              Circuit\r\n            </span>\r\n            <div className=\"flex gap-1\">\r\n              {circuitConfig.exercises.map((_, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className=\"w-2 h-2 rounded-full transition-all duration-300\"\r\n                  style={{\r\n                    background: idx < circuitExerciseIndex ? 'var(--accent-color)'\r\n                      : idx === circuitExerciseIndex ? (isLight ? 'var(--text-primary)' : '#fff')\r\n                        : (isLight ? 'rgba(60,50,35,0.2)' : 'rgba(253,251,245,0.2)'),\r\n                    boxShadow: idx === circuitExerciseIndex ? (isLight ? '0 2px 8px rgba(60,50,35,0.2)' : '0 0 8px rgba(255,255,255,0.6)') : 'none',\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n            <span style={{ fontFamily: 'var(--font-body)', fontSize: '10px', color: 'var(--text-muted)' }}>\r\n              {circuitExerciseIndex + 1}/{circuitConfig.exercises.length}\r\n            </span>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex-1 flex items-center justify-center w-full\">\r\n          {practice === \"Visualization\" ? (\r\n            <VisualizationCanvas\r\n              geometry={geometry}\r\n              fadeInDuration={fadeInDuration}\r\n              displayDuration={displayDuration}\r\n              fadeOutDuration={fadeOutDuration}\r\n              voidDuration={voidDuration}\r\n              audioEnabled={audioEnabled}\r\n              onCycleComplete={(cycle) => setVisualizationCycles(cycle)}\r\n            />\r\n          ) : practice === \"Cymatics\" ? (\r\n            <CymaticsVisualization\r\n              frequency={selectedFrequency.hz}\r\n              n={selectedFrequency.n}\r\n              m={selectedFrequency.m}\r\n              fadeInDuration={fadeInDuration}\r\n              displayDuration={displayDuration}\r\n              fadeOutDuration={fadeOutDuration}\r\n              voidDuration={voidDuration}\r\n              driftEnabled={driftEnabled}\r\n              audioEnabled={audioEnabled}\r\n              onCycleComplete={(cycle) => setVisualizationCycles(cycle)}\r\n            />\r\n          ) : practice === \"Breath & Stillness\" ? (\r\n            <div className=\"flex flex-col items-center justify-center\" style={{ overflow: 'visible' }}>\r\n              <BreathingRing\r\n                breathPattern={breathingPatternForRing}\r\n                onTap={handleAccuracyTap}\r\n                onCycleComplete={() => setBreathCount(prev => prev + 1)}\r\n                startTime={sessionStartTime}\r\n                pathId={showCore ? null : avatarPath}\r\n                fxPreset={currentFxPreset}\r\n              />\r\n              {showFxGallery && (\r\n                <div\r\n                  className=\"flex items-center gap-3 mt-4 px-4 py-2 rounded-full\"\r\n                  style={{\r\n                    background: isLight ? 'var(--light-bg-surface)' : 'rgba(0,0,0,0.5)',\r\n                    border: isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-20)',\r\n                  }}\r\n                >\r\n                  <button\r\n                    onClick={handlePrevFx}\r\n                    className={`${isLight ? 'text-[#5A4D3C]/60 hover:text-[#3D3425]' : 'text-white/60 hover:text-white'} transition-colors px-2 py-1`}\r\n                    style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '16px' }}\r\n                  >\r\n                    ΓùÇ\r\n                  </button>\r\n                  <div\r\n                    className=\"text-center min-w-[200px]\"\r\n                    style={{\r\n                      fontFamily: 'var(--font-display)',\r\n                      fontSize: '11px',\r\n                      fontWeight: 600,\r\n                      letterSpacing: 'var(--tracking-wide)',\r\n                      color: 'var(--accent-color)',\r\n                    }}\r\n                  >\r\n                    <div style={{ color: 'var(--text-muted)', fontSize: '8px', marginBottom: '2px' }}>\r\n                      {currentFxPreset?.category}\r\n                    </div>\r\n                    <div>{currentFxPreset?.name}</div>\r\n                    <div style={{ color: 'var(--text-muted)', fontSize: '8px', marginTop: '2px' }}>\r\n                      {currentFxIndex + 1} / {ringFXPresets.length}\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    onClick={handleNextFx}\r\n                    className={`${isLight ? 'text-[#5A4D3C]/60 hover:text-[#3D3425]' : 'text-white/60 hover:text-white'} transition-colors px-2 py-1`}\r\n                    style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '16px' }}\r\n                  >\r\n                    Γû╢\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : practice === \"Somatic Vipassana\" ? (\r\n            <SensorySession\r\n              sensoryType={sensoryType}\r\n              duration={duration}\r\n              onStop={handleExerciseComplete}\r\n              onTimeUpdate={(remaining) => setTimeLeft(remaining)}\r\n              isLight={isLight}\r\n            />\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center animate-fade-in-up\">\r\n              <div\r\n                className=\"text-2xl mb-4 text-center\"\r\n                style={{\r\n                  fontFamily: \"var(--font-display)\",\r\n                  fontWeight: 600,\r\n                  letterSpacing: \"var(--tracking-mythic)\",\r\n                  color: \"var(--accent-color)\",\r\n                  textShadow: \"0 0 20px var(--accent-30)\"\r\n                }}\r\n              >\r\n                {soundType}\r\n              </div>\r\n              <div className=\"w-32 h-32 rounded-full border border-[var(--accent-20)] flex items-center justify-center relative\">\r\n                <div className=\"absolute inset-0 rounded-full animate-pulse opacity-20 bg-[var(--accent-color)] blur-xl\"></div>\r\n                <div className=\"text-4xl opacity-80\">Γ£ª</div>\r\n              </div>\r\n\r\n              <div className=\"mt-6 w-64\">\r\n                <div\r\n                  className=\"mb-2 flex items-center justify-between\"\r\n                  style={{\r\n                    fontFamily: \"var(--font-body)\",\r\n                    fontSize: \"8px\",\r\n                    fontWeight: 600,\r\n                    letterSpacing: \"var(--tracking-wide)\",\r\n                    textTransform: \"uppercase\",\r\n                    color: \"var(--text-muted)\",\r\n                  }}\r\n                >\r\n                  <span>Volume</span>\r\n                  <span style={{ color: 'var(--accent-color)' }}>{Math.round(soundVolume * 100)}%</span>\r\n                </div>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"1\"\r\n                  step=\"0.05\"\r\n                  value={soundVolume}\r\n                  onChange={(e) => setSoundVolume(Number(e.target.value))}\r\n                  className=\"w-full sound-volume-slider\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex flex-col items-center z-50\">\r\n          <div className=\"h-6 mb-3 flex items-center justify-center\">\r\n            {lastSignedErrorMs !== null && practice === \"Breath & Stillness\" && (\r\n              <div\r\n                key={lastSignedErrorMs}\r\n                className=\"text-[11px] font-medium tracking-[0.15em] uppercase animate-fade-in-up\"\r\n                style={{\r\n                  fontFamily: \"var(--font-display)\",\r\n                  fontWeight: 600,\r\n                  letterSpacing: \"var(--tracking-wide)\",\r\n                  color: feedbackColor,\r\n                  textShadow: feedbackShadow\r\n                }}\r\n              >\r\n                {feedbackText}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleStop}\r\n            className=\"rounded-full px-7 py-2.5 transition-all duration-200 hover:-translate-y-0.5 min-w-[200px] relative overflow-hidden\"\r\n            style={{\r\n              fontFamily: \"var(--font-display)\",\r\n              fontSize: \"11px\",\r\n              letterSpacing: \"var(--tracking-mythic)\",\r\n              textTransform: \"uppercase\",\r\n              fontWeight: 600,\r\n              background: buttonBg,\r\n              color: \"#050508\",\r\n              boxShadow: radialGlow\r\n                ? `${radialGlow}, ${buttonShadow}, inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)`\r\n                : `0 0 24px var(--accent-30), ${buttonShadow}, inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)`,\r\n              borderRadius: \"999px\",\r\n            }}\r\n            onMouseDown={(e) => e.currentTarget.style.transform = 'scale(0.97)'}\r\n            onMouseUp={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n            onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n          >\r\n            <span style={{ position: 'relative', zIndex: 2 }}>Stop</span>\r\n            <div\r\n              className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n              style={{\r\n                background: 'radial-gradient(ellipse at 40% 30%, rgba(255,255,255,0.12) 0%, transparent 60%)',\r\n                mixBlendMode: 'soft-light',\r\n                zIndex: 1,\r\n              }}\r\n            />\r\n            <div\r\n              className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n              style={{\r\n                background: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E\")`,\r\n                opacity: 0.06,\r\n                mixBlendMode: 'overlay',\r\n                zIndex: 1,\r\n              }}\r\n            />\r\n          </button>\r\n\r\n          <div\r\n            className=\"mt-5\"\r\n            style={{\r\n              fontFamily: \"var(--font-display)\",\r\n              fontSize: \"12px\",\r\n              fontWeight: 600,\r\n              letterSpacing: \"var(--tracking-mythic)\",\r\n              textTransform: \"uppercase\",\r\n              color: \"var(--text-primary)\",\r\n            }}\r\n          >\r\n            {formatTime(timeLeft)}\r\n          </div>\r\n\r\n          {breathCount > 0 && practice === \"Breath & Stillness\" && (\r\n            <div\r\n              className=\"mt-2\"\r\n              style={{\r\n                fontFamily: \"var(--font-body)\",\r\n                fontSize: \"9px\",\r\n                fontWeight: 600,\r\n                letterSpacing: \"var(--tracking-wide)\",\r\n                textTransform: \"uppercase\",\r\n                color: 'var(--accent-50)',\r\n              }}\r\n            >\r\n              Breath {breathCount}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <style>{`\r\n          @keyframes fade-in-up {\r\n            0% { opacity: 0; transform: translateY(5px); }\r\n            100% { opacity: 1; transform: translateY(0); }\r\n          }\r\n          .animate-fade-in-up {\r\n            animation: fade-in-up 0.2s ease-out forwards;\r\n          }\r\n          .sound-volume-slider::-webkit-slider-thumb {\r\n            appearance: none;\r\n            width: 16px;\r\n            height: 16px;\r\n            border-radius: 50%;\r\n            background: var(--accent-color);\r\n            cursor: pointer;\r\n            box-shadow: 0 0 8px var(--accent-50);\r\n          }\r\n          .sound-volume-slider::-webkit-slider-runnable-track {\r\n            height: 4px;\r\n            border-radius: 2px;\r\n            background: rgba(255, 255, 255, 0.2);\r\n          }\r\n          .sound-volume-slider::-moz-range-thumb {\r\n            width: 16px;\r\n            height: 16px;\r\n            border-radius: 50%;\r\n            background: var(--accent-color);\r\n            cursor: pointer;\r\n            border: none;\r\n            box-shadow: 0 0 8px var(--accent-50);\r\n          }\r\n          .sound-volume-slider::-moz-range-track {\r\n            background: transparent;\r\n            border: none;\r\n          }\r\n        `}</style>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  // RENDER PRIORITY 2: Session Summary Modal\r\n  if (showSummary && sessionSummary) {\r\n    const { practiceTimeSlots } = useCurriculumStore.getState();\r\n    return (\r\n      <SessionSummaryModal\r\n        summary={sessionSummary}\r\n        practiceTimeSlots={practiceTimeSlots}\r\n        legNumber={sessionSummary.legNumber}\r\n        totalLegs={sessionSummary.totalLegs}\r\n        onContinue={() => {\r\n          setShowSummary(false);\r\n          if (pendingMicroNote) {\r\n            // Journal is already open\r\n          } else {\r\n            // Return to home or practice selection\r\n            setPractice(PRACTICES[0]);\r\n          }\r\n        }}\r\n        onStartNext={(practiceType) => {\r\n          setShowSummary(false);\r\n          setPractice(practiceType);\r\n          // Auto-start the next practice\r\n          setTimeout(() => handleStart(), 500);\r\n        }}\r\n        onFocusRating={handleFocusRating}\r\n      />\r\n    );\r\n  }\r\n\r\n  // RENDER PRIORITY 3: Practice Configuration/Selection View\r\n  // If there's an active curriculum session, show a \"Ready to Start\" screen instead of selection modal\r\n  if (activePracticeSession) {\r\n    const activeLeg = getActivePracticeLeg();\r\n\r\n    // Get display values with fallbacks\r\n    const displayPractice = activeLeg?.practiceType || practice || 'Breath & Stillness';\r\n    const displayDuration = activeLeg?.practiceConfig?.duration || duration || 5;\r\n\r\n    return (\r\n      <section className=\"w-full h-full flex flex-col items-center justify-center pb-24\">\r\n        <div\r\n          className=\"rounded-[32px] relative overflow-hidden\"\r\n          style={{\r\n            width: '460px',\r\n            ...(isLight ? getCardMaterial(true) : plateauMaterial),\r\n            border: isLight ? '1px solid var(--light-border, rgba(60,50,35,0.15))' : '1px solid var(--accent-20)',\r\n            boxShadow: isLight\r\n              ? '0 4px 24px rgba(60,50,35,0.12), inset 0 1px 0 rgba(255,255,255,0.8)'\r\n              : '0 12px 48px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.04)',\r\n          }}\r\n        >\r\n          <div className=\"absolute inset-0 pointer-events-none\" style={isLight ? getInnerGlowStyle(true) : innerGlowStyle} />\r\n\r\n          <div className=\"relative px-8 py-10 text-center\">\r\n            <div\r\n              style={{\r\n                fontSize: '48px',\r\n                marginBottom: '16px',\r\n                filter: 'drop-shadow(0 0 20px var(--accent-40))',\r\n              }}\r\n            >\r\n              Γ£ª\r\n            </div>\r\n\r\n            <div\r\n              style={{\r\n                fontFamily: 'var(--font-display)',\r\n                fontSize: '18px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                color: 'var(--text-primary)',\r\n                marginBottom: '8px',\r\n                textShadow: isLight ? 'none' : '0 0 10px var(--accent-30)',\r\n              }}\r\n            >\r\n              {displayPractice}\r\n            </div>\r\n\r\n            <div\r\n              style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '12px',\r\n                color: 'var(--text-muted)',\r\n                marginBottom: '24px',\r\n              }}\r\n            >\r\n              {displayDuration} minutes\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleStart}\r\n              disabled={isStarting || !practice}\r\n              className=\"px-8 py-3 rounded-full text-[11px] font-black uppercase tracking-wider transition-all hover:scale-105 disabled:opacity-50\"\r\n              style={{\r\n                background: 'var(--accent-color)',\r\n                color: '#fff',\r\n                boxShadow: '0 8px 20px var(--accent-30)',\r\n                fontFamily: 'var(--font-display)',\r\n              }}\r\n            >\r\n              {!practice ? 'Loading...' : isStarting ? 'Starting...' : 'Start Practice'}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => clearActivePracticeSession()}\r\n              className=\"mt-4 px-6 py-2 rounded-full text-[9px] uppercase tracking-wider transition-all hover:opacity-70\"\r\n              style={{\r\n                fontFamily: 'var(--font-display)',\r\n                color: 'var(--text-muted)',\r\n                border: '1px solid var(--accent-20)',\r\n              }}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  // Default: Free practice configuration with dedicated config panels\r\n  return (\r\n    <section className=\"w-full h-full flex flex-col items-center justify-center pb-24\">\r\n      <div\r\n        className=\"rounded-[32px] relative overflow-hidden\"\r\n        style={{\r\n          width: '580px',\r\n          ...(isLight ? getCardMaterial(true) : plateauMaterial),\r\n          border: isLight ? '2px solid var(--light-border)' : '2px solid var(--accent-20)',\r\n        }}\r\n      >\r\n        <div className=\"absolute inset-0 pointer-events-none\" style={isLight ? getInnerGlowStyle(true) : innerGlowStyle} />\r\n\r\n        <div className=\"relative px-8 py-8\">\r\n          {/* Practice Type Switcher - Horizontal pills */}\r\n          <div className=\"mb-6\">\r\n            <div className=\"flex flex-wrap gap-2 justify-center\">\r\n              {PRACTICES.map((p) => (\r\n                <button\r\n                  key={p}\r\n                  onClick={() => setPractice(p)}\r\n                  className=\"px-3 py-1.5 rounded-full transition-all duration-200\"\r\n                  style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontSize: '9px',\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    textTransform: 'uppercase',\r\n                    border: practice === p\r\n                      ? (isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-40)')\r\n                      : (isLight ? '1px solid rgba(160,120,60,0.2)' : '1px solid var(--accent-10)'),\r\n                    background: practice === p\r\n                      ? (isLight ? 'rgba(180,140,90,0.15)' : 'rgba(255,255,255,0.08)')\r\n                      : 'transparent',\r\n                    color: practice === p\r\n                      ? 'var(--accent-color)'\r\n                      : (isLight ? 'var(--light-muted)' : 'var(--text-muted)'),\r\n                    boxShadow: practice === p\r\n                      ? (isLight ? '0 0 8px rgba(180,140,90,0.2)' : '0 0 12px var(--accent-15)')\r\n                      : 'none',\r\n                  }}\r\n                >\r\n                  {p}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Dedicated Configuration Panels */}\r\n          <div className=\"mb-6\">\r\n            {practice === \"Breath & Stillness\" && (\r\n              <BreathConfig\r\n                pattern={pattern}\r\n                setPattern={setPattern}\r\n                preset={preset}\r\n                setPreset={setPreset}\r\n                isLight={isLight}\r\n              />\r\n            )}\r\n\r\n            {practice === \"Sound\" && (\r\n              <SoundConfig\r\n                soundType={soundType}\r\n                setSoundType={setSoundType}\r\n                binauralPreset={binauralPreset}\r\n                setBinauralPreset={setBinauralPreset}\r\n                isochronicPreset={isochronicPreset}\r\n                setIsochronicPreset={setIsochronicPreset}\r\n                mantraPreset={mantraPreset}\r\n                setMantraPreset={setMantraPreset}\r\n                naturePreset={naturePreset}\r\n                setNaturePreset={setNaturePreset}\r\n                carrierFrequency={carrierFrequency}\r\n                setCarrierFrequency={setCarrierFrequency}\r\n                volume={soundVolume}\r\n                setVolume={setSoundVolume}\r\n                isLight={isLight}\r\n              />\r\n            )}\r\n\r\n            {practice === \"Cymatics\" && (\r\n              <CymaticsConfig\r\n                frequencySet={frequencySet}\r\n                setFrequencySet={setFrequencySet}\r\n                selectedFrequency={selectedFrequency}\r\n                setSelectedFrequency={setSelectedFrequency}\r\n                fadeInDuration={fadeInDuration}\r\n                setFadeInDuration={setFadeInDuration}\r\n                displayDuration={displayDuration}\r\n                setDisplayDuration={setDisplayDuration}\r\n                fadeOutDuration={fadeOutDuration}\r\n                setFadeOutDuration={setFadeOutDuration}\r\n                voidDuration={voidDuration}\r\n                setVoidDuration={setVoidDuration}\r\n                driftEnabled={driftEnabled}\r\n                setDriftEnabled={setDriftEnabled}\r\n                audioEnabled={audioEnabled}\r\n                setAudioEnabled={setAudioEnabled}\r\n                isLight={isLight}\r\n              />\r\n            )}\r\n\r\n            {(practice === \"Somatic Vipassana\" || practice === \"Cognitive Vipassana\") && (\r\n              <SensoryConfig\r\n                sensoryType={sensoryType}\r\n                setSensoryType={setSensoryType}\r\n                isLight={isLight}\r\n              />\r\n            )}\r\n\r\n            {practice === \"Visualization\" && (\r\n              <VisualizationConfig\r\n                geometry={geometry}\r\n                setGeometry={setGeometry}\r\n                fadeInDuration={fadeInDuration}\r\n                setFadeInDuration={setFadeInDuration}\r\n                displayDuration={displayDuration}\r\n                setDisplayDuration={setDisplayDuration}\r\n                fadeOutDuration={fadeOutDuration}\r\n                setFadeOutDuration={setFadeOutDuration}\r\n                voidDuration={voidDuration}\r\n                setVoidDuration={setVoidDuration}\r\n                duration={duration}\r\n                setDuration={setDuration}\r\n                audioEnabled={audioEnabled}\r\n                setAudioEnabled={setAudioEnabled}\r\n                isLight={isLight}\r\n              />\r\n            )}\r\n\r\n            {practice === \"Circuit\" && (\r\n              <CircuitConfig\r\n                isLight={isLight}\r\n              />\r\n            )}\r\n\r\n            {practice === \"Ritual\" && (\r\n              <div\r\n                className=\"text-center py-4\"\r\n                style={{\r\n                  fontFamily: 'var(--font-body)',\r\n                  fontSize: '11px',\r\n                  color: isLight ? 'var(--light-muted)' : 'var(--text-muted)',\r\n                }}\r\n              >\r\n                Ritual practices are pre-configured sequences.\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Duration Selection */}\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div\r\n              style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '9px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                textTransform: 'uppercase',\r\n                color: isLight ? 'var(--light-muted)' : 'var(--text-muted)',\r\n                marginBottom: '12px',\r\n                textAlign: 'center',\r\n              }}\r\n            >\r\n              Duration (minutes)\r\n            </div>\r\n            <SacredTimeSlider\r\n              value={duration}\r\n              onChange={setDuration}\r\n              options={DURATIONS}\r\n            />\r\n          </div>\r\n\r\n          {/* Start Button */}\r\n          <button\r\n            onClick={handleStart}\r\n            disabled={isStarting || !practice}\r\n            className=\"w-full px-8 py-4 rounded-full transition-all duration-200 hover:scale-[1.02]\"\r\n            style={{\r\n              fontFamily: 'var(--font-display)',\r\n              fontSize: '12px',\r\n              fontWeight: 600,\r\n              letterSpacing: 'var(--tracking-mythic)',\r\n              textTransform: 'uppercase',\r\n              background: isStarting || !practice\r\n                ? (isLight ? 'rgba(60,50,35,0.2)' : 'rgba(255,255,255,0.1)')\r\n                : 'var(--accent-color)',\r\n              color: isStarting || !practice\r\n                ? (isLight ? 'rgba(60,50,35,0.4)' : 'rgba(255,255,255,0.3)')\r\n                : '#fff',\r\n              border: '1px solid transparent',\r\n              boxShadow: !isStarting && practice\r\n                ? '0 8px 20px var(--accent-30)'\r\n                : 'none',\r\n              cursor: isStarting || !practice ? 'not-allowed' : 'pointer',\r\n            }}\r\n          >\r\n            {!practice ? 'Select Practice' : isStarting ? 'Preparing...' : 'Begin Practice'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PracticeSection;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PracticeSection_GRAVEYARD.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getCategories' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":21,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"getCategories"},"fix":{"range":[1348,1363],"text":""},"desc":"Remove unused variable 'getCategories'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  52 |     const index = options.indexOf(value);\n  53 |     if (index !== -1) {\n> 54 |       setScrollOffset(index * itemHeight);\n     |       ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  55 |     }\n  56 |   }, [value, options, itemHeight]);\n  57 |","line":54,"column":7,"nodeType":null,"endLine":54,"endColumn":22},{"ruleId":"no-unused-vars","severity":2,"message":"'practiceModalOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":180,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"practiceModalOpen"},"fix":{"range":[7259,7276],"text":""},"desc":"Remove unused variable 'practiceModalOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setPracticeModalOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":180,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":180,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"setPracticeModalOpen"},"fix":{"range":[7276,7298],"text":""},"desc":"Remove unused variable 'setPracticeModalOpen'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'getActivePracticeDay' and 'handleStart'. Either include them or remove the dependency array.","line":245,"column":6,"nodeType":"ArrayExpression","endLine":245,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [activePracticeSession, getActivePracticeDay, handleStart]","fix":{"range":[9267,9290],"text":"[activePracticeSession, getActivePracticeDay, handleStart]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'chevronAngle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":247,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":247,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"chevronAngle"},"fix":{"range":[9305,9317],"text":""},"desc":"Remove unused variable 'chevronAngle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'haloPulse' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":248,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":248,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"haloPulse"},"fix":{"range":[9361,9370],"text":""},"desc":"Remove unused variable 'haloPulse'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setSoundType' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":254,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":254,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSoundType"},"fix":{"range":[9709,9723],"text":""},"desc":"Remove unused variable 'setSoundType'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setVipassanaTheme' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":255,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":255,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"setVipassanaTheme"},"fix":{"range":[9801,9820],"text":""},"desc":"Remove unused variable 'setVipassanaTheme'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setVipassanaElement' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":256,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":256,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setVipassanaElement"},"fix":{"range":[9887,9908],"text":""},"desc":"Remove unused variable 'setVipassanaElement'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'binauralPreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":261,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":261,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"binauralPreset"},"fix":{"range":[10132,10146],"text":""},"desc":"Remove unused variable 'binauralPreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setBinauralPreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":261,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":261,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"setBinauralPreset"},"fix":{"range":[10146,10165],"text":""},"desc":"Remove unused variable 'setBinauralPreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isochronicPreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":262,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":262,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"isochronicPreset"},"fix":{"range":[10210,10226],"text":""},"desc":"Remove unused variable 'isochronicPreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setIsochronicPreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":262,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":262,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setIsochronicPreset"},"fix":{"range":[10226,10247],"text":""},"desc":"Remove unused variable 'setIsochronicPreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'mantraPreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":263,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":263,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"mantraPreset"},"fix":{"range":[10294,10306],"text":""},"desc":"Remove unused variable 'mantraPreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setMantraPreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":263,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":263,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setMantraPreset"},"fix":{"range":[10306,10323],"text":""},"desc":"Remove unused variable 'setMantraPreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'naturePreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":264,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"naturePreset"},"fix":{"range":[10353,10365],"text":""},"desc":"Remove unused variable 'naturePreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setNaturePreset' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":264,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setNaturePreset"},"fix":{"range":[10365,10382],"text":""},"desc":"Remove unused variable 'setNaturePreset'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'carrierFrequency' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":265,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":265,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"carrierFrequency"},"fix":{"range":[10412,10428],"text":""},"desc":"Remove unused variable 'carrierFrequency'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setCarrierFrequency' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":265,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":265,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"setCarrierFrequency"},"fix":{"range":[10428,10449],"text":""},"desc":"Remove unused variable 'setCarrierFrequency'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier2Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":271,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":271,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier2Expanded"},"fix":{"range":[10646,10659],"text":""},"desc":"Remove unused variable 'tier2Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier2Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":271,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":271,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier2Expanded"},"fix":{"range":[10659,10677],"text":""},"desc":"Remove unused variable 'setTier2Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier3Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":272,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":272,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier3Expanded"},"fix":{"range":[10707,10720],"text":""},"desc":"Remove unused variable 'tier3Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier3Expanded' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":272,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":272,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier3Expanded"},"fix":{"range":[10720,10738],"text":""},"desc":"Remove unused variable 'setTier3Expanded'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'lastSessionId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":279,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":279,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastSessionId"},"fix":{"range":[10951,10964],"text":""},"desc":"Remove unused variable 'lastSessionId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier2Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":282,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier2Hovered"},"fix":{"range":[11081,11093],"text":""},"desc":"Remove unused variable 'tier2Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier2Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":282,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier2Hovered"},"fix":{"range":[11093,11110],"text":""},"desc":"Remove unused variable 'setTier2Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tier3Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":283,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":283,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"tier3Hovered"},"fix":{"range":[11141,11153],"text":""},"desc":"Remove unused variable 'tier3Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setTier3Hovered' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":283,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":283,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setTier3Hovered"},"fix":{"range":[11153,11170],"text":""},"desc":"Remove unused variable 'setTier3Hovered'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'circuitSavedPractice' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":288,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":288,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"circuitSavedPractice"},"fix":{"range":[11401,11421],"text":""},"desc":"Remove unused variable 'circuitSavedPractice'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'lastErrorMs' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":291,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":291,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastErrorMs"},"fix":{"range":[11529,11540],"text":""},"desc":"Remove unused variable 'lastErrorMs'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setGeometry' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":297,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"setGeometry"},"fix":{"range":[11788,11801],"text":""},"desc":"Remove unused variable 'setGeometry'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setFadeInDuration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":298,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":298,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"setFadeInDuration"},"fix":{"range":[11860,11879],"text":""},"desc":"Remove unused variable 'setFadeInDuration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setDisplayDuration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":299,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":299,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"setDisplayDuration"},"fix":{"range":[11923,11943],"text":""},"desc":"Remove unused variable 'setDisplayDuration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setFadeOutDuration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":300,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":300,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"setFadeOutDuration"},"fix":{"range":[11986,12006],"text":""},"desc":"Remove unused variable 'setFadeOutDuration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setVoidDuration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":301,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":301,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setVoidDuration"},"fix":{"range":[12047,12064],"text":""},"desc":"Remove unused variable 'setVoidDuration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setAudioEnabled' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":302,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":302,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setAudioEnabled"},"fix":{"range":[12104,12121],"text":""},"desc":"Remove unused variable 'setAudioEnabled'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'visualizationCycles' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":303,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":303,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"visualizationCycles"},"fix":{"range":[12151,12170],"text":""},"desc":"Remove unused variable 'visualizationCycles'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'frequencySet' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":305,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":305,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"frequencySet"},"fix":{"range":[12223,12235],"text":""},"desc":"Remove unused variable 'frequencySet'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setFrequencySet' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":305,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":305,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setFrequencySet"},"fix":{"range":[12235,12252],"text":""},"desc":"Remove unused variable 'setFrequencySet'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setSelectedFrequency' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":306,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":306,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSelectedFrequency"},"fix":{"range":[12306,12328],"text":""},"desc":"Remove unused variable 'setSelectedFrequency'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setDriftEnabled' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":307,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":307,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"setDriftEnabled"},"fix":{"range":[12382,12399],"text":""},"desc":"Remove unused variable 'setDriftEnabled'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handlePatternChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":468,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":468,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"handlePatternChange"},"fix":{"range":[17530,17705],"text":""},"desc":"Remove unused variable 'handlePatternChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'sessionPayload' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":528,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":528,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"sessionPayload"},"fix":{"range":[19490,19812],"text":""},"desc":"Remove unused variable 'sessionPayload'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleSelectRitual' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":768,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":768,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleSelectRitual"},"fix":{"range":[27733,28034],"text":""},"desc":"Remove unused variable 'handleSelectRitual'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleNextStep' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":777,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":777,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleNextStep"},"fix":{"range":[28040,28249],"text":""},"desc":"Remove unused variable 'handleNextStep'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'advanceCircuitExercise', 'circuitConfig', and 'handleStop'. Either include them or remove the dependency array.","line":829,"column":6,"nodeType":"ArrayExpression","endLine":829,"endColumn":54,"suggestions":[{"desc":"Update the dependencies array to be: [isRunning, timeLeft, practice, activeCircuitId, circuitConfig, advanceCircuitExercise, handleStop]","fix":{"range":[29421,29469],"text":"[isRunning, timeLeft, practice, activeCircuitId, circuitConfig, advanceCircuitExercise, handleStop]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'pathD' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":887,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":887,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"pathD"},"fix":{"range":[31147,31281],"text":""},"desc":"Remove unused variable 'pathD'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'primary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":903,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":903,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"primary"},"fix":{"range":[31488,31496],"text":""},"desc":"Remove unused variable 'primary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'secondary' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":903,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":903,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"secondary"},"fix":{"range":[31495,31506],"text":""},"desc":"Remove unused variable 'secondary'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'muted' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":903,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":903,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"muted"},"fix":{"range":[31506,31513],"text":""},"desc":"Remove unused variable 'muted'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'glow' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":903,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":903,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"glow"},"fix":{"range":[31513,31519],"text":""},"desc":"Remove unused variable 'glow'."}]}],"suppressedMessages":[],"errorCount":50,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from \"react\";\r\nimport { BreathingRing } from \"./BreathingRing.jsx\";\r\nimport { VisualizationCanvas } from \"./VisualizationCanvas.jsx\";\r\nimport { CymaticsVisualization } from \"./CymaticsVisualization.jsx\";\r\nimport { SensorySession } from \"./SensorySession.jsx\";\r\nimport { VipassanaVisual } from \"./vipassana/VipassanaVisual.jsx\";\r\nimport { VipassanaVariantSelector } from \"./vipassana/VipassanaVariantSelector.jsx\";\r\nimport { RitualPortal } from \"./RitualPortal.jsx\";\r\nimport { CircuitConfig } from \"./Cycle/CircuitConfig.jsx\";\r\nimport { useTheme } from \"../context/ThemeContext.jsx\";\r\nimport { VIPASSANA_THEMES } from \"../data/vipassanaThemes.js\";\r\nimport { SoundConfig, BINAURAL_PRESETS, ISOCHRONIC_PRESETS, SOUND_TYPES } from \"./SoundConfig.jsx\";\r\nimport { BreathConfig, BREATH_PRESETS } from \"./BreathConfig.jsx\";\r\nimport { SensoryConfig, SENSORY_TYPES } from \"./SensoryConfig.jsx\";\r\nimport { VisualizationConfig } from \"./VisualizationConfig.jsx\";\r\nimport { CymaticsConfig } from \"./CymaticsConfig.jsx\";\r\nimport { SOLFEGGIO_SET } from \"../utils/frequencyLibrary.js\";\r\nimport { useProgressStore } from \"../state/progressStore.js\";\r\nimport { syncFromProgressStore } from \"../state/mandalaStore.js\";\r\nimport { loadPreferences, savePreferences } from \"../state/practiceStore.js\";\r\nimport { ringFXPresets, getCategories } from \"../data/ringFXPresets.js\";\r\nimport { useSessionInstrumentation } from \"../hooks/useSessionInstrumentation.js\";\r\nimport { logPractice } from '../services/cycleManager.js';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { logCircuitCompletion } from '../services/circuitManager.js';\r\nimport { PracticeSelectionModal } from \"./PracticeSelectionModal.jsx\";\r\nimport { SacredTimeSlider } from \"./SacredTimeSlider.jsx\";\r\nimport { PeripheralHalo } from \"./ui/PeripheralHalo.jsx\";\r\nimport { BreathPatternPreview } from \"./BreathPatternPreview.jsx\";\r\nimport { SessionSummaryModal } from \"./practice/SessionSummaryModal.jsx\";\r\nimport { plateauMaterial, innerGlowStyle, getCardMaterial, getInnerGlowStyle } from \"../styles/cardMaterial.js\";\r\nimport { useDisplayModeStore } from \"../state/displayModeStore.js\";\r\nimport { PostSessionJournal } from \"./PostSessionJournal.jsx\";\r\nimport { useJournalStore } from \"../state/journalStore.js\";\r\n\r\nconst DEV_FX_GALLERY_ENABLED = true;\r\n\r\nconst PRACTICES = [\"Breath & Stillness\", \"Ritual\", \"Circuit\", \"Cognitive Vipassana\", \"Somatic Vipassana\", \"Sound\", \"Visualization\", \"Cymatics\"];\r\nconst DURATIONS = [3, 5, 7, 10, 12, 15, 20, 25, 30, 40, 50, 60];\r\n\r\nfunction ScrollingWheel({ value, onChange, options, colorScheme = 'dark' }) {\r\n  const isLight = colorScheme === 'light';\r\n  const wheelRef = useRef(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startY, setStartY] = useState(0);\r\n  const [scrollOffset, setScrollOffset] = useState(0);\r\n\r\n  const itemHeight = 48;\r\n  const visibleItems = 3;\r\n\r\n  useEffect(() => {\r\n    const index = options.indexOf(value);\r\n    if (index !== -1) {\r\n      setScrollOffset(index * itemHeight);\r\n    }\r\n  }, [value, options, itemHeight]);\r\n\r\n  const handleMouseDown = (e) => {\r\n    setIsDragging(true);\r\n    setStartY(e.clientY);\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDragging) return;\r\n    const deltaY = startY - e.clientY;\r\n    const newOffset = Math.max(0, Math.min(scrollOffset + deltaY, (options.length - 1) * itemHeight));\r\n    setScrollOffset(newOffset);\r\n    setStartY(e.clientY);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    if (!isDragging) return;\r\n    setIsDragging(false);\r\n\r\n    const nearestIndex = Math.round(scrollOffset / itemHeight);\r\n    const snappedOffset = nearestIndex * itemHeight;\r\n    setScrollOffset(snappedOffset);\r\n    onChange(options[nearestIndex]);\r\n  };\r\n\r\n  const handleWheel = (e) => {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? itemHeight : -itemHeight;\r\n    const newOffset = Math.max(0, Math.min(scrollOffset + delta, (options.length - 1) * itemHeight));\r\n    setScrollOffset(newOffset);\r\n\r\n    const nearestIndex = Math.round(newOffset / itemHeight);\r\n    setScrollOffset(nearestIndex * itemHeight);\r\n    onChange(options[nearestIndex]);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={wheelRef}\r\n      className=\"relative overflow-hidden select-none\"\r\n      style={{\r\n        height: `${itemHeight * visibleItems}px`,\r\n        width: \"120px\",\r\n      }}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n      onMouseLeave={handleMouseUp}\r\n      onWheel={handleWheel}\r\n    >\r\n      <div\r\n        className=\"absolute top-0 left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          height: `${itemHeight}px`,\r\n          background: isLight\r\n            ? \"linear-gradient(180deg, var(--light-bg-surface) 0%, transparent 100%)\"\r\n            : \"linear-gradient(180deg, rgba(15,15,26,1) 0%, transparent 100%)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute bottom-0 left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          height: `${itemHeight}px`,\r\n          background: isLight\r\n            ? \"linear-gradient(0deg, var(--light-bg-surface) 0%, transparent 100%)\"\r\n            : \"linear-gradient(0deg, rgba(15,15,26,1) 0%, transparent 100%)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          top: `${itemHeight}px`,\r\n          height: `${itemHeight}px`,\r\n          border: \"1px solid var(--accent-20)\",\r\n          borderRadius: \"8px\",\r\n          background: \"rgba(255,255,255,0.02)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute w-full transition-transform duration-200\"\r\n        style={{\r\n          transform: `translateY(${itemHeight - scrollOffset}px)`,\r\n          cursor: isDragging ? 'grabbing' : 'grab'\r\n        }}\r\n      >\r\n        {options.map((option, index) => {\r\n          const offset = Math.abs(index * itemHeight - scrollOffset);\r\n          const opacity = Math.max(0.2, 1 - offset / (itemHeight * 2));\r\n          const scale = Math.max(0.7, 1 - offset / (itemHeight * 3));\r\n\r\n          return (\r\n            <div\r\n              key={option}\r\n              className=\"flex items-center justify-center\"\r\n              style={{\r\n                fontSize: \"22px\",\r\n                fontWeight: 600,\r\n                letterSpacing: \"var(--tracking-wide)\",\r\n                color: \"var(--text-primary)\",\r\n                opacity,\r\n                transform: `scale(${scale})`,\r\n                transition: \"opacity 0.2s, transform 0.2s\"\r\n              }}\r\n            >\r\n              {option}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PracticeSection({ onPracticingChange, onBreathStateChange, avatarPath, showCore, showFxGallery = DEV_FX_GALLERY_ENABLED }) {\r\n  const instrumentation = useSessionInstrumentation();\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n  const savedPrefs = loadPreferences();\r\n\r\n  // FIX: Guard practice initialization with fallback to first practice\r\n  const [practice, setPractice] = useState(savedPrefs.practice || PRACTICES[0]);\r\n  const [practiceModalOpen, setPracticeModalOpen] = useState(false);\r\n\r\n  // CURRICULUM INTEGRATION\r\n  const {\r\n    getActivePracticeDay,\r\n    activePracticeSession,\r\n    clearActivePracticeSession,\r\n  } = useCurriculumStore();\r\n\r\n  // Load curriculum day settings when active session changes\r\n  useEffect(() => {\r\n    if (!activePracticeSession) return;\r\n\r\n    const curriculumDay = getActivePracticeDay();\r\n\r\n    if (curriculumDay) {\r\n      // Extract practice info from first leg\r\n      const firstLeg = curriculumDay.legs?.[0];\r\n\r\n      if (firstLeg) {\r\n        setPractice(firstLeg.practiceType);\r\n\r\n        if (firstLeg.duration) {\r\n          setDuration(firstLeg.duration);\r\n          setTimeLeft(firstLeg.duration * 60);\r\n        }\r\n\r\n        // If there's a preset specified, set it\r\n        if (firstLeg.preset) {\r\n          setPreset(firstLeg.preset);\r\n        }\r\n      }\r\n\r\n      // Handle circuit mode if curriculum has multiple legs\r\n      if (curriculumDay.legs?.length > 1) {\r\n        const exercises = curriculumDay.legs.map(leg => ({\r\n          exercise: {\r\n            id: leg.id,\r\n            name: leg.name || leg.practiceType,\r\n            type: leg.type || 'practice',\r\n            practiceType: leg.practiceType,\r\n            preset: leg.preset,\r\n            sensoryType: leg.sensoryType,\r\n          },\r\n          duration: leg.duration,\r\n        }));\r\n        const totalDuration = curriculumDay.legs.reduce((sum, leg) => sum + leg.duration, 0);\r\n\r\n        setCircuitConfig({\r\n          exercises,\r\n          exerciseDuration: totalDuration,\r\n        });\r\n        setActiveCircuitId('curriculum');\r\n        setPractice('Circuit');\r\n        setDuration(totalDuration);\r\n        setTimeLeft(totalDuration * 60);\r\n      }\r\n\r\n      // Auto-start the practice after a brief delay (skip configuration screen)\r\n      setTimeout(() => {\r\n        handleStart();\r\n      }, 800);\r\n    } else {\r\n      console.warn('[useEffect] No curriculum day found for session:', activePracticeSession);\r\n    }\r\n  }, [activePracticeSession]);\r\n\r\n  const [chevronAngle, setChevronAngle] = useState(0);\r\n  const [haloPulse, setHaloPulse] = useState(0);\r\n  const [duration, setDuration] = useState(savedPrefs.duration);\r\n  const [preset, setPreset] = useState(savedPrefs.preset);\r\n  const [pattern, setPattern] = useState(savedPrefs.pattern);\r\n\r\n  const [sensoryType, setSensoryType] = useState(savedPrefs.sensoryType || SENSORY_TYPES[0].id);\r\n  const [soundType, setSoundType] = useState(savedPrefs.soundType || SOUND_TYPES[0]);\r\n  const [vipassanaTheme, setVipassanaTheme] = useState(savedPrefs.vipassanaTheme);\r\n  const [vipassanaElement, setVipassanaElement] = useState(savedPrefs.vipassanaElement);\r\n\r\n  const [vipassanaVariant, setVipassanaVariant] = useState('thought-labeling');\r\n  const [showVipassanaVariantModal, setShowVipassanaVariantModal] = useState(false);\r\n\r\n  const [binauralPreset, setBinauralPreset] = useState(BINAURAL_PRESETS[2]);\r\n  const [isochronicPreset, setIsochronicPreset] = useState(ISOCHRONIC_PRESETS[1]);\r\n  const [mantraPreset, setMantraPreset] = useState(null);\r\n  const [naturePreset, setNaturePreset] = useState(null);\r\n  const [carrierFrequency, setCarrierFrequency] = useState(200);\r\n  const [soundVolume, setSoundVolume] = useState(0.5);\r\n\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(10 * 60);\r\n\r\n  const [tier2Expanded, setTier2Expanded] = useState(true);\r\n  const [tier3Expanded, setTier3Expanded] = useState(true);\r\n\r\n  const [isStarting, setIsStarting] = useState(false);\r\n\r\n  const [showSummary, setShowSummary] = useState(false);\r\n  const [sessionSummary, setSessionSummary] = useState(null);\r\n\r\n  const [lastSessionId, setLastSessionId] = useState(null);\r\n  const { startMicroNote, pendingMicroNote } = useJournalStore();\r\n\r\n  const [tier2Hovered, setTier2Hovered] = useState(false);\r\n  const [tier3Hovered, setTier3Hovered] = useState(false);\r\n\r\n  const [activeCircuitId, setActiveCircuitId] = useState(null);\r\n  const [circuitConfig, setCircuitConfig] = useState(null);\r\n  const [circuitExerciseIndex, setCircuitExerciseIndex] = useState(0);\r\n  const [circuitSavedPractice, setCircuitSavedPractice] = useState(null);\r\n\r\n  const [tapErrors, setTapErrors] = useState([]);\r\n  const [lastErrorMs, setLastErrorMs] = useState(null);\r\n  const [lastSignedErrorMs, setLastSignedErrorMs] = useState(null);\r\n\r\n  const [breathCount, setBreathCount] = useState(0);\r\n  const [sessionStartTime, setSessionStartTime] = useState(null);\r\n\r\n  const [geometry, setGeometry] = useState(savedPrefs.geometry);\r\n  const [fadeInDuration, setFadeInDuration] = useState(2.5);\r\n  const [displayDuration, setDisplayDuration] = useState(10);\r\n  const [fadeOutDuration, setFadeOutDuration] = useState(2.5);\r\n  const [voidDuration, setVoidDuration] = useState(10);\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  const [visualizationCycles, setVisualizationCycles] = useState(0);\r\n\r\n  const [frequencySet, setFrequencySet] = useState('solfeggio');\r\n  const [selectedFrequency, setSelectedFrequency] = useState(SOLFEGGIO_SET[4]);\r\n  const [driftEnabled, setDriftEnabled] = useState(false);\r\n\r\n  const [activeRitual, setActiveRitual] = useState(null);\r\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\r\n\r\n  const [currentFxIndex, setCurrentFxIndex] = useState(0);\r\n  const currentFxPreset = showFxGallery ? ringFXPresets[currentFxIndex] : null;\r\n\r\n  const handlePrevFx = () => {\r\n    setCurrentFxIndex(prev => (prev - 1 + ringFXPresets.length) % ringFXPresets.length);\r\n  };\r\n\r\n  const handleNextFx = () => {\r\n    setCurrentFxIndex(prev => (prev + 1) % ringFXPresets.length);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isRunning) {\r\n      setTimeLeft(duration * 60);\r\n    }\r\n  }, [duration, isRunning]);\r\n\r\n  useEffect(() => {\r\n    let animationId;\r\n    const startTime = Date.now();\r\n\r\n    const animate = () => {\r\n      const elapsed = Date.now() - startTime;\r\n\r\n      const chevronPhase = (elapsed % 3000) / 3000;\r\n      const angle = Math.sin(chevronPhase * Math.PI * 2) * 8;\r\n      setChevronAngle(angle);\r\n\r\n      const haloPhase = (elapsed % 5000) / 5000;\r\n      const pulse = (Math.sin(haloPhase * Math.PI * 2) + 1) / 2;\r\n      setHaloPulse(pulse);\r\n\r\n      animationId = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animationId = requestAnimationFrame(animate);\r\n    return () => cancelAnimationFrame(animationId);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (preset && BREATH_PRESETS[preset]) {\r\n      setPattern(BREATH_PRESETS[preset]);\r\n    }\r\n  }, [preset]);\r\n\r\n  useEffect(() => {\r\n    if (practice === \"Circuit\" && !circuitConfig) {\r\n      const defaultExercises = [\r\n        { exercise: { id: 'breath', name: 'Breath Training', type: 'breath', practiceType: 'Breath & Stillness', preset: 'box' }, duration: 5 },\r\n        { exercise: { id: 'cognitive', name: 'Cognitive Vipassana', type: 'focus', practiceType: 'Cognitive Vipassana' }, duration: 5 },\r\n        { exercise: { id: 'somatic', name: 'Somatic Vipassana', type: 'body', practiceType: 'Somatic Vipassana', sensoryType: 'body' }, duration: 5 },\r\n      ];\r\n      setCircuitConfig({ exercises: defaultExercises, exerciseDuration: 5 });\r\n    }\r\n  }, [practice, circuitConfig]);\r\n\r\n  const setupCircuitExercise = (exerciseItem) => {\r\n    const { exercise, duration: exDuration } = exerciseItem;\r\n\r\n    if (exercise.practiceType === 'Breath & Stillness') {\r\n      setPractice('Breath & Stillness');\r\n      if (exercise.preset) {\r\n        const presetKey = Object.keys(BREATH_PRESETS).find(\r\n          k => k.toLowerCase() === exercise.preset.toLowerCase()\r\n        );\r\n        if (presetKey && BREATH_PRESETS[presetKey]) {\r\n          setPattern(BREATH_PRESETS[presetKey]);\r\n          setPreset(presetKey);\r\n        }\r\n      }\r\n    } else if (exercise.practiceType === 'Cognitive Vipassana') {\r\n      setPractice('Cognitive Vipassana');\r\n    } else if (exercise.practiceType === 'Somatic Vipassana') {\r\n      setPractice('Somatic Vipassana');\r\n      if (exercise.sensoryType) {\r\n        setSensoryType(exercise.sensoryType);\r\n      }\r\n    } else {\r\n      setPractice(exercise.practiceType || 'Breath & Stillness');\r\n    }\r\n\r\n    setDuration(exDuration);\r\n    setTimeLeft(exDuration * 60);\r\n\r\n    setIsRunning(true);\r\n    onPracticingChange && onPracticingChange(true);\r\n    setSessionStartTime(performance.now());\r\n    setTapErrors([]);\r\n    setLastErrorMs(null);\r\n    setLastSignedErrorMs(null);\r\n    setBreathCount(0);\r\n  };\r\n\r\n  const handleExerciseComplete = () => {\r\n    if (activeCircuitId && circuitConfig) {\r\n      advanceCircuitExercise();\r\n    } else {\r\n      handleStop();\r\n    }\r\n  };\r\n\r\n  const advanceCircuitExercise = () => {\r\n    if (!activeCircuitId || !circuitConfig) return;\r\n\r\n    const nextIndex = circuitExerciseIndex + 1;\r\n    if (nextIndex < circuitConfig.exercises.length) {\r\n      setCircuitExerciseIndex(nextIndex);\r\n      const nextExercise = circuitConfig.exercises[nextIndex];\r\n      setupCircuitExercise(nextExercise);\r\n    } else {\r\n      handleCircuitComplete();\r\n    }\r\n  };\r\n\r\n  const handleCircuitComplete = () => {\r\n    clearActivePracticeSession();\r\n    setIsRunning(false);\r\n    onPracticingChange && onPracticingChange(false);\r\n\r\n    logCircuitCompletion('custom', circuitConfig.exercises);\r\n\r\n    const totalDuration = circuitConfig.exercises.reduce((sum, e) => sum + e.duration, 0);\r\n\r\n    let recordedSession = null;\r\n    try {\r\n      recordedSession = useProgressStore.getState().recordSession({\r\n        domain: 'circuit-training',\r\n        duration: totalDuration,\r\n        metadata: {\r\n          circuitName: 'Custom Circuit',\r\n          exerciseCount: circuitConfig.exercises.length,\r\n          legacyImport: false\r\n        },\r\n      });\r\n    } catch (e) {\r\n      console.error(\"Failed to save circuit session:\", e);\r\n    }\r\n\r\n    setSessionSummary({\r\n      type: 'circuit',\r\n      circuitName: 'Custom Circuit',\r\n      exercisesCompleted: circuitConfig.exercises.length,\r\n      totalDuration: totalDuration,\r\n    });\r\n    setShowSummary(true);\r\n\r\n    if (recordedSession) {\r\n      setLastSessionId(recordedSession.id);\r\n      startMicroNote(recordedSession.id);\r\n    }\r\n\r\n    setActiveCircuitId(null);\r\n    setCircuitExerciseIndex(0);\r\n    setPractice('Circuit');\r\n  };\r\n\r\n  const handlePatternChange = (key, value) => {\r\n    setPattern((prev) => ({\r\n      ...prev,\r\n      [key]: Number.parseInt(value, 10) || 0,\r\n    }));\r\n    setPreset(null);\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const m = Math.floor(seconds / 60);\r\n    const s = seconds % 60;\r\n    return `${m}:${s.toString().padStart(2, \"0\")} `;\r\n  };\r\n\r\n  const handleStop = () => {\r\n    // Capture curriculum context BEFORE clearing\r\n    const savedActivePracticeSession = activePracticeSession;\r\n    const isCircuitSession = activeCircuitId && circuitConfig;\r\n\r\n    // If this is a circuit session, delegate to circuit handler\r\n    if (isCircuitSession) {\r\n      handleCircuitComplete();\r\n      return;\r\n    }\r\n    const wasFromCurriculum = savedActivePracticeSession;\r\n\r\n    // Now clear the session\r\n    clearActivePracticeSession();\r\n    setIsRunning(false);\r\n    onPracticingChange && onPracticingChange(false);\r\n    onBreathStateChange && onBreathStateChange(null);\r\n\r\n    const exitType = timeLeft <= 0 ? 'completed' : 'abandoned';\r\n    const instrumentationData = instrumentation.endSession(exitType);\r\n\r\n    const id =\r\n      typeof crypto !== \"undefined\" && crypto.randomUUID\r\n        ? crypto.randomUUID()\r\n        : String(Date.now());\r\n\r\n    const tapCount = tapErrors.length;\r\n    let avgErrorMs = null;\r\n    let bestErrorMs = null;\r\n\r\n    if (tapCount > 0) {\r\n      avgErrorMs = Math.round(\r\n        tapErrors.reduce((sum, v) => sum + Math.abs(v), 0) / tapCount\r\n      );\r\n      bestErrorMs = Math.round(\r\n        Math.min(...tapErrors.map(e => Math.abs(e)))\r\n      );\r\n    }\r\n\r\n    let subType = null;\r\n    if (practice === \"Somatic Vipassana\") subType = sensoryType;\r\n    if (practice === \"Sound\") subType = soundType;\r\n    if (practice === \"Visualization\") subType = geometry;\r\n    if (practice === \"Cymatics\") subType = `${selectedFrequency.hz} Hz - ${selectedFrequency.name} `;\r\n    if (practice === \"Ritual\") subType = activeRitual?.id;\r\n\r\n    const sessionPayload = {\r\n      id,\r\n      date: new Date().toISOString(),\r\n      type: practice.toLowerCase(),\r\n      subType,\r\n      durationMinutes: duration,\r\n      pattern: practice === \"Breath & Stillness\" ? { ...pattern } : null,\r\n      tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n    };\r\n\r\n    let recordedSession = null;\r\n    try {\r\n      let domain = 'breathwork';\r\n      const p = practice.toLowerCase();\r\n      if (p.includes('visual') || p.includes('cymatics')) domain = 'visualization';\r\n      else if (p === 'somatic vipassana') domain = sensoryType;\r\n      else if (p === 'ritual') domain = 'ritual';\r\n      else if (p === 'sound') domain = 'sound';\r\n\r\n      recordedSession = useProgressStore.getState().recordSession({\r\n        domain,\r\n        duration: duration,\r\n        metadata: {\r\n          subType,\r\n          pattern: practice === \"Breath & Stillness\" ? { ...pattern } : null,\r\n          tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n          ritualId: activeRitual?.id,\r\n          legacyImport: false\r\n        },\r\n        instrumentation: instrumentationData,\r\n      });\r\n\r\n      if (duration >= 10) {\r\n        const now = new Date();\r\n        const timeOfDay = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}`;\r\n\r\n        logPractice({\r\n          type: domain === 'breathwork' ? 'breath' : domain === 'visualization' ? 'focus' : 'body',\r\n          duration: duration,\r\n          timeOfDay: timeOfDay,\r\n        });\r\n      }\r\n\r\n      syncFromProgressStore();\r\n    } catch (e) {\r\n      console.error(\"Failed to save session:\", e);\r\n    }\r\n\r\n    setActiveRitual(null);\r\n    setCurrentStepIndex(0);\r\n\r\n    // Use instrumentation duration (in milliseconds) for accurate session length\r\n    const actualDurationSeconds = Math.floor(instrumentationData.duration_ms / 1000);\r\n    const shouldJournal = practice !== 'Ritual' && actualDurationSeconds >= 30;\r\n\r\n    // Reset timeLeft for next session\r\n    setTimeLeft(duration * 60);\r\n\r\n    // Log leg completion if from curriculum\r\n    let nextLegInfo = null;\r\n    let currentLegNumber = null;\r\n    let totalLegsForDay = null;\r\n    let dailyStatsInfo = null;\r\n\r\n    if (wasFromCurriculum && exitType === 'completed') {\r\n      const {\r\n        logLegCompletion,\r\n        getNextIncompleteLeg,\r\n        getDayLegsWithStatus,\r\n        getCurriculumDay,\r\n        practiceTimeSlots\r\n      } = useCurriculumStore.getState();\r\n      const curriculumDay = getActivePracticeDay();\r\n\r\n      if (curriculumDay) {\r\n        // Find which leg was just completed\r\n        const completedLegs = getDayLegsWithStatus(savedActivePracticeSession).filter(leg => leg.completed);\r\n        currentLegNumber = completedLegs.length + 1; // Next leg to complete\r\n        totalLegsForDay = curriculumDay.legs ? curriculumDay.legs.length : 1;\r\n\r\n        // Log this leg as complete\r\n        logLegCompletion(savedActivePracticeSession, currentLegNumber, {\r\n          duration: actualDurationSeconds / 60,\r\n          focusRating: null, // Will be collected in session summary\r\n          challenges: [],\r\n          notes: '',\r\n        });\r\n\r\n        // Get next incomplete leg for \"What's Next\" display\r\n        const nextLeg = getNextIncompleteLeg();\r\n        if (nextLeg) {\r\n          nextLegInfo = nextLeg.leg;\r\n        }\r\n\r\n        // If this is the last leg, calculate daily stats\r\n        if (!nextLeg || currentLegNumber === totalLegsForDay) {\r\n          const allLegsWithStatus = getDayLegsWithStatus(savedActivePracticeSession);\r\n          const totalMinutes = allLegsWithStatus.reduce((sum, leg) =>\r\n            sum + (leg.completion?.duration || 0), 0\r\n          );\r\n\r\n          // Calculate precision score from tap stats (if available)\r\n          let precisionScore = 'N/A';\r\n          if (avgErrorMs !== null) {\r\n            // Convert avg error to precision: < 50ms = 5*, < 100ms = 4*, etc.\r\n            if (avgErrorMs < 50) precisionScore = 'ΓÿàΓÿàΓÿàΓÿàΓÿà';\r\n            else if (avgErrorMs < 100) precisionScore = 'ΓÿàΓÿàΓÿàΓÿàΓÿå';\r\n            else if (avgErrorMs < 150) precisionScore = 'ΓÿàΓÿàΓÿàΓÿåΓÿå';\r\n            else if (avgErrorMs < 200) precisionScore = 'ΓÿàΓÿàΓÿåΓÿåΓÿå';\r\n            else precisionScore = 'ΓÿàΓÿåΓÿåΓÿåΓÿå';\r\n          }\r\n\r\n          // Get tomorrow's practice info\r\n          const tomorrowDay = getCurriculumDay(savedActivePracticeSession + 1);\r\n          const nextPracticeTime = tomorrowDay?.legs?.[0]?.time || practiceTimeSlots[0] || '06:00';\r\n          const nextPracticeType = tomorrowDay?.legs?.[0]?.practiceType || 'Breath & Stillness';\r\n\r\n          dailyStatsInfo = {\r\n            totalMinutes: Math.round(totalMinutes),\r\n            precisionScore,\r\n            nextPracticeTime,\r\n            nextPracticeType,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    // Show summary if session was long enough\r\n    if (shouldJournal) {\r\n      setSessionSummary({\r\n        practice,\r\n        duration,\r\n        tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n        breathCount,\r\n        exitType,\r\n        nextLeg: nextLegInfo,\r\n        curriculumDayNumber: wasFromCurriculum ? savedActivePracticeSession : null,\r\n        legNumber: currentLegNumber,\r\n        totalLegs: totalLegsForDay,\r\n        dailyStats: dailyStatsInfo,\r\n      });\r\n      setShowSummary(true);\r\n\r\n      if (recordedSession) {\r\n        setLastSessionId(recordedSession.id);\r\n        startMicroNote(recordedSession.id);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFocusRating = (rating) => {\r\n    // Update the leg completion with focus rating\r\n    if (sessionSummary?.curriculumDayNumber) {\r\n      const { logLegCompletion, getDayLegsWithStatus } = useCurriculumStore.getState();\r\n      const completedLegs = getDayLegsWithStatus(sessionSummary.curriculumDayNumber).filter(leg => leg.completed);\r\n      const currentLegNumber = completedLegs.length; // The one that was just marked complete\r\n\r\n      // Re-log with focus rating\r\n      logLegCompletion(sessionSummary.curriculumDayNumber, currentLegNumber, {\r\n        duration: sessionSummary.duration,\r\n        focusRating: rating,\r\n        challenges: [],\r\n        notes: '',\r\n      });\r\n    }\r\n  };\r\n\r\n  const executeStart = () => {\r\n    // FIX: Guard against null practice\r\n    if (!practice) {\r\n      console.error(\"Cannot start practice: practice is null or undefined\");\r\n      return;\r\n    }\r\n\r\n\r\n    savePreferences({\r\n      practice,\r\n      duration,\r\n      preset,\r\n      pattern,\r\n      sensoryType,\r\n      vipassanaTheme,\r\n      vipassanaElement,\r\n      soundType,\r\n      geometry,\r\n    });\r\n\r\n    if (practice === \"Circuit\") {\r\n      if (!circuitConfig || circuitConfig.exercises.length === 0) {\r\n        console.error('[executeStart] Circuit practice but no config');\r\n        return;\r\n      }\r\n      setCircuitSavedPractice(practice);\r\n      setActiveCircuitId('custom');\r\n      setCircuitExerciseIndex(0);\r\n\r\n      const firstExercise = circuitConfig.exercises[0];\r\n      setupCircuitExercise(firstExercise);\r\n      return;\r\n    }\r\n\r\n    if (practice === \"Cognitive Vipassana\") {\r\n      setShowVipassanaVariantModal(true);\r\n      // NOTE: After modal selection, the modal's onSelect will close itself\r\n      // We need to start the session AFTER the variant is selected\r\n      // So we don't set isRunning here - the modal callback should do it\r\n      return; // IMPORTANT: Return here to prevent auto-starting\r\n    }\r\n\r\n    setIsRunning(true);\r\n    onPracticingChange && onPracticingChange(true);\r\n    setSessionStartTime(performance.now());\r\n    setTapErrors([]);\r\n    setLastErrorMs(null);\r\n    setLastSignedErrorMs(null);\r\n    setBreathCount(0);\r\n\r\n    const p = practice.toLowerCase();\r\n    let domain = 'breathwork';\r\n    if (p.includes('visual') || p.includes('cymatics')) domain = 'visualization';\r\n    else if (p === 'sensory') domain = sensoryType;\r\n    else if (p === 'ritual') domain = 'ritual';\r\n    else if (p === 'sound') domain = 'sound';\r\n\r\n    instrumentation.startSession(\r\n      domain,\r\n      activeRitual?.category || null,\r\n      p === 'somatic vipassana' ? sensoryType : null\r\n    );\r\n  };\r\n\r\n  const handleStart = () => {\r\n    setIsStarting(true);\r\n\r\n    setTimeout(() => {\r\n      setIsStarting(false);\r\n      executeStart();\r\n    }, 1400);\r\n  };\r\n\r\n  const handleSelectRitual = (ritual) => {\r\n    setActiveRitual(ritual);\r\n    setCurrentStepIndex(0);\r\n    const totalSeconds = ritual.steps?.reduce((sum, s) => sum + (s.duration || 60), 0) || 600;\r\n    setDuration(Math.ceil(totalSeconds / 60));\r\n    setTimeLeft(totalSeconds);\r\n    handleStart();\r\n  };\r\n\r\n  const handleNextStep = () => {\r\n    if (!activeRitual) return;\r\n    const nextIndex = currentStepIndex + 1;\r\n    if (nextIndex < activeRitual.steps.length) {\r\n      setCurrentStepIndex(nextIndex);\r\n    }\r\n  };\r\n\r\n  const handleRitualComplete = () => {\r\n    handleStop();\r\n\r\n    // Navigate back to home after ritual completion\r\n    // (ritual doesn't show summary, so we reset to practice selection which shows home)\r\n    setTimeout(() => {\r\n      setPractice(PRACTICES[0]); // Reset to practice selection menu\r\n    }, 300);\r\n  };\r\n\r\n  const handleAccuracyTap = (errorMs) => {\r\n    if (!isRunning) return;\r\n\r\n    instrumentation.recordAliveSignal();\r\n\r\n    setLastErrorMs(Math.abs(errorMs));\r\n    setLastSignedErrorMs(errorMs);\r\n\r\n    setTapErrors(prev => {\r\n      const updated = [...prev, errorMs];\r\n      if (updated.length > 50) updated.shift();\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isRunning) return;\r\n    if (practice === \"Ritual\") return;\r\n\r\n    let interval = null;\r\n    if (timeLeft > 0) {\r\n      interval = setInterval(() => {\r\n        setTimeLeft((prev) => prev - 1);\r\n      }, 1000);\r\n    } else if (timeLeft === 0) {\r\n      if (activeCircuitId && circuitConfig) {\r\n        advanceCircuitExercise();\r\n      } else {\r\n        handleStop();\r\n      }\r\n    }\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, [isRunning, timeLeft, practice, activeCircuitId]);\r\n\r\n  useEffect(() => {\r\n    if (!onBreathStateChange) return;\r\n    if (!isRunning || practice !== \"Breath & Stillness\") {\r\n      onBreathStateChange(null);\r\n      return;\r\n    }\r\n    const total = pattern.inhale + pattern.hold1 + pattern.exhale + pattern.hold2;\r\n    if (!total) {\r\n      onBreathStateChange(null);\r\n      return;\r\n    }\r\n\r\n    const now = performance.now() / 1000;\r\n    const cyclePos = (now % total);\r\n\r\n    let phase = \"inhale\";\r\n    let phaseProgress = 0;\r\n\r\n    if (cyclePos < pattern.inhale) {\r\n      phase = \"inhale\";\r\n      phaseProgress = cyclePos / pattern.inhale;\r\n    } else if (cyclePos < pattern.inhale + pattern.hold1) {\r\n      phase = \"holdTop\";\r\n      phaseProgress =\r\n        (cyclePos - pattern.inhale) / Math.max(pattern.hold1, 0.0001);\r\n    } else if (\r\n      cyclePos <\r\n      pattern.inhale + pattern.hold1 + pattern.exhale\r\n    ) {\r\n      phase = \"exhale\";\r\n      phaseProgress =\r\n        (cyclePos - (pattern.inhale + pattern.hold1)) /\r\n        Math.max(pattern.exhale, 0.0001);\r\n    } else {\r\n      phase = \"holdBottom\";\r\n      phaseProgress =\r\n        (cyclePos -\r\n          (pattern.inhale + pattern.hold1 + pattern.exhale)) /\r\n        Math.max(pattern.hold2 || 1, 1);\r\n    }\r\n\r\n    onBreathStateChange({\r\n      phase,\r\n      phaseProgress,\r\n    });\r\n  }, [isRunning, practice, pattern, onBreathStateChange]);\r\n\r\n  const totalDuration =\r\n    pattern.inhale + pattern.hold1 + pattern.exhale + pattern.hold2 || 1;\r\n  const width = 100;\r\n  const height = 40;\r\n\r\n  const iW = (pattern.inhale / totalDuration) * width;\r\n  const h1W = (pattern.hold1 / totalDuration) * width;\r\n  const eW = (pattern.exhale / totalDuration) * width;\r\n\r\n  const pathD = `\r\n    M 0 ${height}\r\n    L ${iW} 0\r\n    L ${iW + h1W} 0\r\n    L ${iW + h1W + eW} ${height}\r\n    L ${width} ${height}\r\n`;\r\n\r\n  const breathingPatternForRing = {\r\n    inhale: pattern.inhale,\r\n    holdTop: pattern.hold1,\r\n    exhale: pattern.exhale,\r\n    holdBottom: pattern.hold2,\r\n  };\r\n\r\n  const theme = useTheme();\r\n  const { primary, secondary, muted, glow } = theme.accent;\r\n\r\n  // RENDER PRIORITY 1: Active Practice Session\r\n  if (isRunning) {\r\n    if (practice === \"Ritual\") {\r\n      return (\r\n        <section className=\"w-full h-full min-h-[600px] flex flex-col items-center justify-center overflow-visible pb-12\">\r\n          <RitualPortal\r\n            onComplete={handleRitualComplete}\r\n            onStop={handleStop}\r\n          />\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (practice === \"Cognitive Vipassana\") {\r\n      if (showVipassanaVariantModal) {\r\n        return (\r\n          <VipassanaVariantSelector\r\n            onSelect={(variant) => {\r\n              setVipassanaVariant(variant);\r\n              setShowVipassanaVariantModal(false);\r\n\r\n              // NOW start the session after variant is selected\r\n              setIsRunning(true);\r\n              onPracticingChange && onPracticingChange(true);\r\n              setSessionStartTime(performance.now());\r\n              setTapErrors([]);\r\n              setLastErrorMs(null);\r\n              setLastSignedErrorMs(null);\r\n              setBreathCount(0);\r\n\r\n              instrumentation.startSession(\r\n                'focus', // Cognitive Vipassana maps to focus domain\r\n                null,\r\n                null\r\n              );\r\n            }}\r\n            onCancel={() => {\r\n              setShowVipassanaVariantModal(false);\r\n              handleStop();\r\n            }}\r\n          />\r\n        );\r\n      }\r\n\r\n      return (\r\n        <section className=\"w-full h-full min-h-[600px] flex flex-col items-center justify-center overflow-visible pb-12\">\r\n          <div className=\"flex-1 flex items-center justify-center w-full relative\">\r\n            <VipassanaVisual\r\n              isActive={isRunning}\r\n              variant={vipassanaVariant}\r\n              wallpaperId={vipassanaTheme}\r\n              themeId={vipassanaElement}\r\n              durationSeconds={duration * 60}\r\n              stage={theme.stage || 'flame'}\r\n              onComplete={handleExerciseComplete}\r\n              onExit={activeCircuitId ? handleCircuitComplete : handleStop}\r\n              onCancel={handleStop}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-center z-50 mt-8\">\r\n            <button\r\n              onClick={handleStop}\r\n              className=\"rounded-full px-7 py-2.5 transition-all duration-200 hover:-translate-y-0.5 min-w-[200px] relative overflow-hidden\"\r\n              style={{\r\n                fontFamily: \"var(--font-display)\",\r\n                fontSize: \"11px\",\r\n                letterSpacing: \"var(--tracking-mythic)\",\r\n                textTransform: \"uppercase\",\r\n                fontWeight: 600,\r\n                background: 'linear-gradient(180deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)',\r\n                color: \"#050508\",\r\n                boxShadow: '0 0 24px var(--accent-30), inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)',\r\n                borderRadius: \"999px\",\r\n              }}\r\n            >\r\n              <span>Stop</span>\r\n            </button>\r\n            <div\r\n              className=\"mt-5\"\r\n              style={{\r\n                fontFamily: \"var(--font-display)\",\r\n                fontSize: \"12px\",\r\n                fontWeight: 600,\r\n                letterSpacing: \"var(--tracking-mythic)\",\r\n                textTransform: \"uppercase\",\r\n                color: \"var(--text-primary)\",\r\n              }}\r\n            >\r\n              {formatTime(timeLeft)}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    let buttonBg = 'linear-gradient(180deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)';\r\n    let radialGlow = '';\r\n    let buttonShadow = 'inset 0 1px 0 rgba(255,255,255,0.35)';\r\n\r\n    let feedbackColor = 'var(--accent-primary)';\r\n    let feedbackText = \"\";\r\n    let feedbackShadow = \"none\";\r\n\r\n    if (lastSignedErrorMs !== null && practice === \"Breath & Stillness\") {\r\n      const absError = Math.round(Math.abs(lastSignedErrorMs));\r\n\r\n      if (absError > 1000) {\r\n        feedbackColor = '#ef4444';\r\n        feedbackText = \"OUT OF BOUNDS\";\r\n        feedbackShadow = \"0 0 8px rgba(239, 68, 68, 0.5)\";\r\n        buttonBg = isLight ? 'linear-gradient(180deg, #9ca3af 0%, #6b7280 100%)' : 'linear-gradient(180deg, rgba(100,100,100,0.3) 0%, rgba(60,60,60,0.4) 100%)';\r\n        radialGlow = '';\r\n      } else if (absError <= 30) {\r\n        feedbackColor = isLight ? 'var(--text-primary)' : \"#f8fafc\";\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = isLight ? \"none\" : \"0 0 12px rgba(255,255,255,0.6)\";\r\n        buttonBg = isLight ? \"linear-gradient(180deg, var(--accent-color) 0%, var(--accent-secondary) 100%)\" : \"linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%)\";\r\n        radialGlow = isLight ? '0 0 40px var(--accent-30)' : '0 0 60px 15px rgba(255,255,255,0.5), 0 0 30px rgba(255,255,255,0.7)';\r\n      } else if (absError <= 100) {\r\n        feedbackColor = 'var(--accent-color)';\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = '0 0 10px var(--accent-50)';\r\n        buttonBg = 'linear-gradient(180deg, var(--accent-color) 0%, var(--accent-secondary) 100%)';\r\n        radialGlow = '0 0 50px 12px var(--accent-40), 0 0 25px var(--accent-60)';\r\n      } else if (absError <= 300) {\r\n        feedbackColor = '#d97706';\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = \"0 0 8px rgba(217, 119, 6, 0.4)\";\r\n        buttonBg = 'linear-gradient(180deg, #d97706 0%, #92400e 100%)';\r\n        radialGlow = '0 0 40px 10px rgba(217, 119, 6, 0.3), 0 0 20px rgba(217, 119, 6, 0.5)';\r\n      } else {\r\n        feedbackColor = isLight ? 'var(--text-muted)' : '#9ca3af';\r\n        feedbackText = `${absError}ms ${lastSignedErrorMs > 0 ? \"Late\" : \"Early\"} `;\r\n        feedbackShadow = \"0 0 6px rgba(156, 163, 175, 0.3)\";\r\n        buttonBg = 'linear-gradient(180deg, #9ca3af 0%, #6b7280 100%)';\r\n        radialGlow = '0 0 35px 8px rgba(156, 163, 175, 0.25), 0 0 18px rgba(156, 163, 175, 0.4)';\r\n      }\r\n    }\r\n\r\n    return (\r\n      <section className=\"w-full h-full min-h-[600px] flex flex-col items-center justify-center pb-12\">\r\n        {activeCircuitId && circuitConfig && (\r\n          <div\r\n            className=\"fixed top-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-2 px-4 py-2 rounded-full\"\r\n            style={{\r\n              background: isLight ? 'var(--light-bg-surface)' : 'rgba(0,0,0,0.7)',\r\n              border: isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-30)',\r\n              backdropFilter: 'blur(8px)',\r\n            }}\r\n          >\r\n            <span style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '10px', letterSpacing: 'var(--tracking-mythic)', color: 'var(--text-secondary)', textTransform: 'uppercase' }}>\r\n              Circuit\r\n            </span>\r\n            <div className=\"flex gap-1\">\r\n              {circuitConfig.exercises.map((_, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className=\"w-2 h-2 rounded-full transition-all duration-300\"\r\n                  style={{\r\n                    background: idx < circuitExerciseIndex ? 'var(--accent-color)'\r\n                      : idx === circuitExerciseIndex ? (isLight ? 'var(--text-primary)' : '#fff')\r\n                        : (isLight ? 'rgba(60,50,35,0.2)' : 'rgba(253,251,245,0.2)'),\r\n                    boxShadow: idx === circuitExerciseIndex ? (isLight ? '0 2px 8px rgba(60,50,35,0.2)' : '0 0 8px rgba(255,255,255,0.6)') : 'none',\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n            <span style={{ fontFamily: 'var(--font-body)', fontSize: '10px', color: 'var(--text-muted)' }}>\r\n              {circuitExerciseIndex + 1}/{circuitConfig.exercises.length}\r\n            </span>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex-1 flex items-center justify-center w-full\">\r\n          {practice === \"Visualization\" ? (\r\n            <VisualizationCanvas\r\n              geometry={geometry}\r\n              fadeInDuration={fadeInDuration}\r\n              displayDuration={displayDuration}\r\n              fadeOutDuration={fadeOutDuration}\r\n              voidDuration={voidDuration}\r\n              audioEnabled={audioEnabled}\r\n              onCycleComplete={(cycle) => setVisualizationCycles(cycle)}\r\n            />\r\n          ) : practice === \"Cymatics\" ? (\r\n            <CymaticsVisualization\r\n              frequency={selectedFrequency.hz}\r\n              n={selectedFrequency.n}\r\n              m={selectedFrequency.m}\r\n              fadeInDuration={fadeInDuration}\r\n              displayDuration={displayDuration}\r\n              fadeOutDuration={fadeOutDuration}\r\n              voidDuration={voidDuration}\r\n              driftEnabled={driftEnabled}\r\n              audioEnabled={audioEnabled}\r\n              onCycleComplete={(cycle) => setVisualizationCycles(cycle)}\r\n            />\r\n          ) : practice === \"Breath & Stillness\" ? (\r\n            <div className=\"flex flex-col items-center justify-center\" style={{ overflow: 'visible' }}>\r\n              <BreathingRing\r\n                breathPattern={breathingPatternForRing}\r\n                onTap={handleAccuracyTap}\r\n                onCycleComplete={() => setBreathCount(prev => prev + 1)}\r\n                startTime={sessionStartTime}\r\n                pathId={showCore ? null : avatarPath}\r\n                fxPreset={currentFxPreset}\r\n              />\r\n              {showFxGallery && (\r\n                <div\r\n                  className=\"flex items-center gap-3 mt-4 px-4 py-2 rounded-full\"\r\n                  style={{\r\n                    background: isLight ? 'var(--light-bg-surface)' : 'rgba(0,0,0,0.5)',\r\n                    border: isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-20)',\r\n                  }}\r\n                >\r\n                  <button\r\n                    onClick={handlePrevFx}\r\n                    className={`${isLight ? 'text-[#5A4D3C]/60 hover:text-[#3D3425]' : 'text-white/60 hover:text-white'} transition-colors px-2 py-1`}\r\n                    style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '16px' }}\r\n                  >\r\n                    ΓùÇ\r\n                  </button>\r\n                  <div\r\n                    className=\"text-center min-w-[200px]\"\r\n                    style={{\r\n                      fontFamily: 'var(--font-display)',\r\n                      fontSize: '11px',\r\n                      fontWeight: 600,\r\n                      letterSpacing: 'var(--tracking-wide)',\r\n                      color: 'var(--accent-color)',\r\n                    }}\r\n                  >\r\n                    <div style={{ color: 'var(--text-muted)', fontSize: '8px', marginBottom: '2px' }}>\r\n                      {currentFxPreset?.category}\r\n                    </div>\r\n                    <div>{currentFxPreset?.name}</div>\r\n                    <div style={{ color: 'var(--text-muted)', fontSize: '8px', marginTop: '2px' }}>\r\n                      {currentFxIndex + 1} / {ringFXPresets.length}\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    onClick={handleNextFx}\r\n                    className={`${isLight ? 'text-[#5A4D3C]/60 hover:text-[#3D3425]' : 'text-white/60 hover:text-white'} transition-colors px-2 py-1`}\r\n                    style={{ fontFamily: 'var(--font-display)', fontWeight: 600, fontSize: '16px' }}\r\n                  >\r\n                    Γû╢\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : practice === \"Somatic Vipassana\" ? (\r\n            <SensorySession\r\n              sensoryType={sensoryType}\r\n              duration={duration}\r\n              onStop={handleExerciseComplete}\r\n              onTimeUpdate={(remaining) => setTimeLeft(remaining)}\r\n              isLight={isLight}\r\n            />\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center animate-fade-in-up\">\r\n              <div\r\n                className=\"text-2xl mb-4 text-center\"\r\n                style={{\r\n                  fontFamily: \"var(--font-display)\",\r\n                  fontWeight: 600,\r\n                  letterSpacing: \"var(--tracking-mythic)\",\r\n                  color: \"var(--accent-color)\",\r\n                  textShadow: \"0 0 20px var(--accent-30)\"\r\n                }}\r\n              >\r\n                {soundType}\r\n              </div>\r\n              <div className=\"w-32 h-32 rounded-full border border-[var(--accent-20)] flex items-center justify-center relative\">\r\n                <div className=\"absolute inset-0 rounded-full animate-pulse opacity-20 bg-[var(--accent-color)] blur-xl\"></div>\r\n                <div className=\"text-4xl opacity-80\">Γ£ª</div>\r\n              </div>\r\n\r\n              <div className=\"mt-6 w-64\">\r\n                <div\r\n                  className=\"mb-2 flex items-center justify-between\"\r\n                  style={{\r\n                    fontFamily: \"var(--font-body)\",\r\n                    fontSize: \"8px\",\r\n                    fontWeight: 600,\r\n                    letterSpacing: \"var(--tracking-wide)\",\r\n                    textTransform: \"uppercase\",\r\n                    color: \"var(--text-muted)\",\r\n                  }}\r\n                >\r\n                  <span>Volume</span>\r\n                  <span style={{ color: 'var(--accent-color)' }}>{Math.round(soundVolume * 100)}%</span>\r\n                </div>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"1\"\r\n                  step=\"0.05\"\r\n                  value={soundVolume}\r\n                  onChange={(e) => setSoundVolume(Number(e.target.value))}\r\n                  className=\"w-full sound-volume-slider\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex flex-col items-center z-50\">\r\n          <div className=\"h-6 mb-3 flex items-center justify-center\">\r\n            {lastSignedErrorMs !== null && practice === \"Breath & Stillness\" && (\r\n              <div\r\n                key={lastSignedErrorMs}\r\n                className=\"text-[11px] font-medium tracking-[0.15em] uppercase animate-fade-in-up\"\r\n                style={{\r\n                  fontFamily: \"var(--font-display)\",\r\n                  fontWeight: 600,\r\n                  letterSpacing: \"var(--tracking-wide)\",\r\n                  color: feedbackColor,\r\n                  textShadow: feedbackShadow\r\n                }}\r\n              >\r\n                {feedbackText}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleStop}\r\n            className=\"rounded-full px-7 py-2.5 transition-all duration-200 hover:-translate-y-0.5 min-w-[200px] relative overflow-hidden\"\r\n            style={{\r\n              fontFamily: \"var(--font-display)\",\r\n              fontSize: \"11px\",\r\n              letterSpacing: \"var(--tracking-mythic)\",\r\n              textTransform: \"uppercase\",\r\n              fontWeight: 600,\r\n              background: buttonBg,\r\n              color: \"#050508\",\r\n              boxShadow: radialGlow\r\n                ? `${radialGlow}, ${buttonShadow}, inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)`\r\n                : `0 0 24px var(--accent-30), ${buttonShadow}, inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)`,\r\n              borderRadius: \"999px\",\r\n            }}\r\n            onMouseDown={(e) => e.currentTarget.style.transform = 'scale(0.97)'}\r\n            onMouseUp={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n            onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n          >\r\n            <span style={{ position: 'relative', zIndex: 2 }}>Stop</span>\r\n            <div\r\n              className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n              style={{\r\n                background: 'radial-gradient(ellipse at 40% 30%, rgba(255,255,255,0.12) 0%, transparent 60%)',\r\n                mixBlendMode: 'soft-light',\r\n                zIndex: 1,\r\n              }}\r\n            />\r\n            <div\r\n              className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n              style={{\r\n                background: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E\")`,\r\n                opacity: 0.06,\r\n                mixBlendMode: 'overlay',\r\n                zIndex: 1,\r\n              }}\r\n            />\r\n          </button>\r\n\r\n          <div\r\n            className=\"mt-5\"\r\n            style={{\r\n              fontFamily: \"var(--font-display)\",\r\n              fontSize: \"12px\",\r\n              fontWeight: 600,\r\n              letterSpacing: \"var(--tracking-mythic)\",\r\n              textTransform: \"uppercase\",\r\n              color: \"var(--text-primary)\",\r\n            }}\r\n          >\r\n            {formatTime(timeLeft)}\r\n          </div>\r\n\r\n          {breathCount > 0 && practice === \"Breath & Stillness\" && (\r\n            <div\r\n              className=\"mt-2\"\r\n              style={{\r\n                fontFamily: \"var(--font-body)\",\r\n                fontSize: \"9px\",\r\n                fontWeight: 600,\r\n                letterSpacing: \"var(--tracking-wide)\",\r\n                textTransform: \"uppercase\",\r\n                color: 'var(--accent-50)',\r\n              }}\r\n            >\r\n              Breath {breathCount}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <style>{`\r\n          @keyframes fade-in-up {\r\n            0% { opacity: 0; transform: translateY(5px); }\r\n            100% { opacity: 1; transform: translateY(0); }\r\n          }\r\n          .animate-fade-in-up {\r\n            animation: fade-in-up 0.2s ease-out forwards;\r\n          }\r\n          .sound-volume-slider::-webkit-slider-thumb {\r\n            appearance: none;\r\n            width: 16px;\r\n            height: 16px;\r\n            border-radius: 50%;\r\n            background: var(--accent-color);\r\n            cursor: pointer;\r\n            box-shadow: 0 0 8px var(--accent-50);\r\n          }\r\n          .sound-volume-slider::-webkit-slider-runnable-track {\r\n            height: 4px;\r\n            border-radius: 2px;\r\n            background: rgba(255, 255, 255, 0.2);\r\n          }\r\n          .sound-volume-slider::-moz-range-thumb {\r\n            width: 16px;\r\n            height: 16px;\r\n            border-radius: 50%;\r\n            background: var(--accent-color);\r\n            cursor: pointer;\r\n            border: none;\r\n            box-shadow: 0 0 8px var(--accent-50);\r\n          }\r\n          .sound-volume-slider::-moz-range-track {\r\n            background: transparent;\r\n            border: none;\r\n          }\r\n        `}</style>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  // RENDER PRIORITY 2: Session Summary Modal\r\n  if (showSummary && sessionSummary) {\r\n    const { practiceTimeSlots } = useCurriculumStore.getState();\r\n    return (\r\n      <SessionSummaryModal\r\n        summary={sessionSummary}\r\n        practiceTimeSlots={practiceTimeSlots}\r\n        legNumber={sessionSummary.legNumber}\r\n        totalLegs={sessionSummary.totalLegs}\r\n        onContinue={() => {\r\n          setShowSummary(false);\r\n          if (pendingMicroNote) {\r\n            // Journal is already open\r\n          } else {\r\n            // Return to home or practice selection\r\n            setPractice(PRACTICES[0]);\r\n          }\r\n        }}\r\n        onStartNext={(practiceType) => {\r\n          setShowSummary(false);\r\n          setPractice(practiceType);\r\n          // Auto-start the next practice\r\n          setTimeout(() => handleStart(), 500);\r\n        }}\r\n        onFocusRating={handleFocusRating}\r\n      />\r\n    );\r\n  }\r\n\r\n  // RENDER PRIORITY 3: Practice Configuration/Selection View\r\n  // If there's an active curriculum session, show a \"Ready to Start\" screen instead of selection modal\r\n  if (activePracticeSession) {\r\n    const curriculumDay = getActivePracticeDay();\r\n\r\n    // Get display values with fallbacks\r\n    const displayPractice = curriculumDay?.practiceType || practice || 'Breath & Stillness';\r\n    const displayDuration = curriculumDay?.duration || duration || 5;\r\n\r\n    return (\r\n      <section className=\"w-full h-full flex flex-col items-center justify-center pb-24\">\r\n        <div\r\n          className=\"rounded-[32px] relative overflow-hidden\"\r\n          style={{\r\n            width: '460px',\r\n            ...(isLight ? getCardMaterial(true) : plateauMaterial),\r\n            border: isLight ? '1px solid var(--light-border, rgba(60,50,35,0.15))' : '1px solid var(--accent-20)',\r\n            boxShadow: isLight\r\n              ? '0 4px 24px rgba(60,50,35,0.12), inset 0 1px 0 rgba(255,255,255,0.8)'\r\n              : '0 12px 48px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.04)',\r\n          }}\r\n        >\r\n          <div className=\"absolute inset-0 pointer-events-none\" style={isLight ? getInnerGlowStyle(true) : innerGlowStyle} />\r\n\r\n          <div className=\"relative px-8 py-10 text-center\">\r\n            <div\r\n              style={{\r\n                fontSize: '48px',\r\n                marginBottom: '16px',\r\n                filter: 'drop-shadow(0 0 20px var(--accent-40))',\r\n              }}\r\n            >\r\n              Γ£ª\r\n            </div>\r\n\r\n            <div\r\n              style={{\r\n                fontFamily: 'var(--font-display)',\r\n                fontSize: '18px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                color: 'var(--text-primary)',\r\n                marginBottom: '8px',\r\n                textShadow: isLight ? 'none' : '0 0 10px var(--accent-30)',\r\n              }}\r\n            >\r\n              {displayPractice}\r\n            </div>\r\n\r\n            <div\r\n              style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '12px',\r\n                color: 'var(--text-muted)',\r\n                marginBottom: '24px',\r\n              }}\r\n            >\r\n              {displayDuration} minutes\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleStart}\r\n              disabled={isStarting || !practice}\r\n              className=\"px-8 py-3 rounded-full text-[11px] font-black uppercase tracking-wider transition-all hover:scale-105 disabled:opacity-50\"\r\n              style={{\r\n                background: 'var(--accent-color)',\r\n                color: '#fff',\r\n                boxShadow: '0 8px 20px var(--accent-30)',\r\n                fontFamily: 'var(--font-display)',\r\n              }}\r\n            >\r\n              {!practice ? 'Loading...' : isStarting ? 'Starting...' : 'Start Practice'}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => clearActivePracticeSession()}\r\n              className=\"mt-4 px-6 py-2 rounded-full text-[9px] uppercase tracking-wider transition-all hover:opacity-70\"\r\n              style={{\r\n                fontFamily: 'var(--font-display)',\r\n                color: 'var(--text-muted)',\r\n                border: '1px solid var(--accent-20)',\r\n              }}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  // Default: Free practice configuration\r\n  return (\r\n    <section className=\"w-full h-full flex flex-col items-center justify-center pb-24\">\r\n      <div\r\n        className=\"rounded-[32px] relative overflow-hidden\"\r\n        style={{\r\n          width: '480px',\r\n          ...(isLight ? getCardMaterial(true) : plateauMaterial),\r\n          border: isLight ? '2px solid var(--light-border)' : '2px solid var(--accent-20)',\r\n        }}\r\n      >\r\n        <div className=\"absolute inset-0 pointer-events-none\" style={isLight ? getInnerGlowStyle(true) : innerGlowStyle} />\r\n\r\n        <div className=\"relative px-8 py-8\">\r\n          {/* Header */}\r\n          <div\r\n            style={{\r\n              fontFamily: 'var(--font-display)',\r\n              fontSize: '11px',\r\n              fontWeight: 600,\r\n              letterSpacing: 'var(--tracking-mythic)',\r\n              textTransform: 'uppercase',\r\n              color: isLight ? 'var(--light-muted)' : 'var(--text-muted)',\r\n              textAlign: 'center',\r\n              marginBottom: '24px',\r\n            }}\r\n          >\r\n            Configure Practice\r\n          </div>\r\n\r\n          {/* Practice Selection */}\r\n          <div style={{ marginBottom: '24px' }}>\r\n            <div\r\n              style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '9px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                textTransform: 'uppercase',\r\n                color: isLight ? 'var(--light-muted)' : 'var(--text-muted)',\r\n                marginBottom: '12px',\r\n              }}\r\n            >\r\n              Practice Type\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              {PRACTICES.map((p) => (\r\n                <button\r\n                  key={p}\r\n                  onClick={() => setPractice(p)}\r\n                  className=\"px-4 py-3 rounded-full transition-all duration-200\"\r\n                  style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontSize: '10px',\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    textTransform: 'uppercase',\r\n                    border: practice === p\r\n                      ? (isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-40)')\r\n                      : '1px solid transparent',\r\n                    background: practice === p\r\n                      ? (isLight ? 'rgba(60,50,35,0.08)' : 'rgba(255,255,255,0.08)')\r\n                      : (isLight ? 'rgba(60,50,35,0.03)' : 'rgba(0,0,0,0.2)'),\r\n                    color: practice === p\r\n                      ? 'var(--accent-color)'\r\n                      : (isLight ? 'var(--light-text)' : 'var(--text-primary)'),\r\n                  }}\r\n                >\r\n                  {p}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Duration Selection */}\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div\r\n              style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '9px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                textTransform: 'uppercase',\r\n                color: isLight ? 'var(--light-muted)' : 'var(--text-muted)',\r\n                marginBottom: '12px',\r\n              }}\r\n            >\r\n              Duration (minutes)\r\n            </div>\r\n            <SacredTimeSlider\r\n              value={duration}\r\n              onChange={setDuration}\r\n              options={DURATIONS}\r\n            />\r\n          </div>\r\n\r\n          {/* Start Button */}\r\n          <button\r\n            onClick={handleStart}\r\n            disabled={isStarting || !practice}\r\n            className=\"w-full px-8 py-4 rounded-full transition-all duration-200 hover:scale-[1.02]\"\r\n            style={{\r\n              fontFamily: 'var(--font-display)',\r\n              fontSize: '12px',\r\n              fontWeight: 600,\r\n              letterSpacing: 'var(--tracking-mythic)',\r\n              textTransform: 'uppercase',\r\n              background: isStarting || !practice\r\n                ? (isLight ? 'rgba(60,50,35,0.2)' : 'rgba(255,255,255,0.1)')\r\n                : 'var(--accent-color)',\r\n              color: isStarting || !practice\r\n                ? (isLight ? 'rgba(60,50,35,0.4)' : 'rgba(255,255,255,0.3)')\r\n                : '#fff',\r\n              border: '1px solid transparent',\r\n              boxShadow: !isStarting && practice\r\n                ? '0 8px 20px var(--accent-30)'\r\n                : 'none',\r\n              cursor: isStarting || !practice ? 'not-allowed' : 'pointer',\r\n            }}\r\n          >\r\n            {!practice ? 'Select Practice' : isStarting ? 'Preparing...' : 'Begin Practice'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PracticeSection;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PracticeSection_REPAIR.jsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: Unexpected token","line":841,"column":1}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PracticeSection.jsx\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { BreathingRing } from \"./BreathingRing.jsx\";\r\nimport { VisualizationCanvas } from \"./VisualizationCanvas.jsx\";\r\nimport { CymaticsVisualization } from \"./CymaticsVisualization.jsx\";\r\nimport { SensorySession } from \"./SensorySession.jsx\";\r\nimport { VipassanaVisual } from \"./vipassana/VipassanaVisual.jsx\";\r\nimport { VipassanaVariantSelector } from \"./vipassana/VipassanaVariantSelector.jsx\";\r\nimport { RitualPortal } from \"./RitualPortal.jsx\";\r\nimport { CircuitConfig } from \"./Cycle/CircuitConfig.jsx\";\r\nimport { useTheme } from \"../context/ThemeContext.jsx\";\r\nimport { VIPASSANA_THEMES } from \"../data/vipassanaThemes.js\";\r\nimport { SoundConfig, BINAURAL_PRESETS, ISOCHRONIC_PRESETS, SOUND_TYPES } from \"./SoundConfig.jsx\";\r\nimport { BreathConfig, BREATH_PRESETS } from \"./BreathConfig.jsx\";\r\nimport { SensoryConfig, SENSORY_TYPES } from \"./SensoryConfig.jsx\";\r\nimport { VisualizationConfig } from \"./VisualizationConfig.jsx\";\r\nimport { CymaticsConfig } from \"./CymaticsConfig.jsx\";\r\nimport { SOLFEGGIO_SET } from \"../utils/frequencyLibrary.js\";\r\nimport { useProgressStore } from \"../state/progressStore.js\";\r\nimport { syncFromProgressStore } from \"../state/mandalaStore.js\";\r\nimport { loadPreferences, savePreferences } from \"../state/practiceStore.js\";\r\nimport { ringFXPresets, getCategories } from \"../data/ringFXPresets.js\";\r\nimport { useSessionInstrumentation } from \"../hooks/useSessionInstrumentation.js\";\r\nimport { logPractice } from '../services/cycleManager.js';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\nimport { logCircuitCompletion } from '../services/circuitManager.js';\r\nimport { PracticeSelectionModal } from \"./PracticeSelectionModal.jsx\";\r\nimport { SacredTimeSlider } from \"./SacredTimeSlider.jsx\";\r\nimport { PeripheralHalo } from \"./ui/PeripheralHalo.jsx\";\r\nimport { BreathPatternPreview } from \"./BreathPatternPreview.jsx\";\r\nimport { plateauMaterial, innerGlowStyle, getCardMaterial, getInnerGlowStyle } from \"../styles/cardMaterial.js\";\r\nimport { useDisplayModeStore } from \"../state/displayModeStore.js\";\r\nimport { PostSessionJournal } from \"./PostSessionJournal.jsx\";\r\nimport { useJournalStore } from \"../state/journalStore.js\";\r\n\r\n// DEV GALLERY MODE - now controlled via prop from App.jsx\r\nconst DEV_FX_GALLERY_ENABLED = true; // Fallback if prop not passed\r\n\r\nconst PRACTICES = [\"Breath & Stillness\", \"Ritual\", \"Circuit\", \"Cognitive Vipassana\", \"Somatic Vipassana\", \"Sound\", \"Visualization\", \"Cymatics\"];\r\nconst DURATIONS = [3, 5, 7, 10, 12, 15, 20, 25, 30, 40, 50, 60];\r\n\r\n// Scrolling Wheel Component\r\nfunction ScrollingWheel({ value, onChange, options, colorScheme = 'dark' }) {\r\n  const isLight = colorScheme === 'light';\r\n  const wheelRef = useRef(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startY, setStartY] = useState(0);\r\n  const [scrollOffset, setScrollOffset] = useState(0);\r\n\r\n  const itemHeight = 48;\r\n  const visibleItems = 3;\r\n\r\n  useEffect(() => {\r\n    const index = options.indexOf(value);\r\n    if (index !== -1) {\r\n      setScrollOffset(index * itemHeight);\r\n    }\r\n  }, [value, options, itemHeight]);\r\n\r\n  const handleMouseDown = (e) => {\r\n    setIsDragging(true);\r\n    setStartY(e.clientY);\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDragging) return;\r\n    const deltaY = startY - e.clientY;\r\n    const newOffset = Math.max(0, Math.min(scrollOffset + deltaY, (options.length - 1) * itemHeight));\r\n    setScrollOffset(newOffset);\r\n    setStartY(e.clientY);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    if (!isDragging) return;\r\n    setIsDragging(false);\r\n\r\n    const nearestIndex = Math.round(scrollOffset / itemHeight);\r\n    const snappedOffset = nearestIndex * itemHeight;\r\n    setScrollOffset(snappedOffset);\r\n    onChange(options[nearestIndex]);\r\n  };\r\n\r\n  const handleWheel = (e) => {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? itemHeight : -itemHeight;\r\n    const newOffset = Math.max(0, Math.min(scrollOffset + delta, (options.length - 1) * itemHeight));\r\n    setScrollOffset(newOffset);\r\n\r\n    const nearestIndex = Math.round(newOffset / itemHeight);\r\n    setScrollOffset(nearestIndex * itemHeight);\r\n    onChange(options[nearestIndex]);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={wheelRef}\r\n      className=\"relative overflow-hidden select-none\"\r\n      style={{\r\n        height: `${itemHeight * visibleItems} px`,\r\n        width: \"120px\",\r\n      }}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n      onMouseLeave={handleMouseUp}\r\n      onWheel={handleWheel}\r\n    >\r\n      <div\r\n        className=\"absolute top-0 left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          height: `${itemHeight} px`,\r\n          background: isLight\r\n            ? \"linear-gradient(180deg, var(--light-bg-surface) 0%, transparent 100%)\"\r\n            : \"linear-gradient(180deg, rgba(15,15,26,1) 0%, transparent 100%)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute bottom-0 left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          height: `${itemHeight} px`,\r\n          background: isLight\r\n            ? \"linear-gradient(0deg, var(--light-bg-surface) 0%, transparent 100%)\"\r\n            : \"linear-gradient(0deg, rgba(15,15,26,1) 0%, transparent 100%)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute left-0 right-0 pointer-events-none z-10\"\r\n        style={{\r\n          top: `${itemHeight} px`,\r\n          height: `${itemHeight} px`,\r\n          border: \"1px solid var(--accent-20)\",\r\n          borderRadius: \"8px\",\r\n          background: \"rgba(255,255,255,0.02)\"\r\n        }}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute w-full transition-transform duration-200\"\r\n        style={{\r\n          transform: `translateY(${itemHeight - scrollOffset}px)`,\r\n          cursor: isDragging ? 'grabbing' : 'grab'\r\n        }}\r\n      >\r\n        {options.map((option, index) => {\r\n          const offset = Math.abs(index * itemHeight - scrollOffset);\r\n          const opacity = Math.max(0.2, 1 - offset / (itemHeight * 2));\r\n          const scale = Math.max(0.7, 1 - offset / (itemHeight * 3));\r\n\r\n          return (\r\n            <div\r\n              key={option}\r\n              className=\"flex items-center justify-center\"\r\n              style={{\r\n                fontSize: \"22px\",\r\n                fontWeight: 600,\r\n                letterSpacing: \"var(--tracking-wide)\",\r\n                color: \"var(--text-primary)\",\r\n                opacity,\r\n                transform: `scale(${scale})`,\r\n                transition: \"opacity 0.2s, transform 0.2s\"\r\n              }}\r\n            >\r\n              {option}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PracticeSection({ onPracticingChange, onBreathStateChange, avatarPath, showCore, showFxGallery = DEV_FX_GALLERY_ENABLED }) {\r\n  // Avatar path determines particle effects (Soma, Prana, Dhyana, Drishti, Jnana, Samyoga)\r\n  // When showCore is true, use default particles (no path-specific effects)\r\n\r\n  // Attention path instrumentation\r\n  const instrumentation = useSessionInstrumentation();\r\n\r\n  // Get color scheme for light mode support\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n\r\n  // Load saved preferences or use defaults\r\n  const savedPrefs = loadPreferences();\r\n\r\n  const [practice, setPractice] = useState(savedPrefs.practice);\r\n  const [practiceModalOpen, setPracticeModalOpen] = useState(false);\r\n  \r\n  // CURRICULUM INTEGRATION - Load active curriculum day if set\r\nconst { \r\n  getActivePracticeDay, \r\n  activePracticeSession,\r\n  clearActivePracticeSession,\r\n} = useCurriculumStore();\r\n\r\n// On mount or when active session changes, load curriculum day settings\r\nuseEffect(() => {\r\n  const curriculumDay = getActivePracticeDay();\r\n  if (curriculumDay && activePracticeSession) {\r\n    // Auto-load this day's practice type and settings\r\n    setPractice(curriculumDay.practiceType);\r\n    \r\n    // If it has a circuit, load it\r\n    if (curriculumDay.circuit) {\r\n      const exercises = curriculumDay.circuit.exercises.map(ex => ({\r\n        exercise: {\r\n          id: ex.id,\r\n          name: ex.name,\r\n          type: ex.type,\r\n          practiceType: ex.practiceType,\r\n          preset: ex.preset,\r\n          sensoryType: ex.sensoryType,\r\n        },\r\n        duration: ex.duration,\r\n      }));\r\n      setCircuitConfig({\r\n        exercises,\r\n        exerciseDuration: curriculumDay.circuit.totalDuration,\r\n      });\r\n    }\r\n    \r\n    // Set duration from curriculum\r\n    if (curriculumDay.duration) {\r\n      setDuration(curriculumDay.duration);\r\n      setTimeLeft(curriculumDay.duration * 60);\r\n    }\r\n  }\r\n}, [activePracticeSession, getActivePracticeDay]);\r\n  // Animation states for selectable header affordance\r\n  const [chevronAngle, setChevronAngle] = useState(0);\r\n  const [haloPulse, setHaloPulse] = useState(0);\r\n  const [duration, setDuration] = useState(savedPrefs.duration);\r\n  const [preset, setPreset] = useState(savedPrefs.preset);\r\n  const [pattern, setPattern] = useState(savedPrefs.pattern);\r\n\r\n  const [sensoryType, setSensoryType] = useState(savedPrefs.sensoryType || SENSORY_TYPES[0].id);\r\n  const [soundType, setSoundType] = useState(savedPrefs.soundType || SOUND_TYPES[0]);\r\n  const [vipassanaTheme, setVipassanaTheme] = useState(savedPrefs.vipassanaTheme);\r\n  const [vipassanaElement, setVipassanaElement] = useState(savedPrefs.vipassanaElement);\r\n\r\n  // Vipassana variant selection state (Thought Labeling vs Sakshi)\r\n  const [vipassanaVariant, setVipassanaVariant] = useState('thought-labeling');\r\n  const [showVipassanaVariantModal, setShowVipassanaVariantModal] = useState(false);\r\n\r\n  // Sound configuration state\r\n  const [binauralPreset, setBinauralPreset] = useState(BINAURAL_PRESETS[2]); // Alpha - default\r\n  const [isochronicPreset, setIsochronicPreset] = useState(ISOCHRONIC_PRESETS[1]); // Relaxation\r\n  const [mantraPreset, setMantraPreset] = useState(null);\r\n  const [naturePreset, setNaturePreset] = useState(null);\r\n  const [carrierFrequency, setCarrierFrequency] = useState(200);\r\n  const [soundVolume, setSoundVolume] = useState(0.5);\r\n\r\n\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(10 * 60);\r\n\r\n  // 3-tier card collapse states (default expanded)\r\n  const [tier2Expanded, setTier2Expanded] = useState(true);\r\n  const [tier3Expanded, setTier3Expanded] = useState(true);\r\n\r\n  // Lock & Begin transition state\r\n  const [isStarting, setIsStarting] = useState(false);\r\n\r\n  // Session summary state (Ritual Seal)\r\n  const [showSummary, setShowSummary] = useState(false);\r\n  const [sessionSummary, setSessionSummary] = useState(null);\r\n\r\n  // Journal state\r\n  const [lastSessionId, setLastSessionId] = useState(null);\r\n  const { startMicroNote, pendingMicroNote } = useJournalStore();\r\n\r\n  // Hover states for peripheral halos\r\n  const [tier2Hovered, setTier2Hovered] = useState(false);\r\n  const [tier3Hovered, setTier3Hovered] = useState(false);\r\n\r\n  // Circuit training state - PracticeSection orchestrates the circuit internally\r\n  const [activeCircuitId, setActiveCircuitId] = useState(null);\r\n  const [circuitConfig, setCircuitConfig] = useState(null); // User's custom circuit configuration\r\n  const [circuitExerciseIndex, setCircuitExerciseIndex] = useState(0); // Current exercise in circuit\r\n  const [circuitSavedPractice, setCircuitSavedPractice] = useState(null); // Original practice before circuit started\r\n\r\n  const [tapErrors, setTapErrors] = useState([]);\r\n  const [lastErrorMs, setLastErrorMs] = useState(null);\r\n  const [lastSignedErrorMs, setLastSignedErrorMs] = useState(null);\r\n\r\n  const [breathCount, setBreathCount] = useState(0);\r\n  const [sessionStartTime, setSessionStartTime] = useState(null);\r\n\r\n  const [geometry, setGeometry] = useState(savedPrefs.geometry);\r\n  const [fadeInDuration, setFadeInDuration] = useState(2.5);\r\n  const [displayDuration, setDisplayDuration] = useState(10);\r\n  const [fadeOutDuration, setFadeOutDuration] = useState(2.5);\r\n  const [voidDuration, setVoidDuration] = useState(10);\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  const [visualizationCycles, setVisualizationCycles] = useState(0);\r\n\r\n  // Cymatics state\r\n  const [frequencySet, setFrequencySet] = useState('solfeggio');\r\n  const [selectedFrequency, setSelectedFrequency] = useState(SOLFEGGIO_SET[4]); // 528 Hz - Love\r\n  const [driftEnabled, setDriftEnabled] = useState(false);\r\n\r\n  // Ritual Mode state\r\n  const [activeRitual, setActiveRitual] = useState(null);\r\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\r\n\r\n  // FX Gallery state (DEV MODE - controlled by showFxGallery prop)\r\n  const [currentFxIndex, setCurrentFxIndex] = useState(0);\r\n  const currentFxPreset = showFxGallery ? ringFXPresets[currentFxIndex] : null;\r\n\r\n  const handlePrevFx = () => {\r\n    setCurrentFxIndex(prev => (prev - 1 + ringFXPresets.length) % ringFXPresets.length);\r\n  };\r\n  const handleNextFx = () => {\r\n    setCurrentFxIndex(prev => (prev + 1) % ringFXPresets.length);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isRunning) {\r\n      setTimeLeft(duration * 60);\r\n    }\r\n  }, [duration, isRunning]);\r\n\r\n  // Selectable header animation loop (chevron sway + halo pulse)\r\n  useEffect(() => {\r\n    // Animations continue even when modal is open (portal renders separately)\r\n\r\n    let animationId;\r\n    const startTime = Date.now();\r\n\r\n    const animate = () => {\r\n      const elapsed = Date.now() - startTime;\r\n\r\n      // Chevron sway: 8 degrees over 3 second period\r\n      const chevronPhase = (elapsed % 3000) / 3000;\r\n      const angle = Math.sin(chevronPhase * Math.PI * 2) * 8;\r\n      setChevronAngle(angle);\r\n\r\n      // Halo pulse: 0-1 over 5 second period\r\n      const haloPhase = (elapsed % 5000) / 5000;\r\n      const pulse = (Math.sin(haloPhase * Math.PI * 2) + 1) / 2;\r\n      setHaloPulse(pulse);\r\n\r\n      animationId = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animationId = requestAnimationFrame(animate);\r\n    return () => cancelAnimationFrame(animationId);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (preset && BREATH_PRESETS[preset]) {\r\n      setPattern(BREATH_PRESETS[preset]);\r\n    }\r\n  }, [preset]);\r\n\r\n  // Initialize circuitConfig when switching to Circuit practice\r\n  // This ensures START works even if Options panel hasn't been expanded\r\n  useEffect(() => {\r\n    if (practice === \"Circuit\" && !circuitConfig) {\r\n      // Default exercises matching CircuitConfig.jsx defaults\r\n      const defaultExercises = [\r\n        { exercise: { id: 'breath', name: 'Breath Training', type: 'breath', practiceType: 'Breath & Stillness', preset: 'box' }, duration: 5 },\r\n        { exercise: { id: 'cognitive', name: 'Cognitive Vipassana', type: 'focus', practiceType: 'Cognitive Vipassana' }, duration: 5 },\r\n        { exercise: { id: 'somatic', name: 'Somatic Vipassana', type: 'body', practiceType: 'Somatic Vipassana', sensoryType: 'body' }, duration: 5 },\r\n      ];\r\n      setCircuitConfig({ exercises: defaultExercises, exerciseDuration: 5 });\r\n    }\r\n  }, [practice, circuitConfig]);\r\n\r\n  const setupCircuitExercise = (exerciseItem) => {\r\n    const { exercise, duration: exDuration } = exerciseItem;\r\n\r\n    // Map exercise to practice type and configure settings\r\n    if (exercise.practiceType === 'Breath & Stillness') {\r\n      setPractice('Breath & Stillness');\r\n      // Set breath pattern from preset if provided\r\n      // Handle case-insensitive preset lookup (CircuitConfig uses 'box', BREATH_PRESETS uses 'Box')\r\n      if (exercise.preset) {\r\n        const presetKey = Object.keys(BREATH_PRESETS).find(\r\n          k => k.toLowerCase() === exercise.preset.toLowerCase()\r\n        );\r\n        if (presetKey && BREATH_PRESETS[presetKey]) {\r\n          setPattern(BREATH_PRESETS[presetKey]);\r\n          setPreset(presetKey);\r\n        }\r\n      }\r\n    } else if (exercise.practiceType === 'Cognitive Vipassana') {\r\n      setPractice('Cognitive Vipassana');\r\n    } else if (exercise.practiceType === 'Somatic Vipassana') {\r\n      setPractice('Somatic Vipassana');\r\n      if (exercise.sensoryType) {\r\n        setSensoryType(exercise.sensoryType);\r\n      }\r\n    } else {\r\n      // Fallback - use the practiceType directly if recognized\r\n      setPractice(exercise.practiceType || 'Breath & Stillness');\r\n    }\r\n\r\n    // Set duration for this exercise\r\n    setDuration(exDuration);\r\n    setTimeLeft(exDuration * 60);\r\n\r\n    // Start running\r\n    setIsRunning(true);\r\n    onPracticingChange && onPracticingChange(true);\r\n    setSessionStartTime(performance.now());\r\n    setTapErrors([]);\r\n    setLastErrorMs(null);\r\n    setLastSignedErrorMs(null);\r\n    setBreathCount(0);\r\n  };\r\n  const handleExerciseComplete = () => {\r\n    if (activeCircuitId && circuitConfig) {\r\n      // In circuit mode - advance to next exercise\r\n      advanceCircuitExercise();\r\n    } else {\r\n      // Normal mode - stop the session\r\n      handleStop();\r\n    }\r\n  };\r\n\r\n  // Advance to next circuit exercise or complete circuit\r\n  const advanceCircuitExercise = () => {\r\n    if (!activeCircuitId || !circuitConfig) return;\r\n\r\n    const nextIndex = circuitExerciseIndex + 1;\r\n    if (nextIndex < circuitConfig.exercises.length) {\r\n      // More exercises remain\r\n      setCircuitExerciseIndex(nextIndex);\r\n      const nextExercise = circuitConfig.exercises[nextIndex];\r\n      setupCircuitExercise(nextExercise);\r\n    } else {\r\n      // Circuit complete!\r\n      handleCircuitComplete();\r\n    }\r\n  };\r\n\r\n  // Circuit completion handler\r\nconst handleCircuitComplete = () => {\r\n    clearActivePracticeSession(); // NEW LINE - Clear curriculum session\r\n    setIsRunning(false);\r\n    onPracticingChange && onPracticingChange(false);\r\n    \r\n    // Log completion\r\n    logCircuitCompletion('custom', circuitConfig.exercises);\r\n\r\n    // Calculate total duration\r\n    const totalDuration = circuitConfig.exercises.reduce((sum, e) => sum + e.duration, 0);\r\n\r\n    // Record circuit session in progress store (same as single sessions)\r\n    let recordedSession = null;\r\n    try {\r\n      recordedSession = useProgressStore.getState().recordSession({\r\n        domain: 'circuit-training',\r\n        duration: totalDuration, // minutes\r\n        metadata: {\r\n          circuitName: 'Custom Circuit',\r\n          exerciseCount: circuitConfig.exercises.length,\r\n          legacyImport: false\r\n        },\r\n      });\r\n    } catch (e) {\r\n      console.error(\"Failed to save circuit session:\", e);\r\n    }\r\n\r\n    // Show summary\r\n    setSessionSummary({\r\n      type: 'circuit',\r\n      circuitName: 'Custom Circuit',\r\n      exercisesCompleted: circuitConfig.exercises.length,\r\n      totalDuration: totalDuration,\r\n    });\r\n    setShowSummary(true);\r\n\r\n    // Trigger journal micro-note flow (PHASE 2 FIX: Wire circuit journal)\r\n    if (recordedSession) {\r\n      setLastSessionId(recordedSession.id);\r\n      startMicroNote(recordedSession.id);\r\n    }\r\n\r\n    // Reset circuit state\r\n    setActiveCircuitId(null);\r\n    setCircuitExerciseIndex(0);\r\n    setPractice('Circuit'); // Restore to Circuit selection\r\n  };\r\n\r\n  const handlePatternChange = (key, value) => {\r\n    setPattern((prev) => ({\r\n      ...prev,\r\n      [key]: Number.parseInt(value, 10) || 0,\r\n    }));\r\n    setPreset(null);\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const m = Math.floor(seconds / 60);\r\n    const s = seconds % 60;\r\n    return `${m}:${s.toString().padStart(2, \"0\")} `;\r\n  };\r\n\r\n  const handleStop = () => {\r\n    clearActivePracticeSession(); // NEW LINE - Clear curriculum session\r\n    setIsRunning(false);\r\n    onPracticingChange && onPracticingChange(false);\r\n    // ... rest of function continues\r\n\r\n    // Determine exit type: completed if timer reached 0, abandoned otherwise\r\n    const exitType = timeLeft <= 0 ? 'completed' : 'abandoned';\r\n\r\n    // End instrumentation and get session data\r\n    const instrumentationData = instrumentation.endSession(exitType);\r\n\r\n    const id =\r\n      typeof crypto !== \"undefined\" && crypto.randomUUID\r\n        ? crypto.randomUUID()\r\n        : String(Date.now());\r\n\r\n    const tapCount = tapErrors.length;\r\n    let avgErrorMs = null;\r\n    let bestErrorMs = null;\r\n\r\n    if (tapCount > 0) {\r\n      avgErrorMs = Math.round(\r\n        tapErrors.reduce((sum, v) => sum + Math.abs(v), 0) / tapCount\r\n      );\r\n      bestErrorMs = Math.round(\r\n        Math.min(...tapErrors.map(e => Math.abs(e)))\r\n      );\r\n    }\r\n\r\n    let subType = null;\r\n    if (practice === \"Somatic Vipassana\") subType = sensoryType;\r\n    if (practice === \"Sound\") subType = soundType;\r\n    if (practice === \"Visualization\") subType = geometry;\r\n    if (practice === \"Cymatics\") subType = `${selectedFrequency.hz} Hz - ${selectedFrequency.name} `;\r\n    if (practice === \"Ritual\") subType = activeRitual?.id;\r\n\r\n    const sessionPayload = {\r\n      id,\r\n      date: new Date().toISOString(),\r\n      type: practice.toLowerCase(),\r\n      subType,\r\n      durationMinutes: duration,\r\n      pattern: practice === \"Breath & Stillness\" ? { ...pattern } : null,\r\n      tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n    };\r\n\r\n    let recordedSession = null;\r\n    try {\r\n      // Map practice to domain for Path calculation\r\n      let domain = 'breathwork';\r\n      const p = practice.toLowerCase();\r\n      if (p.includes('visual') || p.includes('cymatics')) domain = 'visualization';\r\n      else if (p === 'somatic vipassana') domain = sensoryType;\r\n      else if (p === 'ritual') domain = 'ritual';\r\n      else if (p === 'sound') domain = 'sound';\r\n\r\n      // Record in progress store (single source of truth) and capture the returned session\r\n      recordedSession = useProgressStore.getState().recordSession({\r\n        domain,\r\n        duration: duration, // minutes\r\n        metadata: {\r\n          subType,\r\n          pattern: practice === \"Breath & Stillness\" ? { ...pattern } : null,\r\n          tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n          ritualId: activeRitual?.id,\r\n          legacyImport: false\r\n        },\r\n        // Pass instrumentation data for attention path calculation\r\n        instrumentation: instrumentationData,\r\n      });\r\n\r\n      // Log to cycle system (if 10+ minutes)\r\n      if (duration >= 10) {\r\n        const now = new Date();\r\n        const timeOfDay = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}`;\r\n\r\n        logPractice({\r\n          type: domain === 'breathwork' ? 'breath' : domain === 'visualization' ? 'focus' : 'body',\r\n          duration: duration,\r\n          timeOfDay: timeOfDay,\r\n        });\r\n      }\r\n\r\n      // Sync mandala store\r\n      syncFromProgressStore();\r\n    } catch (e) {\r\n      console.error(\"Failed to save session:\", e);\r\n    }\r\n\r\n    // Reset ritual state\r\n    setActiveRitual(null);\r\n    setCurrentStepIndex(0);\r\n    setTimeLeft(duration * 60);\r\n\r\n // Show summary and trigger journal for any meaningful session (>30s), excluding Ritual\r\n// RitualPortal handles its own completion UI\r\nconst actualDuration = duration * 60 - timeLeft; // seconds practiced\r\nconst shouldJournal = practice !== 'Ritual' && actualDuration >= 30;\r\n\r\nif (shouldJournal) {\r\n    setSessionSummary({\r\n        practice,\r\n        duration,\r\n        tapStats: tapCount > 0 ? { tapCount, avgErrorMs, bestErrorMs } : null,\r\n        breathCount,\r\n        exitType,\r\n    });\r\n    setShowSummary(true);\r\n\r\n    // Log this leg completion if in curriculum mode\r\n    const activePracticeDay = getActivePracticeDay();\r\n    if (activePracticeSession && activePracticeDay) {\r\n        const { logLegCompletion } = useCurriculumStore.getState();\r\n        logLegCompletion(activePracticeSession, 1, {\r\n            duration: duration,\r\n            focusRating: null, // Will be set by journal\r\n            challenges: [],\r\n            notes: '',\r\n        });\r\n    }\r\n\r\n    // Trigger journal micro-note flow using the recorded session ID\r\n    if (recordedSession) {\r\n        setLastSessionId(recordedSession.id);\r\n        startMicroNote(recordedSession.id);\r\n    }\r\n}\r\n};\r\n  // The actual start logic (called after ceremony)\r\n  const executeStart = () => {\r\n    // Save current preferences for next session\r\n    savePreferences({\r\n      practice,\r\n      duration,\r\n      preset,\r\n      pattern,\r\n      sensoryType,\r\n      vipassanaTheme,\r\n      vipassanaElement,\r\n      soundType,\r\n      geometry,\r\n    });\r\n\r\n    // For Circuit practice, set up the first exercise and run it using existing practice UI\r\n    if (practice === \"Circuit\") {\r\n      if (!circuitConfig || circuitConfig.exercises.length === 0) {\r\n        // No exercises configured, don't start\r\n        return;\r\n      }\r\n      // Save original practice so we can restore after circuit ends\r\n      setCircuitSavedPractice(practice);\r\n      setActiveCircuitId('custom');\r\n      setCircuitExerciseIndex(0);\r\n\r\n      // Set up the first exercise\r\n      const firstExercise = circuitConfig.exercises[0];\r\n      setupCircuitExercise(firstExercise);\r\n      return;\r\n    }\r\n\r\n    // For Cognitive Vipassana, show variant selector before starting\r\n    if (practice === \"Cognitive Vipassana\") {\r\n      setShowVipassanaVariantModal(true);\r\n    }\r\n\r\n    setIsRunning(true);\r\n    onPracticingChange && onPracticingChange(true);\r\n    setSessionStartTime(performance.now());\r\n    setTapErrors([]);\r\n    setLastErrorMs(null);\r\n    setLastSignedErrorMs(null);\r\n    setBreathCount(0);\r\n\r\n    // Start instrumentation tracking\r\n    const p = practice.toLowerCase();\r\n    let domain = 'breathwork';\r\n    if (p.includes('visual') || p.includes('cymatics')) domain = 'visualization';\r\n    else if (p === 'sensory') domain = sensoryType;\r\n    else if (p === 'ritual') domain = 'ritual';\r\n    else if (p === 'sound') domain = 'sound';\r\n\r\n    instrumentation.startSession(\r\n      domain,\r\n      activeRitual?.category || null,\r\n      p === 'somatic vipassana' ? sensoryType : null\r\n    );\r\n  };\r\n\r\n  // Lock & Begin: ceremonial transition before start\r\n  const handleStart = () => {\r\n    // Trigger the \"locking\" animation\r\n    setIsStarting(true);\r\n\r\n    // After 1.4s pause, actually start\r\n    setTimeout(() => {\r\n      setIsStarting(false);\r\n      executeStart();\r\n    }, 1400);\r\n  };\r\n\r\n  // Ritual-specific handlers\r\n  const handleSelectRitual = (ritual) => {\r\n    setActiveRitual(ritual);\r\n    setCurrentStepIndex(0);\r\n    // Calculate total duration from steps\r\n    const totalSeconds = ritual.steps?.reduce((sum, s) => sum + (s.duration || 60), 0) || 600;\r\n    setDuration(Math.ceil(totalSeconds / 60));\r\n    setTimeLeft(totalSeconds);\r\n    // Auto-start ritual\r\n    handleStart();\r\n  };\r\n\r\n  const handleNextStep = () => {\r\n    if (!activeRitual) return;\r\n    const nextIndex = currentStepIndex + 1;\r\n    if (nextIndex < activeRitual.steps.length) {\r\n      setCurrentStepIndex(nextIndex);\r\n    }\r\n  };\r\n\r\n  const handleRitualComplete = () => {\r\n    handleStop();\r\n  };\r\n\r\n  const handleAccuracyTap = (errorMs) => {\r\n    if (!isRunning) return;\r\n\r\n    // Track tap as alive signal for attention path\r\n    instrumentation.recordAliveSignal();\r\n\r\n    setLastErrorMs(Math.abs(errorMs));\r\n    setLastSignedErrorMs(errorMs);\r\n\r\n    setTapErrors(prev => {\r\n      const updated = [...prev, errorMs];\r\n      if (updated.length > 50) updated.shift();\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isRunning) return;\r\n    // Skip timer countdown for Ritual mode (handled by RitualPortal)\r\n    if (practice === \"Ritual\") return;\r\n\r\n    let interval = null;\r\n    if (timeLeft > 0) {\r\n      interval = setInterval(() => {\r\n        setTimeLeft((prev) => prev - 1);\r\n      }, 1000);\r\n    } else if (timeLeft === 0) {\r\n      // If in circuit mode, advance to next exercise instead of stopping\r\n      if (activeCircuitId && circuitConfig) {\r\n        advanceCircuitExercise();\r\n      } else {\r\n        handleStop();\r\n      }\r\n    }\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isRunning, timeLeft, practice, activeCircuitId]);\r\n\r\n  useEffect(() => {\r\n    if (!onBreathStateChange) return;\r\n    if (!isRunning || practice !== \"Breath & Stillness\") {\r\n      onBreathStateChange(null);\r\n      return;\r\n    }\r\n    const total = pattern.inhale + pattern.hold1 + pattern.exhale + pattern.hold2;\r\n    if (!total) {\r\n      onBreathStateChange(null);\r\n      return;\r\n    }\r\n\r\n    const now = performance.now() / 1000;\r\n    const cyclePos = (now % total);\r\n\r\n    let phase = \"inhale\";\r\n    let phaseProgress = 0;\r\n\r\n    if (cyclePos < pattern.inhale) {\r\n      phase = \"inhale\";\r\n      phaseProgress = cyclePos / pattern.inhale;\r\n    } else if (cyclePos < pattern.inhale + pattern.hold1) {\r\n      phase = \"holdTop\";\r\n      phaseProgress =\r\n        (cyclePos - pattern.inhale) / Math.max(pattern.hold1, 0.0001);\r\n    } else if (\r\n      cyclePos <\r\n      pattern.inhale + pattern.hold1 + pattern.exhale\r\n    ) {\r\n      phase = \"exhale\";\r\n      phaseProgress =\r\n        (cyclePos - (pattern.inhale + pattern.hold1)) /\r\n        Math.max(pattern.exhale, 0.0001);\r\n    } else {\r\n      phase = \"holdBottom\";\r\n      phaseProgress =\r\n        (cyclePos -\r\n          (pattern.inhale + pattern.hold1 + pattern.exhale)) /\r\n        Math.max(pattern.hold2 || 1, 1);\r\n    }\r\n\r\n    onBreathStateChange({\r\n      phase,\r\n      phaseProgress,\r\n    });\r\n  }, [isRunning, practice, pattern, onBreathStateChange]);\r\n\r\n  const totalDuration =\r\n    pattern.inhale + pattern.hold1 + pattern.exhale + pattern.hold2 || 1;\r\n  const width = 100;\r\n  const height = 40;\r\n\r\n  const iW = (pattern.inhale / totalDuration) * width;\r\n  const h1W = (pattern.hold1 / totalDuration) * width;\r\n  const eW = (pattern.exhale / totalDuration) * width;\r\n\r\n  const pathD = `\r\n    M 0 ${height}\r\n    L ${iW} 0\r\n    L ${iW + h1W} 0\r\n    L ${iW + h1W + eW} ${height}\r\n    L ${width} ${height}\r\n`;\r\n\r\n  const breathingPatternForRing = {\r\n    inhale: pattern.inhale,\r\n    holdTop: pattern.hold1,\r\n    exhale: pattern.exhale,\r\n    holdBottom: pattern.hold2,\r\n  };\r\n\r\n  const theme = useTheme();\r\n  const { primary, secondary, muted, glow } = theme.accent;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PracticeSelectionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PresenceSigil.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[32,43],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[70,77],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'stage' is assigned a value but never used.","line":4,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"stage"},"fix":{"range":[168,185],"text":""},"desc":"Remove unused variable 'stage'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { motion, useAnimation } from 'framer-motion';\r\n\r\nexport function PresenceSigil({ onLongPress, onTap, stage = 'flame' }) {\r\n    const [isPressing, setIsPressing] = useState(false);\r\n    const timerRef = useRef(null);\r\n    const controls = useAnimation();\r\n\r\n    // Handle long press logic\r\n    const handlePointerDown = () => {\r\n        setIsPressing(true);\r\n        controls.start({\r\n            scale: 0.8,\r\n            opacity: 0.8,\r\n            transition: { duration: 0.5, ease: \"easeOut\" }\r\n        });\r\n\r\n        timerRef.current = setTimeout(() => {\r\n            if (onLongPress) onLongPress();\r\n            setIsPressing(false);\r\n        }, 600); // Threshold for long press\r\n    };\r\n\r\n    const handlePointerUp = () => {\r\n        if (isPressing) {\r\n            if (timerRef.current) clearTimeout(timerRef.current);\r\n            setIsPressing(false);\r\n            controls.start({\r\n                scale: 1,\r\n                opacity: 1,\r\n                transition: { type: 'spring', stiffness: 300, damping: 20 }\r\n            });\r\n            if (onTap) onTap();\r\n        }\r\n    };\r\n\r\n    const handlePointerCancel = () => {\r\n        if (timerRef.current) clearTimeout(timerRef.current);\r\n        setIsPressing(false);\r\n        controls.start({ scale: 1, opacity: 1 });\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed top-0 right-0 z-[3000] flex flex-col items-center\"\r\n            style={{\r\n                top: 'env(safe-area-inset-top, 0px)',\r\n                right: 'env(safe-area-inset-right, 8px)',\r\n                paddingTop: '8px',\r\n                paddingRight: '8px'\r\n            }}\r\n        >\r\n            <motion.div\r\n                animate={controls}\r\n                onPointerDown={handlePointerDown}\r\n                onPointerUp={handlePointerUp}\r\n                onPointerCancel={handlePointerCancel}\r\n                className=\"relative w-12 h-12 flex items-center justify-center cursor-pointer select-none touch-none\"\r\n            >\r\n                {/* Glow Sphere */}\r\n                <div className=\"absolute inset-0 rounded-full bg-amber-500/20 blur-md animate-pulse\" />\r\n\r\n                {/* The Sigil Core (Simplified Avatar-like ring) */}\r\n                <div\r\n                    className=\"relative w-6 h-6 rounded-full border border-amber-500/60 flex items-center justify-center\"\r\n                    style={{\r\n                        boxShadow: '0 0 10px var(--accent-color)',\r\n                        borderColor: 'var(--accent-color)'\r\n                    }}\r\n                >\r\n                    <div className=\"w-1.5 h-1.5 rounded-full bg-white shadow-lg\" />\r\n                </div>\r\n\r\n                {/* Progress Ring during press */}\r\n                {isPressing && (\r\n                    <svg className=\"absolute inset-0 w-full h-full -rotate-90\">\r\n                        <motion.circle\r\n                            cx=\"24\"\r\n                            cy=\"24\"\r\n                            r=\"10\"\r\n                            stroke=\"var(--accent-color)\"\r\n                            strokeWidth=\"2\"\r\n                            fill=\"transparent\"\r\n                            initial={{ pathLength: 0 }}\r\n                            animate={{ pathLength: 1 }}\r\n                            transition={{ duration: 0.6, ease: \"linear\" }}\r\n                        />\r\n                    </svg>\r\n                )}\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\PromptDisplay.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  12 |         if (text !== prevTextRef.current) {\n  13 |             // Fade out\n> 14 |             setOpacity(0);\n     |             ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  15 |\n  16 |             const fadeTimer = setTimeout(() => {\n  17 |                 setDisplayedText(text);","line":14,"column":13,"nodeType":null,"endLine":14,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/PromptDisplay.jsx\r\n// Reusable text prompt display with audio hooks for sensory practices\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nexport function PromptDisplay({ text, onAudioPlay, fadeMs = 500 }) {\r\n    const [displayedText, setDisplayedText] = useState(text);\r\n    const [opacity, setOpacity] = useState(1);\r\n    const prevTextRef = useRef(text);\r\n\r\n    useEffect(() => {\r\n        if (text !== prevTextRef.current) {\r\n            // Fade out\r\n            setOpacity(0);\r\n\r\n            const fadeTimer = setTimeout(() => {\r\n                setDisplayedText(text);\r\n                setOpacity(1);\r\n                prevTextRef.current = text;\r\n\r\n                // Trigger audio hook when new prompt appears\r\n                if (onAudioPlay) {\r\n                    onAudioPlay(text);\r\n                }\r\n            }, fadeMs);\r\n\r\n            return () => clearTimeout(fadeTimer);\r\n        }\r\n    }, [text, fadeMs, onAudioPlay]);\r\n\r\n    if (!displayedText) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"w-full max-w-md mx-auto px-6 py-4 text-center\"\r\n            style={{\r\n                opacity,\r\n                transition: `opacity ${fadeMs}ms ease-in-out`,\r\n            }}\r\n        >\r\n            <p\r\n                style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontSize: '15px',\r\n                    lineHeight: 1.7,\r\n                    color: 'rgba(253,251,245,0.95)',\r\n                    fontStyle: 'italic',\r\n                    margin: 0,\r\n                    textShadow: '0 0 20px rgba(0,0,0,0.8), 0 0 40px rgba(0,0,0,0.6)',\r\n                }}\r\n            >\r\n                \"{displayedText}\"\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\QuickLogGesturePad.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[74,85],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  192 |                                 className=\"absolute w-20 h-20 rounded-full border-2 border-[var(--accent-color)] pointer-events-none\"\n  193 |                                 style={{\n> 194 |                                     left: ripple.x - padRef.current.getBoundingClientRect().left - 40,\n      |                                                      ^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  195 |                                     top: ripple.y - padRef.current.getBoundingClientRect().top - 40,\n  196 |                                     animation: 'ripple 600ms ease-out forwards'\n  197 |                                 }}","line":194,"column":54,"nodeType":null,"endLine":194,"endColumn":68},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  192 |                                 className=\"absolute w-20 h-20 rounded-full border-2 border-[var(--accent-color)] pointer-events-none\"\n  193 |                                 style={{\n> 194 |                                     left: ripple.x - padRef.current.getBoundingClientRect().left - 40,\n      |                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  195 |                                     top: ripple.y - padRef.current.getBoundingClientRect().top - 40,\n  196 |                                     animation: 'ripple 600ms ease-out forwards'\n  197 |                                 }}","line":194,"column":54,"nodeType":null,"endLine":194,"endColumn":90},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  193 |                                 style={{\n  194 |                                     left: ripple.x - padRef.current.getBoundingClientRect().left - 40,\n> 195 |                                     top: ripple.y - padRef.current.getBoundingClientRect().top - 40,\n      |                                                     ^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  196 |                                     animation: 'ripple 600ms ease-out forwards'\n  197 |                                 }}\n  198 |                             />","line":195,"column":53,"nodeType":null,"endLine":195,"endColumn":67},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n  193 |                                 style={{\n  194 |                                     left: ripple.x - padRef.current.getBoundingClientRect().left - 40,\n> 195 |                                     top: ripple.y - padRef.current.getBoundingClientRect().top - 40,\n      |                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Passing a ref to a function may read its value during render\n  196 |                                     animation: 'ripple 600ms ease-out forwards'\n  197 |                                 }}\n  198 |                             />","line":195,"column":53,"nodeType":null,"endLine":195,"endColumn":89}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐// src/components/QuickLogGesturePad.jsx\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigationStore } from '../state/navigationStore.js';\r\nimport { useApplicationStore } from '../state/applicationStore.js';\r\nimport { getPathById } from '../data/navigationData.js';\r\n\r\nconst DIRECTION_ANGLES = {\r\n    up: { min: 45, max: 135 },\r\n    right: { min: 315, max: 45 },\r\n    down: { min: 225, max: 315 },\r\n    left: { min: 135, max: 225 }\r\n};\r\n\r\nexport function QuickLogGesturePad() {\r\n    const { activePath } = useNavigationStore();\r\n    const { logAwareness } = useApplicationStore();\r\n    const [ripple, setRipple] = useState(null);\r\n    const [justLogged, setJustLogged] = useState(null);\r\n    const padRef = useRef(null);\r\n    const touchStart = useRef({ x: 0, y: 0 });\r\n\r\n    if (!activePath) return null;\r\n\r\n    const path = getPathById(activePath.pathId);\r\n    if (!path || !path.applicationItems || path.applicationItems.length === 0) return null;\r\n\r\n    const trackingItems = {\r\n        up: path.applicationItems[0] || '',\r\n        left: path.applicationItems[1] || '',\r\n        down: path.applicationItems[2] || '',\r\n        right: path.applicationItems[3] || ''\r\n    };\r\n\r\n    const handleLog = (direction, x, y) => {\r\n        const category = trackingItems[direction];\r\n        if (!category) return;\r\n\r\n        // Convert to normalized category ID\r\n        const categoryId = category.toLowerCase().replace(/\\s+/g, '-');\r\n\r\n        // Log it\r\n        logAwareness(categoryId, activePath.pathId);\r\n\r\n        // Visual feedback\r\n        setRipple({ x, y, direction });\r\n        setJustLogged(direction);\r\n\r\n        // Clear feedback\r\n        setTimeout(() => setRipple(null), 600);\r\n        setTimeout(() => setJustLogged(null), 1000);\r\n    };\r\n\r\n    const getDirectionFromAngle = (angle) => {\r\n        // Normalize angle to 0-360\r\n        angle = ((angle % 360) + 360) % 360;\r\n\r\n        if (angle >= 45 && angle < 135) return 'up';\r\n        if (angle >= 135 && angle < 225) return 'left';\r\n        if (angle >= 225 && angle < 315) return 'down';\r\n        // 315-360 and 0-45\r\n        return 'right';\r\n    };\r\n\r\n    const handleTouchStart = (e) => {\r\n        const touch = e.touches[0];\r\n        touchStart.current = { x: touch.clientX, y: touch.clientY };\r\n    };\r\n\r\n    const handleTouchEnd = (e) => {\r\n        const touch = e.changedTouches[0];\r\n        const dx = touch.clientX - touchStart.current.x;\r\n        const dy = touch.clientY - touchStart.current.y;\r\n        const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n        // Require minimum swipe distance\r\n        if (distance > 30) {\r\n            const angle = Math.atan2(-dy, dx) * (180 / Math.PI);\r\n            const direction = getDirectionFromAngle(angle);\r\n            handleLog(direction, touch.clientX, touch.clientY);\r\n        }\r\n    };\r\n\r\n    const handleClick = (e) => {\r\n        if (!padRef.current) return;\r\n\r\n        const rect = padRef.current.getBoundingClientRect();\r\n        const centerX = rect.left + rect.width / 2;\r\n        const centerY = rect.top + rect.height / 2;\r\n        const dx = e.clientX - centerX;\r\n        const dy = e.clientY - centerY;\r\n\r\n        const angle = Math.atan2(-dy, dx) * (180 / Math.PI);\r\n        const direction = getDirectionFromAngle(angle);\r\n\r\n        handleLog(direction, e.clientX, e.clientY);\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full\">\r\n            <div className=\"bg-[#0f0f1a] border border-[var(--accent-15)] rounded-3xl p-8 relative overflow-hidden\">\r\n                {/* Subtle gradient */}\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none rounded-3xl\"\r\n                    style={{\r\n                        background: 'radial-gradient(circle at top, rgba(255,220,120,0.05), transparent 60%)',\r\n                    }}\r\n                />\r\n\r\n                {/* Header */}\r\n                <h3\r\n                    className=\"application-card-label text-[var(--accent-70)] mb-4 text-center relative z-10 font-bold tracking-[0.25em]\"\r\n                    style={{ fontFamily: 'var(--font-display)' }}\r\n                >\r\n                    QUICK LOG\r\n                </h3>\r\n\r\n                {/* Gesture Pad */}\r\n                <div className=\"relative z-10\">\r\n                    <div\r\n                        ref={padRef}\r\n                        onClick={handleClick}\r\n                        onTouchStart={handleTouchStart}\r\n                        onTouchEnd={handleTouchEnd}\r\n                        className=\"relative aspect-square max-w-sm mx-auto rounded-2xl border-2 bg-[var(--accent-10)] cursor-pointer select-none overflow-hidden\"\r\n                        style={{\r\n                            borderColor: 'var(--accent-20)',\r\n                            boxShadow: 'inset 0 0 24px rgba(255,220,120,0.08)',\r\n                            touchAction: 'none'\r\n                        }}\r\n                    >\r\n                        {/* Center Dot - Larger */}\r\n                        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-[var(--accent-50)]\" />\r\n\r\n                        {/* Axis Dots - N/S/E/W */}\r\n                        <div className=\"quicklog-axis-dot absolute top-4 left-1/2 -translate-x-1/2\" />\r\n                        <div className=\"quicklog-axis-dot absolute bottom-4 left-1/2 -translate-x-1/2\" />\r\n                        <div className=\"quicklog-axis-dot absolute left-4 top-1/2 -translate-y-1/2\" />\r\n                        <div className=\"quicklog-axis-dot absolute right-4 top-1/2 -translate-y-1/2\" />\r\n\r\n                        {/* Direction Labels */}\r\n                        <div className=\"absolute top-8 left-1/2 -translate-x-1/2\">\r\n                            <div\r\n                                className={`text-sm text-center transition-all max-w-[100px] ${justLogged === 'up' ? 'text-[var(--accent-color)] scale-110' : 'text-[var(--accent-70)]'\r\n                                    }`}\r\n                                style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}\r\n                            >\r\n                                <div className=\"text-xl mb-0.5\">Γåæ</div>\r\n                                <div className=\"text-[11px] line-clamp-2 leading-tight\">{trackingItems.up}</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"absolute left-6 top-1/2 -translate-y-1/2\">\r\n                            <div\r\n                                className={`text-sm text-left transition-all max-w-[100px] ${justLogged === 'left' ? 'text-[var(--accent-color)] scale-110' : 'text-[var(--accent-70)]'\r\n                                    }`}\r\n                                style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}\r\n                            >\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    <span className=\"text-xl flex-shrink-0\">ΓåÉ</span>\r\n                                    <span className=\"text-[11px] line-clamp-2 leading-tight\">{trackingItems.left}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"absolute bottom-8 left-1/2 -translate-x-1/2\">\r\n                            <div\r\n                                className={`text-sm text-center transition-all max-w-[100px] ${justLogged === 'down' ? 'text-[var(--accent-color)] scale-110' : 'text-[var(--accent-70)]'\r\n                                    }`}\r\n                                style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}\r\n                            >\r\n                                <div className=\"text-[11px] line-clamp-2 leading-tight mb-0.5\">{trackingItems.down}</div>\r\n                                <div className=\"text-xl\">Γåô</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"absolute right-6 top-1/2 -translate-y-1/2\">\r\n                            <div\r\n                                className={`text-sm text-right transition-all max-w-[100px] ${justLogged === 'right' ? 'text-[var(--accent-color)] scale-110' : 'text-[var(--accent-70)]'\r\n                                    }`}\r\n                                style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em', fontWeight: 500 }}\r\n                            >\r\n                                <div className=\"flex items-center gap-1 justify-end\">\r\n                                    <span className=\"text-[11px] line-clamp-2 leading-tight text-right\">{trackingItems.right}</span>\r\n                                    <span className=\"text-xl flex-shrink-0\">ΓåÆ</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Ripple Effect */}\r\n                        {ripple && (\r\n                            <div\r\n                                className=\"absolute w-20 h-20 rounded-full border-2 border-[var(--accent-color)] pointer-events-none\"\r\n                                style={{\r\n                                    left: ripple.x - padRef.current.getBoundingClientRect().left - 40,\r\n                                    top: ripple.y - padRef.current.getBoundingClientRect().top - 40,\r\n                                    animation: 'ripple 600ms ease-out forwards'\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Instruction */}\r\n                    <p\r\n                        className=\"text-xs text-center text-[rgba(253,251,245,0.5)] mt-4\"\r\n                        style={{ fontFamily: 'var(--font-body)', fontStyle: 'italic', fontWeight: 500, letterSpacing: '0.01em' }}\r\n                    >\r\n                        Tap direction or swipe\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <style>{`\r\n        @keyframes ripple {\r\n          0% {\r\n            transform: scale(0);\r\n            opacity: 1;\r\n          }\r\n          100% {\r\n            transform: scale(3);\r\n            opacity: 0;\r\n          }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\RitualImageTest.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":58,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"e"},"fix":{"range":[3023,3024],"text":""},"desc":"Remove unused variable 'e'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Test page for ritual images\r\nimport React, { useState } from 'react';\r\nimport { LOWER_DAN_TIEN } from './data/rituals/grounding/lowerDanTien.js';\r\n\r\nexport function RitualImageTest() {\r\n    const [currentStep, setCurrentStep] = useState(0);\r\n    const ritual = LOWER_DAN_TIEN;\r\n    const step = ritual.steps[currentStep];\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#050508] text-white p-8\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <h1 className=\"text-3xl font-bold mb-2 tracking-wide\" style={{ fontFamily: 'var(--font-display)' }}>\r\n                        {ritual.icon} {ritual.name}\r\n                    </h1>\r\n                    <p className=\"text-sm text-[rgba(253,251,245,0.7)] font-medium\" style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em' }}>\r\n                        {ritual.tradition}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Step Navigation */}\r\n                <div className=\"flex justify-center gap-2 mb-8\">\r\n                    {ritual.steps.map((s, idx) => (\r\n                        <button\r\n                            key={s.id}\r\n                            onClick={() => setCurrentStep(idx)}\r\n                            className={`px-4 py-2 rounded-lg transition-all ${idx === currentStep\r\n                                ? 'bg-[var(--accent-primary)] text-[#050508]'\r\n                                : 'bg-[#0f0f1a] text-[rgba(253,251,245,0.7)] hover:bg-[#1a1a2e]'\r\n                                }`}\r\n                            style={{ fontFamily: 'var(--font-display)', fontSize: '0.875rem', fontWeight: 600, letterSpacing: '0.05em' }}\r\n                        >\r\n                            Step {idx + 1}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Current Step Display */}\r\n                <div className=\"bg-[#0f0f1a] rounded-2xl p-8 border border-[rgba(253,195,77,0.15)]\">\r\n                    {/* Step Title */}\r\n                    <h2 className=\"text-2xl mb-2 font-bold tracking-wide\" style={{ fontFamily: 'var(--font-display)', color: 'var(--accent-primary)' }}>\r\n                        {step.name}\r\n                    </h2>\r\n                    <p className=\"text-sm text-[rgba(253,251,245,0.5)] mb-6\">{step.duration}s ({Math.floor(step.duration / 60)} min)</p>\r\n\r\n                    {/* Image */}\r\n                    <div className=\"mb-6 rounded-xl overflow-hidden bg-black\">\r\n                        <img\r\n                            src={`/${step.image}`}\r\n                            alt={step.name}\r\n                            className=\"w-full h-auto\"\r\n                            onError={(e) => {\r\n                                e.target.style.border = '2px solid red';\r\n                                e.target.alt = `Image failed to load: /${step.image}`;\r\n                            }}\r\n                            onLoad={(e) => {\r\n                                console.log(`Γ£à Loaded: /${step.image}`);\r\n                            }}\r\n                        />\r\n                        <p className=\"text-xs text-center py-2 text-[rgba(253,251,245,0.4)]\">\r\n                            Path: /{step.image}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Instruction */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"text-sm uppercase tracking-wider mb-2\" style={{ fontFamily: 'var(--font-display)', fontWeight: 600, letterSpacing: 'var(--tracking-wide)', color: 'var(--accent-secondary)' }}>\r\n                            Instruction\r\n                        </h3>\r\n                        <p className=\"text-base leading-relaxed font-medium\" style={{ fontFamily: 'var(--font-body)', color: 'rgba(253,251,245,0.85)', letterSpacing: '0.01em' }}>\r\n                            {step.instruction}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Sensory Cues */}\r\n                    <div>\r\n                        <h3 className=\"text-sm uppercase tracking-wider mb-2\" style={{ fontFamily: 'var(--font-display)', fontWeight: 600, letterSpacing: 'var(--tracking-wide)', color: 'var(--accent-secondary)' }}>\r\n                            Sensory Cues\r\n                        </h3>\r\n                        <ul className=\"space-y-2\">\r\n                            {step.sensoryCues.map((cue, idx) => (\r\n                                <li key={idx} className=\"flex items-start gap-2\">\r\n                                    <span className=\"text-[var(--accent-primary)] mt-1\">ΓÇó</span>\r\n                                    <span className=\"text-sm leading-relaxed font-medium\" style={{ fontFamily: 'var(--font-body)', color: 'rgba(253,251,245,0.75)', letterSpacing: '0.01em' }}>\r\n                                        {cue}\r\n                                    </span>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Navigation Arrows */}\r\n                <div className=\"flex justify-between mt-6\">\r\n                    <button\r\n                        onClick={() => setCurrentStep(Math.max(0, currentStep - 1))}\r\n                        disabled={currentStep === 0}\r\n                        className=\"px-6 py-3 rounded-lg bg-[#0f0f1a] text-[rgba(253,251,245,0.7)] hover:bg-[#1a1a2e] disabled:opacity-30 disabled:cursor-not-allowed\"\r\n                        style={{ fontFamily: 'var(--font-display)', fontWeight: 600, letterSpacing: '0.05em' }}\r\n                    >\r\n                        ΓåÉ Previous\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setCurrentStep(Math.min(ritual.steps.length - 1, currentStep + 1))}\r\n                        disabled={currentStep === ritual.steps.length - 1}\r\n                        className=\"px-6 py-3 rounded-lg bg-[#0f0f1a] text-[rgba(253,251,245,0.7)] hover:bg-[#1a1a2e] disabled:opacity-30 disabled:cursor-not-allowed\"\r\n                        style={{ fontFamily: 'var(--font-display)', fontWeight: 600, letterSpacing: '0.05em' }}\r\n                    >\r\n                        Next ΓåÆ\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Debug Info */}\r\n                <div className=\"mt-8 p-4 bg-[#1a1a2e] rounded-lg text-xs\" style={{ fontFamily: 'JetBrains Mono, monospace' }}>\r\n                    <div className=\"text-[rgba(253,251,245,0.5)] mb-2\">Debug Info:</div>\r\n                    <div className=\"text-[rgba(253,251,245,0.7)]\">\r\n                        <div>Ritual ID: {ritual.id}</div>\r\n                        <div>Current Step: {currentStep + 1}/{ritual.steps.length}</div>\r\n                        <div>Step ID: {step.id}</div>\r\n                        <div>Image Path: /{step.image}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\RitualPortal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[924,931],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":130,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":130,"endColumn":55,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4722,6039],"text":"{ const preferences = loadPreferences();\r\n                const breathPattern = preferences.pattern || { inhale: 4, hold1: 4, exhale: 4, hold2: 4 };\r\n                return (\r\n                    <div className=\"flex flex-col items-center gap-2 w-full\">\r\n                        {/* Breathing Ring - Visual only, no FX */}\r\n                        <div className=\"scale-75\">\r\n                            <BreathingRing \r\n                                breathPattern={{\r\n                                    inhale: breathPattern.inhale,\r\n                                    holdTop: breathPattern.hold1,\r\n                                    exhale: breathPattern.exhale,\r\n                                    holdBottom: breathPattern.hold2\r\n                                }}\r\n                                fxPreset=\"none\"\r\n                                pathId={null}\r\n                                onTap={null}\r\n                                onCycleComplete={null}\r\n                            />\r\n                        </div>\r\n                        <p className=\"italic text-sm mt-4\" style={{ color: isLight ? 'rgba(0,0,0,0.6)' : 'rgba(255,255,255,0.6)' }}>\r\n                            Watch the smoke rise with each breath...\r\n                        </p>\r\n                    </div>\r\n                ); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":131,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":131,"endColumn":107,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4722,6039],"text":"{ const preferences = loadPreferences();\r\n                const breathPattern = preferences.pattern || { inhale: 4, hold1: 4, exhale: 4, hold2: 4 };\r\n                return (\r\n                    <div className=\"flex flex-col items-center gap-2 w-full\">\r\n                        {/* Breathing Ring - Visual only, no FX */}\r\n                        <div className=\"scale-75\">\r\n                            <BreathingRing \r\n                                breathPattern={{\r\n                                    inhale: breathPattern.inhale,\r\n                                    holdTop: breathPattern.hold1,\r\n                                    exhale: breathPattern.exhale,\r\n                                    holdBottom: breathPattern.hold2\r\n                                }}\r\n                                fxPreset=\"none\"\r\n                                pathId={null}\r\n                                onTap={null}\r\n                                onCycleComplete={null}\r\n                            />\r\n                        </div>\r\n                        <p className=\"italic text-sm mt-4\" style={{ color: isLight ? 'rgba(0,0,0,0.6)' : 'rgba(255,255,255,0.6)' }}>\r\n                            Watch the smoke rise with each breath...\r\n                        </p>\r\n                    </div>\r\n                ); }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useRitualStore } from '../state/ritualStore';\r\nimport { RitualStepContainer } from './ritual/RitualStepContainer';\r\nimport { RitualProgressBar } from './ritual/RitualProgressBar';\r\nimport { RitualAudioPrompt } from './ritual/RitualAudioPrompt';\r\nimport { InstructionalOverlay } from './ritual/InstructionalOverlay';\r\nimport { VisualMapDisplay } from './ritual/VisualMapDisplay';\r\nimport { MemorySelector } from './ritual/MemorySelector';\r\nimport { CameraCapture } from './ritual/CameraCapture';\r\nimport { ThoughtObservation } from './ritual/ThoughtObservation';\r\nimport { SummaryView } from './ritual/SummaryView';\r\nimport { BreathingRing } from './BreathingRing';\r\nimport { logRitualResult } from '../services/ritualService';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\nimport { loadPreferences } from '../state/practiceStore';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst BASE = import.meta.env.BASE_URL || '/';\r\n\r\nconst RITUAL_STEPS = [\r\n    {\r\n        id: 1,\r\n        title: \"Incense + Setup\",\r\n        background: `${BASE}assets/ritual/incense_bg_v1.jpg`,\r\n        audio: `${BASE}assets/audio/ritual_step_1.mp3`,\r\n        guide: {\r\n            image: `${BASE}assets/ritual/guide_lighting_incense.png`,\r\n            caption: \"Light your incense. Focus on the rising smoke as a symbolic offering of your attention.\"\r\n        }\r\n    },\r\n    {\r\n        id: 2,\r\n        title: \"Visual Map Review\",\r\n        background: `${BASE}assets/ritual/visual_map_v1.png`,\r\n        audio: `${BASE}assets/audio/ritual_step_2.mp3`,\r\n        guide: {\r\n            image: `${BASE}assets/ritual/guide_reviewing_map.png`,\r\n            caption: \"Gaze upon the emotional map. See your feelings as distinct nodes within this container.\"\r\n        }\r\n    },\r\n    {\r\n        id: 3,\r\n        title: \"Container Holding\",\r\n        background: `${BASE}assets/ritual/visual_map_v1.png`,\r\n        audio: `${BASE}assets/audio/ritual_step_3.mp3`,\r\n        guide: {\r\n            image: `${BASE}assets/ritual/guide_holding_container.png`,\r\n            caption: \"Imagine your hands gently cradling this container. Feel the weight and warmth of your awareness.\"\r\n        }\r\n    },\r\n    {\r\n        id: 4,\r\n        title: \"Random Select + Feel\",\r\n        background: `${BASE}assets/ritual/visual_map_v1.png`,\r\n        audio: `${BASE}assets/audio/ritual_step_4.mp3`,\r\n        guide: {\r\n            image: `${BASE}assets/ritual/guide_selecting_memory.png`,\r\n            caption: \"Allow a random memory to emerge. Witness it without judgment or entanglement.\"\r\n        }\r\n    },\r\n    {\r\n        id: 5,\r\n        title: \"3rd Person Photo\",\r\n        background: `${BASE}assets/ritual/incense_bg_v1.jpg`,\r\n        audio: `${BASE}assets/audio/ritual_step_5.mp3`,\r\n        guide: {\r\n            image: `${BASE}assets/ritual/guide_taking_photo.png`,\r\n            caption: \"Take a photo of yourself from a 3rd-person perspective. Observe the witness witnessing.\"\r\n        }\r\n    },\r\n    {\r\n        id: 6,\r\n        title: \"Transition to Journal\",\r\n        background: `${BASE}assets/ritual/journaling_bg_v1.jpg`,\r\n        audio: `${BASE}assets/audio/ritual_step_6.mp3`,\r\n        guide: null\r\n    },\r\n    {\r\n        id: 7,\r\n        title: \"Seal the Experience\",\r\n        background: `${BASE}assets/ritual/journaling_bg_v1.jpg`,\r\n        audio: null,\r\n        guide: null\r\n    }\r\n];\r\n\r\nexport function RitualPortal({ onComplete, onStop }) {\r\n    const { \r\n        currentStep, \r\n        startRitual, \r\n        advanceStep, \r\n        status, \r\n        resetRitual,\r\n        selectedMemory,\r\n        photoUrl\r\n    } = useRitualStore();\r\n    const [showGuide, setShowGuide] = useState(true);\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    useEffect(() => {\r\n        if (status === 'idle') {\r\n            startRitual();\r\n        }\r\n    }, [status, startRitual]);\r\n\r\n    const handleStepComplete = () => {\r\n        if (currentStep < 6) {\r\n            advanceStep();\r\n            setShowGuide(true);\r\n        } else if (currentStep === 6) {\r\n            // Log results BEFORE moving to the final summary step\r\n            const ritualState = useRitualStore.getState();\r\n            logRitualResult(ritualState);\r\n            advanceStep();\r\n            setShowGuide(false);\r\n        } else {\r\n            // Final completion from step 7\r\n            onComplete();\r\n        }\r\n    };\r\n\r\n    const currentStepConfig = RITUAL_STEPS[currentStep - 1];\r\n\r\n    if (!currentStepConfig) return null;\r\n\r\n    const renderStepContent = () => {\r\n        switch(currentStep) {\r\n            case 1:\r\n                const preferences = loadPreferences();\r\n                const breathPattern = preferences.pattern || { inhale: 4, hold1: 4, exhale: 4, hold2: 4 };\r\n                return (\r\n                    <div className=\"flex flex-col items-center gap-2 w-full\">\r\n                        {/* Breathing Ring - Visual only, no FX */}\r\n                        <div className=\"scale-75\">\r\n                            <BreathingRing \r\n                                breathPattern={{\r\n                                    inhale: breathPattern.inhale,\r\n                                    holdTop: breathPattern.hold1,\r\n                                    exhale: breathPattern.exhale,\r\n                                    holdBottom: breathPattern.hold2\r\n                                }}\r\n                                fxPreset=\"none\"\r\n                                pathId={null}\r\n                                onTap={null}\r\n                                onCycleComplete={null}\r\n                            />\r\n                        </div>\r\n                        <p className=\"italic text-sm mt-4\" style={{ color: isLight ? 'rgba(0,0,0,0.6)' : 'rgba(255,255,255,0.6)' }}>\r\n                            Watch the smoke rise with each breath...\r\n                        </p>\r\n                    </div>\r\n                );\r\n            case 2:\r\n            case 3:\r\n                return <VisualMapDisplay isPulsing={currentStep === 3} />;\r\n            case 4:\r\n                return <MemorySelector onSelect={() => {}} />;\r\n            case 5:\r\n                if (photoUrl) return <ThoughtObservation photoUrl={photoUrl} onComplete={handleStepComplete} />;\r\n                return <CameraCapture onCapture={() => {}} />;\r\n            case 6:\r\n                return (\r\n                    <div className=\"flex flex-col items-center gap-6\">\r\n                        <div className=\"h-48 w-48 rounded-full border flex items-center justify-center\"\r\n                            style={{\r\n                                borderColor: isLight ? 'rgba(160,120,85,0.2)' : 'rgba(212,184,122,0.2)',\r\n                                backgroundColor: isLight ? 'rgba(160,120,85,0.05)' : 'rgba(212,184,122,0.05)',\r\n                                boxShadow: isLight \r\n                                    ? '0 0 30px rgba(160,120,85,0.15)' \r\n                                    : '0 0 30px rgba(212,184,122,0.2)'\r\n                            }}\r\n                        >\r\n                            <span className=\"text-5xl\">Γ£ì∩╕Å</span>\r\n                        </div>\r\n                        <p className=\"font-display tracking-widest text-lg\"\r\n                            style={{ color: isLight ? '#A07855' : '#D4B87A' }}\r\n                        >\r\n                            THE SEAL IS PREPARED\r\n                        </p>\r\n                    </div>\r\n                );\r\n            case 7:\r\n                return (\r\n                    <SummaryView \r\n                        memory={selectedMemory} \r\n                        photoUrl={photoUrl} \r\n                        onComplete={onComplete} \r\n                    />\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex flex-col\"\r\n            style={{ backgroundColor: isLight ? '#F5F5F0' : '#000000' }}\r\n        >\r\n            <RitualStepContainer \r\n                backgroundUrl={currentStepConfig.background} \r\n                stepNumber={currentStep}\r\n            >\r\n                <div className=\"flex flex-col items-center gap-8 text-center w-full\">\r\n                    <motion.div\r\n                        key={`header-${currentStep}`}\r\n                        initial={{ opacity: 0, scale: 0.9 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        className=\"flex flex-col items-center gap-2\"\r\n                    >\r\n                        <h2 className=\"text-4xl font-display tracking-widest uppercase mb-1\"\r\n                            style={{ color: isLight ? '#A07855' : '#D4B87A' }}\r\n                        >\r\n                            {currentStepConfig.title}\r\n                        </h2>\r\n                        <div className=\"h-0.5 w-12 rounded-full\"\r\n                            style={{ backgroundColor: isLight ? 'rgba(160,120,85,0.3)' : 'rgba(212,184,122,0.3)' }}\r\n                        />\r\n                    </motion.div>\r\n\r\n                    <div className=\"w-full flex justify-center py-4\">\r\n                        {renderStepContent()}\r\n                    </div>\r\n\r\n                    {/* Step Navigation */}\r\n                    {((currentStep < 5 && (currentStep !== 4 || selectedMemory)) || (currentStep === 6)) && (\r\n                        <motion.button \r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            onClick={handleStepComplete}\r\n                            className=\"group relative px-12 py-4 rounded-full bg-transparent border transition-all active:scale-95 overflow-hidden\"\r\n                            style={{\r\n                                borderColor: isLight ? 'rgba(0,0,0,0.2)' : 'rgba(255,255,255,0.2)',\r\n                                color: isLight ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.9)'\r\n                            }}\r\n                            onMouseEnter={(e) => {\r\n                                e.currentTarget.style.borderColor = isLight ? '#A07855' : '#D4B87A';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                                e.currentTarget.style.borderColor = isLight ? 'rgba(0,0,0,0.2)' : 'rgba(255,255,255,0.2)';\r\n                            }}\r\n                        >\r\n                            <span className=\"relative z-10 text-sm font-black tracking-widest uppercase group-hover:transition-colors\"\r\n                                style={{\r\n                                    color: 'inherit'\r\n                                }}\r\n                            >\r\n                                {currentStep === 6 ? \"Begin Journaling\" : \"Proceed\"}\r\n                            </span>\r\n                            <div className=\"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                style={{ backgroundColor: isLight ? 'rgba(160,120,85,0.05)' : 'rgba(212,184,122,0.05)' }}\r\n                            />\r\n                        </motion.button>\r\n                    )}\r\n                </div>\r\n            </RitualStepContainer>\r\n\r\n            <div className=\"absolute inset-x-0 bottom-0 z-30 flex flex-col items-center pb-8 p-6\"\r\n                style={{\r\n                    background: isLight \r\n                        ? 'linear-gradient(to top, rgba(245,245,240,1), transparent)'\r\n                        : 'linear-gradient(to top, rgba(0,0,0,1), transparent)'\r\n                }}\r\n            >\r\n                <RitualProgressBar currentStep={currentStep} />\r\n                \r\n                <div className=\"flex gap-4\">\r\n                    <button \r\n                        onClick={() => setShowGuide(true)}\r\n                        className=\"text-[10px] uppercase font-bold tracking-widest transition-colors\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(0,0,0,0.3)' : 'rgba(255,255,255,0.3)'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            e.currentTarget.style.color = isLight ? 'rgba(0,0,0,0.6)' : 'rgba(255,255,255,0.6)';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            e.currentTarget.style.color = isLight ? 'rgba(0,0,0,0.3)' : 'rgba(255,255,255,0.3)';\r\n                        }}\r\n                    >\r\n                        Show Guidance\r\n                    </button>\r\n                    <span style={{ color: isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.1)' }}>|</span>\r\n                    <button \r\n                        onClick={() => {\r\n                            resetRitual();\r\n                            onStop();\r\n                        }}\r\n                        className=\"text-[10px] uppercase font-bold tracking-widest transition-colors\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(0,0,0,0.3)' : 'rgba(255,255,255,0.3)'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            e.currentTarget.style.color = isLight ? 'rgba(180,50,50,0.6)' : 'rgba(255, 100, 100, 0.6)';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            e.currentTarget.style.color = isLight ? 'rgba(0,0,0,0.3)' : 'rgba(255,255,255,0.3)';\r\n                        }}\r\n                    >\r\n                        Abandon Ritual\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <RitualAudioPrompt \r\n                audioUrl={currentStepConfig.audio} \r\n                onComplete={() => console.log(\"Audio finished\")} \r\n            />\r\n\r\n            <InstructionalOverlay \r\n                isOpen={showGuide && currentStepConfig.guide}\r\n                imageUrl={currentStepConfig.guide?.image}\r\n                caption={currentStepConfig.guide?.caption}\r\n                onDismiss={() => setShowGuide(false)}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\RitualProgress.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[28,67],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'totalDurationEstimated' is defined but never used.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"totalDurationEstimated"},"fix":{"range":[201,230],"text":""},"desc":"Remove unused variable 'totalDurationEstimated'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst RitualProgress = ({\r\n    currentStepIndex,\r\n    totalSteps,\r\n    stepTimeRemaining,\r\n    stepDuration,\r\n    totalTimeElapsed,\r\n    totalDurationEstimated\r\n}) => {\r\n    // Calculate percentage for current step\r\n    const stepProgress = Math.max(0, Math.min(100, ((stepDuration - stepTimeRemaining) / stepDuration) * 100));\r\n\r\n    // Format seconds to MM:SS\r\n    const formatTime = (seconds) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = Math.floor(seconds % 60);\r\n        return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-2xl px-6 pb-6 pt-2 flex flex-col gap-2 z-20\">\r\n            {/* Step Indicators */}\r\n            <div className=\"flex gap-1 w-full h-1.5 mb-2\">\r\n                {Array.from({ length: totalSteps }).map((_, idx) => {\r\n                    let status = 'pending'; // or 'active', 'completed'\r\n                    if (idx < currentStepIndex) status = 'completed';\r\n                    if (idx === currentStepIndex) status = 'active';\r\n\r\n                    return (\r\n                        <div\r\n                            key={idx}\r\n                            className=\"h-full flex-1 rounded-full overflow-hidden bg-white/10 relative\"\r\n                        >\r\n                            {/* Completed State */}\r\n                            {status === 'completed' && (\r\n                                <div className=\"absolute inset-0 bg-[var(--accent-primary)] opacity-50\" />\r\n                            )}\r\n\r\n                            {/* Active State - Animated Progress */}\r\n                            {status === 'active' && (\r\n                                <motion.div\r\n                                    className=\"absolute left-0 top-0 bottom-0 bg-[var(--accent-primary)]\"\r\n                                    style={{ width: `${stepProgress}%` }}\r\n                                    transition={{ duration: 0.1, ease: \"linear\" }} // Smooth updates\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Timer Display */}\r\n            <div className=\"flex justify-between items-center text-xs font-mono text-[var(--accent-muted)] opacity-80\">\r\n                <span>Step {currentStepIndex + 1}</span>\r\n                <span className=\"text-[var(--accent-primary)] font-bold text-sm\">\r\n                    {formatTime(stepTimeRemaining)}\r\n                </span>\r\n                <span>\r\n                    Total {formatTime(totalTimeElapsed)}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RitualProgress;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\RitualSelectionDeck.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\RitualSession.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[43,56],"text":""},"desc":"Remove unused variable 'useCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[83,90],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getRitualById' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"getRitualById"},"fix":{"range":[234,282],"text":""},"desc":"Remove unused variable 'getRitualById'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'useVideoStore' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"useVideoStore"},"fix":{"range":[284,336],"text":""},"desc":"Remove unused variable 'useVideoStore'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'startTimeRef' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":19,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"startTimeRef"},"fix":{"range":[943,977],"text":""},"desc":"Remove unused variable 'startTimeRef'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentStep'. Either include it or remove the dependency array.","line":31,"column":8,"nodeType":"ArrayExpression","endLine":31,"endColumn":48,"suggestions":[{"desc":"Update the dependencies array to be: [currentStepIndex, sessionState, ritual, currentStep]","fix":{"range":[1323,1363],"text":"[currentStepIndex, sessionState, ritual, currentStep]"}}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handleStepComplete` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  49 |                     if (newValue <= 0) {\n  50 |                         // Step finished\n> 51 |                         handleStepComplete();\n     |                         ^^^^^^^^^^^^^^^^^^ `handleStepComplete` accessed before it is declared\n  52 |                         return 0;\n  53 |                     }\n  54 |                     return newValue;\n\n  65 |     }, [sessionState, isPaused, currentStepIndex]); // Re-bind when step changes to reset logic if needed\n  66 |\n> 67 |     const handleStepComplete = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 68 |         if (currentStepIndex < totalSteps - 1) {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 69 |             setCurrentStepIndex(prev => prev + 1);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 70 |         } else {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |             setSessionState('completion');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 72 |         }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 73 |     };\n     | ^^^^^^^ `handleStepComplete` is declared here\n  74 |\n  75 |     // Controls\n  76 |     const togglePause = () => setIsPaused(prev => !prev);","line":51,"column":25,"nodeType":null,"endLine":51,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleStepComplete'. Either include it or remove the dependency array.","line":65,"column":8,"nodeType":"ArrayExpression","endLine":65,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [sessionState, isPaused, currentStepIndex, handleStepComplete]","fix":{"range":[2416,2458],"text":"[sessionState, isPaused, currentStepIndex, handleStepComplete]"}}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport RitualStepDisplay from './RitualStepDisplay';\r\nimport RitualProgress from './RitualProgress';\r\nimport { getRitualById } from '../data/rituals';\r\nimport { useVideoStore } from '../state/videoStore'; // For pausing background video if needed\r\nimport { Icon } from '../icons/Icon.jsx';\r\n\r\nconst RitualSession = ({ ritual, onComplete, onExit, isLight = false }) => {\r\n    // State\r\n    const [currentStepIndex, setCurrentStepIndex] = useState(0);\r\n    const [stepTimeRemaining, setStepTimeRemaining] = useState(0); // in seconds\r\n    const [totalTimeElapsed, setTotalTimeElapsed] = useState(0);\r\n    const [isPaused, setIsPaused] = useState(false);\r\n    const [sessionState, setSessionState] = useState('intro'); // intro, active, completion\r\n\r\n    // Refs for timer\r\n    const timerRef = useRef(null);\r\n    const startTimeRef = useRef(null);\r\n\r\n    // Context / Helpers\r\n    const currentStep = ritual.steps[currentStepIndex];\r\n    const totalSteps = ritual.steps.length;\r\n\r\n    // Initialize Step\r\n    useEffect(() => {\r\n        if (sessionState === 'active' && currentStep) {\r\n            setStepTimeRemaining(currentStep.duration);\r\n            setIsPaused(false);\r\n        }\r\n    }, [currentStepIndex, sessionState, ritual]);\r\n\r\n    // Timer Logic\r\n    useEffect(() => {\r\n        if (sessionState !== 'active' || isPaused) {\r\n            cancelAnimationFrame(timerRef.current);\r\n            return;\r\n        }\r\n\r\n        let lastTime = performance.now();\r\n\r\n        const tick = (time) => {\r\n            const deltaTime = (time - lastTime) / 1000;\r\n            lastTime = time;\r\n\r\n            if (sessionState === 'active' && !isPaused) {\r\n                setStepTimeRemaining(prev => {\r\n                    const newValue = prev - deltaTime;\r\n                    if (newValue <= 0) {\r\n                        // Step finished\r\n                        handleStepComplete();\r\n                        return 0;\r\n                    }\r\n                    return newValue;\r\n                });\r\n                setTotalTimeElapsed(prev => prev + deltaTime);\r\n            }\r\n\r\n            timerRef.current = requestAnimationFrame(tick);\r\n        };\r\n\r\n        timerRef.current = requestAnimationFrame(tick);\r\n\r\n        return () => cancelAnimationFrame(timerRef.current);\r\n    }, [sessionState, isPaused, currentStepIndex]); // Re-bind when step changes to reset logic if needed\r\n\r\n    const handleStepComplete = () => {\r\n        if (currentStepIndex < totalSteps - 1) {\r\n            setCurrentStepIndex(prev => prev + 1);\r\n        } else {\r\n            setSessionState('completion');\r\n        }\r\n    };\r\n\r\n    // Controls\r\n    const togglePause = () => setIsPaused(prev => !prev);\r\n\r\n    const nextStep = () => {\r\n        if (currentStepIndex < totalSteps - 1) {\r\n            setCurrentStepIndex(prev => prev + 1);\r\n        } else {\r\n            setSessionState('completion');\r\n        }\r\n    };\r\n\r\n    const prevStep = () => {\r\n        if (currentStepIndex > 0) {\r\n            setCurrentStepIndex(prev => prev - 1);\r\n        }\r\n    };\r\n\r\n    // Render Intro\r\n    if (sessionState === 'intro') {\r\n        return (\r\n            <div className={`w-full h-full flex flex-col items-center justify-center p-8 text-center ${isLight ? 'bg-white/90' : 'bg-black/80'} backdrop-blur-xl relative z-50`}>\r\n                <div className=\"max-w-2xl flex flex-col gap-6 animate-in fade-in zoom-in duration-500\">\r\n                    <div className=\"flex items-center justify-center text-6xl mb-4\" style={{ color: 'var(--accent-color)' }}>\r\n                        {ritual.iconName ? <Icon name={ritual.iconName} size={64} /> : ritual.icon}\r\n                    </div>\r\n                    <h1 className=\"text-4xl font-light text-[var(--accent-primary)] font-h1\">{ritual.name}</h1>\r\n                    <div className=\"text-[var(--accent-muted)] font-mono text-sm uppercase tracking-widest\">\r\n                        {ritual.tradition} ΓÇó {ritual.duration.min}-{ritual.duration.max} Minutes\r\n                    </div>\r\n                    <p className=\"text-lg text-white/80 leading-relaxed font-body italic border-l-2 border-[var(--accent-secondary)] pl-6 text-left my-4\">\r\n                        {ritual.history}\r\n                    </p>\r\n                    <p className=\"text-white/60 text-sm\">{ritual.description}</p>\r\n\r\n                    <button\r\n                        onClick={() => setSessionState('active')}\r\n                        className={`mt-8 px-12 py-4 ${isLight ? 'bg-[#5A4D3C] text-[#FDFBF5]' : 'bg-[var(--accent-primary)] text-black'} font-bold tracking-widest hover:opacity-90 transition-all rounded-full`}\r\n                    >\r\n                        BEGIN RITUAL\r\n                    </button>\r\n\r\n                    <button onClick={onExit} className=\"text-white/40 hover:text-white text-sm mt-4\">\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Render Completion\r\n    if (sessionState === 'completion') {\r\n        return (\r\n            <div className={`w-full h-full flex flex-col items-center justify-center p-8 text-center ${isLight ? 'bg-white/90' : 'bg-black/80'} backdrop-blur-xl relative z-50`}>\r\n                <div className=\"max-w-lg flex flex-col gap-6 animate-in fade-in duration-700\">\r\n                    <h2 className=\"text-3xl text-[var(--accent-primary)] font-h1\">Ritual Complete</h2>\r\n\r\n                    <div className=\"bg-white/5 border border-white/10 rounded-xl p-6 text-left\">\r\n                        <h3 className=\"text-[var(--accent-secondary)] text-sm uppercase tracking-widest mb-4\">Observation</h3>\r\n                        <ul className=\"space-y-3\">\r\n                            {ritual.completion.expectedOutput.map((item, idx) => (\r\n                                <li key={idx} className=\"flex items-start gap-3 text-white/80 text-sm\">\r\n                                    <span className=\"text-[var(--accent-primary)]\">Γ£ô</span>\r\n                                    {item}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <p className=\"text-white/60 italic\">\r\n                        \"{ritual.completion.closingInstruction}\"\r\n                    </p>\r\n\r\n                    <button\r\n                        onClick={onComplete}\r\n                        className=\"mt-8 px-12 py-3 border border-[var(--accent-primary)] text-[var(--accent-primary)] hover:bg-[var(--accent-primary)] hover:text-black transition-all rounded-full tracking-widest\"\r\n                    >\r\n                        COMPLETE\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Render Active Session\r\n    return (\r\n        <div className={`w-full h-full flex flex-col relative ${isLight ? 'bg-white/60' : 'bg-black/80'} backdrop-blur-sm max-w-4xl mx-auto overflow-hidden`}>\r\n            {/* Top Bar Controls */}\r\n            <div className=\"absolute top-2 right-2 z-50 flex gap-4\">\r\n                <button\r\n                    onClick={onExit}\r\n                    className=\"px-3 py-1.5 text-xs uppercase tracking-wider text-white/50 hover:text-white hover:bg-white/10 transition-all rounded-lg border border-white/10\"\r\n                >\r\n                    Exit\r\n                </button>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"flex-1 overflow-visible relative\" onClick={togglePause}>\r\n                <RitualStepDisplay\r\n                    step={currentStep}\r\n                    stepIndex={currentStepIndex}\r\n                    totalSteps={totalSteps}\r\n                    isPaused={isPaused}\r\n                    isLight={isLight}\r\n                />\r\n            </div>\r\n\r\n            {/* Bottom Controls & Progress */}\r\n            <div className=\"w-full bg-gradient-to-t from-black to-transparent z-40 pb-4\">\r\n                {/* Navigation Controls (Visible on hover or pause? Or always?) - Let's keep them handy */}\r\n                <div className=\"flex justify-center items-center gap-8 mb-4 opacity-0 hover:opacity-100 transition-opacity duration-300\">\r\n                    <button onClick={prevStep} className=\"p-2 text-white/50 hover:text-white\">\r\n                        ΓåÉ Prev\r\n                    </button>\r\n                    <button onClick={togglePause} className=\"w-12 h-12 flex items-center justify-center rounded-full border border-white/20 text-white/80 hover:bg-white/10\">\r\n                        {isPaused ? 'Γû╢' : 'ΓÅ╕'}\r\n                    </button>\r\n                    <button onClick={nextStep} className=\"p-2 text-white/50 hover:text-white\">\r\n                        Next ΓåÆ\r\n                    </button>\r\n                </div>\r\n\r\n                <RitualProgress\r\n                    currentStepIndex={currentStepIndex}\r\n                    totalSteps={totalSteps}\r\n                    stepTimeRemaining={stepTimeRemaining}\r\n                    stepDuration={currentStep.duration}\r\n                    totalTimeElapsed={totalTimeElapsed}\r\n                    totalDurationEstimated={(ritual.duration.min + ritual.duration.max) * 30} // rough est\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RitualSession;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\RitualStepDisplay.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[16,25],"text":""},"desc":"Remove unused variable 'useState'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[24,35],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[62,69],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst RitualStepDisplay = ({ step, stepIndex, totalSteps, isPaused, isLight = false }) => {\r\n    // Construct simplified image path that works with the public folder structure\r\n    // If the step provides a full path like 'rituals/standing-meditation/step-1.png', use it\r\n    // Otherwise fallback or handle appropriately. \r\n    // Using import.meta.env.BASE_URL is critical for GitHub Pages.\r\n\r\n    const imagePath = step.image\r\n        ? `${import.meta.env.BASE_URL}${step.image}`\r\n        : null;\r\n\r\n    return (\r\n        <div className=\"w-full h-full flex flex-col md:flex-row gap-4 p-4 relative overflow-visible\">\r\n            {/* Image Section - Left/Top */}\r\n            <div className=\"flex-1 flex items-center justify-center relative min-h-[40vh] md:min-h-full\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {imagePath && (\r\n                        <motion.img\r\n                            key={step.id}\r\n                            src={imagePath}\r\n                            alt={step.name}\r\n                            className=\"w-full h-full object-contain rounded-xl\"\r\n                            style={{\r\n                                maskImage: isLight ? 'radial-gradient(circle at center, black 70%, transparent 100%)' : 'none',\r\n                                WebkitMaskImage: isLight ? 'radial-gradient(circle at center, black 70%, transparent 100%)' : 'none',\r\n                            }}\r\n                            initial={{ opacity: 0, scale: 0.95, filter: 'blur(10px)' }}\r\n                            animate={{ opacity: 1, scale: 1, filter: 'blur(0px)' }}\r\n                            exit={{ opacity: 0, scale: 1.05, filter: 'blur(10px)' }}\r\n                            transition={{ duration: 0.8, ease: \"easeOut\" }}\r\n                        />\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Pause Overlay Indicator */}\r\n                {isPaused && (\r\n                    <div className=\"absolute top-4 right-4 bg-black/60 px-3 py-1 rounded-full border border-white/20 backdrop-blur-md z-20\">\r\n                        <span className=\"text-xs font-mono text-white/70\">PAUSED</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Instructions Section - Right/Bottom */}\r\n            <div className={`flex-1 flex flex-col gap-4 ${isLight ? 'bg-white/40' : 'bg-black/60'} backdrop-blur-md p-6 rounded-2xl border ${isLight ? 'border-[#5A4D3C]/10' : 'border-white/10'} shadow-xl md:min-w-[400px] max-h-[60vh] md:max-h-full overflow-y-auto`}>\r\n                {/* Header */}\r\n                <div className={`flex justify-between items-baseline border-b ${isLight ? 'border-[#5A4D3C]/10' : 'border-white/10'} pb-3`}>\r\n                    <h3 className=\"text-2xl font-light text-[var(--accent-primary)] font-h1\">\r\n                        {step.name}\r\n                    </h3>\r\n                    <span className={`text-sm ${isLight ? 'text-[#5A4D3C]/60' : 'text-[var(--accent-muted)]'} font-mono`}>\r\n                        Step {stepIndex + 1} / {totalSteps}\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Main Instruction */}\r\n                <div className=\"space-y-4\">\r\n                    <p className={`text-base ${isLight ? 'text-[#3D3425]' : 'text-white/90'} leading-relaxed font-body`}>\r\n                        {step.instruction}\r\n                    </p>\r\n\r\n                    {/* Sensory Cues */}\r\n                    {step.sensoryCues && step.sensoryCues.length > 0 && (\r\n                        <div className={`space-y-3 pt-4 border-t ${isLight ? 'border-[#5A4D3C]/10' : 'border-white/10'}`}>\r\n                            <span className=\"text-xs uppercase tracking-widest text-[var(--accent-secondary)] font-mono opacity-80\">\r\n                                Sensory Cues\r\n                            </span>\r\n                            <ul className=\"space-y-2\">\r\n                                {step.sensoryCues.map((cue, idx) => (\r\n                                    <motion.li\r\n                                        key={idx}\r\n                                        initial={{ opacity: 0, x: -10 }}\r\n                                        animate={{ opacity: 1, x: 0 }}\r\n                                        transition={{ delay: idx * 0.15 + 0.3 }}\r\n                                        className={`text-sm ${isLight ? 'text-[#5A4D3C]/75' : 'text-white/75'} flex items-start gap-2`}\r\n                                    >\r\n                                        <span className=\"text-[var(--accent-primary)] mt-0.5\">ΓÇó</span>\r\n                                        <span>{cue}</span>\r\n                                    </motion.li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RitualStepDisplay;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SacredTimeSlider.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":54,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleInteraction'. Either include it or remove the dependency array.","line":100,"column":8,"nodeType":"ArrayExpression","endLine":100,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [isDragging, value, options, handleInteraction]","fix":{"range":[3557,3585],"text":"[isDragging, value, options, handleInteraction]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SacredTimeSlider.jsx\r\nimport React, { useRef, useState, useEffect } from 'react';\r\n\r\n// Geometric glyph paths (normalized to 100x100 viewbox)\r\nconst GLYPHS = {\r\n    triangle: \"M 50 15 L 85 80 L 15 80 Z\",\r\n    square: \"M 20 20 H 80 V 80 H 20 Z\",\r\n    pentagon: \"M 50 10 L 90 40 L 75 90 L 25 90 L 10 40 Z\",\r\n    hexagon: \"M 50 10 L 85 30 L 85 70 L 50 90 L 15 70 L 15 30 Z\",\r\n    circle: \"M 50 10 A 40 40 0 1 1 49.99 10\"\r\n};\r\n\r\nconst KEY_DURATIONS = {\r\n    5: 'triangle',\r\n    10: 'square',\r\n    20: 'pentagon',\r\n    30: 'hexagon',\r\n    60: 'circle'\r\n};\r\n\r\nexport function SacredTimeSlider({ value, onChange, options }) {\r\n    const containerRef = useRef(null);\r\n    const trackRef = useRef(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [pulseActive, setPulseActive] = useState(false);\r\n    const audioContextRef = useRef(null);\r\n\r\n    const currentIndex = options.indexOf(value);\r\n\r\n    // Calculate thumb position as percentage (0-100)\r\n    const thumbPercent = options.length > 1 ? (currentIndex / (options.length - 1)) * 100 : 0;\r\n\r\n    // Play subtle click sound\r\n    const playClick = () => {\r\n        try {\r\n            if (!audioContextRef.current) {\r\n                audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\r\n            }\r\n            const ctx = audioContextRef.current;\r\n            const oscillator = ctx.createOscillator();\r\n            const gainNode = ctx.createGain();\r\n\r\n            oscillator.connect(gainNode);\r\n            gainNode.connect(ctx.destination);\r\n\r\n            oscillator.frequency.setValueAtTime(800, ctx.currentTime);\r\n            oscillator.frequency.exponentialRampToValueAtTime(400, ctx.currentTime + 0.05);\r\n\r\n            gainNode.gain.setValueAtTime(0.08, ctx.currentTime);\r\n            gainNode.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);\r\n\r\n            oscillator.start(ctx.currentTime);\r\n            oscillator.stop(ctx.currentTime + 0.05);\r\n        } catch (e) {\r\n            // Audio not available, silent fail\r\n        }\r\n    };\r\n\r\n    // Trigger pulse animation\r\n    const triggerPulse = () => {\r\n        setPulseActive(true);\r\n        setTimeout(() => setPulseActive(false), 200);\r\n    };\r\n\r\n    const handleInteraction = (clientX) => {\r\n        if (!trackRef.current) return;\r\n        const rect = trackRef.current.getBoundingClientRect();\r\n        const x = Math.max(0, Math.min(clientX - rect.left, rect.width));\r\n        const percent = x / rect.width;\r\n        const rawIndex = percent * (options.length - 1);\r\n        const index = Math.round(rawIndex);\r\n        const clampedIndex = Math.max(0, Math.min(index, options.length - 1));\r\n        const newValue = options[clampedIndex];\r\n        if (newValue !== value) {\r\n            playClick();\r\n            triggerPulse();\r\n            onChange(newValue);\r\n        }\r\n    };\r\n\r\n    const handleMouseDown = (e) => {\r\n        setIsDragging(true);\r\n        handleInteraction(e.clientX);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const handleMouseMove = (e) => {\r\n            if (isDragging) handleInteraction(e.clientX);\r\n        };\r\n        const handleMouseUp = () => setIsDragging(false);\r\n\r\n        if (isDragging) {\r\n            window.addEventListener('mousemove', handleMouseMove);\r\n            window.addEventListener('mouseup', handleMouseUp);\r\n        }\r\n        return () => {\r\n            window.removeEventListener('mousemove', handleMouseMove);\r\n            window.removeEventListener('mouseup', handleMouseUp);\r\n        };\r\n    }, [isDragging, value, options]);\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            onMouseDown={handleMouseDown}\r\n            className=\"relative w-full select-none\"\r\n            style={{\r\n                height: '70px',\r\n                cursor: 'pointer',\r\n                touchAction: 'none',\r\n                paddingLeft: '16px',\r\n                paddingRight: '16px'\r\n            }}\r\n        >\r\n            {/* Track container - this is what we measure for positioning */}\r\n            <div\r\n                ref={trackRef}\r\n                className=\"absolute\"\r\n                style={{\r\n                    left: '16px',\r\n                    right: '16px',\r\n                    top: '20px',\r\n                    height: '30px'\r\n                }}\r\n            >\r\n                {/* Track background line */}\r\n                <div\r\n                    className=\"absolute left-0 right-0 h-1 rounded-full\"\r\n                    style={{\r\n                        top: '50%',\r\n                        transform: 'translateY(-50%)',\r\n                        background: 'rgba(0,0,0,0.4)',\r\n                        boxShadow: 'inset 0 1px 3px rgba(0,0,0,0.6)',\r\n                        border: '1px solid rgba(255,255,255,0.05)'\r\n                    }}\r\n                />\r\n\r\n                {/* Active fill line */}\r\n                <div\r\n                    className=\"absolute left-0 h-0.5 rounded-full\"\r\n                    style={{\r\n                        top: '50%',\r\n                        transform: 'translateY(-50%)',\r\n                        width: `${thumbPercent}%`,\r\n                        background: 'linear-gradient(90deg, var(--accent-color), white)',\r\n                        boxShadow: '0 0 8px var(--accent-30)',\r\n                        opacity: 0.7\r\n                    }}\r\n                />\r\n\r\n                {/* Tick marks and labels */}\r\n                {options.map((opt, i) => {\r\n                    const percent = options.length > 1 ? (i / (options.length - 1)) * 100 : 0;\r\n                    const isKey = KEY_DURATIONS[opt];\r\n                    const isActive = opt <= value;\r\n                    const isSelected = opt === value;\r\n\r\n                    return (\r\n                        <div\r\n                            key={opt}\r\n                            className=\"absolute flex flex-col items-center\"\r\n                            style={{\r\n                                left: `${percent}%`,\r\n                                top: '50%',\r\n                                transform: 'translate(-50%, -50%)'\r\n                            }}\r\n                        >\r\n                            {/* Glyph or dot */}\r\n                            {isKey ? (\r\n                                <svg\r\n                                    viewBox=\"0 0 100 100\"\r\n                                    style={{\r\n                                        width: '14px',\r\n                                        height: '14px',\r\n                                        opacity: isActive ? 0.8 : 0.25,\r\n                                        filter: isSelected ? 'drop-shadow(0 0 6px var(--accent-color))' : 'none'\r\n                                    }}\r\n                                >\r\n                                    <path\r\n                                        d={GLYPHS[isKey]}\r\n                                        fill={isActive ? 'var(--accent-40)' : 'rgba(255,255,255,0.1)'}\r\n                                        stroke={isActive ? 'var(--accent-color)' : 'rgba(255,255,255,0.2)'}\r\n                                        strokeWidth=\"4\"\r\n                                    />\r\n                                </svg>\r\n                            ) : (\r\n                                <div\r\n                                    className=\"rounded-full\"\r\n                                    style={{\r\n                                        width: '4px',\r\n                                        height: '4px',\r\n                                        background: isActive ? 'var(--accent-color)' : 'rgba(255,255,255,0.15)'\r\n                                    }}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n\r\n                {/* Thumb */}\r\n                <div\r\n                    className=\"absolute pointer-events-none transition-transform duration-100\"\r\n                    style={{\r\n                        left: `${thumbPercent}%`,\r\n                        top: '50%',\r\n                        transform: `translate(-50%, -50%) scale(${pulseActive ? 1.3 : 1})`,\r\n                        width: '28px',\r\n                        height: '28px',\r\n                        zIndex: 10\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"w-full h-full rounded-full transition-all duration-100\"\r\n                        style={{\r\n                            background: 'radial-gradient(circle, rgba(255,255,255,0.9) 0%, var(--accent-color) 50%, transparent 70%)',\r\n                            boxShadow: pulseActive\r\n                                ? '0 0 28px var(--accent-color), 0 0 48px var(--accent-50), 0 0 64px var(--accent-30)'\r\n                                : '0 0 16px var(--accent-50), 0 0 32px var(--accent-30)',\r\n                            border: '2px solid var(--accent-color)'\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Labels row - show ALL durations */}\r\n            <div\r\n                className=\"absolute flex justify-between\"\r\n                style={{\r\n                    left: '16px',\r\n                    right: '16px',\r\n                    top: '52px'\r\n                }}\r\n            >\r\n                {options.map((opt) => {\r\n                    const i = options.indexOf(opt);\r\n                    const percent = options.length > 1 ? (i / (options.length - 1)) * 100 : 0;\r\n                    const isSelected = opt === value;\r\n                    const isKey = KEY_DURATIONS[opt];\r\n\r\n                    return (\r\n                        <div\r\n                            key={opt}\r\n                            className=\"absolute font-semibold tracking-widest\"\r\n                            style={{\r\n                                fontFamily: 'var(--font-display)',\r\n                                left: `${percent}%`,\r\n                                transform: 'translateX(-50%)',\r\n                                fontSize: isKey ? '10px' : '8px',\r\n                                color: isSelected ? 'var(--accent-color)' : 'rgba(255,255,255,0.35)',\r\n                                fontWeight: isSelected ? '600' : '400',\r\n                                textShadow: isSelected ? '0 0 8px var(--accent-20)' : 'none'\r\n                            }}\r\n                        >\r\n                            {opt}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SakshiVisual.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  34 |     useEffect(() => {\n  35 |         if (elapsedSeconds > 0 && elapsedSeconds - lastBellTime.current >= bellInterval) {\n> 36 |             setShowBell(true);\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  37 |             lastBellTime.current = elapsedSeconds;\n  38 |\n  39 |             const timer = setTimeout(() => setShowBell(false), 2000);","line":36,"column":13,"nodeType":null,"endLine":36,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SakshiVisual.jsx\r\n// Sakshi (Witness) visualization using void image asset\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nexport function SakshiVisual({ elapsedSeconds = 0, bellInterval = 150 }) {\r\n    const [breathPhase, setBreathPhase] = useState(0);\r\n    const [showBell, setShowBell] = useState(false);\r\n    const animationRef = useRef(null);\r\n    const lastBellTime = useRef(0);\r\n\r\n    // Ambient breathing animation\r\n    useEffect(() => {\r\n        let startTime = performance.now();\r\n        const breathDuration = 8000; // 8 second breath cycle\r\n\r\n        const animate = (now) => {\r\n            const elapsed = now - startTime;\r\n            const cycle = (elapsed % breathDuration) / breathDuration;\r\n            const phase = (Math.sin(cycle * Math.PI * 2 - Math.PI / 2) + 1) / 2;\r\n            setBreathPhase(phase);\r\n            animationRef.current = requestAnimationFrame(animate);\r\n        };\r\n\r\n        animationRef.current = requestAnimationFrame(animate);\r\n        return () => {\r\n            if (animationRef.current) {\r\n                cancelAnimationFrame(animationRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // Periodic bell flash\r\n    useEffect(() => {\r\n        if (elapsedSeconds > 0 && elapsedSeconds - lastBellTime.current >= bellInterval) {\r\n            setShowBell(true);\r\n            lastBellTime.current = elapsedSeconds;\r\n\r\n            const timer = setTimeout(() => setShowBell(false), 2000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [elapsedSeconds, bellInterval]);\r\n\r\n    const imageOpacity = 0.7 + breathPhase * 0.2;\r\n    const glowIntensity = 20 + breathPhase * 15;\r\n\r\n    return (\r\n        <div\r\n            className=\"relative w-full h-64 flex items-center justify-center overflow-hidden rounded-2xl\"\r\n            style={{\r\n                background: 'radial-gradient(ellipse at center, rgba(15,15,26,1) 0%, rgba(5,5,8,1) 100%)',\r\n            }}\r\n        >\r\n            {/* Sakshi void image */}\r\n            <img\r\n                src={`${import.meta.env.BASE_URL}sakshi-void.png`}\r\n                alt=\"Witness\"\r\n                className=\"w-full h-full object-cover transition-all duration-1000\"\r\n                style={{\r\n                    opacity: imageOpacity,\r\n                    filter: `drop-shadow(0 0 ${glowIntensity}px var(--accent-20))`,\r\n                }}\r\n            />\r\n\r\n            {/* Bell flash overlay */}\r\n            {showBell && (\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none\"\r\n                    style={{\r\n                        background: 'radial-gradient(circle, rgba(253,251,245,0.1) 0%, transparent 50%)',\r\n                        animation: 'bellFlash 2s ease-out forwards',\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            <style>{`\r\n                @keyframes bellFlash {\r\n                    0% { opacity: 0; }\r\n                    10% { opacity: 1; }\r\n                    100% { opacity: 0; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SensoryConfig.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":8,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":8,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":18,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[550,575],"text":""},"desc":"Remove unused variable 'theme'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SensoryConfig.jsx\r\n// Configuration panel for Sensory practice mode\r\n// Fluid slider for Body Scan vs Sakshi\r\nimport React from 'react';\r\nimport { useTheme } from '../context/ThemeContext.jsx';\r\n\r\n// Sensory practice types\r\nexport const SENSORY_TYPES = [\r\n    { id: 'bodyScan', label: 'Body Scan', description: 'Progressive body awareness' },\r\n    { id: 'sakshi', label: 'Sakshi', description: 'Witness consciousness' },\r\n];\r\n\r\nexport function SensoryConfig({\r\n    sensoryType,\r\n    setSensoryType,\r\n    isLight = false,\r\n}) {\r\n    const theme = useTheme();\r\n    const isSakshi = sensoryType === 'sakshi';\r\n\r\n    return (\r\n        <div className=\"sensory-config mb-6\">\r\n            <div\r\n                className=\"mb-3\"\r\n                style={{\r\n                    fontFamily: \"var(--font-display)\",\r\n                    fontSize: \"9px\",\r\n                    fontWeight: 600,\r\n                    letterSpacing: \"var(--tracking-mythic)\",\r\n                    textTransform: \"uppercase\",\r\n                    color: \"var(--text-muted)\",\r\n                    textAlign: \"center\"\r\n                }}\r\n            >\r\n                Sensory Focus\r\n            </div>\r\n\r\n            {/* Fluid Slider */}\r\n            <div\r\n                className=\"relative rounded-full p-1 transition-all duration-300\"\r\n                style={{\r\n                    background: isLight ? 'rgba(60,50,35,0.05)' : 'rgba(0,0,0,0.3)',\r\n                    border: `1px solid ${isLight ? 'var(--light-border)' : 'var(--accent-10)'}`,\r\n                }}\r\n            >\r\n                {/* Sliding indicator with surface tension fill */}\r\n                <div\r\n                    className=\"absolute top-1 bottom-1 rounded-full\"\r\n                    style={{\r\n                        left: isSakshi ? '50%' : '0.25rem',\r\n                        right: isSakshi ? '0.25rem' : '50%',\r\n                        background: isLight\r\n                            ? 'linear-gradient(135deg, var(--accent-color) 0%, var(--accent-secondary) 100%)'\r\n                            : 'var(--accent-color)',\r\n                        boxShadow: isLight\r\n                            ? 'inset 1px 1px 0 rgba(255,255,255,0.4), 0 1px 4px var(--light-shadow-tint)'\r\n                            : '0 0 15px var(--accent-10)',\r\n                        opacity: 1,\r\n                        // Surface tension filling - ink soaking into paper\r\n                        transition: 'left 1200ms cubic-bezier(0.19, 1, 0.22, 1), right 1200ms cubic-bezier(0.19, 1, 0.22, 1), background 1200ms ease-in-out',\r\n                    }}\r\n                />\r\n\r\n                {/* Buttons */}\r\n                <div className=\"relative z-10 grid grid-cols-2 gap-0\">\r\n                    {SENSORY_TYPES.map((type) => {\r\n                        const isActive = sensoryType === type.id;\r\n                        return (\r\n                            <button\r\n                                key={type.id}\r\n                                onClick={() => setSensoryType(type.id)}\r\n                                className=\"rounded-full px-4 py-3 transition-all duration-300 text-center flex flex-col items-center gap-1\"\r\n                                style={{\r\n                                    fontFamily: \"var(--font-display)\",\r\n                                    fontSize: \"11px\",\r\n                                    fontWeight: 600,\r\n                                    letterSpacing: \"var(--tracking-wide)\",\r\n                                    background: 'transparent',\r\n                                }}\r\n                            >\r\n                                <span\r\n                                    className=\"transition-all duration-500\"\r\n                                    style={{\r\n                                        color: isActive\r\n                                            ? (isLight ? 'var(--light-bg-base)' : '#050508')\r\n                                            : 'var(--text-secondary)',\r\n                                        fontWeight: isActive ? 600 : 500,\r\n                                        // Inactive state recedes without implying inferiority\r\n                                        opacity: isActive ? 1 : (isLight ? 0.65 : 0.5),\r\n                                    }}\r\n                                >\r\n                                    {type.label}\r\n                                </span>\r\n                                <span\r\n                                    className=\"transition-all duration-500\"\r\n                                    style={{\r\n                                        fontSize: \"8px\",\r\n                                        color: isActive\r\n                                            ? (isLight ? 'rgba(255,255,255,0.85)' : 'rgba(0,0,0,0.6)')\r\n                                            : 'var(--text-muted)',\r\n                                        opacity: isActive ? 1 : 0.5,\r\n                                    }}\r\n                                >\r\n                                    {type.description}\r\n                                </span>\r\n                            </button>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SensorySession.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setMode' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":27,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"setMode"},"fix":{"range":[1039,1048],"text":""},"desc":"Remove unused variable 'setMode'."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`performance.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  31 |\n  32 |     // Timer Refs\n> 33 |     const startTimeRef = useRef(performance.now());\n     |                                 ^^^^^^^^^^^^^^^^^ Cannot call impure function\n  34 |     const intervalRef = useRef(null);\n  35 |\n  36 |     // Scroll Refs","line":33,"column":33,"nodeType":null,"endLine":33,"endColumn":50},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":214,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":214,"endColumn":82,"suggestions":[{"messageId":"addBrackets","fix":{"range":[8637,9129],"text":"{ const activeScan = BODY_SCANS[selectedScanId] || BODY_SCANS.full;\r\n                return (\r\n                    <BodyScanVisual\r\n                        elapsedSeconds={elapsedSeconds}\r\n                        activePointId={currentPointId}\r\n                        scanPoints={activeScan.points}\r\n                        scanPrompts={activeScan.prompts}\r\n                        image={activeScan.image}\r\n                        isLight={isLight}\r\n                    />\r\n                ); }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SensorySession.jsx\r\n// Main container for all sensory meditation practices\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { PromptDisplay } from './PromptDisplay.jsx';\r\nimport { SakshiVisual } from './SakshiVisual.jsx';\r\nimport { BodyScanVisual } from './BodyScanVisual.jsx';\r\nimport { SENSORY_TYPES } from '../data/sensoryTypes.js';\r\nimport { SAKSHI_PROMPTS } from '../data/sakshiPrompts.js';\r\nimport { BODY_SCANS, getAllBodyScans } from '../data/bodyScanPrompts.js';\r\nimport { getAllRituals, getRitualById } from '../data/rituals/index.js';\r\nimport RitualSession from './RitualSession.jsx';\r\nimport { Icon } from '../icons/Icon.jsx';\r\n\r\n// DEV MODE - flip to false when shipping\r\nconst DEV_PROMPT_PREVIEW = true;\r\n\r\nexport function SensorySession({\r\n    sensoryType,\r\n    duration, // in minutes\r\n    onStop,\r\n    onTimeUpdate,\r\n    isLight = false,\r\n}) {\r\n    const [elapsedSeconds, setElapsedSeconds] = useState(0);\r\n    const [currentPrompt, setCurrentPrompt] = useState('');\r\n    const [mode, setMode] = useState('noting'); // unused, kept for future\r\n    const [selectedRitualId, setSelectedRitualId] = useState('standingMeditation'); // for bhakti default\r\n    const [selectedScanId, setSelectedScanId] = useState('full'); // for bodyScan localized scans\r\n    const [devPromptIndex, setDevPromptIndex] = useState(0); // DEV: manual prompt navigation\r\n\r\n    // Timer Refs\r\n    const startTimeRef = useRef(performance.now());\r\n    const intervalRef = useRef(null);\r\n\r\n    // Scroll Refs\r\n    const scrollContainerRef = useRef(null);\r\n    const isDraggingRef = useRef(false);\r\n    const dragStartXRef = useRef(0);\r\n    const scrollStartRef = useRef(0);\r\n\r\n    const config = SENSORY_TYPES[sensoryType];\r\n    const totalSeconds = duration * 60;\r\n\r\n    // Fetch available rituals if in bhakti mode\r\n    const availableRituals = sensoryType === 'bhakti' ? getAllRituals() : [];\r\n\r\n    // Get all prompts for current practice/mode (Legacy/Standard Sensory)\r\n    const getAllPrompts = () => {\r\n        switch (sensoryType) {\r\n            case 'sakshi':\r\n                return SAKSHI_PROMPTS;\r\n            case 'bodyScan':\r\n                return BODY_SCANS[selectedScanId]?.prompts || BODY_SCANS.full.prompts;\r\n            default:\r\n                return [];\r\n        }\r\n    };\r\n\r\n    const allPrompts = getAllPrompts();\r\n\r\n    // Timer (only runs when not in dev preview mode AND NOT in bhakti mode)\r\n    useEffect(() => {\r\n        // Bhakti rituals manage their own timer in RitualSession\r\n        if (sensoryType === 'bhakti') return;\r\n\r\n        if (DEV_PROMPT_PREVIEW) {\r\n            if (allPrompts[devPromptIndex]) {\r\n                setCurrentPrompt(allPrompts[devPromptIndex].text);\r\n            }\r\n            return;\r\n        }\r\n\r\n        startTimeRef.current = performance.now();\r\n\r\n        intervalRef.current = setInterval(() => {\r\n            const elapsed = Math.floor((performance.now() - startTimeRef.current) / 1000);\r\n            setElapsedSeconds(elapsed);\r\n\r\n            if (onTimeUpdate) {\r\n                onTimeUpdate(totalSeconds - elapsed);\r\n            }\r\n\r\n            // Auto-stop when time is up\r\n            if (elapsed >= totalSeconds) {\r\n                if (onStop) onStop();\r\n            }\r\n        }, 1000);\r\n\r\n        return () => {\r\n            if (intervalRef.current) {\r\n                clearInterval(intervalRef.current);\r\n            }\r\n        };\r\n    }, [duration, totalSeconds, onStop, onTimeUpdate, devPromptIndex, allPrompts, sensoryType]);\r\n\r\n    // Update prompts (Standard Sensory only)\r\n    useEffect(() => {\r\n        if (sensoryType === 'bhakti' || DEV_PROMPT_PREVIEW) return;\r\n\r\n        let activePrompt = allPrompts[0];\r\n        for (const prompt of allPrompts) {\r\n            if (elapsedSeconds >= prompt.timing) {\r\n                activePrompt = prompt;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        if (activePrompt) {\r\n            setCurrentPrompt(activePrompt.text);\r\n        }\r\n    }, [elapsedSeconds, sensoryType, mode, allPrompts]);\r\n\r\n    // Reset when practice/mode/scan changes\r\n    useEffect(() => {\r\n        setDevPromptIndex(0);\r\n        setElapsedSeconds(0);\r\n        startTimeRef.current = performance.now();\r\n    }, [sensoryType, mode, selectedScanId]);\r\n\r\n    // Drag handlers\r\n    const handleMouseDown = (e) => {\r\n        if (!scrollContainerRef.current) return;\r\n        isDraggingRef.current = true;\r\n        dragStartXRef.current = e.pageX;\r\n        scrollStartRef.current = scrollContainerRef.current.scrollLeft;\r\n        scrollContainerRef.current.style.cursor = 'grabbing';\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (!isDraggingRef.current || !scrollContainerRef.current) return;\r\n        e.preventDefault();\r\n        const dx = e.pageX - dragStartXRef.current;\r\n        scrollContainerRef.current.scrollLeft = scrollStartRef.current - dx;\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        isDraggingRef.current = false;\r\n        if (scrollContainerRef.current) {\r\n            scrollContainerRef.current.style.cursor = 'grab';\r\n        }\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        isDraggingRef.current = false;\r\n        if (scrollContainerRef.current) {\r\n            scrollContainerRef.current.style.cursor = 'grab';\r\n        }\r\n    };\r\n\r\n    // Render Logic\r\n    if (sensoryType === 'bhakti') {\r\n        const ritual = getRitualById(selectedRitualId);\r\n\r\n        // If we have a selected ritual, show it (or the selector if we want to allow switching)\r\n        // For now, let's keep the selector visible at top if we are in 'intro' state perhaps?\r\n        // But RitualSession takes over the whole view. \r\n        // Let's render the selector ONLY if we haven't started (but RitualSession handles 'intro').\r\n        // Actually, let's just let RitualSession take over, but we need a way to SELECT the ritual first.\r\n\r\n        // Modified approach: Show selector above, render RitualSession below.\r\n        // RitualSession has its own \"intro\" state.\r\n\r\n        return (\r\n            <div className=\"w-full h-full flex flex-col relative\">\r\n                {/* Ritual Selector (Overlay or Top Bar) */}\r\n                <div className=\"absolute top-0 left-0 right-0 z-[60] p-4 flex justify-center pointer-events-none\">\r\n                    <div className={`${isLight ? 'bg-white/40' : 'bg-black/40'} backdrop-blur-md rounded-full pointer-events-auto p-1 border ${isLight ? 'border-[#5A4D3C]/10' : 'border-white/10'} flex gap-2 max-w-[90vw] overflow-x-auto scrollbar-hide`}>\r\n                        {availableRituals.map(r => (\r\n                            <button\r\n                                key={r.id}\r\n                                onClick={() => setSelectedRitualId(r.id)}\r\n                                className={`px-4 py-2 rounded-full text-xs uppercase tracking-wider transition-all whitespace-nowrap flex items-center gap-1.5 ${selectedRitualId === r.id\r\n                                    ? 'bg-[var(--accent-primary)] text-black font-bold'\r\n                                    : 'text-white/60 hover:text-white hover:bg-white/10'\r\n                                    }`}\r\n                            >\r\n                                {r.iconName ? <Icon name={r.iconName} size={14} /> : r.icon} {r.name}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* The Ritual Player - with top padding to avoid overlap */}\r\n                {ritual ? (\r\n                    <div className=\"pt-20 h-full\">\r\n                        <RitualSession\r\n                            key={ritual.id} // Re-mount on change\r\n                            ritual={ritual}\r\n                            onComplete={onStop}\r\n                            onExit={onStop}\r\n                            isLight={isLight}\r\n                        />\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex items-center justify-center h-full text-white/50\">\r\n                        Select a ritual to begin\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Standard Sensory Rendering\r\n    const renderVisual = () => {\r\n        const currentPointId = DEV_PROMPT_PREVIEW && sensoryType === 'bodyScan' && allPrompts[devPromptIndex]\r\n            ? allPrompts[devPromptIndex].point\r\n            : null;\r\n\r\n        switch (sensoryType) {\r\n            case 'sakshi':\r\n                return <SakshiVisual elapsedSeconds={elapsedSeconds} />;\r\n            case 'bodyScan':\r\n                const activeScan = BODY_SCANS[selectedScanId] || BODY_SCANS.full;\r\n                return (\r\n                    <BodyScanVisual\r\n                        elapsedSeconds={elapsedSeconds}\r\n                        activePointId={currentPointId}\r\n                        scanPoints={activeScan.points}\r\n                        scanPrompts={activeScan.prompts}\r\n                        image={activeScan.image}\r\n                        isLight={isLight}\r\n                    />\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full flex flex-col items-center gap-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col items-center text-center relative w-full\">\r\n                <div className=\"flex items-center justify-center mb-1\" style={{ color: 'var(--accent-color)' }}>\r\n                    <Icon name={sensoryType} size={32} />\r\n                </div>\r\n                <div\r\n                    className=\"text-sm font-semibold text-[var(--accent-color)] tracking-widest mb-4\"\r\n                    style={{ fontFamily: 'var(--font-display)' }}\r\n                >\r\n                    {config?.label}\r\n                </div>\r\n\r\n                {/* Body Scan Sub-Selector */}\r\n                {sensoryType === 'bodyScan' && (\r\n                    <div className=\"w-full flex justify-center mb-2 px-4\">\r\n                        <div\r\n                            ref={scrollContainerRef}\r\n                            onMouseDown={handleMouseDown}\r\n                            onMouseMove={handleMouseMove}\r\n                            onMouseUp={handleMouseUp}\r\n                            onMouseLeave={handleMouseLeave}\r\n                            className={`${isLight ? 'bg-[#5A4D3C]/05' : 'bg-black/20'} backdrop-blur-sm rounded-full p-1 border ${isLight ? 'border-[#5A4D3C]/10' : 'border-white/5'} flex gap-1 overflow-x-auto scrollbar-hide max-w-full cursor-grab active:cursor-grabbing`}\r\n                        >\r\n                            {getAllBodyScans().map(scan => (\r\n                                <button\r\n                                    key={scan.id}\r\n                                    onClick={() => setSelectedScanId(scan.id)}\r\n                                    className={`px-3 py-1.5 rounded-full text-[10px] uppercase tracking-wider transition-all whitespace-nowrap flex items-center gap-1.5 ${selectedScanId === scan.id\r\n                                        ? 'bg-[var(--accent-primary)] text-black font-bold'\r\n                                        : 'text-white/40 hover:text-white hover:bg-white/5'\r\n                                        }`}\r\n                                >\r\n                                    {scan.icon} {scan.name}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n\r\n\r\n            {/* Visual */}\r\n            <div className=\"w-full\">\r\n                {renderVisual()}\r\n            </div>\r\n\r\n            {/* DEV Controls for Standard Sensory */}\r\n            {DEV_PROMPT_PREVIEW && allPrompts.length > 0 && (\r\n                <div className=\"w-full max-w-md flex items-center justify-between gap-4 px-4\">\r\n                    <button\r\n                        onClick={() => setDevPromptIndex(Math.max(0, devPromptIndex - 1))}\r\n                        disabled={devPromptIndex === 0}\r\n                        className=\"px-3 py-1 rounded-lg text-xs transition-all disabled:opacity-30 border border-[var(--accent-20)] bg-white/10 text-white/80\"\r\n                    >\r\n                        ΓåÉ Prev\r\n                    </button>\r\n                    <div\r\n                        className=\"text-center flex-1 font-semibold text-[10px] text-[var(--accent-color)]\"\r\n                        style={{ fontFamily: 'var(--font-display)' }}\r\n                    >\r\n                        {devPromptIndex + 1} / {allPrompts.length}\r\n                        <div style={{ fontSize: '8px', opacity: 0.5 }}>\r\n                            @{allPrompts[devPromptIndex]?.timing || 0}s\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setDevPromptIndex(Math.min(allPrompts.length - 1, devPromptIndex + 1))}\r\n                        disabled={devPromptIndex >= allPrompts.length - 1}\r\n                        className=\"px-3 py-1 rounded-lg text-xs transition-all disabled:opacity-30 border border-[var(--accent-20)] bg-white/10 text-white/80\"\r\n                    >\r\n                        Next ΓåÆ\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* Prompt Display */}\r\n            {currentPrompt && (\r\n                <PromptDisplay\r\n                    text={currentPrompt}\r\n                    onAudioPlay={(text) => console.log('[Audio placeholder]:', text)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SessionEntryEditModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SessionHistoryView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SevenDayTrendCurve.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'peakIndex' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":212,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":212,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"peakIndex"},"fix":{"range":[8411,8422],"text":""},"desc":"Remove unused variable 'peakIndex'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SevenDayTrendCurve.jsx\r\n// 7-day practice trend curve - the SHAPE of your rhythm\r\n// Now with: directional flow (LΓåÆR), peak emphasis, timeline clarity\r\n\r\nimport React from 'react';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\n/**\r\n * Catmull-Rom spline interpolation\r\n */\r\nfunction catmullRom(t, p0, p1, p2, p3, tension = 0.5) {\r\n    const t2 = t * t;\r\n    const t3 = t2 * t;\r\n    const v0 = (p2 - p0) * tension;\r\n    const v1 = (p3 - p1) * tension;\r\n    return (2 * p1 - 2 * p2 + v0 + v1) * t3 +\r\n        (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 +\r\n        v0 * t + p1;\r\n}\r\n\r\n/**\r\n * Get intensity-based color for heat-map effect\r\n * Cool amber (low) ΓåÆ warm orange (medium) ΓåÆ white-hot (peak)\r\n */\r\nfunction getIntensityColor(normalizedValue, isPeak, isLight = false) {\r\n    if (isLight) {\r\n        // Light mode: MUCH darker colors for visibility on parchment\r\n        if (isPeak) {\r\n            return {\r\n                start: 'rgba(100, 60, 20, 1)',\r\n                end: 'rgba(120, 70, 25, 1)',\r\n                hex: '#784619' // Hex fallback for Firefox\r\n            };\r\n        }\r\n        if (normalizedValue < 0.3) {\r\n            return { start: 'rgba(90, 60, 40, 0.85)', end: 'rgba(100, 65, 45, 0.9)', hex: '#5A3C28' };\r\n        } else if (normalizedValue < 0.6) {\r\n            return { start: 'rgba(110, 70, 35, 0.9)', end: 'rgba(120, 75, 40, 0.95)', hex: '#6E4623' };\r\n        } else if (normalizedValue < 0.9) {\r\n            return { start: 'rgba(130, 80, 35, 0.95)', end: 'rgba(140, 85, 40, 1)', hex: '#825023' };\r\n        } else {\r\n            return { start: 'rgba(140, 90, 40, 1)', end: 'rgba(150, 95, 45, 1)', hex: '#8C5A28' };\r\n        }\r\n    }\r\n\r\n    // Dark mode: original warm amber/gold colors\r\n    if (isPeak) {\r\n        return {\r\n            start: 'rgba(255, 245, 220, 1)',\r\n            end: 'rgba(255, 255, 255, 0.95)',\r\n            hex: '#FFF5DC' // Hex fallback for Firefox\r\n        };\r\n    }\r\n    if (normalizedValue < 0.3) {\r\n        return { start: 'rgba(180, 140, 90, 0.6)', end: 'rgba(200, 160, 110, 0.7)', hex: '#B48C5A' };\r\n    } else if (normalizedValue < 0.6) {\r\n        return { start: 'rgba(220, 170, 100, 0.7)', end: 'rgba(240, 190, 120, 0.8)', hex: '#DCAA64' };\r\n    } else if (normalizedValue < 0.9) {\r\n        return { start: 'rgba(255, 200, 120, 0.85)', end: 'rgba(255, 220, 150, 0.9)', hex: '#FFC878' };\r\n    } else {\r\n        return { start: 'rgba(255, 235, 180, 0.95)', end: 'rgba(255, 245, 220, 1)', hex: '#FFEBB4' };\r\n    }\r\n}\r\n\r\n/**\r\n * Generate curve with directional flow and peak emphasis\r\n */\r\nfunction generateCurve(data, width, height, tension = 0.3, isLight = false) {\r\n    if (data.length === 0) return { path: '', segments: [], peakPoint: null, peakIndex: 0 };\r\n\r\n    const weekMax = Math.max(...data, 30);\r\n    const normalized = data.map(v => v / weekMax);\r\n    const peakValue = Math.max(...normalized);\r\n    const peakIndex = normalized.indexOf(peakValue);\r\n\r\n    const stepX = width / (data.length - 1);\r\n    const points = normalized.map((y, i) => ({\r\n        x: i * stepX,\r\n        y: height - (y * height * 0.75),\r\n        normalized: y\r\n    }));\r\n\r\n    // Generate segments with directional properties\r\n    const segments = [];\r\n    const resolution = 12;\r\n\r\n    for (let i = 0; i < points.length - 1; i++) {\r\n        const p0 = points[Math.max(0, i - 1)];\r\n        const p1 = points[i];\r\n        const p2 = points[i + 1];\r\n        const p3 = points[Math.min(points.length - 1, i + 2)];\r\n\r\n        let segPath = `M ${p1.x},${p1.y}`;\r\n\r\n        for (let s = 1; s <= resolution; s++) {\r\n            const t = s / resolution;\r\n            const x = catmullRom(t, p0.x, p1.x, p2.x, p3.x, tension);\r\n            const y = catmullRom(t, p0.y, p1.y, p2.y, p3.y, tension);\r\n            segPath += ` L ${x},${y}`;\r\n        }\r\n\r\n        const avgNorm = (normalized[i] + normalized[i + 1]) / 2;\r\n        const isPeakSegment = (i === peakIndex || i === peakIndex - 1);\r\n\r\n        // Directional flow: thinner at start, thicker toward end\r\n        // Plus peak emphasis and CALLIGRAPHIC VELOCITY-BASED WIDTH (light mode)\r\n        const baseWidth = 0.8 + (i / (points.length - 1)) * 0.8; // 0.8 ΓåÆ 1.6 LΓåÆR\r\n        const peakBoost = isPeakSegment ? 1.2 : 0;\r\n\r\n        // Calligraphic velocity modulation: thicker on descents, thinner on ascents\r\n        const velocityDelta = normalized[i + 1] - normalized[i];\r\n        const velocityWidth = isLight\r\n            ? Math.abs(velocityDelta) * 1.5 // More pronounced in light mode for ink effect\r\n            : Math.abs(velocityDelta) * 0.8;\r\n\r\n        // Ascending = thinner (pen lifting), Descending = thicker (pen pressing)\r\n        const calligraphyMod = isLight\r\n            ? (velocityDelta < 0 ? 0.6 : -0.3) // Descending = thicker, ascending = thinner\r\n            : 0;\r\n\r\n        const strokeWidth = baseWidth + avgNorm * 0.6 + peakBoost + velocityWidth + calligraphyMod;\r\n\r\n        // Directional opacity: slightly dimmer at start, brighter toward \"now\"\r\n        const baseOpacity = 0.25 + (i / (points.length - 1)) * 0.25; // 0.25 ΓåÆ 0.5 LΓåÆR\r\n        const opacity = isPeakSegment ? 0.9 : (baseOpacity + avgNorm * 0.3);\r\n\r\n        // Get intensity color for this segment\r\n        const colors = getIntensityColor(avgNorm, isPeakSegment, isLight);\r\n\r\n        segments.push({\r\n            path: segPath,\r\n            strokeWidth,\r\n            opacity,\r\n            isPeak: isPeakSegment,\r\n            colorIndex: i,\r\n            colors // Add color data for rendering\r\n        });\r\n    }\r\n\r\n    // Full path for area fill\r\n    let fullPath = `M ${points[0].x},${points[0].y}`;\r\n    for (let i = 0; i < points.length - 1; i++) {\r\n        const p0 = points[Math.max(0, i - 1)];\r\n        const p1 = points[i];\r\n        const p2 = points[i + 1];\r\n        const p3 = points[Math.min(points.length - 1, i + 2)];\r\n\r\n        for (let s = 1; s <= resolution; s++) {\r\n            const t = s / resolution;\r\n            const x = catmullRom(t, p0.x, p1.x, p2.x, p3.x, tension);\r\n            const y = catmullRom(t, p0.y, p1.y, p2.y, p3.y, tension);\r\n            fullPath += ` L ${x},${y}`;\r\n        }\r\n    }\r\n    const areaPath = fullPath + ` L ${width},${height} L 0,${height} Z`;\r\n\r\n    // Generate harmonic echoes (smoothed paths above/below the main curve)\r\n    const echoOffset = height * 0.08; // Subtle vertical offset\r\n    const echoPoints1 = normalized.map((y, i) => ({\r\n        x: i * stepX,\r\n        y: height - (y * height * 0.75) - echoOffset\r\n    }));\r\n    const echoPoints2 = normalized.map((y, i) => ({\r\n        x: i * stepX,\r\n        y: height - (y * height * 0.75) + echoOffset\r\n    }));\r\n\r\n    // Generate smooth echo paths\r\n    const generateEchoPath = (echoPoints) => {\r\n        let path = `M ${echoPoints[0].x},${echoPoints[0].y}`;\r\n        for (let i = 0; i < echoPoints.length - 1; i++) {\r\n            const p0 = echoPoints[Math.max(0, i - 1)];\r\n            const p1 = echoPoints[i];\r\n            const p2 = echoPoints[i + 1];\r\n            const p3 = echoPoints[Math.min(echoPoints.length - 1, i + 2)];\r\n\r\n            for (let s = 1; s <= resolution; s++) {\r\n                const t = s / resolution;\r\n                const x = catmullRom(t, p0.x, p1.x, p2.x, p3.x, tension * 1.2);\r\n                const y = catmullRom(t, p0.y, p1.y, p2.y, p3.y, tension * 1.2);\r\n                path += ` L ${x},${y}`;\r\n            }\r\n        }\r\n        return path;\r\n    };\r\n\r\n    return {\r\n        areaPath,\r\n        segments,\r\n        peakPoint: points[peakIndex],\r\n        peakIndex,\r\n        peakValue: data[peakIndex],\r\n        echoPath1: generateEchoPath(echoPoints1),\r\n        echoPath2: generateEchoPath(echoPoints2),\r\n        mainPath: fullPath // The main curve path without area fill\r\n    };\r\n}\r\n\r\nexport default function SevenDayTrendCurve({ last7Days = [0, 0, 0, 0, 0, 0, 0] }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    const width = 100;\r\n    const height = 36;\r\n\r\n    // Firefox detection\r\n    const isFirefox = typeof navigator !== 'undefined' && navigator.userAgent.toLowerCase().includes('firefox');\r\n\r\n    // Use test data if all values are zero (for debugging)\r\n    const hasData = last7Days.some(v => v > 0);\r\n    const curveData = hasData ? last7Days : [3, 8, 5, 12, 7, 15, 10]; // Sample data for visibility testing\r\n\r\n    const { segments, areaPath, peakPoint, peakIndex, peakValue, echoPath1, echoPath2, mainPath } = generateCurve(curveData, width, height, 0.3, isLight);\r\n\r\n    // Latest point\r\n    const weekMax = Math.max(...last7Days, 30);\r\n    const latestY = height - ((last7Days[6] / weekMax) * height * 0.75);\r\n\r\n    return (\r\n        <svg\r\n            viewBox={`0 0 ${width} ${height}`}\r\n            preserveAspectRatio=\"none\"\r\n            style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                willChange: 'transform' // Performance hint for mobile\r\n            }}\r\n        >\r\n            <defs>\r\n                {/* Per-segment gradients for heat-map effect */}\r\n                {segments.map((seg, i) => (\r\n                    <linearGradient key={`grad-${i}`} id={`segment-${i}`} x1=\"0%\" y1=\"100%\" x2=\"0%\" y2=\"0%\">\r\n                        <stop offset=\"0%\" stopColor={seg.colors.start} />\r\n                        <stop offset=\"100%\" stopColor={seg.colors.end} />\r\n                    </linearGradient>\r\n                ))}\r\n\r\n                {/* Area fill with directional fade */}\r\n                <linearGradient id=\"areaFill\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" stopColor={isLight ? \"rgba(100, 70, 40, 0.12)\" : \"rgba(200, 180, 130, 0.02)\"} />\r\n                    <stop offset=\"50%\" stopColor={isLight ? \"rgba(120, 80, 45, 0.18)\" : \"rgba(253, 220, 145, 0.06)\"} />\r\n                    <stop offset=\"100%\" stopColor={isLight ? \"rgba(140, 90, 50, 0.25)\" : \"rgba(255, 235, 180, 0.08)\"} />\r\n                </linearGradient>\r\n\r\n                {/* LUMINOUS FILAMENT FILTERS */}\r\n\r\n                {/* Dual-stage glow for Body layer */}\r\n                <filter id=\"filamentGlow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n                    {/* Stage 1: Tight glow (3px, 40% opacity) */}\r\n                    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"3\" result=\"glow1\" />\r\n                    <feComponentTransfer in=\"glow1\" result=\"glow1bright\">\r\n                        <feFuncA type=\"linear\" slope=\"0.4\" />\r\n                    </feComponentTransfer>\r\n\r\n                    {/* Stage 2: Wide falloff (8px, 15% opacity) */}\r\n                    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"8\" result=\"glow2\" />\r\n                    <feComponentTransfer in=\"glow2\" result=\"glow2soft\">\r\n                        <feFuncA type=\"linear\" slope=\"0.15\" />\r\n                    </feComponentTransfer>\r\n\r\n                    {/* Merge: glow2 ΓåÆ glow1 ΓåÆ source */}\r\n                    <feMerge>\r\n                        <feMergeNode in=\"glow2soft\" />\r\n                        <feMergeNode in=\"glow1bright\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n\r\n                {/* Organic turbulence for Atmosphere envelope */}\r\n                <filter id=\"organicTurbulence\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n                    <feTurbulence type=\"turbulence\" baseFrequency=\"0.02\" numOctaves=\"1\" result=\"noise\" seed=\"1\">\r\n                        {/* Animate seed for organic \"shiver\" - very cheap on GPU */}\r\n                        <animate attributeName=\"seed\" from=\"1\" to=\"100\" dur=\"30s\" repeatCount=\"indefinite\" />\r\n                    </feTurbulence>\r\n                    <feDisplacementMap in=\"SourceGraphic\" in2=\"noise\" scale=\"1.5\" />\r\n                </filter>\r\n\r\n                {/* Peak glow - white-hot with bloom */}\r\n                <filter id=\"peakGlow\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\">\r\n                    <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"4\" result=\"blur\" />\r\n                    <feFlood floodColor={isLight ? \"rgba(140, 90, 40, 0.6)\" : \"rgba(255, 245, 220, 0.7)\"} result=\"color\" />\r\n                    <feComposite in=\"color\" in2=\"blur\" operator=\"in\" result=\"glow\" />\r\n                    <feMerge>\r\n                        <feMergeNode in=\"glow\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n\r\n                {/* Cymatic ripple filter for peak marker */}\r\n                <filter id=\"cymaticRipple\" x=\"-200%\" y=\"-200%\" width=\"500%\" height=\"500%\">\r\n                    <feGaussianBlur stdDeviation=\"2\" result=\"blur\" />\r\n                    <feMerge>\r\n                        <feMergeNode in=\"blur\" />\r\n                        <feMergeNode in=\"blur\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n            </defs>\r\n\r\n            {/* Area fill */}\r\n            <path\r\n                d={areaPath}\r\n                fill={isFirefox\r\n                    ? (isLight ? \"rgba(120, 80, 45, 0.15)\" : \"rgba(253, 220, 145, 0.05)\")\r\n                    : \"url(#areaFill)\"\r\n                }\r\n            />\r\n\r\n            {/* LAYER 1: Atmosphere Envelope (wide, turbulent, barely visible) */}\r\n            <path\r\n                d={mainPath}\r\n                fill=\"none\"\r\n                stroke={isLight ? \"rgba(90, 60, 40, 0.15)\" : \"rgba(253, 220, 145, 0.1)\"}\r\n                strokeWidth={isFirefox ? 12 : 10}\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                filter={!isFirefox ? \"url(#organicTurbulence)\" : undefined}\r\n                style={{\r\n                    mixBlendMode: isLight ? 'multiply' : 'screen'\r\n                }}\r\n            />\r\n\r\n            {/* LAYER 2: Harmonic Echoes (thin, trailing energy) */}\r\n            <path\r\n                d={echoPath1}\r\n                fill=\"none\"\r\n                stroke={isLight ? \"rgba(100, 70, 40, 0.2)\" : \"rgba(253, 220, 145, 0.2)\"}\r\n                strokeWidth={0.5}\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                opacity={0.6}\r\n            />\r\n            <path\r\n                d={echoPath2}\r\n                fill=\"none\"\r\n                stroke={isLight ? \"rgba(100, 70, 40, 0.2)\" : \"rgba(253, 220, 145, 0.2)\"}\r\n                strokeWidth={0.5}\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                opacity={0.6}\r\n            />\r\n\r\n            {/* LAYER 3: Body (dual-stage bioluminescent glow) */}\r\n            <path\r\n                d={mainPath}\r\n                fill=\"none\"\r\n                stroke={isLight ? \"rgba(120, 80, 40, 0.8)\" : \"rgba(253, 220, 145, 0.8)\"}\r\n                strokeWidth={isFirefox ? 3 : 2.5}\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                filter={!isFirefox ? \"url(#filamentGlow)\" : undefined}\r\n                opacity={0.9}\r\n            />\r\n\r\n            {/* LAYER 4: Core (high-intensity truth signal) */}\r\n            {segments.map((seg, i) => (\r\n                <path\r\n                    key={i}\r\n                    d={seg.path}\r\n                    fill=\"none\"\r\n                    stroke={isFirefox ? seg.colors.hex : `url(#segment-${i})`}\r\n                    strokeWidth={seg.strokeWidth * (isFirefox ? 1.2 : 1)}\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    opacity={seg.opacity}\r\n                />\r\n            ))}\r\n\r\n            {/* CYMATIC SINGULARITY: Peak marker with ripple effect */}\r\n            {peakPoint && peakValue > 0 && (\r\n                <>\r\n                    {/* Ripple 3: Outermost (faint) */}\r\n                    <circle\r\n                        cx={peakPoint.x}\r\n                        cy={peakPoint.y}\r\n                        r={7}\r\n                        fill=\"none\"\r\n                        stroke={isLight ? \"rgba(120, 80, 40, 0.15)\" : \"rgba(74, 222, 128, 0.15)\"}\r\n                        strokeWidth={0.5}\r\n                        filter={!isFirefox ? \"url(#cymaticRipple)\" : undefined}\r\n                    >\r\n                        <animate attributeName=\"r\" values=\"7;9;7\" dur=\"4s\" repeatCount=\"indefinite\" />\r\n                        <animate attributeName=\"opacity\" values=\"0.15;0.3;0.15\" dur=\"4s\" repeatCount=\"indefinite\" />\r\n                    </circle>\r\n\r\n                    {/* Ripple 2: Middle */}\r\n                    <circle\r\n                        cx={peakPoint.x}\r\n                        cy={peakPoint.y}\r\n                        r={5}\r\n                        fill=\"none\"\r\n                        stroke={isLight ? \"rgba(130, 85, 45, 0.25)\" : \"rgba(74, 222, 128, 0.25)\"}\r\n                        strokeWidth={0.8}\r\n                    >\r\n                        <animate attributeName=\"r\" values=\"5;6.5;5\" dur=\"4s\" begin=\"0.5s\" repeatCount=\"indefinite\" />\r\n                        <animate attributeName=\"opacity\" values=\"0.25;0.45;0.25\" dur=\"4s\" begin=\"0.5s\" repeatCount=\"indefinite\" />\r\n                    </circle>\r\n\r\n                    {/* Ripple 1: Inner glow */}\r\n                    <circle\r\n                        cx={peakPoint.x}\r\n                        cy={peakPoint.y}\r\n                        r={3.5}\r\n                        fill={isLight ? \"rgba(140, 90, 40, 0.2)\" : \"rgba(74, 222, 128, 0.2)\"}\r\n                        filter={!isFirefox ? \"url(#peakGlow)\" : undefined}\r\n                    >\r\n                        <animate attributeName=\"r\" values=\"3.5;4.5;3.5\" dur=\"4s\" begin=\"1s\" repeatCount=\"indefinite\" />\r\n                    </circle>\r\n\r\n                    {/* Core of singularity */}\r\n                    <circle\r\n                        cx={peakPoint.x}\r\n                        cy={peakPoint.y}\r\n                        r={1.5}\r\n                        fill={isLight ? \"rgba(140, 90, 40, 0.95)\" : \"rgba(74, 222, 128, 0.9)\"}\r\n                    />\r\n                    <circle\r\n                        cx={peakPoint.x}\r\n                        cy={peakPoint.y}\r\n                        r={0.6}\r\n                        fill={isLight ? \"#FFF\" : \"rgba(255, 255, 255, 0.95)\"}\r\n                    />\r\n                </>\r\n            )}\r\n\r\n            {/* \"Now\" marker at right edge - pulse indicator */}\r\n            <circle\r\n                cx={width}\r\n                cy={latestY}\r\n                r={2.5}\r\n                fill={isLight ? \"rgba(120, 80, 40, 0.5)\" : \"rgba(74, 222, 128, 0.5)\"}\r\n                filter={!isFirefox ? \"url(#filamentGlow)\" : undefined}\r\n            >\r\n                <animate attributeName=\"r\" values=\"2.5;3.2;2.5\" dur=\"3s\" repeatCount=\"indefinite\" />\r\n                <animate attributeName=\"opacity\" values=\"0.5;0.8;0.5\" dur=\"3s\" repeatCount=\"indefinite\" />\r\n            </circle>\r\n            <circle\r\n                cx={width}\r\n                cy={latestY}\r\n                r={0.8}\r\n                fill={isLight ? \"#FFF\" : \"rgba(255, 255, 255, 0.95)\"}\r\n            />\r\n        </svg>\r\n    );\r\n}\r\n\r\n// Export peak index for use by parent (dots synchronization)\r\nSevenDayTrendCurve.getPeakIndex = (data) => {\r\n    if (!data || data.length === 0) return -1;\r\n    const max = Math.max(...data);\r\n    return data.indexOf(max);\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SideNavigation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SigilSealingArea.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[233,272],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'path' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":75,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[2694,2758],"text":""},"desc":"Remove unused variable 'path'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SigilSealingArea.jsx\r\n// Permanent sigil sealing interface for Application section\r\n// Replaces the tracking view with an always-available awareness logging tool\r\n\r\nimport React, { useState, useRef } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useApplicationStore } from '../state/applicationStore.js';\r\nimport { useNavigationStore } from '../state/navigationStore.js';\r\nimport { getPathById } from '../data/navigationData.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nexport function SigilSealingArea() {\r\n    const [currentPath, setCurrentPath] = useState([]);\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n    const [showSuccessFeedback, setShowSuccessFeedback] = useState(false);\r\n    const svgRef = useRef(null);\r\n\r\n    const { logAwareness, intention, setIntention } = useApplicationStore();\r\n    const { activePath } = useNavigationStore();\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const [isEditingIntention, setIsEditingIntention] = useState(false);\r\n    const [intentionInput, setIntentionInput] = useState(intention || '');\r\n\r\n    const handlePointerDown = (e) => {\r\n        if (!activePath) return;\r\n        setIsDrawing(true);\r\n        const point = getPoint(e);\r\n        setCurrentPath([point]);\r\n    };\r\n\r\n    const handlePointerMove = (e) => {\r\n        if (!isDrawing) return;\r\n        const point = getPoint(e);\r\n        setCurrentPath(prev => [...prev, point]);\r\n    };\r\n\r\n    const handlePointerUp = () => {\r\n        if (!isDrawing) return;\r\n        setIsDrawing(false);\r\n\r\n        // If a path was drawn, log it as awareness\r\n        if (currentPath.length > 10 && activePath) {\r\n            // Log the gesture (using a generic category for sigil tracing)\r\n            logAwareness('awareness-traced', activePath.pathId);\r\n\r\n            // Show success feedback\r\n            setShowSuccessFeedback(true);\r\n            setTimeout(() => {\r\n                setShowSuccessFeedback(false);\r\n                setCurrentPath([]);\r\n            }, 1200);\r\n        } else {\r\n            // Too short, just clear\r\n            setCurrentPath([]);\r\n        }\r\n    };\r\n\r\n    const getPoint = (e) => {\r\n        if (!svgRef.current) return { x: 0, y: 0 };\r\n        const rect = svgRef.current.getBoundingClientRect();\r\n        const clientX = e.clientX || e.touches?.[0]?.clientX;\r\n        const clientY = e.clientY || e.touches?.[0]?.clientY;\r\n        return {\r\n            x: clientX - rect.left,\r\n            y: clientY - rect.top\r\n        };\r\n    };\r\n\r\n    const handleClear = () => {\r\n        setCurrentPath([]);\r\n    };\r\n\r\n    const path = activePath ? getPathById(activePath.pathId) : null;\r\n\r\n    return (\r\n        <div className=\"w-full max-w-2xl mx-auto space-y-6\">\r\n            {/* Header Instruction */}\r\n            <div className=\"text-center px-4\">\r\n                <div\r\n                    className=\"text-[11px] uppercase tracking-[0.3em] mb-2\"\r\n                    style={{\r\n                        color: isLight ? 'rgba(100, 80, 60, 0.6)' : 'rgba(253, 251, 245, 0.5)',\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600\r\n                    }}\r\n                >\r\n                    Sigil Sealing\r\n                </div>\r\n                <p\r\n                    className=\"text-[13px] italic leading-relaxed max-w-md mx-auto\"\r\n                    style={{\r\n                        color: isLight ? 'rgba(60, 45, 35, 0.7)' : 'rgba(253, 251, 245, 0.6)',\r\n                        fontFamily: 'var(--font-body)',\r\n                        letterSpacing: '0.01em'\r\n                    }}\r\n                >\r\n                    Draw a symbol of your awareness ΓÇö trace your will into the field\r\n                </p>\r\n            </div>\r\n\r\n            {/* Sigil Drawing Canvas */}\r\n            <div\r\n                className=\"relative w-full aspect-square max-w-md mx-auto rounded-[2rem] overflow-hidden border-2 shadow-2xl\"\r\n                style={{\r\n                    background: isLight\r\n                        ? 'linear-gradient(135deg, rgba(255, 250, 240, 0.95), rgba(248, 244, 235, 0.9))'\r\n                        : 'linear-gradient(135deg, rgba(10, 5, 15, 0.95), rgba(5, 5, 8, 0.98))',\r\n                    borderColor: isLight ? 'rgba(180, 120, 40, 0.3)' : 'rgba(255, 220, 120, 0.15)',\r\n                    boxShadow: isLight\r\n                        ? '0 12px 40px rgba(100, 80, 50, 0.15), inset 0 2px 6px rgba(255, 255, 255, 0.4)'\r\n                        : '0 20px 60px rgba(0, 0, 0, 0.7), inset 0 1px 0 rgba(255, 255, 255, 0.03)'\r\n                }}\r\n            >\r\n                {/* Background sacred geometry hint */}\r\n                <div\r\n                    className=\"absolute inset-0 flex items-center justify-center pointer-events-none opacity-5\"\r\n                    style={{\r\n                        backgroundImage: 'radial-gradient(circle, rgba(255, 220, 120, 0.1) 1px, transparent 1px)',\r\n                        backgroundSize: '20px 20px'\r\n                    }}\r\n                />\r\n\r\n                {/* Success Flare */}\r\n                {showSuccessFeedback && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.8 }}\r\n                        animate={{ opacity: 1, scale: 1.5 }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.8, ease: 'easeOut' }}\r\n                        className=\"absolute inset-0 rounded-[2rem] pointer-events-none\"\r\n                        style={{\r\n                            background: 'radial-gradient(circle, rgba(255, 220, 120, 0.3) 0%, transparent 70%)'\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* SVG Drawing Surface */}\r\n                <svg\r\n                    ref={svgRef}\r\n                    className=\"w-full h-full touch-none cursor-crosshair\"\r\n                    style={{\r\n                        touchAction: 'none',\r\n                        overscrollBehavior: 'none'\r\n                    }}\r\n                    onPointerDown={handlePointerDown}\r\n                    onPointerMove={handlePointerMove}\r\n                    onPointerUp={handlePointerUp}\r\n                    onPointerLeave={() => isDrawing && handlePointerUp()}\r\n                >\r\n                    {/* Drawn Path */}\r\n                    {currentPath.length > 1 && (\r\n                        <polyline\r\n                            points={currentPath.map(p => `${p.x},${p.y}`).join(' ')}\r\n                            fill=\"none\"\r\n                            stroke={isLight ? 'rgba(180, 120, 40, 0.8)' : 'rgba(255, 220, 120, 0.8)'}\r\n                            strokeWidth=\"3\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            style={{\r\n                                filter: `drop-shadow(0 0 6px ${isLight ? 'rgba(180, 120, 40, 0.4)' : 'rgba(255, 220, 120, 0.4)'})`,\r\n                                opacity: 0.9\r\n                            }}\r\n                        />\r\n                    )}\r\n                </svg>\r\n\r\n                {/* Empty State Prompt */}\r\n                {currentPath.length === 0 && !showSuccessFeedback && (\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none px-8\">\r\n                        <div\r\n                            className=\"text-[96px] mb-4 opacity-10\"\r\n                            style={{ filter: 'blur(1px)' }}\r\n                        >\r\n                            Γƒ¿Γƒ⌐\r\n                        </div>\r\n                        <p\r\n                            className=\"text-[12px] italic text-center\"\r\n                            style={{\r\n                                color: isLight ? 'rgba(100, 80, 60, 0.4)' : 'rgba(253, 251, 245, 0.2)',\r\n                                fontFamily: 'var(--font-body)'\r\n                            }}\r\n                        >\r\n                            Touch to trace\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Success Message */}\r\n                {showSuccessFeedback && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"text-center\"\r\n                        >\r\n                            <div\r\n                                className=\"text-[18px] font-black uppercase tracking-[0.3em]\"\r\n                                style={{\r\n                                    color: isLight ? 'rgba(180, 120, 40, 1)' : 'rgba(255, 220, 120, 1)',\r\n                                    fontFamily: 'var(--font-display)',\r\n                                    textShadow: isLight ? 'none' : '0 2px 8px rgba(255, 220, 120, 0.5)'\r\n                                }}\r\n                            >\r\n                                Sealed\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Clear Button (only when drawing) */}\r\n                {currentPath.length > 0 && !showSuccessFeedback && (\r\n                    <button\r\n                        onClick={handleClear}\r\n                        className=\"absolute top-4 right-4 px-3 py-1.5 rounded-full text-[9px] uppercase tracking-wider transition-all\"\r\n                        style={{\r\n                            background: isLight ? 'rgba(255, 250, 240, 0.9)' : 'rgba(10, 5, 15, 0.8)',\r\n                            color: isLight ? 'rgba(100, 80, 60, 0.6)' : 'rgba(253, 251, 245, 0.4)',\r\n                            border: `1px solid ${isLight ? 'rgba(180, 120, 40, 0.2)' : 'rgba(255, 220, 120, 0.1)'}`,\r\n                            fontFamily: 'var(--font-display)'\r\n                        }}\r\n                    >\r\n                        Clear\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Intention Display/Editor */}\r\n            <div className=\"max-w-md mx-auto px-4\">\r\n                <div\r\n                    className=\"rounded-2xl px-5 py-4 transition-all duration-300\"\r\n                    style={{\r\n                        background: isLight\r\n                            ? 'linear-gradient(135deg, rgba(255, 250, 240, 0.6), rgba(248, 244, 235, 0.5))'\r\n                            : 'rgba(10, 15, 25, 0.5)',\r\n                        border: `1px solid ${isLight ? 'rgba(180, 140, 90, 0.25)' : 'rgba(255, 255, 255, 0.08)'}`,\r\n                        boxShadow: isLight\r\n                            ? 'inset 0 2px 6px rgba(0, 0, 0, 0.04)'\r\n                            : 'inset 0 2px 6px rgba(0, 0, 0, 0.4)'\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"text-[9px] uppercase tracking-[0.2em] mb-3 text-center opacity-50\"\r\n                        style={{ color: isLight ? 'rgba(100, 80, 60, 0.75)' : 'rgba(253, 251, 245, 0.5)' }}\r\n                    >\r\n                        Current Intention\r\n                    </div>\r\n\r\n                    {isEditingIntention ? (\r\n                        <div className=\"space-y-3\">\r\n                            <textarea\r\n                                autoFocus\r\n                                value={intentionInput}\r\n                                onChange={(e) => setIntentionInput(e.target.value)}\r\n                                placeholder=\"When I notice [pattern], I will...\"\r\n                                className=\"w-full border rounded-2xl px-4 py-3 text-sm placeholder:italic focus:outline-none resize-none text-center transition-all\"\r\n                                style={{\r\n                                    background: isLight ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.2)',\r\n                                    borderColor: isLight ? 'rgba(180, 120, 40, 0.2)' : 'rgba(255, 220, 120, 0.15)',\r\n                                    color: isLight ? 'rgba(60, 45, 35, 0.9)' : 'rgba(253, 251, 245, 0.9)',\r\n                                    fontFamily: 'var(--font-body)'\r\n                                }}\r\n                                rows={3}\r\n                            />\r\n                            <div className=\"flex justify-center gap-4\">\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setIntentionInput(intention || '');\r\n                                        setIsEditingIntention(false);\r\n                                    }}\r\n                                    className=\"text-[10px] uppercase tracking-widest transition-colors px-3 py-1\"\r\n                                    style={{\r\n                                        color: isLight ? 'rgba(100, 80, 60, 0.5)' : 'rgba(253, 251, 245, 0.3)',\r\n                                        fontFamily: 'var(--font-display)'\r\n                                    }}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setIntention(intentionInput);\r\n                                        setIsEditingIntention(false);\r\n                                    }}\r\n                                    className=\"text-[10px] uppercase tracking-widest px-4 py-1.5 rounded-full transition-all\"\r\n                                    style={{\r\n                                        background: isLight ? 'rgba(180, 120, 40, 0.9)' : 'rgba(255, 220, 120, 0.9)',\r\n                                        color: isLight ? '#ffffff' : '#050508',\r\n                                        fontFamily: 'var(--font-display)',\r\n                                        boxShadow: isLight\r\n                                            ? '0 2px 8px rgba(180, 120, 40, 0.3)'\r\n                                            : '0 2px 8px rgba(255, 220, 120, 0.3)'\r\n                                    }}\r\n                                >\r\n                                    Seal\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div\r\n                            onClick={() => setIsEditingIntention(true)}\r\n                            className=\"cursor-pointer group py-2 px-4 rounded-xl transition-all\"\r\n                            style={{\r\n                                background: isLight ? 'transparent' : 'transparent'\r\n                            }}\r\n                        >\r\n                            {intention ? (\r\n                                <p\r\n                                    className=\"text-[13px] text-center italic leading-relaxed\"\r\n                                    style={{\r\n                                        color: isLight ? 'rgba(60, 45, 35, 0.85)' : 'rgba(253, 251, 245, 0.7)',\r\n                                        fontFamily: 'var(--font-body)'\r\n                                    }}\r\n                                >\r\n                                    \"{intention}\"\r\n                                </p>\r\n                            ) : (\r\n                                <p\r\n                                    className=\"text-[12px] text-center italic opacity-40\"\r\n                                    style={{\r\n                                        color: isLight ? 'rgba(100, 80, 60, 0.5)' : 'rgba(253, 251, 245, 0.3)',\r\n                                        fontFamily: 'var(--font-body)'\r\n                                    }}\r\n                                >\r\n                                    Tap to set your intention...\r\n                                </p>\r\n                            )}\r\n\r\n                            {/* Decorative underline on hover */}\r\n                            <div className=\"flex justify-center mt-2 opacity-0 group-hover:opacity-40 transition-opacity\">\r\n                                <div\r\n                                    className=\"h-px w-16\"\r\n                                    style={{\r\n                                        background: `linear-gradient(90deg, transparent, ${isLight ? 'rgba(180, 120, 40, 0.5)' : 'rgba(255, 220, 120, 0.5)'}, transparent)`\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SigilSealingArea;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SigilSlider.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is assigned a value but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"progress"},"fix":{"range":[520,533],"text":""},"desc":"Remove unused variable 'progress'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SigilSlider.jsx\r\n// Rune-based progress visualizer - shows journey through ritual steps\r\n// Icons only mode - no text labels for cleaner aesthetic\r\n\r\nimport React from 'react';\r\n\r\n// Runic/alchemical symbols for progress visualization\r\nconst SIGILS = ['Γÿë', 'Γÿ╜', 'Γÿ┐', 'ΓÖÇ', 'ΓÖé', 'ΓÖâ', 'ΓÖä']; // Planetary symbols\r\nconst RUNES = ['ßÜá', 'ßÜó', 'ßÜª', 'ßÜ¿', 'ßÜ▒', 'ßÜ▓', 'ßÜ╖']; // Elder Futhark\r\nconst ALCHEMICAL = ['≡ƒ£ü', '≡ƒ£é', '≡ƒ£â', '≡ƒ£ä', '≡ƒ£ö', '≡ƒ£ì', '≡ƒ£Ä']; // Alchemical symbols\r\n\r\nexport function SigilSlider({\r\n    progress = 0, // 0-1\r\n    totalSteps = 4,\r\n    currentStep = 0,\r\n    variant = 'planetary', // 'planetary', 'runic', 'alchemical'\r\n    stepNames = [],\r\n}) {\r\n    const symbols = variant === 'runic' ? RUNES : variant === 'alchemical' ? ALCHEMICAL : SIGILS;\r\n\r\n    // Use totalSteps or symbols length, whichever is smaller\r\n    const displaySymbols = symbols.slice(0, Math.min(totalSteps, symbols.length));\r\n\r\n    return (\r\n        <div className=\"w-full max-w-xs mx-auto\">\r\n            {/* The Track */}\r\n            <div className=\"relative h-10 flex items-center\">\r\n                {/* Background track line */}\r\n                <div\r\n                    className=\"absolute left-4 right-4 h-[2px]\"\r\n                    style={{\r\n                        background: 'linear-gradient(90deg, transparent 0%, var(--accent-20) 10%, var(--accent-20) 90%, transparent 100%)',\r\n                    }}\r\n                />\r\n\r\n                {/* Progress glow line */}\r\n                <div\r\n                    className=\"absolute left-4 h-[3px] transition-all duration-700 ease-out\"\r\n                    style={{\r\n                        width: `calc(${(currentStep / Math.max(totalSteps - 1, 1)) * 100}% * 0.85)`,\r\n                        background: 'linear-gradient(90deg, var(--accent-color) 0%, var(--accent-color) 80%, transparent 100%)',\r\n                        boxShadow: '0 0 12px var(--accent-color), 0 0 24px var(--accent-50)',\r\n                    }}\r\n                />\r\n\r\n                {/* Sigil markers - Icons Only */}\r\n                <div className=\"relative w-full flex justify-between px-2\">\r\n                    {displaySymbols.map((sigil, i) => {\r\n                        const isCompleted = i < currentStep;\r\n                        const isCurrent = i === currentStep;\r\n                        const isUpcoming = i > currentStep;\r\n\r\n                        return (\r\n                            <div\r\n                                key={i}\r\n                                className=\"flex flex-col items-center transition-all duration-500\"\r\n                                style={{\r\n                                    transform: isCurrent ? 'scale(1.4)' : 'scale(1)',\r\n                                }}\r\n                            >\r\n                                {/* The Sigil */}\r\n                                <div\r\n                                    className=\"relative transition-all duration-500\"\r\n                                    style={{\r\n                                        fontFamily: 'var(--font-display)',\r\n                                        fontWeight: 600,\r\n                                        fontSize: isCurrent ? '20px' : '16px',\r\n                                        color: isCompleted\r\n                                            ? '#fefce8' // Bright white-gold for completed\r\n                                            : isCurrent\r\n                                                ? 'var(--accent-color)' // Accent for current\r\n                                                : 'var(--accent-30)', // Dim for upcoming\r\n                                        textShadow: isCompleted\r\n                                            ? '0 0 8px #fefce8, 0 0 16px var(--accent-color)'\r\n                                            : isCurrent\r\n                                                ? '0 0 12px var(--accent-color), 0 0 24px var(--accent-50)'\r\n                                                : 'none',\r\n                                        filter: isUpcoming ? 'saturate(0.3)' : 'none',\r\n                                    }}\r\n                                >\r\n                                    {sigil}\r\n\r\n                                    {/* Current step glow ring */}\r\n                                    {isCurrent && (\r\n                                        <div\r\n                                            className=\"absolute inset-0 -m-3 rounded-full animate-pulse\"\r\n                                            style={{\r\n                                                background: 'radial-gradient(circle, var(--accent-30) 0%, transparent 70%)',\r\n                                            }}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Current step name - shows ONLY the active step name */}\r\n            {stepNames[currentStep] && (\r\n                <div\r\n                    className=\"text-center mt-2\"\r\n                    style={{\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600,\r\n                        fontSize: '10px',\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        color: 'var(--accent-color)',\r\n                        textShadow: '0 0 10px var(--accent-30)',\r\n                    }}\r\n                >\r\n                    {stepNames[currentStep]}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SigilTracker.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[32,43],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[70,77],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'stage' is assigned a value but never used.","line":6,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"stage"},"fix":{"range":[290,307],"text":""},"desc":"Remove unused variable 'stage'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useSigilStore } from '../state/sigilStore';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nexport function SigilTracker({ isOpen, onClose, stage = 'flame' }) {\r\n    const [currentPath, setCurrentPath] = useState([]);\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n    const [intention, setIntention] = useState('');\r\n    const svgRef = useRef(null);\r\n    const addSigil = useSigilStore(state => state.addSigil);\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const handlePointerDown = (e) => {\r\n        setIsDrawing(true);\r\n        const point = getPoint(e);\r\n        setCurrentPath([point]);\r\n    };\r\n\r\n    const handlePointerMove = (e) => {\r\n        if (!isDrawing) return;\r\n        const point = getPoint(e);\r\n        setCurrentPath(prev => [...prev, point]);\r\n    };\r\n\r\n    const handlePointerUp = () => {\r\n        setIsDrawing(false);\r\n    };\r\n\r\n    const getPoint = (e) => {\r\n        const rect = svgRef.current.getBoundingClientRect();\r\n        return {\r\n            x: (e.clientX || e.touches?.[0]?.clientX) - rect.left,\r\n            y: (e.clientY || e.touches?.[0]?.clientY) - rect.top\r\n        };\r\n    };\r\n\r\n    const handleSeal = () => {\r\n        if (currentPath.length < 2) return;\r\n\r\n        // Construct SVG path string\r\n        const d = currentPath.reduce((acc, point, i) => {\r\n            return acc + (i === 0 ? `M ${point.x} ${point.y}` : ` L ${point.x} ${point.y}`);\r\n        }, '');\r\n\r\n        addSigil(d, intention);\r\n        setCurrentPath([]);\r\n        setIntention('');\r\n\r\n        // Auto-close logic for quick entry\r\n        const isTraceRoute = window.location.pathname.endsWith('/trace') || window.location.pathname.endsWith('/trace/');\r\n\r\n        if (isTraceRoute) {\r\n            setTimeout(() => {\r\n                window.close();\r\n                setTimeout(() => {\r\n                    window.location.href = 'about:blank';\r\n                }, 100);\r\n            }, 1000); // 1s delay to see the seal success\r\n        } else {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const handleClear = () => {\r\n        setCurrentPath([]);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"sigil-tracker-modal fixed inset-0 z-[4000] flex flex-col items-center justify-center p-6 sm:p-12 overflow-hidden\"\r\n                style={{\r\n                    background: isLight\r\n                        ? 'linear-gradient(180deg, #F5F0E6 0%, #EDE5D8 100%)'\r\n                        : 'black'\r\n                }}\r\n            >\r\n                {/* Organic texture layer (only for light mode) */}\r\n                {isLight && (\r\n                    <svg className=\"absolute inset-0 w-full h-full opacity-[0.04] pointer-events-none\" style={{ mixBlendMode: 'multiply' }}>\r\n                        <filter id=\"sigil-organic-noise\">\r\n                            <feTurbulence type=\"fractalNoise\" baseFrequency=\"0.8\" numOctaves=\"4\" stitchTiles=\"stitch\" />\r\n                        </filter>\r\n                        <rect width=\"100%\" height=\"100%\" filter=\"url(#sigil-organic-noise)\" />\r\n                    </svg>\r\n                )}\r\n                {/* Sacred Geometry Background (Faint) */}\r\n                <div className=\"absolute inset-0 pointer-events-none opacity-10\">\r\n                    <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,var(--accent-color)_0%,transparent_70%)] blur-3xl\" />\r\n                </div>\r\n\r\n                {/* Toolbar */}\r\n                <div className=\"relative w-full max-w-lg mb-8 flex justify-between items-center z-10\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"transition-all duration-300 uppercase tracking-[0.2em] text-xs hover:opacity-100\"\r\n                        style={{ color: isLight ? 'rgba(60, 45, 35, 0.5)' : 'rgba(100, 116, 139, 1)' }}\r\n                    >\r\n                        Abandon\r\n                    </button>\r\n                    <div className=\"text-center\">\r\n                        <h2\r\n                            className=\"font-display tracking-[0.3em] uppercase text-sm\"\r\n                            style={{\r\n                                color: isLight ? 'var(--light-accent)' : 'rgba(253, 230, 138, 0.8)',\r\n                                textShadow: isLight ? '0 1px 2px rgba(180, 120, 40, 0.15)' : 'none'\r\n                            }}\r\n                        >\r\n                            Trace Intent\r\n                        </h2>\r\n                    </div>\r\n                    <button\r\n                        onClick={handleClear}\r\n                        className=\"transition-all duration-300 uppercase tracking-[0.2em] text-xs hover:opacity-100\"\r\n                        style={{ color: isLight ? 'rgba(60, 45, 35, 0.5)' : 'rgba(100, 116, 139, 1)' }}\r\n                    >\r\n                        Clear\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Drawing Area */}\r\n                <div\r\n                    className=\"relative w-full max-w-lg aspect-square rounded-[2rem] overflow-hidden transition-all duration-500\"\r\n                    style={{\r\n                        background: isLight ? '#FDFBF5' : '#050508',\r\n                        border: isLight ? '2px solid rgba(160, 120, 80, 0.3)' : '1px solid rgba(245, 158, 11, 0.1)',\r\n                        boxShadow: isLight\r\n                            ? '0 8px 24px rgba(120, 90, 60, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.5)'\r\n                            : '0 0 50px rgba(0,0,0,0.5)'\r\n                    }}\r\n                >\r\n                    <svg\r\n                        ref={svgRef}\r\n                        className=\"w-full h-full touch-none\"\r\n                        style={{\r\n                            touchAction: 'none',\r\n                            overscrollBehavior: 'none'\r\n                        }}\r\n                        onPointerDown={handlePointerDown}\r\n                        onPointerMove={handlePointerMove}\r\n                        onPointerUp={handlePointerUp}\r\n                        onPointerLeave={handlePointerUp}\r\n                        onPointerCancel={handlePointerUp}\r\n                    >\r\n                        {currentPath.length > 1 && (\r\n                            <polyline\r\n                                points={currentPath.map(p => `${p.x},${p.y}`).join(' ')}\r\n                                fill=\"none\"\r\n                                stroke={isLight ? 'rgba(180, 120, 40, 0.8)' : 'rgba(255, 220, 120, 0.8)'}\r\n                                strokeWidth=\"3\"\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                                style={{\r\n                                    filter: `drop-shadow(0 0 6px ${isLight ? 'rgba(180, 120, 40, 0.4)' : 'rgba(255, 220, 120, 0.4)'})`,\r\n                                    opacity: 0.9\r\n                                }}\r\n                            />\r\n                        )}\r\n                    </svg>\r\n\r\n                    {/* Prompt Empty State */}\r\n                    {currentPath.length === 0 && (\r\n                        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                            <p\r\n                                className=\"font-serif italic text-sm tracking-wide\"\r\n                                style={{\r\n                                    color: isLight ? 'rgba(60, 45, 35, 0.35)' : '#334155',\r\n                                    opacity: isLight ? 1 : 0.4\r\n                                }}\r\n                            >\r\n                                Draw a symbol of your current will\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Intention Input */}\r\n                <div className=\"relative w-full max-w-lg mt-8 z-10\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Name your intention (optional)\"\r\n                        value={intention}\r\n                        onChange={(e) => setIntention(e.target.value)}\r\n                        className=\"w-full bg-transparent py-3 px-2 text-center focus:outline-none transition-colors font-serif italic tracking-wide\"\r\n                        style={{\r\n                            borderBottom: `1px solid ${isLight ? 'rgba(160, 120, 80, 0.35)' : 'rgba(245, 158, 11, 0.2)'}`,\r\n                            color: isLight ? '#3D3425' : 'rgba(254, 243, 199, 1)',\r\n                            '--placeholder-color': isLight ? 'rgba(60, 45, 35, 0.35)' : 'rgba(51, 65, 85, 1)'\r\n                        }}\r\n                    />\r\n                    <style>{`\r\n                        input::placeholder { color: var(--placeholder-color) !important; }\r\n                    `}</style>\r\n                </div>\r\n\r\n                {/* Seal Button */}\r\n                <div className=\"relative w-full max-w-lg mt-12 flex justify-center z-10\">\r\n                    <button\r\n                        onClick={handleSeal}\r\n                        disabled={currentPath.length < 2}\r\n                        className={`\r\n                            px-12 py-4 rounded-full border transition-all duration-700 uppercase tracking-[0.4em] text-xs font-semibold\r\n                            ${currentPath.length > 1\r\n                                ? (isLight\r\n                                    ? 'border-amber-700/60 bg-amber-700/8 text-amber-900 shadow-[0_5px_15px_rgba(180,120,40,0.2)] hover:bg-amber-700/12 hover:shadow-[0_8px_20px_rgba(180,120,40,0.25)]'\r\n                                    : 'border-amber-500 bg-amber-500/10 text-amber-200 shadow-[0_0_20px_rgba(245,158,11,0.2)] hover:bg-amber-500/15')\r\n                                : (isLight\r\n                                    ? 'border-black/10 text-black/25 grayscale cursor-not-allowed'\r\n                                    : 'border-slate-800 text-slate-700 grayscale cursor-not-allowed')}\r\n                        `}\r\n                    >\r\n                        Seal Trace\r\n                    </button>\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SimpleModeButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SoundConfig.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":30},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":16,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":16,"endColumn":32},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":25,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":25,"endColumn":28},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":34,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":34,"endColumn":28},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":44,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":44,"endColumn":25}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/SoundConfig.jsx\r\n// Configuration panel for Sound practice mode\r\n// Binaural beats, isochronic tones, mantras, nature sounds, silence\r\nimport React from 'react';\r\n\r\n// Binaural beat frequency presets (difference frequency between L/R)\r\nexport const BINAURAL_PRESETS = [\r\n    { id: 'delta', name: 'Delta', hz: 2, description: 'Deep sleep, healing', color: 'rgba(147, 51, 234, 0.8)' },\r\n    { id: 'theta', name: 'Theta', hz: 6, description: 'Meditation, creativity', color: 'rgba(99, 102, 241, 0.8)' },\r\n    { id: 'alpha', name: 'Alpha', hz: 10, description: 'Relaxation, calm focus', color: 'rgba(34, 197, 94, 0.8)' },\r\n    { id: 'beta', name: 'Beta', hz: 20, description: 'Active thinking, focus', color: 'rgba(234, 179, 8, 0.8)' },\r\n    { id: 'gamma', name: 'Gamma', hz: 40, description: 'Peak awareness, insight', color: 'rgba(239, 68, 68, 0.8)' },\r\n];\r\n\r\n// Isochronic tone presets\r\nexport const ISOCHRONIC_PRESETS = [\r\n    { id: 'grounding', name: 'Grounding', hz: 7.83, description: 'Schumann resonance', color: 'rgba(168, 85, 247, 0.8)' },\r\n    { id: 'relaxation', name: 'Relaxation', hz: 10, description: 'Alpha state calm', color: 'rgba(59, 130, 246, 0.8)' },\r\n    { id: 'focus', name: 'Focus', hz: 14, description: 'SMR concentration', color: 'rgba(16, 185, 129, 0.8)' },\r\n    { id: 'energy', name: 'Energy', hz: 18, description: 'Beta alertness', color: 'rgba(245, 158, 11, 0.8)' },\r\n    { id: 'clarity', name: 'Clarity', hz: 40, description: 'Gamma perception', color: 'rgba(244, 63, 94, 0.8)' },\r\n];\r\n\r\n// Mantra presets\r\nexport const MANTRA_PRESETS = [\r\n    { id: 'om', name: 'Om', description: 'Universal vibration' },\r\n    { id: 'soham', name: 'So Hum', description: 'I am That' },\r\n    { id: 'hamsa', name: 'Ham Sa', description: 'Breath mantra' },\r\n    { id: 'om-namah', name: 'Om Namah Shivaya', description: 'Transformation' },\r\n    { id: 'om-mani', name: 'Om Mani Padme Hum', description: 'Compassion' },\r\n];\r\n\r\n// Nature soundscapes\r\nexport const NATURE_PRESETS = [\r\n    { id: 'rain', name: 'Rain', description: 'Gentle rainfall' },\r\n    { id: 'ocean', name: 'Ocean Waves', description: 'Rhythmic waves' },\r\n    { id: 'forest', name: 'Forest', description: 'Birds and wind' },\r\n    { id: 'fire', name: 'Crackling Fire', description: 'Warm hearth' },\r\n    { id: 'stream', name: 'Stream', description: 'Flowing water' },\r\n    { id: 'thunder', name: 'Thunderstorm', description: 'Distant rumble' },\r\n];\r\n\r\n// Sound type options\r\nexport const SOUND_TYPES = [\r\n    'Binaural Beats',\r\n    'Isochronic Tones',\r\n    'Mantra',\r\n    'Nature',\r\n    'Silence'\r\n];\r\n\r\nexport function SoundConfig({\r\n    soundType,\r\n    setSoundType,\r\n    binauralPreset,\r\n    setBinauralPreset,\r\n    isochronicPreset,\r\n    setIsochronicPreset,\r\n    mantraPreset,\r\n    setMantraPreset,\r\n    naturePreset,\r\n    setNaturePreset,\r\n    carrierFrequency,\r\n    setCarrierFrequency,\r\n    volume,\r\n    setVolume,\r\n    isLight = false, // Accept isLight as prop from parent\r\n}) {\r\n    // Light-mode-aware text colors\r\n    const textColors = {\r\n        primary: isLight ? '#3D3425' : 'rgba(253,251,245,0.7)',\r\n        secondary: isLight ? '#5A4D3C' : 'rgba(253,251,245,0.55)',\r\n        muted: isLight ? '#7A6D58' : 'rgba(253,251,245,0.45)',\r\n        faint: isLight ? '#9A8D78' : 'rgba(253,251,245,0.4)',\r\n        ghost: isLight ? '#AA9D88' : 'rgba(253,251,245,0.35)',\r\n        description: isLight ? '#6B5E4A' : 'rgba(253,251,245,0.5)',\r\n    };\r\n\r\n    return (\r\n        <div className=\"sound-config space-y-6\">\r\n            {/* Sound Type Selection */}\r\n            <div>\r\n                <div\r\n                    className=\"mb-3\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-display)\",\r\n                        fontSize: \"9px\",\r\n                        fontWeight: 600,\r\n                        letterSpacing: \"var(--tracking-mythic)\",\r\n                        textTransform: \"uppercase\",\r\n                        color: textColors.muted,\r\n                        textAlign: \"center\"\r\n                    }}\r\n                >\r\n                    Soundscape\r\n                </div>\r\n                <div className=\"grid grid-cols-3 gap-2\">\r\n                    {['Binaural Beats', 'Isochronic Tones', 'Mantra', 'Nature', 'Silence'].map((type) => (\r\n                        <button\r\n                            key={type}\r\n                            onClick={() => setSoundType(type)}\r\n                            className=\"rounded-xl px-3 py-2.5 text-center\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-display)\",\r\n                                fontSize: \"11px\",\r\n                                fontWeight: 500,\r\n                                letterSpacing: \"var(--tracking-wide)\",\r\n                                background: soundType === type ? (isLight ? \"var(--accent-10)\" : \"rgba(255,255,255,0.05)\") : \"transparent\",\r\n                                border: `1px solid ${soundType === type ? \"var(--accent-color)\" : (isLight ? \"var(--light-border)\" : \"var(--accent-10)\")}`,\r\n                                color: soundType === type ? \"var(--accent-color)\" : textColors.secondary,\r\n                                boxShadow: soundType === type ? (isLight ? \"0 2px 8px var(--light-shadow-tint)\" : \"0 0 15px var(--accent-10)\") : \"none\",\r\n                                gridColumn: type === 'Silence' ? 'span 3' : 'auto',\r\n                                transition: 'background 800ms cubic-bezier(0.4, 0, 0.2, 1), border-color 800ms ease-in-out, color 400ms ease, box-shadow 800ms ease',\r\n                            }}\r\n                        >\r\n                            {type}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Binaural Beats Options */}\r\n            {soundType === 'Binaural Beats' && (\r\n                <div className=\"animate-fade-in\">\r\n                    <div\r\n                        className=\"mb-3\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontSize: \"9px\",\r\n                            fontWeight: 600,\r\n                            letterSpacing: \"var(--tracking-mythic)\",\r\n                            textTransform: \"uppercase\",\r\n                            color: textColors.secondary,\r\n                            textAlign: \"center\"\r\n                        }}\r\n                    >\r\n                        Brainwave Target\r\n                    </div>\r\n                    <div className=\"grid grid-cols-5 gap-2\">\r\n                        {BINAURAL_PRESETS.map((preset) => (\r\n                            <button\r\n                                key={preset.id}\r\n                                onClick={() => setBinauralPreset(preset)}\r\n                                className=\"rounded-lg px-2 py-3 text-center flex flex-col items-center gap-1\"\r\n                                style={{\r\n                                    background: binauralPreset?.id === preset.id\r\n                                        ? `linear-gradient(135deg, ${preset.color}20, transparent)`\r\n                                        : \"transparent\",\r\n                                    border: `1px solid ${binauralPreset?.id === preset.id ? preset.color : \"var(--accent-10)\"}`,\r\n                                    boxShadow: binauralPreset?.id === preset.id ? `0 0 15px ${preset.color}30` : \"none\",\r\n                                    transition: 'background 800ms cubic-bezier(0.4, 0, 0.2, 1), border-color 800ms ease-in-out, box-shadow 800ms ease',\r\n                                }}\r\n                            >\r\n                                <span\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-display)\",\r\n                                        fontSize: \"11px\",\r\n                                        fontWeight: 600,\r\n                                        color: binauralPreset?.id === preset.id ? preset.color : textColors.primary,\r\n                                    }}\r\n                                >\r\n                                    {preset.name}\r\n                                </span>\r\n                                <span\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-body)\",\r\n                                        fontSize: \"8px\",\r\n                                        color: textColors.faint,\r\n                                    }}\r\n                                >\r\n                                    {preset.hz} Hz\r\n                                </span>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                    {binauralPreset && (\r\n                        <p\r\n                            className=\"mt-3 text-center\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-body)\",\r\n                                fontSize: \"10px\",\r\n                                fontStyle: \"italic\",\r\n                                color: textColors.description,\r\n                            }}\r\n                        >\r\n                            {binauralPreset.description}\r\n                        </p>\r\n                    )}\r\n\r\n                    {/* Carrier Frequency - Enhanced Fader */}\r\n                    <div className=\"mt-4\">\r\n                        <div\r\n                            className=\"mb-2 flex items-center justify-between\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-display)\",\r\n                                fontSize: \"8px\",\r\n                                fontWeight: 600,\r\n                                letterSpacing: \"var(--tracking-mythic)\",\r\n                                textTransform: \"uppercase\",\r\n                                color: textColors.muted,\r\n                            }}\r\n                        >\r\n                            <span>Base Frequency</span>\r\n                            <span style={{\r\n                                color: (() => {\r\n                                    const freq = carrierFrequency;\r\n                                    if (freq < 200) return '#FF8C42'; // Orange\r\n                                    if (freq < 300) return '#FFD93D'; // Yellow\r\n                                    if (freq < 400) return '#6BCF7F'; // Green\r\n                                    return '#4A90E2'; // Blue\r\n                                })(),\r\n                                fontWeight: 'bold',\r\n                                fontSize: '10px'\r\n                            }}>\r\n                                {carrierFrequency} Hz\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Custom Fader Track */}\r\n                        <div className=\"relative w-full h-12 flex items-center\">\r\n                            {/* Gradient Track */}\r\n                            <div\r\n                                className=\"absolute w-full h-2 rounded-full\"\r\n                                style={{\r\n                                    background: 'linear-gradient(to right, #FF8C42 0%, #FFD93D 33%, #6BCF7F 66%, #4A90E2 100%)',\r\n                                    boxShadow: 'inset 0 1px 3px rgba(0,0,0,0.5)',\r\n                                    opacity: 0.6\r\n                                }}\r\n                            />\r\n\r\n                            {/* Frequency Markers */}\r\n                            <div className=\"absolute w-full flex justify-between px-1\" style={{ top: '20px' }}>\r\n                                {[100, 200, 300, 400, 500].map(freq => (\r\n                                    <div key={freq} style={{\r\n                                        fontSize: '7px',\r\n                                        color: isLight ? 'var(--text-muted)' : 'rgba(255,255,255,0.3)',\r\n                                        fontFamily: 'monospace'\r\n                                    }}>\r\n                                        {freq}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Enhanced Slider Input */}\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"100\"\r\n                                max=\"500\"\r\n                                step=\"10\"\r\n                                value={carrierFrequency}\r\n                                onChange={(e) => setCarrierFrequency(Number(e.target.value))}\r\n                                className=\"absolute w-full cursor-pointer frequency-fader\"\r\n                                style={{\r\n                                    appearance: 'none',\r\n                                    background: 'transparent',\r\n                                    height: '100%',\r\n                                    zIndex: 2\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        <style>{`\r\n                            /* Enhanced Fader Thumb */\r\n                            .frequency-fader::-webkit-slider-thumb {\r\n                                appearance: none;\r\n                                width: 20px;\r\n                                height: 40px;\r\n                                border-radius: 4px;\r\n                                background: linear-gradient(135deg, \r\n                                    ${carrierFrequency < 200 ? '#FF8C42' :\r\n                                carrierFrequency < 300 ? '#FFD93D' :\r\n                                    carrierFrequency < 400 ? '#6BCF7F' : '#4A90E2'}, \r\n                                    ${carrierFrequency < 200 ? '#FF6B1A' :\r\n                                carrierFrequency < 300 ? '#FFC700' :\r\n                                    carrierFrequency < 400 ? '#4CAF50' : '#2E7BC4'});\r\n                                border: 2px solid rgba(255,255,255,0.3);\r\n                                box-shadow: 0 0 15px ${carrierFrequency < 200 ? 'rgba(255, 140, 66, 0.6)' :\r\n                                carrierFrequency < 300 ? 'rgba(255, 217, 61, 0.6)' :\r\n                                    carrierFrequency < 400 ? 'rgba(107, 207, 127, 0.6)' :\r\n                                        'rgba(74, 144, 226, 0.6)'\r\n                            }, 0 2px 8px rgba(0,0,0,0.4);\r\n                                cursor: grab;\r\n                                transition: transform 0.1s ease, box-shadow 0.2s ease;\r\n                            }\r\n                            \r\n                            .frequency-fader::-webkit-slider-thumb:hover {\r\n                                transform: scaleY(1.1);\r\n                                box-shadow: 0 0 20px ${carrierFrequency < 200 ? 'rgba(255, 140, 66, 0.8)' :\r\n                                carrierFrequency < 300 ? 'rgba(255, 217, 61, 0.8)' :\r\n                                    carrierFrequency < 400 ? 'rgba(107, 207, 127, 0.8)' :\r\n                                        'rgba(74, 144, 226, 0.8)'\r\n                            }, 0 3px 10px rgba(0,0,0,0.5);\r\n                            }\r\n                            \r\n                            .frequency-fader::-webkit-slider-thumb:active {\r\n                                cursor: grabbing;\r\n                                transform: scaleY(1.05);\r\n                            }\r\n                            \r\n                            /* Firefox */\r\n                            .frequency-fader::-moz-range-thumb {\r\n                                width: 20px;\r\n                                height: 40px;\r\n                                border-radius: 4px;\r\n                                background: linear-gradient(135deg, \r\n                                    ${carrierFrequency < 200 ? '#FF8C42' :\r\n                                carrierFrequency < 300 ? '#FFD93D' :\r\n                                    carrierFrequency < 400 ? '#6BCF7F' : '#4A90E2'}, \r\n                                    ${carrierFrequency < 200 ? '#FF6B1A' :\r\n                                carrierFrequency < 300 ? '#FFC700' :\r\n                                    carrierFrequency < 400 ? '#4CAF50' : '#2E7BC4'});\r\n                                border: 2px solid rgba(255,255,255,0.3);\r\n                                box-shadow: 0 0 15px ${carrierFrequency < 200 ? 'rgba(255, 140, 66, 0.6)' :\r\n                                carrierFrequency < 300 ? 'rgba(255, 217, 61, 0.6)' :\r\n                                    carrierFrequency < 400 ? 'rgba(107, 207, 127, 0.6)' :\r\n                                        'rgba(74, 144, 226, 0.6)'\r\n                            }, 0 2px 8px rgba(0,0,0,0.4);\r\n                                cursor: grab;\r\n                            }\r\n                        `}</style>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Isochronic Tones Options */}\r\n            {soundType === 'Isochronic Tones' && (\r\n                <div className=\"animate-fade-in\">\r\n                    <div\r\n                        className=\"mb-3\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontSize: \"9px\",\r\n                            fontWeight: 600,\r\n                            letterSpacing: \"var(--tracking-mythic)\",\r\n                            textTransform: \"uppercase\",\r\n                            color: textColors.secondary,\r\n                            textAlign: \"center\"\r\n                        }}\r\n                    >\r\n                        Pulse Frequency\r\n                    </div>\r\n                    <div className=\"grid grid-cols-5 gap-2\">\r\n                        {ISOCHRONIC_PRESETS.map((preset) => (\r\n                            <button\r\n                                key={preset.id}\r\n                                onClick={() => setIsochronicPreset(preset)}\r\n                                className=\"rounded-lg px-2 py-3 text-center flex flex-col items-center gap-1\"\r\n                                style={{\r\n                                    background: isochronicPreset?.id === preset.id\r\n                                        ? `linear-gradient(135deg, ${preset.color}20, transparent)`\r\n                                        : \"transparent\",\r\n                                    border: `1px solid ${isochronicPreset?.id === preset.id ? preset.color : \"var(--accent-10)\"}`,\r\n                                    boxShadow: isochronicPreset?.id === preset.id ? `0 0 15px ${preset.color}30` : \"none\",\r\n                                    transition: 'background 800ms cubic-bezier(0.4, 0, 0.2, 1), border-color 800ms ease-in-out, box-shadow 800ms ease',\r\n                                }}\r\n                            >\r\n                                <span\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-display)\",\r\n                                        fontSize: \"11px\",\r\n                                        fontWeight: 600,\r\n                                        color: isochronicPreset?.id === preset.id ? preset.color : textColors.primary,\r\n                                    }}\r\n                                >\r\n                                    {preset.name}\r\n                                </span>\r\n                                <span\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-body)\",\r\n                                        fontSize: \"8px\",\r\n                                        color: textColors.faint,\r\n                                    }}\r\n                                >\r\n                                    {preset.hz} Hz\r\n                                </span>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                    {isochronicPreset && (\r\n                        <p\r\n                            className=\"mt-3 text-center\"\r\n                            style={{\r\n                                fontFamily: \"var(--font-body)\",\r\n                                fontSize: \"10px\",\r\n                                fontStyle: \"italic\",\r\n                                color: textColors.description,\r\n                            }}\r\n                        >\r\n                            {isochronicPreset.description}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Mantra Options */}\r\n            {soundType === 'Mantra' && (\r\n                <div className=\"animate-fade-in\">\r\n                    <div\r\n                        className=\"mb-3\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontSize: \"9px\",\r\n                            fontWeight: 600,\r\n                            letterSpacing: \"var(--tracking-mythic)\",\r\n                            textTransform: \"uppercase\",\r\n                            color: textColors.muted,\r\n                            textAlign: \"center\"\r\n                        }}\r\n                    >\r\n                        Sacred Sound\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        {MANTRA_PRESETS.map((preset) => (\r\n                            <button\r\n                                key={preset.id}\r\n                                onClick={() => setMantraPreset(preset)}\r\n                                className=\"rounded-lg px-3 py-3 text-left\"\r\n                                style={{\r\n                                    background: mantraPreset?.id === preset.id\r\n                                        ? (isLight ? \"var(--accent-10)\" : \"rgba(255,255,255,0.05)\")\r\n                                        : \"transparent\",\r\n                                    border: `1px solid ${mantraPreset?.id === preset.id ? \"var(--accent-color)\" : (isLight ? \"var(--light-border)\" : \"var(--accent-10)\")}`,\r\n                                    boxShadow: mantraPreset?.id === preset.id ? (isLight ? \"0 2px 8px var(--light-shadow-tint)\" : \"0 0 15px var(--accent-10)\") : \"none\",\r\n                                    transition: 'background 800ms cubic-bezier(0.4, 0, 0.2, 1), border-color 800ms ease-in-out, color 400ms ease, box-shadow 800ms ease',\r\n                                }}\r\n                            >\r\n                                <span\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-display)\",\r\n                                        fontSize: \"12px\",\r\n                                        fontWeight: 600,\r\n                                        color: mantraPreset?.id === preset.id ? \"var(--accent-color)\" : textColors.primary,\r\n                                    }}\r\n                                >\r\n                                    {preset.name}\r\n                                </span>\r\n                                <span\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-body)\",\r\n                                        fontSize: \"9px\",\r\n                                        display: \"block\",\r\n                                        marginTop: \"2px\",\r\n                                        color: textColors.faint,\r\n                                        fontStyle: \"italic\",\r\n                                    }}\r\n                                >\r\n                                    {preset.description}\r\n                                </span>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Nature Sounds Options */}\r\n            {soundType === 'Nature' && (\r\n                <div className=\"animate-fade-in\">\r\n                    <div\r\n                        className=\"mb-3\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontSize: \"9px\",\r\n                            fontWeight: 600,\r\n                            letterSpacing: \"var(--tracking-mythic)\",\r\n                            textTransform: \"uppercase\",\r\n                            color: textColors.muted,\r\n                            textAlign: \"center\"\r\n                        }}\r\n                    >\r\n                        Natural Ambience\r\n                    </div>\r\n                    <div className=\"grid grid-cols-3 gap-2\">\r\n                        {NATURE_PRESETS.map((preset) => (\r\n                            <button\r\n                                key={preset.id}\r\n                                onClick={() => setNaturePreset(preset)}\r\n                                className=\"rounded-lg px-2 py-3 text-center flex flex-col items-center gap-1\"\r\n                                style={{\r\n                                    background: naturePreset?.id === preset.id\r\n                                        ? (isLight ? \"var(--accent-10)\" : \"rgba(255,255,255,0.05)\")\r\n                                        : \"transparent\",\r\n                                    border: `1px solid ${naturePreset?.id === preset.id ? \"var(--accent-color)\" : (isLight ? \"var(--light-border)\" : \"var(--accent-10)\")}`,\r\n                                    boxShadow: naturePreset?.id === preset.id ? (isLight ? \"0 2px 8px var(--light-shadow-tint)\" : \"0 0 15px var(--accent-10)\") : \"none\",\r\n                                    transition: 'background 800ms cubic-bezier(0.4, 0, 0.2, 1), border-color 800ms ease-in-out, color 400ms ease, box-shadow 800ms ease',\r\n                                }}\r\n                            >\r\n                                <span\r\n                                    style={{\r\n                                        fontFamily: \"var(--font-display)\",\r\n                                        fontSize: \"11px\",\r\n                                        fontWeight: 600,\r\n                                        color: naturePreset?.id === preset.id ? \"var(--accent-color)\" : textColors.primary,\r\n                                    }}\r\n                                >\r\n                                    {preset.name}\r\n                                </span>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Silence - just a note */}\r\n            {soundType === 'Silence' && (\r\n                <div className=\"animate-fade-in text-center py-4\">\r\n                    <p\r\n                        style={{\r\n                            fontFamily: \"var(--font-body)\",\r\n                            fontSize: \"11px\",\r\n                            fontStyle: \"italic\",\r\n                            color: textColors.description,\r\n                        }}\r\n                    >\r\n                        Practice in intentional silence.<br />\r\n                        No sound will be played.\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Volume Slider (for all except Silence) */}\r\n            {soundType !== 'Silence' && (\r\n                <div className=\"mt-4\">\r\n                    <div\r\n                        className=\"mb-2 flex items-center justify-between\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontSize: \"8px\",\r\n                            fontWeight: 600,\r\n                            letterSpacing: \"var(--tracking-mythic)\",\r\n                            textTransform: \"uppercase\",\r\n                            color: textColors.muted,\r\n                        }}\r\n                    >\r\n                        <span>Volume</span>\r\n                        <span style={{ color: 'var(--accent-color)' }}>{Math.round(volume * 100)}%</span>\r\n                    </div>\r\n                    <input\r\n                        type=\"range\"\r\n                        min=\"0\"\r\n                        max=\"1\"\r\n                        step=\"0.05\"\r\n                        value={volume}\r\n                        onChange={(e) => setVolume(Number(e.target.value))}\r\n                        className=\"w-full\"\r\n                        style={{\r\n                            accentColor: 'var(--accent-color)',\r\n                        }}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            {/* Info note */}\r\n            <div\r\n                className=\"text-center pt-2\"\r\n                style={{\r\n                    fontFamily: \"var(--font-body)\",\r\n                    fontSize: \"9px\",\r\n                    color: textColors.ghost,\r\n                    fontStyle: \"italic\",\r\n                }}\r\n            >\r\n                Use headphones for binaural beats\r\n            </div>\r\n\r\n            <style>{`\r\n                @keyframes fade-in {\r\n                    from { opacity: 0; transform: translateY(5px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n                .animate-fade-in {\r\n                    animation: fade-in 0.3s ease-out;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\SpeechToTextInput.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  38 |       };\n  39 |\n> 40 |       setRecognition(recognitionInstance);\n     |       ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  41 |       setIsSupported(true);\n  42 |     }\n  43 |   }, [onChange]);","line":40,"column":7,"nodeType":null,"endLine":40,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// SpeechToTextInput.jsx\r\n// Speech-to-text input component for thought catalog onboarding\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\n\r\nexport function SpeechToTextInput({ value, onChange, placeholder = 'Enter a thought...' }) {\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [recognition, setRecognition] = useState(null);\r\n  const [isSupported, setIsSupported] = useState(false);\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n\r\n  useEffect(() => {\r\n    // Check for browser support\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n\r\n    if (SpeechRecognition) {\r\n      const recognitionInstance = new SpeechRecognition();\r\n      recognitionInstance.continuous = false;\r\n      recognitionInstance.lang = 'en-US';\r\n      recognitionInstance.interimResults = false;\r\n      recognitionInstance.maxAlternatives = 1;\r\n\r\n      recognitionInstance.onresult = (event) => {\r\n        const transcript = event.results[0][0].transcript;\r\n        onChange(transcript);\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognitionInstance.onerror = (event) => {\r\n        console.error('Speech recognition error:', event.error);\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognitionInstance.onend = () => {\r\n        setIsListening(false);\r\n      };\r\n\r\n      setRecognition(recognitionInstance);\r\n      setIsSupported(true);\r\n    }\r\n  }, [onChange]);\r\n\r\n  const startListening = () => {\r\n    if (recognition && !isListening) {\r\n      try {\r\n        recognition.start();\r\n        setIsListening(true);\r\n      } catch (err) {\r\n        console.error('Failed to start recognition:', err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const stopListening = () => {\r\n    if (recognition && isListening) {\r\n      recognition.stop();\r\n      setIsListening(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative flex items-center gap-2\">\r\n      <input\r\n        type=\"text\"\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        placeholder={placeholder}\r\n        className=\"flex-1 px-4 py-3 rounded-lg text-sm transition-all\"\r\n        style={{\r\n          background: isLight ? 'rgba(255,252,245,0.6)' : 'rgba(255,255,255,0.05)',\r\n          border: isLight ? '1px solid rgba(60,50,35,0.2)' : '1px solid rgba(255,255,255,0.1)',\r\n          color: isLight ? 'var(--light-text-primary)' : 'var(--text-primary)',\r\n          fontFamily: 'var(--font-body)',\r\n        }}\r\n      />\r\n\r\n      {isSupported && (\r\n        <button\r\n          onClick={isListening ? stopListening : startListening}\r\n          className=\"px-4 py-3 rounded-lg text-sm font-semibold transition-all hover:scale-105\"\r\n          style={{\r\n            background: isListening\r\n              ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)'\r\n              : (isLight ? 'rgba(60,50,35,0.08)' : 'rgba(255,255,255,0.08)'),\r\n            border: isListening\r\n              ? '1px solid #dc2626'\r\n              : (isLight ? '1px solid rgba(60,50,35,0.15)' : '1px solid rgba(255,255,255,0.15)'),\r\n            color: isListening ? '#fff' : (isLight ? 'var(--light-text-primary)' : 'var(--text-primary)'),\r\n            boxShadow: isListening ? '0 0 20px rgba(239,68,68,0.4)' : 'none',\r\n          }}\r\n          title={isListening ? 'Stop listening' : 'Speak to enter text'}\r\n        >\r\n          {isListening ? (\r\n            <span className=\"flex items-center gap-2\">\r\n              <span className=\"inline-block w-2 h-2 rounded-full bg-white animate-pulse\" />\r\n              Listening...\r\n            </span>\r\n          ) : (\r\n            '≡ƒÄñ Speak'\r\n          )}\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SpeechToTextInput;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\StageTitle.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'hasPath' is defined but never used.","line":100,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"hasPath"},"fix":{"range":[5376,5385],"text":""},"desc":"Remove unused variable 'hasPath'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'attention' is defined but never used.","line":100,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":80,"suggestions":[{"messageId":"removeVar","data":{"varName":"attention"},"fix":{"range":[5385,5396],"text":""},"desc":"Remove unused variable 'attention'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'goldBorderTexture' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":121,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"goldBorderTexture"},"fix":{"range":[6491,6763],"text":""},"desc":"Remove unused variable 'goldBorderTexture'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/StageTitle.jsx\r\n// Shared Stage Title component for displaying current stage and path across all sections\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { useDisplayModeStore } from \"../state/displayModeStore.js\";\r\nimport { GoldCartouche } from \"./GoldCartouche.jsx\";\r\nimport { calculateGradientAngle, getAvatarCenter, getDynamicGoldGradient } from \"../utils/dynamicLighting.js\";\r\nimport { STAGE_COLORS } from \"../constants/stageColors.js\";\r\n\r\n// Sanskrit path names with their closest one-word English translations\r\nconst PATH_TRANSLATIONS = {\r\n    soma: { sanskrit: 'Soma', english: 'Sensory' },\r\n    prana: { sanskrit: 'Prana', english: 'Breath' },\r\n    dhyana: { sanskrit: 'Dhyana', english: 'Meditation' },\r\n    drishti: { sanskrit: 'Drishti', english: 'Vision' },\r\n    jnana: { sanskrit: 'Jnana', english: 'Knowledge' },\r\n    samyoga: { sanskrit: 'Samyoga', english: 'Union' },\r\n};\r\n\r\n// Attention vector labels\r\nconst ATTENTION_LABELS = {\r\n    vigilance: 'vigilance',\r\n    sahaja: 'sahaja',\r\n    ekagrata: 'ekagrata',\r\n};\r\n\r\n// Sacred geometry path icons (SVG components)\r\nconst PathIcon = ({ path, color, size = 20 }) => {\r\n    const iconColor = color || 'currentColor';\r\n\r\n    const icons = {\r\n        // Soma (Body): Concentric circles - grounded body-field\r\n        soma: (\r\n            <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke={iconColor} strokeWidth=\"1\" opacity=\"0.4\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"6\" stroke={iconColor} strokeWidth=\"1\" opacity=\"0.6\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"2.5\" fill={iconColor} opacity=\"0.9\" />\r\n            </svg>\r\n        ),\r\n        // Prana (Breath): Spiral flow lines - vital currents\r\n        prana: (\r\n            <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                    d=\"M12 3 C8 5, 6 9, 8 12 C10 15, 8 19, 12 21\"\r\n                    stroke={iconColor} strokeWidth=\"1.2\" strokeLinecap=\"round\" opacity=\"0.7\"\r\n                />\r\n                <path\r\n                    d=\"M12 3 C16 5, 18 9, 16 12 C14 15, 16 19, 12 21\"\r\n                    stroke={iconColor} strokeWidth=\"1.2\" strokeLinecap=\"round\" opacity=\"0.7\"\r\n                />\r\n                <circle cx=\"12\" cy=\"12\" r=\"2\" fill={iconColor} opacity=\"0.9\" />\r\n            </svg>\r\n        ),\r\n        // Dhyana (Meditation): Abstract lotus geometry - stillness\r\n        dhyana: (\r\n            <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path d=\"M12 4 L14 10 L12 8 L10 10 Z\" stroke={iconColor} strokeWidth=\"0.8\" fill={iconColor} opacity=\"0.5\" />\r\n                <path d=\"M12 4 L16 12 L12 9 L8 12 Z\" stroke={iconColor} strokeWidth=\"0.8\" opacity=\"0.4\" />\r\n                <ellipse cx=\"12\" cy=\"18\" rx=\"6\" ry=\"2\" stroke={iconColor} strokeWidth=\"1\" opacity=\"0.5\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"2\" fill={iconColor} opacity=\"0.9\" />\r\n            </svg>\r\n        ),\r\n        // Drishti (Vision): Aperture/lens rings - radiating perception\r\n        drishti: (\r\n            <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"9\" stroke={iconColor} strokeWidth=\"0.8\" opacity=\"0.3\" />\r\n                <path d=\"M12 3 L12 6 M12 18 L12 21 M3 12 L6 12 M18 12 L21 12\" stroke={iconColor} strokeWidth=\"1\" opacity=\"0.5\" />\r\n                <path d=\"M5.5 5.5 L7.5 7.5 M16.5 16.5 L18.5 18.5 M5.5 18.5 L7.5 16.5 M16.5 7.5 L18.5 5.5\" stroke={iconColor} strokeWidth=\"0.8\" opacity=\"0.4\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"4\" stroke={iconColor} strokeWidth=\"1\" opacity=\"0.6\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"1.5\" fill={iconColor} opacity=\"0.95\" />\r\n            </svg>\r\n        ),\r\n        // Jnana (Wisdom): Crystalline light burst - knowledge\r\n        jnana: (\r\n            <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path d=\"M12 2 L12 7 M12 17 L12 22 M2 12 L7 12 M17 12 L22 12\" stroke={iconColor} strokeWidth=\"1.2\" opacity=\"0.6\" />\r\n                <path d=\"M5 5 L8.5 8.5 M15.5 15.5 L19 19 M5 19 L8.5 15.5 M15.5 8.5 L19 5\" stroke={iconColor} strokeWidth=\"0.8\" opacity=\"0.4\" />\r\n                <polygon points=\"12,6 14,10 12,9 10,10\" fill={iconColor} opacity=\"0.7\" />\r\n                <polygon points=\"12,18 14,14 12,15 10,14\" fill={iconColor} opacity=\"0.7\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"2.5\" fill={iconColor} opacity=\"0.9\" />\r\n            </svg>\r\n        ),\r\n        // Samyoga (Integration): Vesica piscis / interlocking rings - unity\r\n        samyoga: (\r\n            <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <circle cx=\"9\" cy=\"12\" r=\"6\" stroke={iconColor} strokeWidth=\"1\" opacity=\"0.5\" />\r\n                <circle cx=\"15\" cy=\"12\" r=\"6\" stroke={iconColor} strokeWidth=\"1\" opacity=\"0.5\" />\r\n                <ellipse cx=\"12\" cy=\"12\" rx=\"2.5\" ry=\"5\" fill={iconColor} opacity=\"0.3\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"1.5\" fill={iconColor} opacity=\"0.9\" />\r\n            </svg>\r\n        ),\r\n    };\r\n\r\n    return icons[path?.toLowerCase()] || icons.soma;\r\n};\r\n\r\n// Stage colors for glow effects and styling\r\n\r\n\r\n// Textured Title Card Component - Geometrically Stable with Minimal Texture\r\nconst TexturedTitleCard = ({ children, stageColors, isLight, hasPath, attention, width }) => {\r\n    const cardRef = useRef(null);\r\n    const [gradientAngle, setGradientAngle] = useState(135);\r\n\r\n    // Calculate gradient angle based on position relative to avatar\r\n    useEffect(() => {\r\n        if (cardRef.current) {\r\n            const rect = cardRef.current.getBoundingClientRect();\r\n            const avatarCenter = getAvatarCenter();\r\n            const angle = calculateGradientAngle(rect, avatarCenter);\r\n            setGradientAngle(angle);\r\n        }\r\n    }, []);\r\n\r\n    // Static SVG noise texture URL for marble effect (minimal opacity)\r\n    const noiseTexture = `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 400 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04' numOctaves='3' seed='15' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E\")`;\r\n\r\n    // Stage-adaptive tint color (use gradient midpoint)\r\n    const tintColor = stageColors.gradient[1];\r\n\r\n    // Gold border texture (CSS-generated hammered edge)\r\n    const goldBorderTexture = `url(\"data:image/svg+xml,%3Csvg width='12' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,0 L12,0 L12,12 L0,12 Z' fill='%23D4AF37' /%3E%3Cpath d='M0,0 L1,1 L1,11 L0,12 M12,0 L11,1 L11,11 L12,12' fill='%23C9A942' /%3E%3C/svg%3E\")`;\r\n\r\n    return (\r\n        <div\r\n            ref={cardRef}\r\n            className=\"relative overflow-hidden rounded-2xl\"\r\n            style={{\r\n                // Fixed padding to maintain stable internal grid - compact sizing\r\n                padding: '4px 34px 4px',\r\n                width: width,\r\n                minWidth: width ? undefined : '300px',\r\n\r\n                // Refined Gold Border - Beveled Light Simulation (Dynamic lighting from avatar)\r\n                border: '2px solid transparent',\r\n                backgroundImage: isLight\r\n                    ? `\r\n            linear-gradient(rgba(255,252,248,0.96), rgba(255,250,242,0.92)),\r\n            ${getDynamicGoldGradient(gradientAngle, true)}\r\n          `\r\n                    : `\r\n            linear-gradient(rgba(22,20,18,0.88), rgba(16,14,12,0.82)),\r\n            linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02))\r\n          `,\r\n                backgroundOrigin: 'padding-box, border-box',\r\n                backgroundClip: 'padding-box, border-box',\r\n\r\n                // Soft shadow for depth + specular highlight + contact shadow\r\n                boxShadow: isLight\r\n                    ? `\r\n            0 0 0 0.5px #AF8B2C,\r\n            inset -1px -1px 0 0.5px rgba(255, 250, 235, 0.8),\r\n            inset 1px 1px 0 0.5px rgba(101, 67, 33, 0.6),\r\n            0 3px 16px rgba(100,80,50,0.08),\r\n            inset 0 1px 0 rgba(255,255,255,0.4)\r\n          `\r\n                    : `\r\n            0 0 0 0.5px rgba(255,255,255,0.1),\r\n            0 3px 20px rgba(0,0,0,0.25),\r\n            inset 0 1px 0 rgba(255,250,240,0.04)\r\n          `,\r\n\r\n                // Minimal blur\r\n                backdropFilter: 'blur(8px)',\r\n                WebkitBackdropFilter: 'blur(8px)',\r\n            }}\r\n        >\r\n            {/* Noise/Marble Texture Overlay - VERY SUBTLE (4% max) */}\r\n            <div\r\n                className=\"absolute inset-0 pointer-events-none\"\r\n                style={{\r\n                    backgroundImage: noiseTexture,\r\n                    backgroundSize: 'cover',\r\n                    mixBlendMode: 'normal', // Default to normal for clean edges\r\n                    opacity: isLight ? 0.04 : 0.03,\r\n                }}\r\n            />\r\n\r\n            {/* Stage-Tinted Vein Overlay - Even more subtle */}\r\n            <div\r\n                className=\"absolute inset-0 pointer-events-none\"\r\n                style={{\r\n                    background: isLight\r\n                        ? `radial-gradient(ellipse 100% 70% at 35% 40%, ${tintColor}08 0%, transparent 55%)`\r\n                        : `radial-gradient(ellipse 100% 70% at 35% 40%, ${tintColor}05 0%, transparent 55%)`,\r\n                    mixBlendMode: 'normal',\r\n                }}\r\n            />\r\n\r\n            {/* Content Layer - Fixed 2-Row Grid */}\r\n            <div className=\"relative z-10\">\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// CSS-based Stage Title Component with stacked vertical layout\r\nexport function StageTitle({ stage, path, attention, showWelcome = true, width }) {\r\n    const [showEnglish, setShowEnglish] = useState(false);\r\n    const [tooltip, setTooltip] = useState(null); // 'stage', 'path', or null\r\n    const [tooltipTimer, setTooltipTimer] = useState(null);\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const stageAssetStyle = useDisplayModeStore(s => s.stageAssetStyle);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const stageLower = (stage || \"flame\").toLowerCase();\r\n    const stageColors = STAGE_COLORS[stageLower] || STAGE_COLORS.flame;\r\n\r\n    // Capitalize first letter\r\n    const stageName = (stage || \"Flame\").charAt(0).toUpperCase() + (stage || \"Flame\").slice(1).toLowerCase();\r\n\r\n    // Get the path translation, or fallback to capitalized path\r\n    const pathLower = path ? path.toLowerCase() : null;\r\n    const pathTranslation = pathLower ? PATH_TRANSLATIONS[pathLower] : null;\r\n    const pathName = pathTranslation\r\n        ? (showEnglish ? pathTranslation.english : pathTranslation.sanskrit)\r\n        : (path ? path.charAt(0).toUpperCase() + path.slice(1).toLowerCase() : null);\r\n\r\n    // Check if we have a path to display\r\n    const hasPath = path && path.trim() !== '';\r\n\r\n    // Tooltip descriptions (general, non-statistical)\r\n    const STAGE_DESCRIPTIONS = {\r\n        seedling: \"Your journey is just beginning. This stage represents the planting of seeds of awareness.\",\r\n        ember: \"A spark of dedication has ignited. You're building the foundations of consistent practice.\",\r\n        flame: \"Your practice burns steady. Discipline and understanding are growing stronger.\",\r\n        beacon: \"You've become a light for yourself. Deep patterns of awareness are now established.\",\r\n        stellar: \"Mastery radiates from within. Your practice illuminates every aspect of life.\",\r\n    };\r\n\r\n    const PATH_DESCRIPTIONS = {\r\n        soma: \"The path of embodiment. Cultivating awareness through the body and senses.\",\r\n        prana: \"The path of breath. Using life force as the doorway to presence.\",\r\n        dhyana: \"The path of meditation. Training the mind through stillness and focus.\",\r\n        drishti: \"The path of vision. Developing clear seeing and insight.\",\r\n        jnana: \"The path of knowledge. Understanding through wisdom and inquiry.\",\r\n        samyoga: \"The path of integration. Unifying all aspects of self and practice.\",\r\n    };\r\n\r\n    // Tooltip handlers with 2-second delay\r\n    const handleMouseEnter = (type) => {\r\n        const timer = setTimeout(() => {\r\n            setTooltip(type);\r\n        }, 2000);\r\n        setTooltipTimer(timer);\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        if (tooltipTimer) {\r\n            clearTimeout(tooltipTimer);\r\n            setTooltipTimer(null);\r\n        }\r\n        setTooltip(null);\r\n    };\r\n\r\n    const currentStageDescription = STAGE_DESCRIPTIONS[stageLower] || STAGE_DESCRIPTIONS.flame;\r\n    const currentPathDescription = pathLower ? PATH_DESCRIPTIONS[pathLower] : null;\r\n\r\n    return (\r\n        <div\r\n            className=\"stage-title-container relative flex flex-col items-center justify-center overflow-visible\"\r\n            style={{ zIndex: 15 }}\r\n        >\r\n\r\n            {/* Welcome label - optional */}\r\n            {/* Welcome text removed per user request */}\r\n\r\n            {/* Ambient glow */}\r\n            <div\r\n                className=\"stage-ambient-glow absolute\"\r\n                style={{\r\n                    width: '400px',\r\n                    height: '60px',\r\n                    top: showWelcome ? '60%' : '50%',\r\n                    left: '50%',\r\n                    transform: 'translate(-50%, -50%)',\r\n                    background: `radial-gradient(ellipse 100% 100% at center, ${stageColors.glow}35 0%, transparent 70%)`,\r\n                    filter: 'blur(20px)',\r\n                    pointerEvents: 'none',\r\n                }}\r\n            />\r\n\r\n            {/* Floating Particles - subtle sparkles for contrast */}\r\n            <div className=\"absolute pointer-events-none\" style={{ width: '400px', height: '80px', top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }}>\r\n                {[...Array(8)].map((_, i) => (\r\n                    <div\r\n                        key={i}\r\n                        className=\"stage-particle absolute rounded-full\"\r\n                        style={{\r\n                            width: `${2 + (i % 3)}px`,\r\n                            height: `${2 + (i % 3)}px`,\r\n                            left: `${10 + (i * 11)}%`,\r\n                            top: `${20 + ((i * 17) % 60)}%`,\r\n                            backgroundColor: stageColors.gradient[i % 3],\r\n                            opacity: 0.4 + (i % 3) * 0.1,\r\n                            animation: `particleFloat${i % 4} ${3 + (i % 2)}s ease-in-out infinite`,\r\n                            animationDelay: `${i * 0.3}s`,\r\n                            boxShadow: `0 0 ${4 + (i % 2) * 2}px ${stageColors.glow}60`,\r\n                        }}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            {/* Divider Tick above Title - Vertical Spine (Coupling to Orb) */}\r\n            <div\r\n                className=\"relative -mb-1 opacity-30 pointer-events-none\"\r\n                style={{ color: stageColors.gradient[1] }}\r\n            >\r\n                <svg width=\"2\" height=\"20\" viewBox=\"0 0 2 20\" fill=\"none\">\r\n                    <rect width=\"2\" height=\"20\" fill=\"currentColor\" rx=\"1\" />\r\n                </svg>\r\n            </div>\r\n\r\n            {/* Title container - Geometrically Stable Textured Card */}\r\n            <TexturedTitleCard stageColors={stageColors} isLight={isLight} hasPath={hasPath} attention={attention} width={width}>\r\n                {/* FIXED 2-ROW GRID LAYOUT*/}\r\n                <div className=\"flex flex-col items-center gap-1\">\r\n\r\n                    {/* ROW 1: Stage + Attention Vector + Path (3 EQUAL columns) */}\r\n                    <div\r\n                        className=\"grid items-center justify-items-center w-full\"\r\n                        style={{\r\n                            gridTemplateColumns: '1fr 1fr 1fr', // 3 equal columns\r\n                            gap: '16px'\r\n                        }}\r\n                    >\r\n                        {/* LEFT COL: Stage (Centered) */}\r\n                        <div className=\"flex justify-center w-full\">\r\n                            <div\r\n                                className=\"relative cursor-help\"\r\n                                onMouseEnter={() => handleMouseEnter('stage')}\r\n                                onMouseLeave={handleMouseLeave}\r\n                            >\r\n                                <img\r\n                                    src={`${import.meta.env.BASE_URL}titles/set${stageAssetStyle}/${isLight ? 'light' : 'dark'}/stage_${stageLower}.png?v=${stageAssetStyle}`}\r\n                                    alt={stageLower}\r\n                                    className=\"h-20 w-auto object-contain transition-transform duration-500\"\r\n                                    style={{\r\n                                        filter: isLight \r\n                                            ? 'brightness(0.95) contrast(1.1)' \r\n                                            : 'brightness(1.15) contrast(1.15) drop-shadow(0 0 12px rgba(255,255,255,0.3))',\r\n                                        transform: `scale(${stageAssetStyle === 1 ? 1 : 1.8})`,\r\n                                        imageRendering: 'crisp-edges'\r\n                                    }}\r\n                                    onError={(e) => {\r\n                                        e.currentTarget.style.display = 'none';\r\n                                        const fallback = e.currentTarget.closest('.relative')?.querySelector('.text-fallback');\r\n                                        if (fallback) fallback.style.display = 'block';\r\n                                    }}\r\n                                />\r\n\r\n                                {/* Text fallback for Stage */}\r\n                                <span\r\n                                    className=\"text-fallback text-[1.4rem] font-medium uppercase\"\r\n                                    style={{\r\n                                        display: 'none',\r\n                                        fontFamily: \"var(--font-display)\",\r\n                                        color: isLight ? 'rgba(45, 40, 35, 0.9)' : stageColors.gradient[1],\r\n                                        letterSpacing: '0.25em',\r\n                                    }}\r\n                                >\r\n                                    {stageName}\r\n                                </span>\r\n\r\n                                {/* Stage Tooltip */}\r\n                                {tooltip === 'stage' && (\r\n                                    <div\r\n                                        className=\"absolute left-1/2 -translate-x-1/2 top-full mt-3 px-4 py-3 rounded-xl z-[9999] animate-fade-in\"\r\n                                        style={{\r\n                                            background: 'rgba(0,0,0,0.9)',\r\n                                            backdropFilter: 'blur(12px)',\r\n                                            border: `1px solid ${stageColors.glow}40`,\r\n                                            boxShadow: `0 4px 20px rgba(0,0,0,0.5), 0 0 20px ${stageColors.glow}20`,\r\n                                            width: '260px',\r\n                                        }}\r\n                                    >\r\n                                        <div\r\n                                            style={{\r\n                                                fontFamily: \"var(--font-ui)\",\r\n                                                fontSize: '12px',\r\n                                                lineHeight: 1.6,\r\n                                                color: 'rgba(253,251,245,0.85)',\r\n                                                textAlign: 'center',\r\n                                            }}\r\n                                        >\r\n                                            <span style={{ color: stageColors.glow, fontWeight: 600 }}>{stageName}</span>\r\n                                            <br />\r\n                                            {currentStageDescription}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* MID COL: Attention Vector (Gold Cartouche) OR Separator (Centered) */}\r\n                        <div className=\"flex items-center justify-center\">\r\n                            {attention && attention !== 'none' ? (\r\n                                <GoldCartouche\r\n                                    text={attention}\r\n                                    stageColor={stageColors.gradient[1]}\r\n                                    isLight={isLight}\r\n                                />\r\n                            ) : (\r\n                                <div\r\n                                    className=\"divider-glyph relative\"\r\n                                    style={{\r\n                                        opacity: hasPath ? 0.5 : 0,\r\n                                        visibility: hasPath ? 'visible' : 'hidden',\r\n                                        width: '18px',\r\n                                        transition: 'opacity 0.3s ease'\r\n                                    }}\r\n                                >\r\n                                    <svg width=\"18\" height=\"18\" viewBox=\"0 0 14 14\">\r\n                                        <path\r\n                                            d=\"M7 1 L13 7 L7 13 L1 7 Z\"\r\n                                            fill=\"none\"\r\n                                            stroke={stageColors.gradient[1]}\r\n                                            strokeWidth=\"1.2\"\r\n                                            style={{\r\n                                                filter: `drop-shadow(0 0 3px ${stageColors.glow}40)`,\r\n                                            }}\r\n                                        />\r\n                                        <circle\r\n                                            cx=\"7\"\r\n                                            cy=\"7\"\r\n                                            r=\"1.5\"\r\n                                            fill={stageColors.gradient[1]}\r\n                                            opacity=\"0.8\"\r\n                                        />\r\n                                    </svg>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* RIGHT COL: Path (Centered) */}\r\n                        <div className=\"flex justify-center w-full items-center\">\r\n                            {hasPath && (\r\n                                <div\r\n                                    className=\"path-section relative flex items-center justify-center cursor-help\"\r\n                                    onMouseEnter={() => handleMouseEnter('path')}\r\n                                    onMouseLeave={handleMouseLeave}\r\n                                >\r\n                                    <img\r\n                                        src={`${import.meta.env.BASE_URL}titles/set${stageAssetStyle}/${isLight ? 'light' : 'dark'}/path_${pathLower}.png?v=${stageAssetStyle}`}\r\n                                        alt={pathLower}\r\n                                        className=\"h-20 w-auto object-contain transition-transform duration-500\"\r\n                                        style={{\r\n                                            filter: isLight \r\n                                                ? 'brightness(0.95) contrast(1.1)' \r\n                                                : 'brightness(1.15) contrast(1.15) drop-shadow(0 0 12px rgba(255,255,255,0.3))',\r\n                                            transform: `scale(${stageAssetStyle === 1 ? 1 : 1.8})`,\r\n                                            imageRendering: 'crisp-edges'\r\n                                        }}\r\n                                        onError={(e) => {\r\n                                            e.currentTarget.style.display = 'none';\r\n                                            const textFallback = e.currentTarget.parentElement?.querySelector('.path-text-fallback');\r\n                                            if (textFallback) textFallback.style.display = 'block';\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/* Path text fallback */}\r\n                                    <span\r\n                                        className=\"path-text-fallback text-[1.3rem] tracking-[0.08em]\"\r\n                                        onClick={() => setShowEnglish(!showEnglish)}\r\n                                        style={{\r\n                                            display: 'none',\r\n                                            fontFamily: \"var(--font-body)\",\r\n                                            fontStyle: 'italic',\r\n                                            fontWeight: 500,\r\n                                            color: `${stageColors.gradient[1]}dd`,\r\n                                            cursor: 'pointer',\r\n                                            letterSpacing: 'var(--tracking-wide)',\r\n                                        }}\r\n                                    >\r\n                                        {pathName}\r\n                                    </span>\r\n\r\n                                    {/* Path Tooltip */}\r\n                                    {tooltip === 'path' && currentPathDescription && (\r\n                                        <div\r\n                                            className=\"absolute left-1/2 -translate-x-1/2 top-full mt-3 px-4 py-3 rounded-xl z-[9999] animate-fade-in\"\r\n                                            style={{\r\n                                                background: 'rgba(0,0,0,0.9)',\r\n                                                backdropFilter: 'blur(12px)',\r\n                                                border: `1px solid ${stageColors.glow}40`,\r\n                                                boxShadow: `0 4px 20px rgba(0,0,0,0.5), 0 0 20px ${stageColors.glow}20`,\r\n                                                width: '280px',\r\n                                            }}\r\n                                        >\r\n                                            <div\r\n                                                style={{\r\n                                                    fontFamily: \"var(--font-ui)\",\r\n                                                    fontSize: '12px',\r\n                                                    lineHeight: 1.6,\r\n                                                    color: 'rgba(253,251,245,0.85)',\r\n                                                    textAlign: 'center',\r\n                                                }}\r\n                                            >\r\n                                                <span style={{ color: stageColors.glow, fontWeight: 600 }}>{pathName}</span>\r\n                                                <br />\r\n                                                {currentPathDescription}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* ROW 2: Removed - Attention now inline in Row 1 as gold cartouche */}\r\n                </div>\r\n            </TexturedTitleCard>\r\n\r\n\r\n            {/* CSS Animations */}\r\n            <style>{`\r\n        .stage-title-text {\r\n          animation: titleFloat 6s ease-in-out infinite;\r\n        }\r\n        \r\n        .stage-ambient-glow {\r\n          animation: ambientPulse 4s ease-in-out infinite;\r\n        }\r\n        \r\n        .stage-accent-line {\r\n          animation: lineGlow 3s ease-in-out infinite;\r\n        }\r\n        \r\n        .stage-name {\r\n          animation: nameGlow 5s ease-in-out infinite;\r\n        }\r\n        \r\n        @keyframes titleFloat {\r\n          0%, 100% { transform: translateY(0); }\r\n          50% { transform: translateY(-2px); }\r\n        }\r\n        \r\n        @keyframes pathGradient {\r\n          0%, 100% { background-position: 0% 50%; }\r\n          50% { background-position: 100% 50%; }\r\n        }\r\n        \r\n        @keyframes ambientPulse {\r\n          0%, 100% { opacity: 0.7; transform: translate(-50%, -50%) scale(1); }\r\n          50% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }\r\n        }\r\n        \r\n        @keyframes lineGlow {\r\n          0%, 100% { opacity: 0.5; }\r\n          50% { opacity: 0.9; }\r\n        }\r\n        \r\n        @keyframes nameGlow {\r\n          0%, 100% { \r\n            text-shadow: \r\n              0 0 20px rgba(253,251,245,0.3),\r\n              0 0 40px rgba(253,251,245,0.15);\r\n          }\r\n          50% { \r\n            text-shadow: \r\n              0 0 25px rgba(253,251,245,0.4),\r\n              0 0 50px rgba(253,251,245,0.2);\r\n          }\r\n        }\r\n\r\n        /* Particle float animations - 4 variations */\r\n        @keyframes particleFloat0 {\r\n          0%, 100% { transform: translateY(0) translateX(0); opacity: 0.4; }\r\n          25% { transform: translateY(-8px) translateX(3px); opacity: 0.6; }\r\n          50% { transform: translateY(-4px) translateX(-2px); opacity: 0.5; }\r\n          75% { transform: translateY(-10px) translateX(1px); opacity: 0.4; }\r\n        }\r\n        @keyframes particleFloat1 {\r\n          0%, 100% { transform: translateY(0) translateX(0); opacity: 0.5; }\r\n          33% { transform: translateY(-6px) translateX(-4px); opacity: 0.7; }\r\n          66% { transform: translateY(-12px) translateX(2px); opacity: 0.4; }\r\n        }\r\n        @keyframes particleFloat2 {\r\n          0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }\r\n          50% { transform: translateY(-10px) translateX(-3px); opacity: 0.6; }\r\n        }\r\n        @keyframes particleFloat3 {\r\n          0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.5; }\r\n          50% { transform: translateY(-8px) rotate(180deg); opacity: 0.7; }\r\n        }\r\n      `}</style>\r\n        </div >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\StreakBadge.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\TrackingHub.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'plateauMaterial' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"plateauMaterial"},"fix":{"range":[390,406],"text":""},"desc":"Remove unused variable 'plateauMaterial'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'plateauMaterialElevated' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"plateauMaterialElevated"},"fix":{"range":[405,430],"text":""},"desc":"Remove unused variable 'plateauMaterialElevated'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'plateauMaterialClear' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"plateauMaterialClear"},"fix":{"range":[430,452],"text":""},"desc":"Remove unused variable 'plateauMaterialClear'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getDynamicGoldGradient' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"getDynamicGoldGradient"},"fix":{"range":[661,685],"text":""},"desc":"Remove unused variable 'getDynamicGoldGradient'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'gradientAngle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":86,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"gradientAngle"},"fix":{"range":[4313,4326],"text":""},"desc":"Remove unused variable 'gradientAngle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'streakInfo' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":624,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":624,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"streakInfo"},"fix":{"range":[31196,31249],"text":""},"desc":"Remove unused variable 'streakInfo'."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/TrackingHub.jsx\r\n// Swipeable stats dashboard showing domain-specific progress\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useProgressStore } from '../state/progressStore.js';\r\nimport { DishonorBadge } from './DishonorBadge.jsx';\r\nimport { Icon } from '../icons/Icon.jsx';\r\nimport SevenDayTrendCurve from './SevenDayTrendCurve.jsx';\r\nimport { plateauMaterial, plateauMaterialElevated, plateauMaterialClear, noiseOverlayStyle, sheenOverlayStyle, innerGlowStyle } from '../styles/cardMaterial.js';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { calculateGradientAngle, getAvatarCenter, getDynamicGoldGradient } from '../utils/dynamicLighting.js';\r\nimport { SessionHistoryView } from './SessionHistoryView.jsx';\r\nimport { AnimatePresence } from 'framer-motion';\r\nimport { useTheme } from '../context/ThemeContext';\r\n\r\n// Domain configuration - using icon names for Icon component\r\nconst DOMAINS = [\r\n    { id: 'breathwork', label: 'Breathwork', iconName: 'breathwork' },\r\n    { id: 'visualization', label: 'Visualization', iconName: 'visualization' },\r\n    { id: 'wisdom', label: 'Wisdom', iconName: 'wisdom' }\r\n];\r\n\r\n// Cymatic glyphs - sacred geometry for each domain\r\nconst CYMATIC_GLYPHS = {\r\n    // BREATHWORK (Wave) - Concentric circles: rhythmic flow of life-force\r\n    breathwork: (isActive, isLight) => (\r\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\r\n            <circle cx=\"10\" cy=\"10\" r=\"7\" fill=\"none\"\r\n                stroke={isActive ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.35)' : 'rgba(253,251,245,0.25)')}\r\n                strokeWidth={isActive ? \"1.2\" : \"0.8\"}\r\n                strokeDasharray={isActive ? \"none\" : \"2 2\"}\r\n                opacity={isActive ? \"0.4\" : \"0.5\"} />\r\n            <circle cx=\"10\" cy=\"10\" r=\"5\" fill=\"none\"\r\n                stroke={isActive ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.4)' : 'rgba(253,251,245,0.3)')}\r\n                strokeWidth={isActive ? \"1.5\" : \"1\"}\r\n                opacity={isActive ? \"0.7\" : \"0.6\"} />\r\n            <circle cx=\"10\" cy=\"10\" r=\"2.5\"\r\n                fill={isActive ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.2)' : 'rgba(253,251,245,0.15)')}\r\n                opacity={isActive ? \"0.6\" : \"0.4\"} />\r\n        </svg>\r\n    ),\r\n\r\n    // VISUALIZATION (Sword) - Hexagon: precision of directed consciousness\r\n    visualization: (isActive, isLight) => (\r\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\r\n            <path\r\n                d=\"M10 2 L16.33 6 L16.33 14 L10 18 L3.67 14 L3.67 6 Z\"\r\n                fill=\"none\"\r\n                stroke={isActive ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.35)' : 'rgba(253,251,245,0.25)')}\r\n                strokeWidth={isActive ? \"1.5\" : \"1\"}\r\n                strokeDasharray={isActive ? \"none\" : \"1.5 1.5\"}\r\n                style={{\r\n                    transition: 'all 0.4s ease',\r\n                    transform: isActive ? 'rotate(30deg)' : 'rotate(0deg)',\r\n                    transformOrigin: 'center',\r\n                    opacity: isActive ? 1 : 0.6\r\n                }}\r\n            />\r\n            {isActive && (\r\n                <circle cx=\"10\" cy=\"10\" r=\"1.5\" fill=\"var(--accent-color)\" opacity=\"0.5\" />\r\n            )}\r\n        </svg>\r\n    ),\r\n\r\n    // WISDOM (Mirror) - Square: stable foundation of recognition\r\n    wisdom: (isActive, isLight) => (\r\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\r\n            <rect x=\"5\" y=\"5\" width=\"10\" height=\"10\"\r\n                fill=\"none\"\r\n                stroke={isActive ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.35)' : 'rgba(253,251,245,0.25)')}\r\n                strokeWidth={isActive ? \"1.5\" : \"1\"}\r\n                strokeDasharray={isActive ? \"none\" : \"3 1\"}\r\n                opacity={isActive ? 1 : 0.6} />\r\n            <rect x=\"7.5\" y=\"7.5\" width=\"5\" height=\"5\"\r\n                fill={isActive ? 'var(--accent-color)' : (isLight ? 'rgba(90, 77, 60, 0.15)' : 'rgba(253,251,245,0.1)')}\r\n                opacity={isActive ? \"0.3\" : \"0.25\"} />\r\n        </svg>\r\n    )\r\n};\r\n\r\n/**\r\n * Individual stats card component with dynamic lighting and mythic aesthetics\r\n */\r\nfunction StatsCard({ domain, stats, isLight }) {\r\n    const cardRef = useRef(null);\r\n    const [gradientAngle, setGradientAngle] = useState(135);\r\n    const theme = useTheme();\r\n    \r\n    // Calculate hue rotation to match stage accent\r\n    // Green orbs are ~120deg hue, so we rotate from that baseline\r\n    const primaryColor = theme?.accent?.primary || '#4ade80';\r\n    const baseHue = 120; // Green baseline of the orbs/progress bar\r\n    // Parse hex to get approximate hue\r\n    const hex = primaryColor.replace('#', '');\r\n    const r = parseInt(hex.substr(0, 2), 16) / 255;\r\n    const g = parseInt(hex.substr(2, 2), 16) / 255;\r\n    const b = parseInt(hex.substr(4, 2), 16) / 255;\r\n    const max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n    let h = 0;\r\n    if (max !== min) {\r\n        const d = max - min;\r\n        if (max === r) h = ((g - b) / d + (g < b ? 6 : 0)) / 6;\r\n        else if (max === g) h = ((b - r) / d + 2) / 6;\r\n        else h = ((r - g) / d + 4) / 6;\r\n    }\r\n    const targetHue = Math.round(h * 360);\r\n    const stageHueRotate = targetHue - baseHue;\r\n\r\n    useEffect(() => {\r\n        if (cardRef.current) {\r\n            const rect = cardRef.current.getBoundingClientRect();\r\n            const avatarCenter = getAvatarCenter();\r\n            const angle = calculateGradientAngle(rect, avatarCenter);\r\n            setGradientAngle(angle);\r\n        }\r\n    }, [isLight]);\r\n\r\n    // Format relative time (original utility)\r\n    const formatLastPracticed = (isoDate) => {\r\n        if (!isoDate) return 'Never';\r\n        const now = new Date();\r\n        const then = new Date(isoDate);\r\n        const diffMs = now - then;\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMs / 3600000);\r\n        const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n        if (diffMins < 1) return 'Just now';\r\n        if (diffMins < 60) return `${diffMins}m ago`;\r\n        if (diffHours < 24) return `${diffHours}h ago`;\r\n        if (diffDays === 1) return 'Yesterday';\r\n        if (diffDays < 7) return `${diffDays}d ago`;\r\n        return then.toLocaleDateString();\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={cardRef}\r\n            className=\"relative overflow-hidden\"\r\n            style={{\r\n                backgroundImage: isLight \r\n                    ? `url(${import.meta.env.BASE_URL}mode_buttons/light_mode_tracking_card_1767105882932.png)`\r\n                    : `url(${import.meta.env.BASE_URL}mode_buttons/dark_mode_tracking_card_1767105843256.png)`,\r\n                backgroundSize: '100% 100%',\r\n                backgroundPosition: 'center',\r\n                backgroundRepeat: 'no-repeat',\r\n                border: 'none',\r\n                boxShadow: 'none',\r\n                // Exaggerated organic parchment edges\r\n                borderRadius: '28px 35px 30px 33px',\r\n                transform: 'rotate(-0.3deg)',\r\n                filter: isLight\r\n                    ? 'drop-shadow(0 3px 6px rgba(0,0,0,0.12)) drop-shadow(0 10px 20px rgba(0,0,0,0.06))'\r\n                    : 'drop-shadow(0 4px 12px rgba(0,0,0,0.4)) drop-shadow(0 12px 28px rgba(0,0,0,0.25))'\r\n            }}\r\n        >\r\n            {/* Parchment image already includes all background decoration */}\r\n            \r\n            {/* Texture overlays */}\r\n            <div style={{ ...noiseOverlayStyle, opacity: 0.02, zIndex: 2 }} />\r\n            <div style={{ ...sheenOverlayStyle, zIndex: 2 }} />\r\n            <div style={{ ...innerGlowStyle, zIndex: 2 }} />\r\n\r\n            {/* Subtle parchment texture overlay (LIGHT MODE ONLY) */}\r\n            {isLight && (\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none\"\r\n                    style={{\r\n                        backgroundImage: `url(${import.meta.env.BASE_URL}textures/parchment-subtle.png)`,\r\n                        backgroundSize: '300px 300px',\r\n                        backgroundRepeat: 'repeat',\r\n                        opacity: 0.08,\r\n                        mixBlendMode: 'multiply',\r\n                        zIndex: 2,\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Domain header with Metadata on Right */}\r\n            <div className=\"flex items-center justify-between mb-3 px-5 pt-4 relative z-10\">\r\n                {/* Left: Icon + Label */}\r\n                <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-xl\" style={{ color: isLight ? 'rgba(140, 100, 50, 0.9)' : 'var(--accent-color)' }}>\r\n                        <Icon name={domain.iconName} size={22} />\r\n                    </span>\r\n                    <span\r\n                        className=\"text-sm font-semibold\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(45, 40, 35, 0.9)' : 'white',\r\n                            fontFamily: 'var(--font-display)',\r\n                            letterSpacing: '0.15em',\r\n                            textTransform: 'uppercase'\r\n                        }}\r\n                    >\r\n                        {domain.label}\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Right: Metadata (Last Practiced + Peak) */}\r\n                <div className=\"flex flex-col items-end gap-0.5 text-right opacity-60\">\r\n                    <div\r\n                        className=\"text-[9px] font-light uppercase tracking-wider\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(45, 40, 35, 0.8)' : 'rgba(253, 251, 245, 0.9)',\r\n                            fontFamily: 'var(--font-ui)',\r\n                            lineHeight: '1',\r\n                        }}\r\n                    >\r\n                        {formatLastPracticed(stats.lastPracticed)}\r\n                    </div>\r\n                    <div\r\n                        className=\"text-[9px] font-light uppercase tracking-wider\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(45, 40, 35, 0.7)' : 'rgba(253, 251, 245, 0.7)',\r\n                            fontFamily: 'var(--font-ui)',\r\n                            lineHeight: '1.2',\r\n                        }}\r\n                    >\r\n                        Peak: {Math.max(...(stats.last7Days || [0]))} min\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tier 1: Hero Stats - Proportional Grid */}\r\n            <div className=\"grid grid-cols-3 gap-2 mb-9 items-end px-5 relative z-10\">\r\n                {/* SESSIONS */}\r\n                <div className=\"text-center\">\r\n                    <div\r\n                        className=\"font-semibold mb-1\"\r\n                        style={{\r\n                            fontSize: '2.4rem',\r\n                            lineHeight: '1',\r\n                            color: isLight ? 'rgba(140, 100, 50, 0.95)' : '#d4b87a',\r\n                            letterSpacing: '0.02em',\r\n                            opacity: 0.9,\r\n                            fontFamily: 'var(--font-display)',\r\n                        }}\r\n                    >\r\n                        {stats.totalSessions || 0}\r\n                    </div>\r\n                    <div\r\n                        className=\"text-[0.65rem] font-bold\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(90, 77, 60, 0.8)' : 'rgba(255, 255, 255, 0.5)',\r\n                            fontFamily: 'var(--font-ui)',\r\n                            letterSpacing: '0.2em',\r\n                        }}\r\n                    >\r\n                        SESSIONS\r\n                    </div>\r\n                </div>\r\n\r\n                {/* MINUTES - THE HEARTBEAT - STANDS OUT */}\r\n                <div className=\"text-center\">\r\n                    <div\r\n                        className=\"font-bold mb-1\"\r\n                        style={{\r\n                            fontSize: '2.8rem',\r\n                            lineHeight: '1',\r\n                            color: isLight ? 'rgba(120, 80, 40, 1)' : '#fff8e6',\r\n                            letterSpacing: '0.03em',\r\n                            textShadow: isLight ? 'none' : '0 0 12px rgba(255, 235, 200, 0.45)',\r\n                            fontFamily: 'var(--font-display)',\r\n                        }}\r\n                    >\r\n                        {stats.totalMinutes || 0}\r\n                    </div>\r\n                    <div\r\n                        className=\"text-[0.7rem] font-bold\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(100, 70, 30, 0.95)' : 'rgba(255, 248, 230, 0.95)',\r\n                            fontFamily: 'var(--font-ui)',\r\n                            letterSpacing: '0.15em',\r\n                            textShadow: isLight ? 'none' : '0 0 10px rgba(255, 235, 200, 0.4)',\r\n                        }}\r\n                    >\r\n                        MINUTES\r\n                    </div>\r\n                </div>\r\n\r\n                {/* HONOR */}\r\n                <div className=\"text-center\">\r\n                    <div\r\n                        className=\"font-semibold mb-1\"\r\n                        style={{\r\n                            fontSize: '2.4rem',\r\n                            lineHeight: '1',\r\n                            color: isLight ? 'rgba(140, 100, 50, 0.9)' : '#c9a86e',\r\n                            letterSpacing: '0.02em',\r\n                            opacity: 0.9,\r\n                            fontFamily: 'var(--font-display)',\r\n                        }}\r\n                    >\r\n                        {stats.totalHonor || 0}\r\n                    </div>\r\n                    <div\r\n                        className=\"text-[0.65rem] font-bold\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(90, 77, 60, 0.8)' : 'rgba(255, 255, 255, 0.5)',\r\n                            fontFamily: 'var(--font-ui)',\r\n                            letterSpacing: '0.2em',\r\n                        }}\r\n                    >\r\n                        HONOR\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* MIDDLE: Curve - Performance Vector */}\r\n            <div className=\"relative px-5 -mt-6 z-10\">\r\n                {/* Semantic label */}\r\n                <div\r\n                    className=\"text-[10px] font-bold mb-4 text-center -mt-5 relative font-mono opacity-60\"\r\n                    style={{\r\n                        color: isLight ? 'rgba(90, 77, 60, 0.8)' : 'rgba(255, 255, 255, 0.6)',\r\n                        letterSpacing: '0.15em',\r\n                        zIndex: 11,\r\n                    }}\r\n                >\r\n                    Γƒ¿ PERFORMANCE.VECTOR Γƒ⌐\r\n                </div>\r\n\r\n                {/* Curve container - elevated height */}\r\n                <div className=\"relative h-[88px] w-full -mx-4 px-7 overflow-hidden\">\r\n                    <SevenDayTrendCurve last7Days={stats.last7Days || [0, 0, 0, 0, 0, 0, 0]} />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Regiment Progress Section - Shortened to avoid feather overlap */}\r\n            <div className=\"px-5 mb-4 relative z-10\">\r\n                <div className=\"flex items-center justify-between mb-1\" style={{ width: '140px' }}>\r\n                    <span\r\n                        className=\"text-[9px] font-bold tracking-widest opacity-40 uppercase\"\r\n                        style={{ fontFamily: 'var(--font-display)' }}\r\n                    >\r\n                        Regiment Progress\r\n                    </span>\r\n                    <span\r\n                        className=\"text-[9px] font-bold opacity-60\"\r\n                        style={{ color: isLight ? 'var(--gold-deep)' : 'var(--accent-color)' }}\r\n                    >\r\n                        {Math.min(100, Math.floor(((stats.totalMinutes || 0) / 100) * 100))}%\r\n                    </span>\r\n                </div>\r\n                <div\r\n                    className=\"h-[14px] rounded-full relative overflow-hidden\"\r\n                    style={{\r\n                        width: '140px',\r\n                        background: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)',\r\n                        border: isLight ? '0.5px solid rgba(0,0,0,0.05)' : '1px solid rgba(255,255,255,0.05)',\r\n                        boxShadow: 'inset 0 1px 3px rgba(0,0,0,0.2)'\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"h-full rounded-full transition-all duration-1000 ease-out relative\"\r\n                        style={{\r\n                            width: `${Math.min(100, ((stats.totalMinutes || 0) / 100) * 100)}%`,\r\n                            backgroundImage: `url(${import.meta.env.BASE_URL}stats/tracking_card/progress_texture.png)`,\r\n                            backgroundSize: 'cover',\r\n                            backgroundPosition: 'center',\r\n                            boxShadow: isLight ? 'none' : '0 0 10px rgba(212, 184, 122, 0.4)',\r\n                            filter: `hue-rotate(${stageHueRotate}deg)`\r\n                        }}\r\n                    >\r\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* LOWER: Intensity Orbs & Weekdays */}\r\n            <div className=\"px-5 pb-[18px] pt-2 border-t border-white/5 relative z-10\">\r\n                <div className=\"relative pt-4 pb-2\">\r\n                    {/* Flowing Wave Ribbon Background */}\r\n                    <div\r\n                        className=\"absolute inset-x-0 top-1/2 -translate-y-1/2 h-16 pointer-events-none opacity-60 mix-blend-screen\"\r\n                        style={{\r\n                            backgroundImage: `url(${import.meta.env.BASE_URL}stats/tracking_card/wave_ribbon.png)`,\r\n                            backgroundSize: '100% 100%',\r\n                            backgroundPosition: 'center',\r\n                            filter: isLight ? 'brightness(0.8) contrast(1.2)' : 'none'\r\n                        }}\r\n                    />\r\n\r\n                    {/* Dual-Visual Orbs: Background = Intensity, Foreground = Precision */}\r\n                    <div className=\"flex items-center justify-between px-2 relative z-20\">\r\n                        {(() => {\r\n                            const days = stats.last7Days || [0, 0, 0, 0, 0, 0, 0];\r\n                            const maxMinutes = Math.max(...days);\r\n                            const peakIndex = days.indexOf(maxMinutes);\r\n\r\n                            // Precision proxy: use avgAccuracy as a domain-level quality metric\r\n                            // TODO: Track per-day precision when instrumentation is available\r\n                            const avgAccuracy = stats.avgAccuracy || null;\r\n\r\n                            return days.map((minutes, i) => {\r\n                                const isPeakDay = (i === peakIndex && maxMinutes > 0);\r\n\r\n                                let orbImg = 'orb_empty.png';\r\n                                let scale = 1.0;\r\n                                let glow = 'none';\r\n\r\n                                if (isPeakDay) {\r\n                                    orbImg = 'orb_peak.png';\r\n                                    scale = 1.2;\r\n                                    glow = '0 0 15px rgba(255, 240, 180, 0.4)';\r\n                                } else if (minutes > 30) {\r\n                                    orbImg = 'orb_high.png';\r\n                                    scale = 1.1;\r\n                                } else if (minutes >= 15) {\r\n                                    orbImg = 'orb_medium.png';\r\n                                    scale = 1.0;\r\n                                } else if (minutes > 0) {\r\n                                    orbImg = 'orb_low.png';\r\n                                    scale = 0.9;\r\n                                }\r\n\r\n                                // Precision indicator logic (only show if practiced that day)\r\n                                let precisionIcon = null;\r\n                                if (minutes > 0 && avgAccuracy !== null) {\r\n                                    if (avgAccuracy >= 90) {\r\n                                        // High precision: Bullseye with high-contrast background\r\n                                        precisionIcon = (\r\n                                            <svg className=\"absolute inset-0 pointer-events-none\" width=\"40\" height=\"40\" viewBox=\"0 0 40 40\">\r\n                                                {/* High-contrast background circle */}\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"13\" fill={isLight ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.8)'} />\r\n                                                {/* Bullseye */}\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"5\" fill={isLight ? 'rgba(180, 120, 40, 1)' : 'rgba(255, 220, 120, 1)'} />\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"8.5\" fill=\"none\" stroke={isLight ? 'rgba(180, 120, 40, 0.9)' : 'rgba(255, 220, 120, 0.9)'} strokeWidth=\"3\" />\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"12\" fill=\"none\" stroke={isLight ? 'rgba(180, 120, 40, 0.6)' : 'rgba(255, 220, 120, 0.6)'} strokeWidth=\"2\" />\r\n                                            </svg>\r\n                                        );\r\n                                    } else if (avgAccuracy >= 70) {\r\n                                        // Medium precision: Crosshair with high-contrast background\r\n                                        precisionIcon = (\r\n                                            <svg className=\"absolute inset-0 pointer-events-none\" width=\"40\" height=\"40\" viewBox=\"0 0 40 40\">\r\n                                                {/* High-contrast background circle */}\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"13\" fill={isLight ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.8)'} />\r\n                                                {/* Crosshair */}\r\n                                                <line x1=\"20\" y1=\"8\" x2=\"20\" y2=\"32\" stroke={isLight ? 'rgba(180, 120, 40, 1)' : 'rgba(255, 220, 120, 1)'} strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n                                                <line x1=\"8\" y1=\"20\" x2=\"32\" y2=\"20\" stroke={isLight ? 'rgba(180, 120, 40, 1)' : 'rgba(255, 220, 120, 1)'} strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"11\" fill=\"none\" stroke={isLight ? 'rgba(180, 120, 40, 0.6)' : 'rgba(255, 220, 120, 0.6)'} strokeWidth=\"2\" />\r\n                                            </svg>\r\n                                        );\r\n                                    } else if (avgAccuracy >= 50) {\r\n                                        // Low precision: Partial ring with high-contrast background\r\n                                        precisionIcon = (\r\n                                            <svg className=\"absolute inset-0 pointer-events-none\" width=\"40\" height=\"40\" viewBox=\"0 0 40 40\">\r\n                                                {/* High-contrast background circle */}\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"13\" fill={isLight ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.8)'} />\r\n                                                {/* Dashed ring */}\r\n                                                <circle cx=\"20\" cy=\"20\" r=\"11\" fill=\"none\" stroke={isLight ? 'rgba(180, 120, 40, 0.8)' : 'rgba(255, 220, 120, 0.8)'} strokeWidth=\"3.5\" strokeDasharray=\"10 5\" opacity=\"1\" />\r\n                                            </svg>\r\n                                        );\r\n                                    }\r\n                                    // Below 50%: no precision indicator (just shows intensity orb)\r\n                                }\r\n\r\n                                return (\r\n                                    <div key={i} className=\"relative flex flex-col items-center\">\r\n                                        {/* Background: Intensity Orb */}\r\n                                        <div\r\n                                            className=\"w-10 h-10 bg-contain bg-center bg-no-repeat transition-transform duration-500\"\r\n                                            style={{\r\n                                                backgroundImage: `url(${import.meta.env.BASE_URL}stats/tracking_card/${orbImg})`,\r\n                                                transform: `scale(${scale})`,\r\n                                                filter: `${isLight && minutes === 0 ? 'grayscale(0.5) opacity(0.3)' : ''} ${stageHueRotate ? `hue-rotate(${stageHueRotate}deg)` : ''}`.trim() || 'none',\r\n                                                boxShadow: glow\r\n                                            }}\r\n                                        >\r\n                                            {/* Foreground: Precision Overlay */}\r\n                                            {precisionIcon}\r\n                                        </div>\r\n                                        {isPeakDay && (\r\n                                            <div\r\n                                                className=\"absolute -top-4 text-[7px] font-bold text-amber-200/80 uppercase tracking-tighter\"\r\n                                                style={{ fontFamily: 'var(--font-display)' }}\r\n                                            >\r\n                                                Peak\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            });\r\n                        })()}\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-between px-4 text-[8px] font-display tracking-[0.3em] opacity-30 mt-2\">\r\n                        {['M', 'T', 'W', 'T', 'F', 'S', 'S'].map((day, i) => (\r\n                            <div key={i} className=\"w-6 text-center\">{day}</div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Domain-specific insights (positioned at bottom) */}\r\n            <div className=\"px-5 pb-3\">\r\n                <DomainInsights domain={domain.id} stats={stats} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Domain-specific insights component\r\n * Always renders with appropriate content for each domain\r\n */\r\nfunction DomainInsights({ domain, stats }) {\r\n    // Breathwork: Show pattern usage (using subType which is a string like \"Box\", \"4-7-8\", etc.)\r\n    if (domain === 'breathwork') {\r\n        const patterns = stats.patterns || {};\r\n        const patternEntries = Object.entries(patterns).filter(([key]) => key !== 'unknown' && key !== 'null');\r\n\r\n        if (patternEntries.length > 0) {\r\n            return (\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                    {patternEntries.slice(0, 4).map(([pattern, count]) => (\r\n                        <span\r\n                            key={pattern}\r\n                            className=\"text-[9px] px-2 py-0.5 rounded-full\"\r\n                            style={{\r\n                                background: 'var(--accent-10)',\r\n                                color: 'var(--accent-70)'\r\n                            }}\r\n                        >\r\n                            {pattern}: {count}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // Empty state for breathwork\r\n        return (\r\n            <div className=\"text-[9px] text-[rgba(253,251,245,0.35)] italic\">\r\n                Complete a session to see pattern insights\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Visualization: Show geometry types practiced\r\n    if (domain === 'visualization') {\r\n        const geometries = stats.geometries || {};\r\n        const geoEntries = Object.entries(geometries);\r\n\r\n        if (geoEntries.length > 0) {\r\n            return (\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                    {geoEntries.slice(0, 4).map(([geo, count]) => (\r\n                        <span\r\n                            key={geo}\r\n                            className=\"text-[9px] px-2 py-0.5 rounded-full\"\r\n                            style={{\r\n                                background: 'var(--accent-10)',\r\n                                color: 'var(--accent-70)'\r\n                            }}\r\n                        >\r\n                            {geo}: {count}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"text-[9px] text-[rgba(253,251,245,0.35)] italic\">\r\n                Sacred geometry, cymatics, and visual focus\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Wisdom: Show reading progress or encouragement\r\n    if (domain === 'wisdom') {\r\n        const sectionsCount = stats.sectionsViewed?.length || 0;\r\n        const bookmarks = stats.bookmarks?.length || 0;\r\n\r\n        if (sectionsCount > 0 || bookmarks > 0) {\r\n            return (\r\n                <div className=\"flex gap-3\">\r\n                    {sectionsCount > 0 && (\r\n                        <span className=\"text-[9px] text-[rgba(253,251,245,0.5)]\">\r\n                            ≡ƒôû {sectionsCount} sections explored\r\n                        </span>\r\n                    )}\r\n                    {bookmarks > 0 && (\r\n                        <span className=\"text-[9px] text-[rgba(253,251,245,0.5)]\">\r\n                            ≡ƒöû {bookmarks} bookmarks\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"text-[9px] text-[rgba(253,251,245,0.35)] italic\">\r\n                Treatise study and contemplative reading\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Default fallback\r\n    return (\r\n        <div className=\"text-[9px] text-[rgba(253,251,245,0.35)] italic\">\r\n            Track your practice to see insights\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function TrackingHub({ streakInfo: propStreakInfo }) {\r\n    const {\r\n        getStreakInfo,\r\n        getDomainStats,\r\n        getPrimaryDomain\r\n    } = useProgressStore();\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    const [showHistory, setShowHistory] = useState(false);\r\n\r\n    // Get primary domain stats\r\n    const primaryDomain = getPrimaryDomain();\r\n    const primaryDomainObj = DOMAINS.find(d => d.id === primaryDomain) || DOMAINS[0];\r\n    const stats = getDomainStats(primaryDomainObj.id);\r\n\r\n    // Derived data - use prop if provided, otherwise get from store\r\n    const streakInfo = propStreakInfo || getStreakInfo();\r\n\r\n    return (\r\n        <div className=\"w-full max-w-md mx-auto\">\r\n            {/* Header with semantic label */}\r\n            <div\r\n                className=\"text-[10px] mb-4 uppercase tracking-[0.15em] text-center\"\r\n                style={{\r\n                    color: isLight ? 'var(--light-accent)' : 'var(--accent-color)',\r\n                    textShadow: isLight ? 'none' : '0 1px 3px rgba(0, 0, 0, 0.5)',\r\n                }}\r\n            >\r\n                Γƒ¿ PRACTICE HUB Γƒ⌐\r\n            </div>\r\n\r\n            {/* Single domain stats card */}\r\n            <StatsCard domain={primaryDomainObj} stats={stats} isLight={isLight} />\r\n\r\n            {/* History Button */}\r\n            <button\r\n                onClick={() => setShowHistory(true)}\r\n                className=\"mt-6 w-full py-3 rounded-2xl flex items-center justify-center gap-2 transition-all active:scale-95\"\r\n                style={{\r\n                    backgroundColor: isLight ? 'rgba(0,0,0,0.04)' : 'rgba(255,255,255,0.03)',\r\n                    border: isLight ? '1px solid rgba(0,0,0,0.05)' : '1px solid rgba(255,255,255,0.05)',\r\n                }}\r\n            >\r\n                <div\r\n                    className=\"text-[10px] uppercase font-black tracking-[0.2em]\"\r\n                    style={{ color: isLight ? 'rgba(0,0,0,0.5)' : 'rgba(253,251,245,0.5)' }}\r\n                >\r\n                    Practice Archive\r\n                </div>\r\n            </button>\r\n\r\n            {/* Overlay View */}\r\n            <AnimatePresence>\r\n                {showHistory && (\r\n                    <SessionHistoryView onClose={() => setShowHistory(false)} />\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\TrajectoryCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'stage' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":15,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"stage"},"fix":{"range":[642,680],"text":""},"desc":"Remove unused variable 'stage'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'sessions.length'. Either exclude it or remove the dependency array.","line":20,"column":8,"nodeType":"ArrayExpression","endLine":20,"endColumn":56,"suggestions":[{"desc":"Update the dependencies array to be: []","fix":{"range":[882,930],"text":"[]"}}]},{"ruleId":"react-hooks/use-memo","severity":2,"message":"Error: Expected the dependency list to be an array of simple expressions (e.g. `x`, `x.y.z`, `x?.y?.z`)\n\nExpected the dependency list to be an array of simple expressions (e.g. `x`, `x.y.z`, `x?.y?.z`).\n\n  18 |     const trajectory = useMemo(() => {\n  19 |         return useTrackingStore.getState().getTrajectory(8);\n> 20 |     }, [sessions.length, Object.keys(dailyLogs).length]);\n     |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected the dependency list to be an array of simple expressions (e.g. `x`, `x.y.z`, `x?.y?.z`)\n  21 |\n  22 |     // Sparkline data (last 8 weeks)\n  23 |     const consistencyData = trajectory.weeks.map(w => w.daysActive);","line":20,"column":26,"nodeType":null,"endLine":20,"endColumn":55},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":20,"column":26,"nodeType":"MemberExpression","endLine":20,"endColumn":55}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/TrajectoryCard.jsx\r\n// Compact trajectory indicator for Hub - tap to see full report\r\n\r\nimport React, { useMemo } from 'react';\r\nimport { useTrackingStore } from '../state/trackingStore';\r\nimport { useDisplayModeStore } from '../state/displayModeStore';\r\nimport { useTheme } from '../context/ThemeContext';\r\n\r\nexport function TrajectoryCard({ onTap }) {\r\n    // Get raw sessions data as dependency\r\n    const sessions = useTrackingStore(s => s.sessions);\r\n    const dailyLogs = useTrackingStore(s => s.dailyLogs);\r\n    const isLight = useDisplayModeStore(s => s.colorScheme === 'light');\r\n    const theme = useTheme();\r\n    const stage = theme?.stage || 'flame';\r\n\r\n    // Memoize trajectory computation - only recalculate when sessions/dailyLogs change\r\n    const trajectory = useMemo(() => {\r\n        return useTrackingStore.getState().getTrajectory(8);\r\n    }, [sessions.length, Object.keys(dailyLogs).length]);\r\n\r\n    // Sparkline data (last 8 weeks)\r\n    const consistencyData = trajectory.weeks.map(w => w.daysActive);\r\n    const precisionData = trajectory.weeks.map(w => w.avgPrecision.breath || 0);\r\n    const volumeData = trajectory.weeks.map(w => w.totalMinutes);\r\n\r\n    // Normalize to 0-1 for sparkline\r\n    const normalize = (data) => {\r\n        const max = Math.max(...data, 1);\r\n        return data.map(v => v / max);\r\n    };\r\n\r\n    // Trend arrow\r\n    const { direction, directionLabel } = trajectory.trends;\r\n    const arrow = direction === 'ascending' ? 'Γåæ' :\r\n        direction === 'declining' ? 'Γåô' : 'ΓåÆ';\r\n\r\n    const arrowColor = direction === 'ascending' ? (isLight ? '#16a34a' : '#4ade80') :\r\n        direction === 'declining' ? (isLight ? '#dc2626' : '#f87171') :\r\n            (isLight ? '#ca8a04' : '#fbbf24');\r\n\r\n    // Generate headline insight\r\n    const getHeadline = () => {\r\n        const { precisionDelta, practiceChanges } = trajectory.insights;\r\n\r\n        if (precisionDelta !== null && Math.abs(precisionDelta) > 10) {\r\n            const sign = precisionDelta > 0 ? '+' : '';\r\n            return `Breath precision ${sign}${Math.round(precisionDelta)}% over 8 weeks`;\r\n        }\r\n\r\n        if (practiceChanges.length > 0) {\r\n            const latest = practiceChanges[practiceChanges.length - 1];\r\n            return `Added ${latest.added[0]} practice`;\r\n        }\r\n\r\n        const totalMinutes = trajectory.weeks.reduce((sum, w) => sum + w.totalMinutes, 0);\r\n        return `${totalMinutes} minutes across 8 weeks`;\r\n    };\r\n\r\n    // Sparkline mini-chart component\r\n    const Sparkline = ({ data, color }) => {\r\n        const normalized = normalize(data);\r\n        const width = 78; // Increased from 60 (30% larger)\r\n        const height = 26; // Increased from 20 (30% larger)\r\n        const points = normalized.map((v, i) => {\r\n            const x = (i / (normalized.length - 1)) * width;\r\n            const y = height - (v * height);\r\n            return `${x},${y}`;\r\n        }).join(' ');\r\n\r\n        return (\r\n            <svg width={width} height={height} className=\"opacity-60\">\r\n                <polyline\r\n                    points={points}\r\n                    fill=\"none\"\r\n                    stroke={color}\r\n                    strokeWidth=\"2\" // Increased from 1.5\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    style={{ opacity: 0.8 }}\r\n                />\r\n            </svg>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div\r\n            onClick={onTap}\r\n            className=\"w-full rounded-[32px] px-6 py-5 relative overflow-hidden transition-all duration-700 cursor-pointer hover:shadow-2xl active:scale-[0.99]\"\r\n            style={{\r\n                maxWidth: '430px',\r\n                margin: '0 auto',\r\n                border: '2px solid transparent',\r\n                backgroundImage: isLight\r\n                    ? `linear-gradient(rgba(252, 248, 240, 0.98), rgba(248, 244, 235, 0.96)), \r\n                       linear-gradient(135deg, rgba(200, 160, 110, 0.4), rgba(180, 140, 90, 0.3))`\r\n                    : `linear-gradient(135deg, rgba(20, 15, 25, 0.98), rgba(10, 8, 15, 0.98)), \r\n                       linear-gradient(rgba(255,255,255,0.12), rgba(255,255,255,0.02))`,\r\n                backgroundOrigin: 'padding-box, border-box',\r\n                backgroundClip: 'padding-box, border-box',\r\n                boxShadow: isLight\r\n                    ? `0 0 0 1px rgba(160, 120, 80, 0.3),\r\n                       0 12px 40px rgba(120, 90, 60, 0.12), \r\n                       0 4px 16px rgba(200, 160, 110, 0.08),\r\n                       inset 0 2px 0 rgba(255, 255, 255, 0.8),\r\n                       inset 0 -1px 0 rgba(160, 120, 80, 0.15)`\r\n                    : `0 30px 80px rgba(0, 0, 0, 0.7), \r\n                       inset 0 1px 0 rgba(255, 255, 255, 0.08)`,\r\n            }}\r\n        >\r\n            {/* Watercolor Background Overlay */}\r\n            {isLight && (\r\n                <div\r\n                    className=\"absolute inset-0 opacity-30 pointer-events-none rounded-[32px]\"\r\n                    style={{\r\n                        background: `\r\n                            radial-gradient(ellipse at 15% 20%, rgba(220, 180, 140, 0.4) 0%, transparent 40%),\r\n                            radial-gradient(ellipse at 85% 80%, rgba(200, 160, 120, 0.35) 0%, transparent 45%),\r\n                            radial-gradient(ellipse at 50% 50%, rgba(240, 220, 180, 0.25) 0%, transparent 60%)\r\n                        `,\r\n                    }}\r\n                />\r\n            )}\r\n            {/* Header: Trajectory Indicator */}\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div\r\n                        className=\"text-2xl\"\r\n                        style={{ color: arrowColor }}\r\n                    >\r\n                        {arrow}\r\n                    </div>\r\n                    <div className=\"flex flex-col\">\r\n                        <div\r\n                            className=\"text-xs uppercase tracking-wider font-semibold\"\r\n                            style={{\r\n                                color: isLight ? 'rgba(80, 60, 40, 0.7)' : 'rgba(253, 251, 245, 0.5)',\r\n                                fontFamily: 'var(--font-display)',\r\n                            }}\r\n                        >\r\n                            Trajectory\r\n                        </div>\r\n                        <div\r\n                            className=\"text-sm font-semibold\"\r\n                            style={{\r\n                                color: arrowColor,\r\n                                fontFamily: 'var(--font-display)',\r\n                            }}\r\n                        >\r\n                            {directionLabel}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div\r\n                    className=\"text-[10px] uppercase tracking-wider font-bold\"\r\n                    style={{\r\n                        color: isLight ? 'rgba(80, 60, 40, 0.6)' : 'rgba(253, 251, 245, 0.4)',\r\n                        fontFamily: 'var(--font-display)',\r\n                    }}\r\n                >\r\n                    Past 8 Weeks\r\n                </div>\r\n            </div>\r\n\r\n            {/* Sparklines */}\r\n            <div className=\"flex justify-between items-end mb-4 px-2\">\r\n                <div className=\"flex flex-col gap-1.5\">\r\n                    <div\r\n                        className=\"text-[9px] uppercase tracking-wider font-bold\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(70, 55, 35, 0.65)' : 'rgba(253, 251, 245, 0.4)',\r\n                        }}\r\n                    >\r\n                        Consistency\r\n                    </div>\r\n                    <Sparkline\r\n                        data={consistencyData}\r\n                        color={isLight ? '#ca8a04' : '#fbbf24'}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex flex-col gap-1.5\">\r\n                    <div\r\n                        className=\"text-[9px] uppercase tracking-wider font-bold\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(70, 55, 35, 0.65)' : 'rgba(253, 251, 245, 0.4)',\r\n                        }}\r\n                    >\r\n                        Precision\r\n                    </div>\r\n                    <Sparkline\r\n                        data={precisionData}\r\n                        color={isLight ? '#16a34a' : '#4ade80'}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex flex-col gap-1.5\">\r\n                    <div\r\n                        className=\"text-[9px] uppercase tracking-wider font-bold\"\r\n                        style={{\r\n                            color: isLight ? 'rgba(70, 55, 35, 0.65)' : 'rgba(253, 251, 245, 0.4)',\r\n                        }}\r\n                    >\r\n                        Volume\r\n                    </div>\r\n                    <Sparkline\r\n                        data={volumeData}\r\n                        color={isLight ? '#2563eb' : '#60a5fa'}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Headline Insight */}\r\n            <div\r\n                className=\"text-xs italic leading-relaxed\"\r\n                style={{\r\n                    color: isLight ? 'rgba(50, 38, 25, 0.85)' : 'rgba(253, 251, 245, 0.7)',\r\n                    fontFamily: 'var(--font-body)',\r\n                }}\r\n            >\r\n                {getHeadline()}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TrajectoryCard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\VacationToggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\VideoLibrary.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'video'. Either include it or remove the dependency array.","line":24,"column":8,"nodeType":"ArrayExpression","endLine":24,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [video, video.id]","fix":{"range":[1066,1077],"text":"[video, video.id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/VideoLibrary.jsx\r\n// FLAME Video Section - Single-focus hearth with horizontal offering bands\r\n// Selection replaces state, not layout. No modals.\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useVideoStore } from '../state/videoStore.js';\r\nimport { VIDEOS, getEmbedUrl } from '../data/videoData.js';\r\nimport { IdleHearth } from './IdleHearth.jsx';\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// VIDEO HEARTH - The active video player (fixed aspect ratio, centered)\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\nfunction VideoHearth({ video, isPlaying, setIsPlaying, isTransitioning, onClear }) {\r\n    const videoRef = useRef(null);\r\n    const { updateProgress, markCompleted } = useVideoStore();\r\n\r\n    // Reset video when source changes\r\n    useEffect(() => {\r\n        if (videoRef.current && video) {\r\n            videoRef.current.pause();\r\n            videoRef.current.currentTime = 0;\r\n            videoRef.current.load();\r\n        }\r\n    }, [video?.id]);\r\n\r\n    const videoUrl = video ? getEmbedUrl(video) : null;\r\n\r\n    return (\r\n        <section\r\n            className=\"w-full flex flex-col items-center justify-center px-4 pt-4 pb-8 relative z-10\"\r\n            style={{\r\n                // Solid dark background to hide decorative elements\r\n                background: 'rgba(10,10,15,0.98)',\r\n                // Subtle warmth when playing\r\n                boxShadow: isPlaying\r\n                    ? 'inset 0 0 80px rgba(255,120,40,0.08)'\r\n                    : 'none',\r\n                transition: 'all 0.5s ease',\r\n            }}\r\n        >\r\n            {/* Video frame with ember border glow when playing */}\r\n            <div\r\n                className=\"w-full max-w-3xl rounded-xl overflow-hidden relative\"\r\n                style={{\r\n                    aspectRatio: '16 / 9',\r\n                    background: '#0a0a0f',\r\n                    boxShadow: video\r\n                        ? '0 0 60px rgba(255,100,30,0.25), 0 0 120px rgba(255,80,20,0.15), 0 25px 50px rgba(0,0,0,0.5)'\r\n                        : '0 25px 50px rgba(0,0,0,0.5)',\r\n                    border: video\r\n                        ? '2px solid rgba(255,120,40,0.4)'\r\n                        : '1px solid rgba(255,255,255,0.06)',\r\n                    transition: 'all 0.5s ease',\r\n                }}\r\n            >\r\n                {/* Idle embers inside frame when no video */}\r\n                {!video && (\r\n                    <div className=\"absolute inset-0\">\r\n                        <IdleHearth />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Video layer */}\r\n                {video && (\r\n                    <div\r\n                        className=\"absolute inset-0 z-10 transition-opacity duration-300\"\r\n                        style={{ opacity: isTransitioning ? 0 : 1 }}\r\n                    >\r\n                        <video\r\n                            ref={videoRef}\r\n                            key={video.id}\r\n                            src={videoUrl}\r\n                            className=\"w-full h-full object-contain\"\r\n                            style={{\r\n                                colorScheme: 'dark',\r\n                                backgroundColor: '#0a0a0f'\r\n                            }}\r\n                            controls\r\n                            onPlay={() => setIsPlaying(true)}\r\n                            onPause={() => setIsPlaying(false)}\r\n                            onEnded={() => {\r\n                                setIsPlaying(false);\r\n                                markCompleted(video.id);\r\n                            }}\r\n                            onTimeUpdate={(e) => {\r\n                                const current = e.target.currentTime;\r\n                                const duration = e.target.duration;\r\n                                if (duration > 0) {\r\n                                    updateProgress(video.id, current / duration, current);\r\n                                }\r\n                            }}\r\n                        />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Clear button - only when video is loaded */}\r\n                {video && !isTransitioning && (\r\n                    <button\r\n                        onClick={onClear}\r\n                        className=\"absolute top-3 right-3 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all opacity-40 hover:opacity-100\"\r\n                        style={{\r\n                            background: 'rgba(0,0,0,0.6)',\r\n                            border: '1px solid rgba(255,255,255,0.2)',\r\n                        }}\r\n                        title=\"Clear video\"\r\n                    >\r\n                        <span className=\"text-white text-sm\">Γ£ò</span>\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Video metadata (only when video active) */}\r\n            {video && !isTransitioning && (\r\n                <div className=\"mt-4 text-center max-w-2xl\">\r\n                    <h2\r\n                        className=\"text-lg mb-1\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            letterSpacing: 'var(--tracking-wide)',\r\n                            color: 'var(--accent-color)',\r\n                        }}\r\n                    >\r\n                        {video.title}\r\n                    </h2>\r\n                    <div\r\n                        className=\"text-[11px] text-neutral-500 font-medium\"\r\n                        style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em' }}\r\n                    >\r\n                        {video.duration} ΓÇó {video.description}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </section>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// VIDEO TOKEN - Minimal selector (icon + title + duration, no thumbnail)\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\nfunction VideoToken({ video, isSelected, onClick }) {\r\n    const icons = {\r\n        featured: 'Γùê',\r\n        foundations: 'Γû│',\r\n        explorations: 'Γùç',\r\n        wisdom: 'Γ£ª',\r\n        // Geometric types\r\n        circle: 'Γù»',\r\n        triangle: 'Γû│',\r\n        hex: 'Γ¼í'\r\n    };\r\n    const icon = icons[video.iconType] || icons[video.category] || 'Γùå';\r\n\r\n    return (\r\n        <button\r\n            onClick={() => onClick(video)}\r\n            className=\"flex-shrink-0 w-40 p-3 text-left transition-all duration-200 rounded-lg border\"\r\n            style={{\r\n                background: isSelected\r\n                    ? 'rgba(255,140,50,0.1)'\r\n                    : 'rgba(255,255,255,0.02)',\r\n                borderColor: isSelected\r\n                    ? 'rgba(255,140,50,0.5)'\r\n                    : 'rgba(255,255,255,0.08)',\r\n                boxShadow: isSelected\r\n                    ? '0 0 20px rgba(255,120,40,0.2)'\r\n                    : 'none',\r\n                transform: isSelected ? 'scale(1.02)' : 'scale(1)',\r\n            }}\r\n        >\r\n            {/* Icon + Duration row */}\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n                <span\r\n                    className=\"text-sm\"\r\n                    style={{ color: isSelected ? 'rgba(255,180,100,0.9)' : 'rgba(255,255,255,0.3)' }}\r\n                >\r\n                    {icon}\r\n                </span>\r\n                <span\r\n                    className=\"text-[9px] font-mono\"\r\n                    style={{ color: isSelected ? 'rgba(255,180,100,0.7)' : 'rgba(255,255,255,0.3)' }}\r\n                >\r\n                    {video.duration}\r\n                </span>\r\n            </div>\r\n            {/* Title */}\r\n            <h3\r\n                className=\"text-[11px] leading-tight line-clamp-2\"\r\n                style={{\r\n                    color: isSelected ? 'rgba(255,220,180,0.95)' : 'rgba(255,255,255,0.6)',\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 'var(--tracking-wide)',\r\n                }}\r\n            >\r\n                {video.title}\r\n            </h3>\r\n        </button>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// OFFERING BAND - Horizontal scrolling row with category label\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\nfunction OfferingBand({ label, videos, activeVideoId, onSelect }) {\r\n    const scrollRef = useRef(null);\r\n    const [canScrollLeft, setCanScrollLeft] = useState(false);\r\n    const [canScrollRight, setCanScrollRight] = useState(false);\r\n\r\n    // Check scroll state\r\n    const updateScrollState = () => {\r\n        if (!scrollRef.current) return;\r\n        const { scrollLeft, scrollWidth, clientWidth } = scrollRef.current;\r\n        setCanScrollLeft(scrollLeft > 10);\r\n        setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 10);\r\n    };\r\n\r\n    useEffect(() => {\r\n        updateScrollState();\r\n        const el = scrollRef.current;\r\n        if (el) {\r\n            el.addEventListener('scroll', updateScrollState);\r\n            window.addEventListener('resize', updateScrollState);\r\n        }\r\n        return () => {\r\n            if (el) el.removeEventListener('scroll', updateScrollState);\r\n            window.removeEventListener('resize', updateScrollState);\r\n        };\r\n    }, [videos]);\r\n\r\n    // Scroll by ~80% of visible width\r\n    const scroll = (direction) => {\r\n        if (!scrollRef.current) return;\r\n        const scrollAmount = scrollRef.current.clientWidth * 0.8;\r\n        scrollRef.current.scrollBy({\r\n            left: direction === 'left' ? -scrollAmount : scrollAmount,\r\n            behavior: 'smooth',\r\n        });\r\n    };\r\n\r\n    // Don't render empty bands\r\n    if (!videos || videos.length === 0) return null;\r\n\r\n    return (\r\n        <div className=\"mb-6\">\r\n            {/* Label with scroll arrows */}\r\n            <div className=\"flex items-center justify-between mb-3 px-4\">\r\n                <div\r\n                    className=\"text-[10px] uppercase tracking-[0.2em]\"\r\n                    style={{\r\n                        color: 'rgba(255,200,120,0.6)',\r\n                        fontFamily: 'var(--font-display)',\r\n                        fontWeight: 600,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                    }}\r\n                >\r\n                    Γû╢ {label}\r\n                </div>\r\n\r\n                {/* Arrow buttons */}\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => scroll('left')}\r\n                        disabled={!canScrollLeft}\r\n                        className=\"w-6 h-6 rounded-full flex items-center justify-center transition-all\"\r\n                        style={{\r\n                            background: canScrollLeft ? 'rgba(255,180,100,0.15)' : 'transparent',\r\n                            color: canScrollLeft ? 'rgba(255,180,100,0.8)' : 'rgba(255,255,255,0.2)',\r\n                            cursor: canScrollLeft ? 'pointer' : 'default',\r\n                        }}\r\n                    >\r\n                        ΓåÉ\r\n                    </button>\r\n                    <button\r\n                        onClick={() => scroll('right')}\r\n                        disabled={!canScrollRight}\r\n                        className=\"w-6 h-6 rounded-full flex items-center justify-center transition-all\"\r\n                        style={{\r\n                            background: canScrollRight ? 'rgba(255,180,100,0.15)' : 'transparent',\r\n                            color: canScrollRight ? 'rgba(255,180,100,0.8)' : 'rgba(255,255,255,0.2)',\r\n                            cursor: canScrollRight ? 'pointer' : 'default',\r\n                        }}\r\n                    >\r\n                        ΓåÆ\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Horizontal scroll container */}\r\n            <div className=\"relative\">\r\n                {/* Left fade */}\r\n                {canScrollLeft && (\r\n                    <div\r\n                        className=\"absolute left-0 top-0 bottom-0 w-12 z-10 pointer-events-none\"\r\n                        style={{ background: 'linear-gradient(to right, rgba(10,10,15,1), transparent)' }}\r\n                    />\r\n                )}\r\n\r\n                {/* Scroll area */}\r\n                <div\r\n                    ref={scrollRef}\r\n                    className=\"flex gap-3 px-4 pb-2\"\r\n                    style={{\r\n                        overflowX: 'auto',\r\n                        overflowY: 'hidden',\r\n                        scrollbarWidth: 'none', // Firefox\r\n                        msOverflowStyle: 'none', // IE\r\n                        WebkitOverflowScrolling: 'touch', // iOS momentum\r\n                    }}\r\n                >\r\n                    <style>{`\r\n                        .offering-scroll::-webkit-scrollbar { display: none; }\r\n                    `}</style>\r\n                    {videos.map(video => (\r\n                        <VideoToken\r\n                            key={video.id}\r\n                            video={video}\r\n                            isSelected={video.id === activeVideoId}\r\n                            onClick={onSelect}\r\n                        />\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Right fade */}\r\n                {canScrollRight && (\r\n                    <div\r\n                        className=\"absolute right-0 top-0 bottom-0 w-12 z-10 pointer-events-none\"\r\n                        style={{ background: 'linear-gradient(to left, rgba(10,10,15,1), transparent)' }}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// ASH FADE BOUNDARY - Signals end of space\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\nfunction AshFadeBoundary() {\r\n    return (\r\n        <div\r\n            className=\"h-24 pointer-events-none\"\r\n            style={{\r\n                background: 'linear-gradient(to top, rgba(20,15,12,0.8), transparent)',\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\n// VIDEO LIBRARY - Main component (the Hearth)\r\n// ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ\r\nexport function VideoLibrary() {\r\n    // Idle state by default (null = no video selected)\r\n    const [activeVideo, setActiveVideo] = useState(null);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [isTransitioning, setIsTransitioning] = useState(false);\r\n\r\n    // Group videos by category (meaningful bands only)\r\n    const featuredVideos = VIDEOS.filter(v => v.isFeatured);\r\n    const allVideos = VIDEOS; // For now, show all in one band since we only have wisdom category\r\n\r\n    // The \"tending\" handler with dissolve transition\r\n    const tendFire = (video) => {\r\n        // Guard: don't reset if selecting same video\r\n        if (activeVideo?.id === video.id) return;\r\n\r\n        // Trigger ember flare immediately on selection\r\n        if (window.flareEmbers) window.flareEmbers(35);\r\n\r\n        // Dissolve out\r\n        setIsTransitioning(true);\r\n\r\n        setTimeout(() => {\r\n            setActiveVideo(video);\r\n            setIsPlaying(false);\r\n            // Dissolve in\r\n            setIsTransitioning(false);\r\n        }, 300);\r\n    };\r\n\r\n    // Clear video and return to idle embers\r\n    const clearVideo = () => {\r\n        if (!activeVideo) return;\r\n\r\n        // Trigger ember flare on clear too\r\n        if (window.flareEmbers) window.flareEmbers(25);\r\n\r\n        setIsTransitioning(true);\r\n        setTimeout(() => {\r\n            setActiveVideo(null);\r\n            setIsPlaying(false);\r\n            setIsTransitioning(false);\r\n        }, 300);\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"w-full min-h-[70vh] flex flex-col relative\"\r\n            style={{\r\n                background: 'rgba(10,10,15,1)', // Fully opaque\r\n                zIndex: 50 // Above PathParticles and other decorations\r\n            }}\r\n        >\r\n            {/* THE HEARTH - Always at top, fixed size */}\r\n            <VideoHearth\r\n                video={activeVideo}\r\n                isPlaying={isPlaying}\r\n                setIsPlaying={setIsPlaying}\r\n                isTransitioning={isTransitioning}\r\n                onClear={clearVideo}\r\n            />\r\n\r\n            {/* THE OFFERINGS - Horizontal bands */}\r\n            <div className=\"flex-1 py-4\">\r\n                {/* Featured band (if any) */}\r\n                {featuredVideos.length > 0 && (\r\n                    <OfferingBand\r\n                        label=\"Featured\"\r\n                        videos={featuredVideos}\r\n                        activeVideoId={activeVideo?.id}\r\n                        onSelect={tendFire}\r\n                    />\r\n                )}\r\n\r\n                {/* All videos band (meaningful, not catalog) */}\r\n                <OfferingBand\r\n                    label=\"Library\"\r\n                    videos={allVideos}\r\n                    activeVideoId={activeVideo?.id}\r\n                    onSelect={tendFire}\r\n                />\r\n            </div>\r\n\r\n            {/* ASH BOUNDARY - End of space */}\r\n            <AshFadeBoundary />\r\n        </div>\r\n    );\r\n}\r\n\r\n// Note: VideoListCompact is available from VideoPlayer.jsx if needed elsewhere\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\VideoPlayer.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handlePlayerReady` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  61 |             playerRef.current = new window.YT.Player(iframeRef.current, {\n  62 |                 events: {\n> 63 |                     onReady: handlePlayerReady,\n     |                              ^^^^^^^^^^^^^^^^^ `handlePlayerReady` accessed before it is declared\n  64 |                     onStateChange: handleStateChange,\n  65 |                     onError: handlePlayerError\n  66 |                 }\n\n   82 |     }, [video.id, video.provider]);\n   83 |\n>  84 |     const handlePlayerReady = useCallback(() => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  85 |         setIsLoading(false);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  86 |\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 108 |         }, 2000);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 109 |     }, [video.id, updateProgress, markCompleted, onComplete]);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `handlePlayerReady` is declared here\n  110 |\n  111 |     const handleStateChange = useCallback((event) => {\n  112 |         // YT.PlayerState.ENDED = 0","line":63,"column":30,"nodeType":null,"endLine":63,"endColumn":47},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handleStateChange` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  62 |                 events: {\n  63 |                     onReady: handlePlayerReady,\n> 64 |                     onStateChange: handleStateChange,\n     |                                    ^^^^^^^^^^^^^^^^^ `handleStateChange` accessed before it is declared\n  65 |                     onError: handlePlayerError\n  66 |                 }\n  67 |             });\n\n  109 |     }, [video.id, updateProgress, markCompleted, onComplete]);\n  110 |\n> 111 |     const handleStateChange = useCallback((event) => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 112 |         // YT.PlayerState.ENDED = 0\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 113 |         if (event.data === 0) {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 114 |             markCompleted(video.id);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 115 |             onComplete?.();\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 116 |         }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 117 |     }, [video.id, markCompleted, onComplete]);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `handleStateChange` is declared here\n  118 |\n  119 |     const handlePlayerError = useCallback(() => {\n  120 |         setHasError(true);","line":64,"column":36,"nodeType":null,"endLine":64,"endColumn":53},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`handlePlayerError` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  63 |                     onReady: handlePlayerReady,\n  64 |                     onStateChange: handleStateChange,\n> 65 |                     onError: handlePlayerError\n     |                              ^^^^^^^^^^^^^^^^^ `handlePlayerError` accessed before it is declared\n  66 |                 }\n  67 |             });\n  68 |         };\n\n  117 |     }, [video.id, markCompleted, onComplete]);\n  118 |\n> 119 |     const handlePlayerError = useCallback(() => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 120 |         setHasError(true);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 121 |         setIsLoading(false);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 122 |     }, []);\n      | ^^^^^^^^^^^^ `handlePlayerError` is declared here\n  123 |\n  124 |     const handleIframeLoad = () => {\n  125 |         // For non-YouTube providers","line":65,"column":30,"nodeType":null,"endLine":65,"endColumn":47},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'handlePlayerError', 'handlePlayerReady', and 'handleStateChange'. Either include them or remove the dependency array.","line":82,"column":8,"nodeType":"ArrayExpression","endLine":82,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [handlePlayerError, handlePlayerReady, handleStateChange, video.id, video.provider]","fix":{"range":[2852,2878],"text":"[handlePlayerError, handlePlayerReady, handleStateChange, video.id, video.provider]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":105,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":23}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/VideoPlayer.jsx\r\n// YouTube embed with progress tracking and provider abstraction\r\n\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useVideoStore } from '../state/videoStore.js';\r\nimport { getEmbedUrl } from '../data/videoData.js';\r\n\r\n/**\r\n * VideoPlayer - Embeds video with progress tracking\r\n * \r\n * @param {Object} video - Video object from videoData\r\n * @param {Function} onComplete - Called when video reaches 90% or ends\r\n * @param {Function} onClose - Called when player should close\r\n * @param {boolean} autoplay - Start playing immediately\r\n */\r\nexport function VideoPlayer({ video, onComplete, onClose, autoplay = false }) {\r\n    const {\r\n        updateProgress,\r\n        markCompleted,\r\n        setCurrentVideo,\r\n        clearCurrentVideo,\r\n        getResumePosition\r\n    } = useVideoStore();\r\n\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [hasError, setHasError] = useState(false);\r\n    const iframeRef = useRef(null);\r\n    const playerRef = useRef(null);\r\n    const progressIntervalRef = useRef(null);\r\n\r\n    // Get resume position\r\n    const resumePosition = getResumePosition(video.id);\r\n\r\n    // Set current video on mount\r\n    useEffect(() => {\r\n        setCurrentVideo(video.id);\r\n        return () => {\r\n            clearCurrentVideo();\r\n            if (progressIntervalRef.current) {\r\n                clearInterval(progressIntervalRef.current);\r\n            }\r\n        };\r\n    }, [video.id, setCurrentVideo, clearCurrentVideo]);\r\n\r\n    // Initialize YouTube Player API\r\n    useEffect(() => {\r\n        if (video.provider !== 'youtube') return;\r\n\r\n        // Load YouTube IFrame API if not already loaded\r\n        if (!window.YT) {\r\n            const tag = document.createElement('script');\r\n            tag.src = 'https://www.youtube.com/iframe_api';\r\n            const firstScriptTag = document.getElementsByTagName('script')[0];\r\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n        }\r\n\r\n        // Initialize player when API is ready\r\n        const initPlayer = () => {\r\n            if (!iframeRef.current) return;\r\n\r\n            playerRef.current = new window.YT.Player(iframeRef.current, {\r\n                events: {\r\n                    onReady: handlePlayerReady,\r\n                    onStateChange: handleStateChange,\r\n                    onError: handlePlayerError\r\n                }\r\n            });\r\n        };\r\n\r\n        if (window.YT && window.YT.Player) {\r\n            // Small delay to ensure iframe is mounted\r\n            setTimeout(initPlayer, 100);\r\n        } else {\r\n            window.onYouTubeIframeAPIReady = initPlayer;\r\n        }\r\n\r\n        return () => {\r\n            if (playerRef.current && playerRef.current.destroy) {\r\n                playerRef.current.destroy();\r\n            }\r\n        };\r\n    }, [video.id, video.provider]);\r\n\r\n    const handlePlayerReady = useCallback(() => {\r\n        setIsLoading(false);\r\n\r\n        // Start progress tracking (every 2 seconds)\r\n        progressIntervalRef.current = setInterval(() => {\r\n            if (!playerRef.current || !playerRef.current.getCurrentTime) return;\r\n\r\n            try {\r\n                const currentTime = playerRef.current.getCurrentTime();\r\n                const duration = playerRef.current.getDuration();\r\n\r\n                if (duration > 0) {\r\n                    const progress = currentTime / duration;\r\n                    updateProgress(video.id, progress, currentTime);\r\n\r\n                    // Check for completion (90%)\r\n                    if (progress >= 0.9) {\r\n                        markCompleted(video.id);\r\n                        onComplete?.();\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                // Player might be destroyed\r\n            }\r\n        }, 2000);\r\n    }, [video.id, updateProgress, markCompleted, onComplete]);\r\n\r\n    const handleStateChange = useCallback((event) => {\r\n        // YT.PlayerState.ENDED = 0\r\n        if (event.data === 0) {\r\n            markCompleted(video.id);\r\n            onComplete?.();\r\n        }\r\n    }, [video.id, markCompleted, onComplete]);\r\n\r\n    const handlePlayerError = useCallback(() => {\r\n        setHasError(true);\r\n        setIsLoading(false);\r\n    }, []);\r\n\r\n    const handleIframeLoad = () => {\r\n        // For non-YouTube providers\r\n        if (video.provider !== 'youtube') {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // Get embed URL with resume position\r\n    const embedUrl = getEmbedUrl(video, {\r\n        autoplay,\r\n        start: resumePosition\r\n    });\r\n\r\n    if (!embedUrl) {\r\n        return (\r\n            <div className=\"aspect-video bg-[rgba(0,0,0,0.3)] rounded-xl flex items-center justify-center\">\r\n                <p className=\"text-[rgba(253,251,245,0.5)] text-sm\">Video unavailable</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative w-full\">\r\n            {/* Video container with 16:9 aspect ratio */}\r\n            <div className=\"aspect-video rounded-xl overflow-hidden relative bg-black\">\r\n                {/* Loading skeleton */}\r\n                {isLoading && (\r\n                    <div className=\"absolute inset-0 bg-[rgba(22,22,37,0.9)] flex items-center justify-center\">\r\n                        <div className=\"flex flex-col items-center gap-3\">\r\n                            <div className=\"w-12 h-12 border-2 border-[var(--accent-30)] border-t-[var(--accent-color)] rounded-full animate-spin\" />\r\n                            <span className=\"text-[11px] text-[rgba(253,251,245,0.5)]\">Loading video...</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Error state */}\r\n                {hasError && (\r\n                    <div className=\"absolute inset-0 bg-[rgba(22,22,37,0.95)] flex items-center justify-center\">\r\n                        <div className=\"text-center p-4\">\r\n                            <div className=\"text-3xl mb-2\">≡ƒÿô</div>\r\n                            <p className=\"text-[rgba(253,251,245,0.7)] text-sm mb-3\">\r\n                                Video failed to load\r\n                            </p>\r\n                            {video.provider === 'youtube' && (\r\n                                <a\r\n                                    href={`https://youtube.com/watch?v=${video.externalId}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"inline-block px-4 py-2 rounded-full text-[11px] bg-[var(--accent-20)] text-[var(--accent-color)] hover:bg-[var(--accent-30)] transition-all\"\r\n                                >\r\n                                    Open on YouTube ΓåÆ\r\n                                </a>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Local video (self provider) - HTML5 video element */}\r\n                {video.provider === 'self' && (\r\n                    <video\r\n                        ref={iframeRef}\r\n                        src={embedUrl}\r\n                        className=\"w-full h-full object-contain\"\r\n                        style={{\r\n                            colorScheme: 'dark',\r\n                            backgroundColor: '#000'\r\n                        }}\r\n                        controls\r\n                        autoPlay={autoplay}\r\n                        onLoadedData={() => setIsLoading(false)}\r\n                        onError={() => { setHasError(true); setIsLoading(false); }}\r\n                        onTimeUpdate={(e) => {\r\n                            const current = e.target.currentTime;\r\n                            const duration = e.target.duration;\r\n                            if (duration > 0) {\r\n                                const progress = current / duration;\r\n                                updateProgress(video.id, progress, current);\r\n                                if (progress >= 0.9) {\r\n                                    markCompleted(video.id);\r\n                                    onComplete?.();\r\n                                }\r\n                            }\r\n                        }}\r\n                        onEnded={() => {\r\n                            markCompleted(video.id);\r\n                            onComplete?.();\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* YouTube/External iframe */}\r\n                {video.provider !== 'self' && (\r\n                    <iframe\r\n                        ref={iframeRef}\r\n                        id={`youtube-player-${video.id}`}\r\n                        src={embedUrl}\r\n                        title={video.title}\r\n                        className=\"w-full h-full\"\r\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                        allowFullScreen\r\n                        onLoad={handleIframeLoad}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            {/* Video info bar */}\r\n            <div className=\"mt-3 flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                    <h3\r\n                        className=\"text-sm font-semibold text-white mb-1\"\r\n                        style={{ fontFamily: 'var(--font-display)', letterSpacing: 'var(--tracking-wide)' }}\r\n                    >\r\n                        {video.title}\r\n                    </h3>\r\n                    <p className=\"text-[10px] text-[rgba(253,251,245,0.5)]\">\r\n                        {video.duration} ΓÇó {video.category}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Close button */}\r\n                {onClose && (\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-2 rounded-full hover:bg-[rgba(253,251,245,0.1)] transition-colors\"\r\n                    >\r\n                        <span className=\"text-[rgba(253,251,245,0.6)]\">Γ£ò</span>\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Resume indicator */}\r\n            {resumePosition > 0 && (\r\n                <div className=\"mt-2 text-[9px] text-[var(--accent-color)] opacity-70\">\r\n                    Γå╗ Resuming from {formatTime(resumePosition)}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Format seconds to MM:SS\r\n */\r\nfunction formatTime(seconds) {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n * Compact video player for modal use\r\n */\r\nexport function VideoPlayerModal({ video, isOpen, onClose }) {\r\n    if (!isOpen || !video) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\r\n            style={{ background: 'rgba(0,0,0,0.95)', backdropFilter: 'blur(12px)' }}\r\n            onClick={onClose}\r\n        >\r\n            <div\r\n                className=\"w-full max-w-4xl rounded-2xl overflow-hidden\"\r\n                style={{\r\n                    background: 'rgba(10, 10, 18, 0.98)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.08)',\r\n                    boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.8)'\r\n                }}\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                <VideoPlayer video={video} onClose={onClose} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\VisualizationCanvas.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'cycleCount' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":22,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"cycleCount"},"fix":{"range":[706,727],"text":""},"desc":"Remove unused variable 'cycleCount'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isRunning' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":23,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"isRunning"},"fix":{"range":[727,747],"text":""},"desc":"Remove unused variable 'isRunning'."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'start' and 'stop'. Either include them or remove the dependency array.","line":61,"column":8,"nodeType":"ArrayExpression","endLine":61,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [start, stop]","fix":{"range":[1897,1899],"text":"[start, stop]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect } from 'react';\r\nimport { useVisualizationEngine } from '../hooks/useVisualizationEngine.js';\r\nimport { useVisualizationAudio } from '../hooks/useVisualizationAudio.js';\r\nimport { getGeometryRenderer } from '../utils/geometryRenderers.js';\r\n\r\nexport function VisualizationCanvas({\r\n    geometry = 'enso',\r\n    fadeInDuration = 2.5,\r\n    displayDuration = 10,\r\n    fadeOutDuration = 2.5,\r\n    voidDuration = 10,\r\n    audioEnabled = true,\r\n    onCycleComplete = null,\r\n}) {\r\n    const canvasRef = useRef(null);\r\n    const { playBell, playRisingSweep } = useVisualizationAudio();\r\n    const voidWarningTimerRef = useRef(null);\r\n\r\n    const {\r\n        phase,\r\n        progress,\r\n        cycleCount,\r\n        isRunning,\r\n        sessionSeed,\r\n        start,\r\n        stop,\r\n    } = useVisualizationEngine({\r\n        fadeInDuration,\r\n        displayDuration,\r\n        fadeOutDuration,\r\n        voidDuration,\r\n        onPhaseChange: (newPhase, oldPhase) => {\r\n\r\n            if (!audioEnabled) return;\r\n\r\n            if (newPhase === 'void') {\r\n                playBell();\r\n                const warningTime = (voidDuration - 1) * 1000;\r\n                voidWarningTimerRef.current = setTimeout(() => {\r\n                    playRisingSweep();\r\n                }, warningTime);\r\n            }\r\n\r\n            if (oldPhase === 'void' && newPhase === 'fadeIn') {\r\n                playBell();\r\n                if (voidWarningTimerRef.current) {\r\n                    clearTimeout(voidWarningTimerRef.current);\r\n                    voidWarningTimerRef.current = null;\r\n                }\r\n            }\r\n        },\r\n        onCycleComplete: (cycle) => {\r\n            if (onCycleComplete) onCycleComplete(cycle);\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        start();\r\n        return () => stop();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); // Run once on mount only\r\n\r\n    const getAccentColor = (variable) => {\r\n        if (typeof window === 'undefined') return '#fcd34d';\r\n        return getComputedStyle(document.documentElement)\r\n            .getPropertyValue(variable)\r\n            .trim() || '#fcd34d';\r\n    };\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n\r\n        const width = 300;\r\n        const height = 300;\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        ctx.fillStyle = '#0a0a12';\r\n        ctx.fillRect(0, 0, width, height);\r\n\r\n        // Draw subtle grid background\r\n        const gridColor = getAccentColor('--accent-color');\r\n        const gridSpacing = 15; // 15px grid cells (finer grid)\r\n        ctx.save();\r\n        ctx.strokeStyle = gridColor;\r\n        ctx.lineWidth = 0.5;\r\n        ctx.globalAlpha = 0.4; // 40% opacity\r\n\r\n        // Vertical lines\r\n        for (let x = gridSpacing; x < width; x += gridSpacing) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x, 0);\r\n            ctx.lineTo(x, height);\r\n            ctx.stroke();\r\n        }\r\n\r\n        // Horizontal lines\r\n        for (let y = gridSpacing; y < height; y += gridSpacing) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(0, y);\r\n            ctx.lineTo(width, y);\r\n            ctx.stroke();\r\n        }\r\n\r\n        // Draw center crosshairs slightly brighter\r\n        ctx.globalAlpha = 0.25;\r\n        ctx.beginPath();\r\n        ctx.moveTo(width / 2, 0);\r\n        ctx.lineTo(width / 2, height);\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, height / 2);\r\n        ctx.lineTo(width, height / 2);\r\n        ctx.stroke();\r\n\r\n        ctx.restore();\r\n\r\n        if (phase === 'void') {\r\n            ctx.save();\r\n            ctx.fillStyle = 'rgba(253,251,245,0.3)';\r\n            const displayFont = getAccentColor('--font-display');\r\n            ctx.font = `700 14px ${displayFont}`;\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText('VISUALIZE', width / 2, height / 2);\r\n            ctx.restore();\r\n            return;\r\n        }\r\n\r\n        const renderer = getGeometryRenderer(geometry);\r\n        const rotation = sessionSeed * 360;\r\n        const scale = 0.9 + sessionSeed * 0.2;\r\n        const strokeWidth = 1.5 + sessionSeed * 1.0;\r\n\r\n        const accentColor = getAccentColor('--accent-color');\r\n        const accentSecondary = getAccentColor('--accent-secondary');\r\n        const accent40 = getAccentColor('--accent-40');\r\n\r\n        const config = {\r\n            accentColor,\r\n            accentSecondary,\r\n            accent40,\r\n            rotation,\r\n            scale,\r\n            strokeWidth,\r\n        };\r\n\r\n        ctx.save();\r\n\r\n        if (phase === 'fadeOut') {\r\n            ctx.globalAlpha = 1.0 - progress;\r\n        }\r\n\r\n        if (phase === 'fadeIn') {\r\n            renderer(ctx, progress, config);\r\n        } else if (phase === 'display' || phase === 'fadeOut') {\r\n            renderer(ctx, 1.0, config);\r\n        }\r\n\r\n        ctx.restore();\r\n\r\n    }, [phase, progress, geometry, sessionSeed]);\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                position: 'relative',\r\n                width: '300px',\r\n                height: '300px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n            }}\r\n        >\r\n            <canvas\r\n                ref={canvasRef}\r\n                style={{\r\n                    width: '300px',\r\n                    height: '300px',\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\VisualizationConfig.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'duration' is defined but never used.","line":18,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"duration"},"fix":{"range":[428,443],"text":""},"desc":"Remove unused variable 'duration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setDuration' is defined but never used.","line":19,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"setDuration"},"fix":{"range":[443,461],"text":""},"desc":"Remove unused variable 'setDuration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'totalCycleDuration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":30,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"totalCycleDuration"},"fix":{"range":[842,935],"text":""},"desc":"Remove unused variable 'totalCycleDuration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":73,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[2930,2937],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/VisualizationConfig.jsx\r\n// Config panel for Visualization practice\r\n\r\nimport React from 'react';\r\nimport { CycleRingControl } from './CycleRingControl.jsx';\r\n\r\nexport function VisualizationConfig({\r\n    geometry,\r\n    setGeometry,\r\n    fadeInDuration,\r\n    setFadeInDuration,\r\n    displayDuration,\r\n    setDisplayDuration,\r\n    fadeOutDuration,\r\n    setFadeOutDuration,\r\n    voidDuration,\r\n    setVoidDuration,\r\n    duration,\r\n    setDuration,\r\n    audioEnabled,\r\n    setAudioEnabled,\r\n    isLight = false,\r\n}) {\r\n    // Basic shapes\r\n    const BASIC_GEOMETRIES = ['enso', 'circle', 'triangle', 'square'];\r\n    // Sacred/Spiritual symbols (SVG files)\r\n    const RELIGIOUS_GEOMETRIES = ['mandala', 'sri-yantra', 'wheel-of-dharma', 'buddha', 'cross', 'yin-yang', 'zen-stones'];\r\n    const DURATIONS = [5, 10, 15, 20];\r\n\r\n    const totalCycleDuration = fadeInDuration + displayDuration + fadeOutDuration + voidDuration;\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Geometry Selector */}\r\n            <div>\r\n                <div\r\n                    className=\"text-[10px] uppercase tracking-[0.25em] mb-3 text-[var(--accent-60)] font-bold\"\r\n                    style={{ fontFamily: 'var(--font-display)' }}\r\n                >\r\n                    Shapes\r\n                </div>\r\n                <div className=\"flex gap-2 mb-4\">\r\n                    {BASIC_GEOMETRIES.map((g) => (\r\n                        <button\r\n                            key={g}\r\n                            onClick={() => setGeometry(g)}\r\n                            className={`\r\n                flex-1 px-3 py-2 rounded-xl text-xs transition-all\r\n                ${geometry === g\r\n                                    ? 'border-[var(--accent-40)] bg-[var(--accent-10)] text-[var(--text-primary)]'\r\n                                    : 'border-[var(--accent-15)] text-[var(--text-secondary)] hover:border-[var(--accent-25)] hover:bg-[var(--accent-10)]'\r\n                                }\r\n              `}\r\n                            style={{\r\n                                border: geometry === g ? '1px solid var(--accent-40)' : '1px solid var(--accent-15)',\r\n                                fontFamily: 'var(--font-display)',\r\n                                fontWeight: 700,\r\n                                letterSpacing: '0.05em'\r\n                            }}\r\n                        >\r\n                            {g.toUpperCase()}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                <div\r\n                    className=\"text-[10px] uppercase tracking-[0.25em] mb-3 text-[var(--accent-60)] font-bold\"\r\n                    style={{ fontFamily: 'var(--font-display)' }}\r\n                >\r\n                    Sacred Symbols\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                    {RELIGIOUS_GEOMETRIES.map((g, index) => (\r\n                        <button\r\n                            key={g}\r\n                            onClick={() => setGeometry(g)}\r\n                            className={`\r\n                px-3 py-2 rounded-xl text-xs transition-all\r\n                ${geometry === g\r\n                                    ? 'border-[var(--accent-40)] bg-[var(--accent-10)] text-[var(--text-primary)]'\r\n                                    : 'border-[var(--accent-15)] text-[var(--text-secondary)] hover:border-[var(--accent-25)] hover:bg-[var(--accent-10)]'\r\n                                }\r\n              `}\r\n                            style={{\r\n                                border: geometry === g ? '1px solid var(--accent-40)' : '1px solid var(--accent-15)',\r\n                                fontFamily: 'var(--font-display)',\r\n                                fontWeight: 600,\r\n                                letterSpacing: '0.02em',\r\n                            }}\r\n                        >\r\n                            {g.replace(/-/g, ' ').toUpperCase()}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Timing Controls - Cycle Ring */}\r\n            <div>\r\n                <div\r\n                    className=\"text-[10px] uppercase tracking-[0.25em] mb-3 text-[var(--accent-60)] font-bold\"\r\n                    style={{ fontFamily: 'var(--font-display)' }}\r\n                >\r\n                    Phase Durations\r\n                </div>\r\n                <CycleRingControl\r\n                    fadeInDuration={fadeInDuration}\r\n                    setFadeInDuration={setFadeInDuration}\r\n                    displayDuration={displayDuration}\r\n                    setDisplayDuration={setDisplayDuration}\r\n                    fadeOutDuration={fadeOutDuration}\r\n                    setFadeOutDuration={setFadeOutDuration}\r\n                    voidDuration={voidDuration}\r\n                    setVoidDuration={setVoidDuration}\r\n                    isLight={isLight}\r\n                />\r\n            </div>\r\n\r\n            {/* Audio Toggle */}\r\n            <div>\r\n                <div\r\n                    className=\"text-[10px] uppercase tracking-[0.25em] mb-3 text-[var(--accent-60)] font-bold\"\r\n                    style={{ fontFamily: 'var(--font-display)' }}\r\n                >\r\n                    Audio Cues\r\n                </div>\r\n                <button\r\n                    onClick={() => setAudioEnabled(!audioEnabled)}\r\n                    className=\"w-full px-4 py-3 rounded-xl text-sm transition-all\"\r\n                    style={{\r\n                        border: audioEnabled ? '1px solid var(--accent-40)' : '1px solid var(--accent-15)',\r\n                        background: audioEnabled ? 'var(--accent-10)' : 'transparent',\r\n                        color: audioEnabled ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n                    }}\r\n                >\r\n                    {audioEnabled ? 'ON' : 'OFF'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\VisualizationTest.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\WeeklyReview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'activePath' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"activePath"},"fix":{"range":[302,346],"text":""},"desc":"Remove unused variable 'activePath'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'weekLogs' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"weekLogs"},"fix":{"range":[390,421],"text":""},"desc":"Remove unused variable 'weekLogs'."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  22 |         for (let i = 0; i < trendWeeks; i++) {\n  23 |             const progress = i / (trendWeeks - 1);\n> 24 |             const value = Math.max(0, current * (0.3 + progress * 0.7) + (Math.random() - 0.5) * variance * current);\n     |                                                                           ^^^^^^^^^^^^^ Cannot call impure function\n  25 |             trend.push(Math.round(value));\n  26 |         }\n  27 |         return trend;","line":24,"column":75,"nodeType":null,"endLine":24,"endColumn":88}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐// src/components/WeeklyReview.jsx\r\nimport React from 'react';\r\nimport { useApplicationStore } from '../state/applicationStore.js';\r\nimport { useNavigationStore } from '../state/navigationStore.js';\r\n\r\nexport function WeeklyReview() {\r\n    const { getStats, getWeekLogs } = useApplicationStore();\r\n    const { activePath } = useNavigationStore();\r\n\r\n    const weekStats = getStats(7);\r\n    const weekLogs = getWeekLogs();\r\n\r\n    // Calculate practice days this week (would integrate with PracticeSection store)\r\n    // For now, mock with random data\r\n    const practiceDays = 5; // TODO: Get from practice store\r\n    const totalDays = 7;\r\n\r\n    // Generate 8-week trend data (mock for now)\r\n    const trendWeeks = 8;\r\n    const generateTrend = (current, variance = 0.3) => {\r\n        const trend = [];\r\n        for (let i = 0; i < trendWeeks; i++) {\r\n            const progress = i / (trendWeeks - 1);\r\n            const value = Math.max(0, current * (0.3 + progress * 0.7) + (Math.random() - 0.5) * variance * current);\r\n            trend.push(Math.round(value));\r\n        }\r\n        return trend;\r\n    };\r\n\r\n    const awarenessTrend = generateTrend(weekStats.total);\r\n    const agencyTrend = generateTrend(weekStats.respondedDifferently);\r\n    const practiceTrend = [3, 5, 4, 6, 7, 6, 7, 7]; // Mock\r\n\r\n    const renderTrendBar = (value, maxValue, index) => {\r\n        const height = Math.max(10, (value / maxValue) * 100);\r\n        return (\r\n            <div key={index} className=\"flex-1 flex items-end justify-center\" style={{ height: '60px' }}>\r\n                <div\r\n                    className=\"w-full bg-gradient-to-t from-[var(--accent-color)] to-[var(--accent-60)] rounded-t-sm\"\r\n                    style={{ height: `${height}%` }}\r\n                />\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full\">\r\n            <div className=\"bg-[#0f0f1a] border border-[var(--accent-15)] rounded-3xl p-8 space-y-8 relative overflow-hidden\">\r\n                {/* Application background - axe & stump */}\r\n                <div\r\n                    className=\"absolute inset-0 pointer-events-none rounded-3xl\"\r\n                    style={{\r\n                        backgroundImage: `url(${import.meta.env.BASE_URL}application-axe-stump.png)`,\r\n                        backgroundSize: 'contain',\r\n                        backgroundPosition: 'center center',\r\n                        backgroundRepeat: 'no-repeat',\r\n                        opacity: 0.17,\r\n                        zIndex: 0,\r\n                    }}\r\n                />\r\n\r\n                {/* Header */}\r\n                <h3\r\n                    className=\"application-card-label text-[var(--accent-70)] text-center relative z-10 font-bold tracking-[0.25em]\"\r\n                    style={{ fontFamily: 'var(--font-display)' }}\r\n                >\r\n                    THIS WEEK\r\n                </h3>\r\n\r\n                {/* PRIMARY: Practice Consistency - Big & Clear */}\r\n                <div className=\"relative\" style={{ zIndex: 10 }}>\r\n                    <div className=\"text-center mb-6\">\r\n                        <div className=\"text-4xl font-bold mb-2\" style={{ fontFamily: 'var(--font-display)', fontWeight: 700, letterSpacing: 'var(--tracking-wide)', color: 'var(--accent-color)' }}>\r\n                            {practiceDays}/{totalDays}\r\n                        </div>\r\n                        <div className=\"text-xs uppercase tracking-wider text-[var(--accent-60)] mb-3\">\r\n                            Days Practiced\r\n                        </div>\r\n                        {practiceDays >= 6 && (\r\n                            <div\r\n                                className=\"inline-block px-3 py-1 rounded-full text-[10px] uppercase tracking-wider\"\r\n                                style={{ background: 'var(--gold-30)', color: 'var(--gold-100)' }}\r\n                            >\r\n                                Strong Week\r\n                            </div>\r\n                        )}\r\n                        {practiceDays >= 4 && practiceDays < 6 && (\r\n                            <div\r\n                                className=\"inline-block px-3 py-1 rounded-full text-[10px] uppercase tracking-wider\"\r\n                                style={{ background: 'var(--accent-20)', color: 'var(--accent-color)' }}\r\n                            >\r\n                                On Path\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-1 max-w-xs mx-auto\">\r\n                        {Array.from({ length: totalDays }).map((_, i) => (\r\n                            <div\r\n                                key={i}\r\n                                className={`flex-1 h-2 rounded-full ${i < practiceDays\r\n                                    ? 'bg-[var(--ui-button-gradient)]'\r\n                                    : 'bg-[var(--accent-10)]'\r\n                                    }`}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* SECONDARY: Awareness & Agency - Side by Side */}\r\n                <div className=\"grid grid-cols-2 gap-6 relative\" style={{ zIndex: 10 }}>\r\n                    {/* Awareness Moments */}\r\n                    <div>\r\n                        <div className=\"text-xs text-[var(--accent-60)] uppercase tracking-wider mb-2\">\r\n                            Awareness\r\n                        </div>\r\n                        <div className=\"text-3xl text-[var(--accent-color)] mb-1 font-bold tracking-wide\" style={{ fontFamily: 'var(--font-display)' }}>\r\n                            {weekStats.total}\r\n                        </div>\r\n                        <div className=\"text-[10px] text-[rgba(253,251,245,0.5)]\">\r\n                            moments logged\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Responded Differently */}\r\n                    <div>\r\n                        <div className=\"text-xs text-[var(--accent-60)] uppercase tracking-wider mb-2\">\r\n                            Agency\r\n                        </div>\r\n                        <div className=\"flex items-baseline gap-2\">\r\n                            <span className=\"text-3xl text-[var(--accent-color)] font-bold tracking-wide\" style={{ fontFamily: 'var(--font-display)' }}>\r\n                                {weekStats.respondedDifferently}\r\n                            </span>\r\n                            <span className=\"text-lg text-[var(--accent-80)]\">\r\n                                {weekStats.respondedDifferentlyPercent}%\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"text-[10px] text-[rgba(253,251,245,0.5)]\">\r\n                            different responses\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                <div className=\"flex items-center justify-center py-2\">\r\n                    <div className=\"flex items-center gap-4 text-[var(--accent-30)]\">\r\n                        <div className=\"w-24 h-[1px] bg-gradient-to-r from-transparent to-[var(--accent-30)]\" />\r\n                        <div style={{ fontSize: '10px' }}>Γùå</div>\r\n                        <div className=\"w-24 h-[1px] bg-gradient-to-l from-transparent to-[var(--accent-30)]\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Trend (past 8 weeks) */}\r\n                <div>\r\n                    <div className=\"text-xs text-[var(--accent-60)] uppercase tracking-wider mb-3 text-center\">\r\n                        Trend (Past 8 Weeks)\r\n                    </div>\r\n\r\n                    {/* Awareness Trend */}\r\n                    <div className=\"mb-4\">\r\n                        <div className=\"text-xs text-[rgba(253,251,245,0.6)] mb-2\">Awareness</div>\r\n                        <div className=\"flex gap-1\">\r\n                            {awarenessTrend.map((value, i) => renderTrendBar(value, Math.max(...awarenessTrend), i))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Agency Trend */}\r\n                    <div className=\"mb-4\">\r\n                        <div className=\"text-xs text-[rgba(253,251,245,0.6)] mb-2\">Agency</div>\r\n                        <div className=\"flex gap-1\">\r\n                            {agencyTrend.map((value, i) => renderTrendBar(value, Math.max(...agencyTrend), i))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Practice Trend */}\r\n                    <div className=\"mb-4\">\r\n                        <div className=\"text-xs text-[rgba(253,251,245,0.6)] mb-2\">Practice</div>\r\n                        <div className=\"flex gap-1\">\r\n                            {practiceTrend.map((value, i) => renderTrendBar(value, 7, i))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Insight */}\r\n                <div className=\"border-t border-[var(--accent-10)] pt-4\">\r\n                    <p\r\n                        className=\"text-sm text-[rgba(253,251,245,0.7)] italic text-center leading-relaxed font-medium\"\r\n                        style={{ fontFamily: 'var(--font-body)', letterSpacing: '0.01em' }}\r\n                    >\r\n                        {weekStats.total > 0 ? (\r\n                            weekStats.total > 30 ? (\r\n                                `Your awareness is flourishing. ${weekStats.respondedDifferentlyPercent}% agency shows the practice working.`\r\n                            ) : weekStats.total > 10 ? (\r\n                                \"Awareness is growing. Each moment logged is progress.\"\r\n                            ) : (\r\n                                \"You're beginning to notice. This is exactly where practice starts.\"\r\n                            )\r\n                        ) : (\r\n                            \"Awareness moments will appear here as you log them.\"\r\n                        )}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\WelcomeScreen.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\WidthToggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\WisdomSection.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\WisdomSelectionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\AvatarContainer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\BreathingAura.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":57,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":16},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useTheme\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":57,"column":19,"nodeType":"Identifier","endLine":57,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/avatar/BreathingAura.jsx\r\n// Breathing animation component for practice mode\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useTheme } from \"../../context/ThemeContext.jsx\";\r\n\r\nexport function BreathingAura({ breathPattern }) {\r\n    const {\r\n        inhale = 4,\r\n        holdTop = 4,\r\n        exhale = 4,\r\n        holdBottom = 2,\r\n    } = breathPattern || {};\r\n\r\n    const total = inhale + holdTop + exhale + holdBottom;\r\n    const minScale = 0.75;\r\n    const maxScale = 1.15;\r\n\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (!total || total <= 0) return;\r\n        const cycleMs = total * 1000;\r\n        const start = performance.now();\r\n        let frameId = null;\r\n\r\n        const loop = (now) => {\r\n            const elapsed = now - start;\r\n            const t = (elapsed % cycleMs) / cycleMs;\r\n            setProgress(t);\r\n            frameId = requestAnimationFrame(loop);\r\n        };\r\n\r\n        frameId = requestAnimationFrame(loop);\r\n        return () => {\r\n            if (frameId) cancelAnimationFrame(frameId);\r\n        };\r\n    }, [total]);\r\n\r\n    if (!total) return null;\r\n\r\n    const tInhale = inhale / total;\r\n    const tHoldTop = (inhale + holdTop) / total;\r\n    const tExhale = (inhale + holdTop + exhale) / total;\r\n\r\n    let scale = minScale;\r\n    if (progress < tInhale) {\r\n        scale = minScale + (maxScale - minScale) * (progress / tInhale);\r\n    } else if (progress < tHoldTop) {\r\n        scale = maxScale;\r\n    } else if (progress < tExhale) {\r\n        scale = maxScale - (maxScale - minScale) * ((progress - tHoldTop) / (tExhale - tHoldTop));\r\n    } else {\r\n        scale = minScale;\r\n    }\r\n\r\n    const theme = useTheme();\r\n    const gradient = 'radial-gradient(circle, var(--accent-80) 0%, var(--accent-40) 32%, var(--accent-20) 58%, rgba(248,250,252,0.02) 75%, transparent 100%)';\r\n\r\n    return (\r\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n            <div\r\n                className=\"rounded-full\"\r\n                style={{\r\n                    width: \"80%\",\r\n                    height: \"80%\",\r\n                    background: gradient,\r\n                    filter: \"blur(6px)\",\r\n                    transform: `scale(${scale})`,\r\n                    transition: \"transform 80ms linear, background 2s ease\",\r\n                    mixBlendMode: \"screen\",\r\n                }}\r\n            />\r\n            <div\r\n                className=\"rounded-full absolute\"\r\n                style={{\r\n                    width: \"80%\",\r\n                    height: \"80%\",\r\n                    background: `radial-gradient(circle at 30% 30%, rgba(252, 211, 77, 0.3) 0%, transparent 40%)`,\r\n                    filter: \"blur(8px)\",\r\n                    transform: `scale(${scale})`,\r\n                    transition: \"transform 80ms linear\",\r\n                    mixBlendMode: \"screen\",\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\ConsistencyAura.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\RadiantHalo.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\RuneRingLayer.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'glowColor' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"glowColor"},"fix":{"range":[484,554],"text":""},"desc":"Remove unused variable 'glowColor'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/avatar/RuneRingLayer.jsx\r\n// Rotating rune ring layer component\r\n\r\nimport React from \"react\";\r\nimport { useDisplayModeStore } from \"../../state/displayModeStore\";\r\nimport { useSettingsStore } from \"../../state/settingsStore\";\r\nimport { STAGE_RUNE_COLORS } from \"./constants\";\r\n\r\nexport function RuneRingLayer({ stage = \"flame\", isPracticing = false, speedMultiplier = 1.0 }) {\r\n    const isLight = useDisplayModeStore((state) => state.colorScheme === \"light\");\r\n    const glowColor = STAGE_RUNE_COLORS[stage] || STAGE_RUNE_COLORS.flame;\r\n    const ringType = useSettingsStore(s => s.lightModeRingType);\r\n    const isAstrolabe = ringType === 'astrolabe';\r\n\r\n    // Calculate animation duration based on speed multiplier\r\n    // Base: 60s for light, 120s for dark. Slower = longer duration.\r\n    const lightBaseDuration = 60;\r\n    const darkBaseDuration = 120;\r\n    const lightDuration = speedMultiplier > 0 ? lightBaseDuration / speedMultiplier : lightBaseDuration;\r\n    const darkDuration = speedMultiplier > 0 ? darkBaseDuration / speedMultiplier : darkBaseDuration;\r\n\r\n    if (isLight) {\r\n        return (\r\n            <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                <div\r\n                    className=\"light-ring-rotate relative w-[100%] h-[100%] flex items-center justify-center\"\r\n                    style={{\r\n                        transition: 'opacity 0.5s ease, animation-duration 0.5s ease',\r\n                        animationPlayState: isPracticing ? 'paused' : 'running',\r\n                        animationDuration: `${lightDuration}s`,\r\n                    }}\r\n                >\r\n                    <img\r\n                        src={`${import.meta.env.BASE_URL}sigils/${isAstrolabe ? 'ring-structure.webp' : 'light-rune-ring.png'}`}\r\n                        alt=\"Instrument ring\"\r\n                        className=\"absolute top-1/2 left-1/2 object-contain\"\r\n                        style={{\r\n                            width: \"100%\",\r\n                            height: \"100%\",\r\n                            opacity: isPracticing ? 0.95 : 1,\r\n                            filter: isAstrolabe\r\n                                ? `sepia(0.22) contrast(1.05) brightness(0.96) drop-shadow(0 2px 6px var(--light-shadow-tint)) drop-shadow(0 0 2px #D4AF37) drop-shadow(0 0 4px #B8860B)`\r\n                                : `drop-shadow(0 2px 8px var(--light-shadow-tint)) drop-shadow(0 0 2px #D4AF37) drop-shadow(0 0 4px #B8860B)`,\r\n                            transition: 'transform 0.5s ease, opacity 0.5s ease',\r\n                            transform: isPracticing\r\n                                ? `translate(-50.35%, ${isAstrolabe ? '-49.2%' : '-48.0%'}) ${isAstrolabe ? 'scale(1.15)' : 'scale(1.08)'}`\r\n                                : `translate(-50.35%, ${isAstrolabe ? '-49.2%' : '-48.0%'}) ${isAstrolabe ? 'scale(1.1)' : 'scale(1.05)'}`,\r\n                        }}\r\n                    />\r\n                    {isAstrolabe && (\r\n                        <img\r\n                            src={`${import.meta.env.BASE_URL}sigils/ring-inner-lip.webp`}\r\n                            alt=\"Mechanical lip\"\r\n                            className=\"absolute\"\r\n                            style={{\r\n                                width: \"48.5%\",\r\n                                height: \"48.5%\",\r\n                                opacity: 0.12,\r\n                                mixBlendMode: \"multiply\",\r\n                                pointerEvents: \"none\"\r\n                            }}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n            <div\r\n                className=\"dark-ring-rotate w-[88%] h-[88%] relative flex items-center justify-center\"\r\n                style={{\r\n                    animationPlayState: isPracticing ? 'paused' : 'running',\r\n                    animationDuration: `${darkDuration}s`,\r\n                    zIndex: 5\r\n                }}\r\n            >\r\n                <div className=\"absolute inset-0 hairline-ring opacity-40 scale-[1.005]\" />\r\n                <img\r\n                    src={`${import.meta.env.BASE_URL}sigils/${stage === 'flame' ? 'rune-ring2.png' : 'rune-ring.png'}`}\r\n                    alt=\"Rune ring\"\r\n                    className=\"w-full h-full object-contain\"\r\n                    style={{\r\n                        // Teal-tinted stone look - harmonized with avatar glow\r\n                        filter: `brightness(0.92) saturate(0.75) contrast(1.08) hue-rotate(-10deg) drop-shadow(0 0 4px rgba(80, 200, 180, 0.3))`,\r\n                        opacity: 0.9,\r\n                    }}\r\n                />\r\n                {/* Inner bevel/shadow for depth */}\r\n                <div\r\n                    className=\"absolute inset-[15%] rounded-full pointer-events-none\"\r\n                    style={{\r\n                        boxShadow: `inset 0 4px 12px rgba(0, 0, 0, 0.6), inset 0 -2px 8px rgba(80, 200, 180, 0.08)`,\r\n                    }}\r\n                />\r\n                <div className=\"absolute inset-0 pointer-events-none\">\r\n                    {['SOMA', 'PRANA', 'DHYANA', 'DRISHTI'].map((label, i) => (\r\n                        <div\r\n                            key={label}\r\n                            className=\"absolute text-[6px] text-suspended text-white/30\"\r\n                            style={{\r\n                                top: '50%',\r\n                                left: '50%',\r\n                                transform: `translate(-50%, -50%) rotate(${i * 90}deg) translateY(-32%)`,\r\n                                fontFamily: 'var(--font-display)',\r\n                            }}\r\n                        >\r\n                            {label}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\StaticSigilCore.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\constants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\avatar\\index.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[273,286],"text":""},"desc":"Remove unused variable 'useCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'label' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":26,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"label"},"fix":{"range":[754,793],"text":""},"desc":"Remove unused variable 'label'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  40 |     useEffect(() => {\n  41 |         if (!path || showCore || !attention || attention === 'none') {\n> 42 |             setMaxVariations(1);\n     |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |             setVariationIndex(0);\n  44 |             return;\n  45 |         }","line":42,"column":13,"nodeType":null,"endLine":42,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'avgAccuracy' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":102,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":102,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"avgAccuracy"},"fix":{"range":[4060,4109],"text":""},"desc":"Remove unused variable 'avgAccuracy'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/avatar/index.jsx\r\n// FOUR-LAYER AVATAR STACK:\r\n// 0) Luminous field (canvas rings)\r\n// 1) Breathing aura (practice only)\r\n// 2) Rune ring (PNG, rotating)\r\n// 3) Inner sigil core (PNG, stage-aware)\r\n// 4) Metrics text\r\n\r\nimport React, { useEffect, useState, useCallback } from \"react\";\r\nimport \"../Avatar.css\";\r\nimport { LABELS, STAGE_GLOW_COLORS, getMandalaState } from \"./constants\";\r\nimport { AvatarContainer } from \"./AvatarContainer\";\r\nimport { useSettingsStore } from \"../../state/settingsStore\";\r\n\r\nexport function Avatar({\r\n    mode,\r\n    breathPattern,\r\n    breathState,\r\n    onStageChange,\r\n    stage: controlledStage,\r\n    path = null,\r\n    showCore = true,\r\n    attention = 'vigilance',\r\n    isPracticing = false,\r\n}) {\r\n    const label = LABELS[mode] || \"Center\";\r\n\r\n    // Get avatar naming preference from settings\r\n    const useNewAvatars = useSettingsStore(s => s.useNewAvatars);\r\n\r\n    const [mandalaSnapshot, setMandalaSnapshot] = useState(null);\r\n    const [stageIndex, setStageIndex] = useState(2);\r\n    const [variationIndex, setVariationIndex] = useState(0);\r\n    const [maxVariations, setMaxVariations] = useState(1);\r\n\r\n    const STAGE_NAMES = [\"seedling\", \"ember\", \"flame\", \"beacon\", \"stellar\"];\r\n    const internalStage = STAGE_NAMES[stageIndex];\r\n    const currentStage = controlledStage ? controlledStage.toLowerCase() : internalStage;\r\n\r\n    useEffect(() => {\r\n        if (!path || showCore || !attention || attention === 'none') {\r\n            setMaxVariations(1);\r\n            setVariationIndex(0);\r\n            return;\r\n        }\r\n        const stageLower = currentStage.toLowerCase();\r\n        const pathLower = path.toLowerCase();\r\n        const attentionLower = attention.toLowerCase();\r\n\r\n        const checkVariation = (index) => {\r\n            return new Promise((resolve) => {\r\n                const img = new Image();\r\n\r\n                // Construct path based on naming convention\r\n                let imagePath;\r\n                if (useNewAvatars) {\r\n                    // New naming: avatar-{stage}-{path}-{attention}_0000{n}_.png\r\n                    const variationSuffix = `_0000${index + 1}_`;\r\n                    imagePath = `${import.meta.env.BASE_URL}avatars/avatar-${stageLower}-${pathLower}-${attentionLower}${variationSuffix}.png`;\r\n                } else {\r\n                    // Old naming: {Stage}-{Path}.png (capitalize first letter)\r\n                    const stageCapitalized = stageLower.charAt(0).toUpperCase() + stageLower.slice(1);\r\n                    const pathCapitalized = pathLower.charAt(0).toUpperCase() + pathLower.slice(1);\r\n                    imagePath = `${import.meta.env.BASE_URL}avatars/${stageCapitalized}-${pathCapitalized}.png`;\r\n                }\r\n\r\n                img.src = imagePath;\r\n                img.onload = () => resolve(true);\r\n                img.onerror = () => resolve(false);\r\n            });\r\n        };\r\n\r\n        // For old avatars, only check index 0 (single file)\r\n        const maxChecks = useNewAvatars ? 10 : 1;\r\n        Promise.all([...Array(maxChecks)].map((_, i) => checkVariation(i)))\r\n            .then(results => {\r\n                const foundCount = results.filter(Boolean).length;\r\n                setMaxVariations(foundCount > 0 ? foundCount : 1);\r\n                setVariationIndex(0);\r\n            });\r\n    }, [currentStage, path, attention, showCore, useNewAvatars]);\r\n\r\n    useEffect(() => {\r\n        if (onStageChange) {\r\n            const stageColors = STAGE_GLOW_COLORS[currentStage];\r\n            const stageName = currentStage.charAt(0).toUpperCase() + currentStage.slice(1);\r\n            onStageChange(stageColors, stageName);\r\n        }\r\n    }, [currentStage, onStageChange]);\r\n\r\n    useEffect(() => {\r\n        function refresh() {\r\n            const state = getMandalaState();\r\n            setMandalaSnapshot(state || null);\r\n        }\r\n        refresh();\r\n        const id = setInterval(refresh, 2000);\r\n        return () => clearInterval(id);\r\n    }, []);\r\n\r\n    const mandalaData = mandalaSnapshot || {};\r\n    const avgAccuracy = mandalaData.avgAccuracy || 0;\r\n    const weeklyConsistency = mandalaData.weeklyConsistency || 0;\r\n    const weeklyPracticeLog = mandalaData.weeklyPracticeLog || [false, false, false, false, false, false, false];\r\n\r\n    const safePattern = breathPattern || {};\r\n    const patternForBreath = {\r\n        inhale: typeof safePattern.inhale === \"number\" ? safePattern.inhale : 4,\r\n        holdTop: typeof safePattern.hold1 === \"number\" ? safePattern.hold1 : 4,\r\n        exhale: typeof safePattern.exhale === \"number\" ? safePattern.exhale : 4,\r\n        holdBottom: typeof safePattern.hold2 === \"number\" ? safePattern.hold2 : 2,\r\n    };\r\n\r\n    const handleSigilClick = () => {\r\n        if (maxVariations > 1) {\r\n            setVariationIndex((prev) => (prev + 1) % maxVariations);\r\n        } else if (controlledStage && onStageChange) {\r\n            const currentIndex = STAGE_NAMES.indexOf(currentStage);\r\n            const nextIndex = (currentIndex + 1) % STAGE_NAMES.length;\r\n            const nextStage = STAGE_NAMES[nextIndex];\r\n            const stageColors = STAGE_GLOW_COLORS[nextStage];\r\n            const stageName = nextStage.charAt(0).toUpperCase() + nextStage.slice(1);\r\n            onStageChange(stageColors, stageName);\r\n        } else {\r\n            setStageIndex((prev) => (prev + 1) % STAGE_NAMES.length);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div \r\n            className=\"relative flex flex-col items-center overflow-visible\" \r\n            onClick={mode === 'hub' ? undefined : handleSigilClick}\r\n            style={{ cursor: mode === 'hub' ? 'default' : 'pointer' }}\r\n        >\r\n            <AvatarContainer\r\n                mode={mode}\r\n                breathPattern={patternForBreath}\r\n                stage={currentStage}\r\n                path={path}\r\n                showCore={showCore}\r\n                attention={attention}\r\n                variationIndex={variationIndex}\r\n                hasVariations={maxVariations > 1}\r\n                weeklyConsistency={weeklyConsistency}\r\n                weeklyPracticeLog={weeklyPracticeLog}\r\n                breathState={breathState}\r\n                isPracticing={isPracticing}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\dev\\CoordinateHelper.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\dev\\LLMTestPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\practice\\PracticeConfigCard_GRAVEYARD.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\practice\\PracticeControls.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isLight' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":30,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLight"},"fix":{"range":[1201,1241],"text":""},"desc":"Remove unused variable 'isLight'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// PracticeControls.jsx\r\n// Shared Stop button and timer display for all practice types\r\n\r\nimport React from 'react';\r\nimport { useDisplayModeStore } from '../../state/displayModeStore.js';\r\n\r\n/**\r\n * Unified Stop button and timer display for practice sessions\r\n * @param {object} props\r\n * @param {function} props.onStop - Callback when Stop button is clicked\r\n * @param {string} props.formattedTime - Formatted time string (MM:SS)\r\n * @param {string} props.feedbackText - Optional feedback text to display\r\n * @param {string} props.feedbackColor - Optional feedback text color\r\n * @param {string} props.feedbackShadow - Optional text shadow for feedback\r\n * @param {string} props.buttonBg - Optional custom button background gradient\r\n * @param {string} props.radialGlow - Optional radial glow effect for button\r\n * @param {React.ReactNode} props.children - Optional additional content (e.g., breath count)\r\n */\r\nexport function PracticeControls({\r\n  onStop,\r\n  formattedTime,\r\n  feedbackText = '',\r\n  feedbackColor = 'var(--accent-primary)',\r\n  feedbackShadow = 'none',\r\n  buttonBg = null,\r\n  radialGlow = null,\r\n  children,\r\n}) {\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n\r\n  const defaultButtonBg = 'linear-gradient(180deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)';\r\n  const defaultShadow = 'inset 0 1px 0 rgba(255,255,255,0.35)';\r\n  \r\n  const finalButtonBg = buttonBg || defaultButtonBg;\r\n  const finalBoxShadow = radialGlow\r\n    ? `${radialGlow}, ${defaultShadow}, inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)`\r\n    : `0 0 24px var(--accent-30), ${defaultShadow}, inset 3px 4px 8px rgba(0,0,0,0.25), inset -2px -3px 6px rgba(255,255,255,0.15)`;\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center z-50\">\r\n      {/* Feedback Text */}\r\n      {feedbackText && (\r\n        <div className=\"h-6 mb-3 flex items-center justify-center\">\r\n          <div\r\n            className=\"text-[11px] font-medium tracking-[0.15em] uppercase animate-fade-in-up\"\r\n            style={{\r\n              fontFamily: \"var(--font-display)\",\r\n              fontWeight: 600,\r\n              letterSpacing: \"var(--tracking-wide)\",\r\n              color: feedbackColor,\r\n              textShadow: feedbackShadow,\r\n            }}\r\n          >\r\n            {feedbackText}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Stop Button */}\r\n      <button\r\n        onClick={onStop}\r\n        className=\"rounded-full px-7 py-2.5 transition-all duration-200 hover:-translate-y-0.5 min-w-[200px] relative overflow-hidden\"\r\n        style={{\r\n          fontFamily: \"var(--font-display)\",\r\n          fontSize: \"11px\",\r\n          letterSpacing: \"var(--tracking-mythic)\",\r\n          textTransform: \"uppercase\",\r\n          fontWeight: 600,\r\n          background: finalButtonBg,\r\n          color: \"#050508\",\r\n          boxShadow: finalBoxShadow,\r\n          borderRadius: \"999px\",\r\n        }}\r\n        onMouseDown={(e) => e.currentTarget.style.transform = 'scale(0.97)'}\r\n        onMouseUp={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n        onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n      >\r\n        <span style={{ position: 'relative', zIndex: 2 }}>Stop</span>\r\n        {/* Button shine overlay */}\r\n        <div\r\n          className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n          style={{\r\n            background: 'radial-gradient(ellipse at 40% 30%, rgba(255,255,255,0.12) 0%, transparent 60%)',\r\n            mixBlendMode: 'soft-light',\r\n            zIndex: 1,\r\n          }}\r\n        />\r\n        {/* Noise texture overlay */}\r\n        <div\r\n          className=\"absolute inset-0 rounded-full pointer-events-none\"\r\n          style={{\r\n            background: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E\")`,\r\n            opacity: 0.06,\r\n            mixBlendMode: 'overlay',\r\n            zIndex: 1,\r\n          }}\r\n        />\r\n      </button>\r\n\r\n      {/* Timer Display */}\r\n      <div\r\n        className=\"mt-5\"\r\n        style={{\r\n          fontFamily: \"var(--font-display)\",\r\n          fontSize: \"12px\",\r\n          fontWeight: 600,\r\n          letterSpacing: \"var(--tracking-mythic)\",\r\n          textTransform: \"uppercase\",\r\n          color: \"var(--text-primary)\",\r\n        }}\r\n      >\r\n        {formattedTime}\r\n      </div>\r\n\r\n      {/* Optional children (e.g., breath count) */}\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PracticeControls;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\practice\\SessionSummaryModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'practiceTimeSlots' is assigned a value but never used.","line":29,"column":88,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":105,"suggestions":[{"messageId":"removeVar","data":{"varName":"practiceTimeSlots"},"fix":{"range":[1555,1579],"text":""},"desc":"Remove unused variable 'practiceTimeSlots'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// SessionSummaryModal.jsx\r\n// Post-session summary and \"What's Next\" display component\r\n\r\nimport React from 'react';\r\nimport { useDisplayModeStore } from '../../state/displayModeStore.js';\r\nimport { plateauMaterial, innerGlowStyle, getCardMaterial, getInnerGlowStyle } from '../../styles/cardMaterial.js';\r\n\r\n// Quick practice suggestions based on what was just completed\r\nconst PRACTICE_SUGGESTIONS = {\r\n  \"Breath & Stillness\": [\"Cognitive Vipassana\", \"Somatic Vipassana\", \"Visualization\"],\r\n  \"Cognitive Vipassana\": [\"Breath & Stillness\", \"Somatic Vipassana\", \"Sound\"],\r\n  \"Somatic Vipassana\": [\"Breath & Stillness\", \"Cognitive Vipassana\", \"Sound\"],\r\n  \"Visualization\": [\"Breath & Stillness\", \"Cymatics\", \"Sound\"],\r\n  \"Cymatics\": [\"Visualization\", \"Sound\", \"Breath & Stillness\"],\r\n  \"Sound\": [\"Breath & Stillness\", \"Visualization\", \"Somatic Vipassana\"],\r\n  \"Ritual\": [\"Breath & Stillness\", \"Cognitive Vipassana\"],\r\n  \"Circuit\": [\"Breath & Stillness\", \"Sound\"],\r\n};\r\n\r\n/**\r\n * Session Summary Modal - displays after practice completion\r\n * Shows results AND prompts for what to practice next\r\n * @param {object} props\r\n * @param {object} props.summary - Session summary data\r\n * @param {function} props.onContinue - Callback when user clicks Continue (returns to selection)\r\n * @param {function} props.onStartNext - Callback to start next practice (receives practice type)\r\n * @param {function} props.onFocusRating - Callback when focus rating is selected (1-5)\r\n */\r\nexport function SessionSummaryModal({ summary, onContinue, onStartNext, onFocusRating, practiceTimeSlots = [], legNumber = 1, totalLegs = 2 }) {\r\n  const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n  const isLight = colorScheme === 'light';\r\n  const [focusRating, setFocusRating] = React.useState(null);\r\n\r\n  if (!summary) return null;\r\n\r\n  const suggestions = PRACTICE_SUGGESTIONS[summary.practice] || [\"Breath & Stillness\", \"Visualization\"];\r\n  const isFromCurriculum = summary.curriculumDayNumber !== null && summary.curriculumDayNumber !== undefined;\r\n  const allLegsComplete = isFromCurriculum && !summary.nextLeg;\r\n  const isFirstLeg = isFromCurriculum && legNumber === 1 && totalLegs > 1;\r\n  const isLastLeg = isFromCurriculum && legNumber === totalLegs;\r\n\r\n  const handleRatingSelect = (rating) => {\r\n    setFocusRating(rating);\r\n    if (onFocusRating) {\r\n      onFocusRating(rating);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"w-full h-full min-h-[600px] flex flex-col items-center justify-center pb-12\">\r\n      <div\r\n        className=\"rounded-[32px] relative overflow-hidden\"\r\n        style={{\r\n          width: '480px',\r\n          maxWidth: '95vw',\r\n          ...(isLight ? getCardMaterial(true) : plateauMaterial),\r\n          border: isLight ? '1px solid var(--light-border, rgba(60,50,35,0.15))' : '1px solid var(--accent-20)',\r\n          boxShadow: isLight\r\n            ? '0 4px 24px rgba(60,50,35,0.12), inset 0 1px 0 rgba(255,255,255,0.8)'\r\n            : '0 12px 48px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.04)',\r\n        }}\r\n      >\r\n        <div className=\"absolute inset-0 pointer-events-none\" style={isLight ? getInnerGlowStyle(true) : innerGlowStyle} />\r\n\r\n        <div className=\"relative px-8 py-8 text-center\">\r\n          {/* Decorative Icon */}\r\n          <div\r\n            style={{\r\n              fontSize: '40px',\r\n              marginBottom: '12px',\r\n              filter: 'drop-shadow(0 0 20px var(--accent-40))',\r\n            }}\r\n          >\r\n            ΓÜ£\r\n          </div>\r\n\r\n          {/* Title */}\r\n          <div\r\n            style={{\r\n              fontFamily: 'var(--font-display)',\r\n              fontSize: '16px',\r\n              fontWeight: 600,\r\n              letterSpacing: 'var(--tracking-mythic)',\r\n              color: 'var(--text-primary)',\r\n              marginBottom: '20px',\r\n              textShadow: isLight ? 'none' : '0 0 10px var(--accent-30)',\r\n            }}\r\n          >\r\n            SESSION COMPLETE\r\n          </div>\r\n\r\n          {/* Stats Grid */}\r\n          <div\r\n            style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: summary.tapStats ? '1fr 1fr 1fr' : '1fr 1fr',\r\n              gap: '12px',\r\n              padding: '16px',\r\n              borderRadius: '16px',\r\n              background: isLight ? 'rgba(60,50,35,0.05)' : 'rgba(0,0,0,0.3)',\r\n              border: isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-10)',\r\n              marginBottom: '20px',\r\n            }}\r\n          >\r\n            {/* Practice Type */}\r\n            <div>\r\n              <span style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '9px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                textTransform: 'uppercase',\r\n                color: 'var(--text-muted)',\r\n              }}>\r\n                Practice\r\n              </span>\r\n              <div style={{\r\n                fontFamily: 'var(--font-display)',\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                color: 'var(--text-primary)',\r\n                marginTop: '4px',\r\n              }}>\r\n                {summary.practice}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Duration */}\r\n            <div>\r\n              <span style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '9px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                textTransform: 'uppercase',\r\n                color: 'var(--text-muted)',\r\n              }}>\r\n                Duration\r\n              </span>\r\n              <div style={{\r\n                fontFamily: 'var(--font-display)',\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                color: 'var(--text-primary)',\r\n                marginTop: '4px',\r\n              }}>\r\n                {summary.duration}m\r\n              </div>\r\n            </div>\r\n\r\n            {/* Accuracy (if available) */}\r\n            {summary.tapStats && (\r\n              <div>\r\n                <span style={{\r\n                  fontFamily: 'var(--font-body)',\r\n                  fontSize: '9px',\r\n                  fontWeight: 600,\r\n                  letterSpacing: 'var(--tracking-mythic)',\r\n                  textTransform: 'uppercase',\r\n                  color: 'var(--text-muted)',\r\n                }}>\r\n                  Accuracy\r\n                </span>\r\n                <div style={{\r\n                  fontFamily: 'var(--font-display)',\r\n                  fontSize: '12px',\r\n                  fontWeight: 600,\r\n                  color: 'var(--text-primary)',\r\n                  marginTop: '4px',\r\n                }}>\r\n                  {summary.tapStats.avgErrorMs}ms\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Breath Count (if available) */}\r\n            {summary.breathCount > 0 && (\r\n              <div>\r\n                <span style={{\r\n                  fontFamily: 'var(--font-body)',\r\n                  fontSize: '9px',\r\n                  fontWeight: 600,\r\n                  letterSpacing: 'var(--tracking-mythic)',\r\n                  textTransform: 'uppercase',\r\n                  color: 'var(--text-muted)',\r\n                }}>\r\n                  Breaths\r\n                </span>\r\n                <div style={{\r\n                  fontFamily: 'var(--font-display)',\r\n                  fontSize: '12px',\r\n                  fontWeight: 600,\r\n                  color: 'var(--text-primary)',\r\n                  marginTop: '4px',\r\n                }}>\r\n                  {summary.breathCount}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Focus Rating (if from curriculum) */}\r\n          {isFromCurriculum && (\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <div\r\n                style={{\r\n                  fontFamily: 'var(--font-body)',\r\n                  fontSize: '9px',\r\n                  fontWeight: 600,\r\n                  letterSpacing: 'var(--tracking-mythic)',\r\n                  textTransform: 'uppercase',\r\n                  color: 'var(--text-muted)',\r\n                  marginBottom: '10px',\r\n                  textAlign: 'center',\r\n                }}\r\n              >\r\n                How was your focus?\r\n              </div>\r\n              <div className=\"flex justify-center gap-2\">\r\n                {[1, 2, 3, 4, 5].map((rating) => (\r\n                  <button\r\n                    key={rating}\r\n                    onClick={() => handleRatingSelect(rating)}\r\n                    className=\"transition-all duration-200 hover:scale-110\"\r\n                    style={{\r\n                      fontSize: '24px',\r\n                      background: 'transparent',\r\n                      border: 'none',\r\n                      cursor: 'pointer',\r\n                      opacity: focusRating === null ? 0.4 : (focusRating >= rating ? 1 : 0.3),\r\n                      color: focusRating >= rating ? 'var(--accent-color)' : (isLight ? 'rgba(60,50,35,0.3)' : 'rgba(255,255,255,0.2)'),\r\n                      filter: focusRating >= rating ? 'drop-shadow(0 0 8px var(--accent-40))' : 'none',\r\n                    }}\r\n                  >\r\n                    Γÿà\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Next Leg Info (if from curriculum) */}\r\n          {summary.nextLeg && (\r\n            <div\r\n              style={{\r\n                padding: '14px 16px',\r\n                borderRadius: '12px',\r\n                background: isLight ? 'rgba(60,50,35,0.03)' : 'rgba(255,255,255,0.05)',\r\n                border: isLight ? '1px solid rgba(60,50,35,0.1)' : '1px solid var(--accent-20)',\r\n                marginBottom: '16px',\r\n                textAlign: 'center',\r\n              }}\r\n            >\r\n              <span style={{\r\n                fontFamily: 'var(--font-body)',\r\n                fontSize: '9px',\r\n                fontWeight: 600,\r\n                letterSpacing: 'var(--tracking-mythic)',\r\n                textTransform: 'uppercase',\r\n                color: 'var(--accent-color)',\r\n              }}>\r\n                {isFirstLeg ? 'Γ£ª What\\'s Up Next' : 'Γ£ª Next in Curriculum'}\r\n              </span>\r\n              <div style={{\r\n                fontFamily: 'var(--font-display)',\r\n                fontSize: '13px',\r\n                fontWeight: 600,\r\n                color: 'var(--text-primary)',\r\n                marginTop: '6px',\r\n              }}>\r\n                {summary.nextLeg.practiceType || summary.nextLeg.label}\r\n              </div>\r\n              {/* Show time for first leg completion */}\r\n              {isFirstLeg && summary.nextLeg.time && (\r\n                <div style={{\r\n                  fontFamily: 'var(--font-body)',\r\n                  fontSize: '11px',\r\n                  color: 'var(--text-muted)',\r\n                  marginTop: '4px',\r\n                }}>\r\n                  at {summary.nextLeg.time}\r\n                </div>\r\n              )}\r\n              {onStartNext && !isFirstLeg && (\r\n                <button\r\n                  onClick={() => onStartNext(summary.nextLeg.practiceType)}\r\n                  className=\"mt-3 px-6 py-2 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all hover:scale-105\"\r\n                  style={{\r\n                    background: 'linear-gradient(180deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)',\r\n                    color: '#050508',\r\n                    boxShadow: '0 4px 12px var(--accent-30)',\r\n                  }}\r\n                >\r\n                  Start Now\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Daily Summary for Last Leg */}\r\n          {isLastLeg && allLegsComplete && summary.dailyStats && (\r\n            <div\r\n              style={{\r\n                padding: '16px',\r\n                borderRadius: '16px',\r\n                background: isLight ? 'rgba(60,50,35,0.05)' : 'rgba(0,0,0,0.3)',\r\n                border: isLight ? '1px solid var(--light-border)' : '1px solid var(--accent-10)',\r\n                marginBottom: '20px',\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  fontFamily: 'var(--font-body)',\r\n                  fontSize: '9px',\r\n                  fontWeight: 600,\r\n                  letterSpacing: 'var(--tracking-mythic)',\r\n                  textTransform: 'uppercase',\r\n                  color: 'var(--accent-color)',\r\n                  marginBottom: '12px',\r\n                  textAlign: 'center',\r\n                }}\r\n              >\r\n                Γ£ª Today's Practice Complete\r\n              </div>\r\n\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px', marginBottom: '12px' }}>\r\n                <div style={{ textAlign: 'center' }}>\r\n                  <div style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontSize: '9px',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    textTransform: 'uppercase',\r\n                    color: 'var(--text-muted)',\r\n                  }}>\r\n                    Total Time\r\n                  </div>\r\n                  <div style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontSize: '16px',\r\n                    fontWeight: 600,\r\n                    color: 'var(--text-primary)',\r\n                    marginTop: '4px',\r\n                  }}>\r\n                    {summary.dailyStats.totalMinutes}m\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ textAlign: 'center' }}>\r\n                  <div style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontSize: '9px',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    textTransform: 'uppercase',\r\n                    color: 'var(--text-muted)',\r\n                  }}>\r\n                    Precision\r\n                  </div>\r\n                  <div style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontSize: '16px',\r\n                    fontWeight: 600,\r\n                    color: 'var(--accent-color)',\r\n                    marginTop: '4px',\r\n                  }}>\r\n                    {summary.dailyStats.precisionScore || 'N/A'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tomorrow's Practice Time */}\r\n              {summary.dailyStats.nextPracticeTime && (\r\n                <div style={{\r\n                  textAlign: 'center',\r\n                  paddingTop: '12px',\r\n                  borderTop: isLight ? '1px solid rgba(60,50,35,0.1)' : '1px solid var(--accent-10)',\r\n                }}>\r\n                  <div style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontSize: '9px',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 'var(--tracking-mythic)',\r\n                    textTransform: 'uppercase',\r\n                    color: 'var(--text-muted)',\r\n                    marginBottom: '4px',\r\n                  }}>\r\n                    Next Practice\r\n                  </div>\r\n                  <div style={{\r\n                    fontFamily: 'var(--font-display)',\r\n                    fontSize: '12px',\r\n                    fontWeight: 600,\r\n                    color: 'var(--text-primary)',\r\n                  }}>\r\n                    {summary.dailyStats.nextPracticeType}\r\n                  </div>\r\n                  <div style={{\r\n                    fontFamily: 'var(--font-body)',\r\n                    fontSize: '11px',\r\n                    color: 'var(--accent-color)',\r\n                    marginTop: '2px',\r\n                  }}>\r\n                    Tomorrow at {summary.dailyStats.nextPracticeTime}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* What's Next Section */}\r\n          {!summary.nextLeg && !allLegsComplete && onStartNext && (\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <div\r\n                style={{\r\n                  fontFamily: 'var(--font-body)',\r\n                  fontSize: '9px',\r\n                  fontWeight: 600,\r\n                  letterSpacing: 'var(--tracking-mythic)',\r\n                  textTransform: 'uppercase',\r\n                  color: 'var(--text-muted)',\r\n                  marginBottom: '10px',\r\n                }}\r\n              >\r\n                What's Next?\r\n              </div>\r\n              <div className=\"flex flex-wrap justify-center gap-2\">\r\n                {suggestions.map((practice) => (\r\n                  <button\r\n                    key={practice}\r\n                    onClick={() => onStartNext(practice)}\r\n                    className=\"px-4 py-2 rounded-full text-[10px] font-semibold transition-all hover:scale-105\"\r\n                    style={{\r\n                      background: isLight ? 'rgba(60,50,35,0.08)' : 'rgba(255,255,255,0.08)',\r\n                      color: isLight ? 'var(--light-text-primary)' : 'var(--text-primary)',\r\n                      border: isLight ? '1px solid rgba(60,50,35,0.15)' : '1px solid var(--accent-20)',\r\n                    }}\r\n                  >\r\n                    {practice}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Done Button */}\r\n          <button\r\n            onClick={onContinue}\r\n            className=\"px-8 py-3 rounded-full text-[11px] font-black uppercase tracking-wider transition-all hover:scale-105\"\r\n            style={{\r\n              background: summary.nextLeg || !onStartNext ? 'var(--accent-color)' : (isLight ? 'rgba(60,50,35,0.15)' : 'rgba(255,255,255,0.15)'),\r\n              color: summary.nextLeg || !onStartNext ? '#fff' : 'var(--text-secondary)',\r\n              boxShadow: summary.nextLeg || !onStartNext ? '0 8px 20px var(--accent-30)' : 'none',\r\n            }}\r\n          >\r\n            {allLegsComplete ? 'See You Tomorrow Γ£ª' : (summary.nextLeg ? 'Continue' : (onStartNext ? 'Done for Now' : 'Continue'))}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SessionSummaryModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\practice\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\CameraCapture.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[70,77],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'stream'. Either include it or remove the dependency array.","line":34,"column":8,"nodeType":"ArrayExpression","endLine":34,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [stream]","fix":{"range":[1202,1204],"text":"[stream]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useRitualStore } from '../../state/ritualStore';\r\n\r\nconst BASE = import.meta.env.BASE_URL || '/';\r\n\r\nexport function CameraCapture({ onCapture }) {\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const [stream, setStream] = useState(null);\r\n    const [capturedImage, setCapturedImage] = useState(null);\r\n    const [showStopNotif, setShowStopNotif] = useState(false);\r\n    const { setPhotoUrl } = useRitualStore();\r\n\r\n    useEffect(() => {\r\n        async function startCamera() {\r\n            try {\r\n                const s = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });\r\n                setStream(s);\r\n                if (videoRef.current) {\r\n                    videoRef.current.srcObject = s;\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Camera access denied:\", err);\r\n            }\r\n        }\r\n        startCamera();\r\n\r\n        return () => {\r\n            if (stream) {\r\n                stream.getTracks().forEach(track => track.stop());\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const takePhoto = () => {\r\n        if (!videoRef.current || !canvasRef.current || !stream) return;\r\n        \r\n        const video = videoRef.current;\r\n        const canvas = canvasRef.current;\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        \r\n        // Add a slight \"ethereal\" filter to the captured photo\r\n        ctx.globalAlpha = 0.2;\r\n        ctx.fillStyle = \"#D4B87A\"; // Gold overlay\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        ctx.globalAlpha = 1.0;\r\n\r\n        const dataUrl = canvas.toDataURL('image/jpeg');\r\n        \r\n        // STOP CAMERA IMMEDIATELY FOR PRIVACY\r\n        stream.getTracks().forEach(track => track.stop());\r\n        setStream(null);\r\n        setShowStopNotif(true);\r\n\r\n        setCapturedImage(dataUrl);\r\n        setPhotoUrl(dataUrl);\r\n        onCapture && onCapture(dataUrl);\r\n\r\n        // Hide notification after 3 seconds\r\n        setTimeout(() => setShowStopNotif(false), 3000);\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative w-full aspect-square max-w-sm rounded-[40px] overflow-hidden border border-white/10 bg-black shadow-2xl\">\r\n            {!capturedImage ? (\r\n                <>\r\n                    <video \r\n                        ref={videoRef} \r\n                        autoPlay \r\n                        playsInline \r\n                        muted \r\n                        className=\"w-full h-full object-cover grayscale opacity-60\"\r\n                    />\r\n                    <div className=\"absolute inset-0 z-10 pointer-events-none\">\r\n                        <div \r\n                            className=\"absolute inset-x-8 inset-y-8 border border-white/20 rounded-3xl\"\r\n                            style={{\r\n                                backgroundImage: `url(${BASE}assets/ritual/photo_hint_v1.png)`,\r\n                                backgroundSize: 'contain',\r\n                                backgroundPosition: 'center',\r\n                                backgroundRepeat: 'no-repeat',\r\n                                opacity: 0.3\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </>\r\n            ) : (\r\n                <div className=\"relative w-full h-full\">\r\n                    <img src={capturedImage} className=\"w-full h-full object-cover\" alt=\"Captured Witness\" />\r\n                    \r\n                    {/* Privacy Confirmation Overlay */}\r\n                    <AnimatePresence>\r\n                        {showStopNotif && (\r\n                            <motion.div \r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"absolute top-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-black/80 backdrop-blur-md rounded-full border border-green-500/30 flex items-center gap-2 z-50 shadow-lg\"\r\n                            >\r\n                                <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\" />\r\n                                <span className=\"text-[10px] font-bold text-white uppercase tracking-[2px]\">Camera Offline ΓÇó Secure</span>\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </div>\r\n            )}\r\n\r\n            <canvas ref={canvasRef} className=\"hidden\" />\r\n\r\n            <AnimatePresence>\r\n                {!capturedImage && (\r\n                    <motion.button\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.8 }}\r\n                        onClick={takePhoto}\r\n                        className=\"absolute bottom-8 left-1/2 -translate-x-1/2 w-16 h-16 rounded-full border-4 border-white flex items-center justify-center p-1 bg-white/20 backdrop-blur-md z-20 transition-transform active:scale-90\"\r\n                    >\r\n                        <div className=\"w-full h-full rounded-full bg-white shadow-inner\" />\r\n                    </motion.button>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\InstructionalOverlay.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[37,44],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useDisplayModeStore } from '../../state/displayModeStore';\r\n\r\nexport function InstructionalOverlay({ isOpen, imageUrl, caption, onDismiss }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <motion.div \r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    className=\"fixed inset-0 z-[1000] flex items-center justify-center p-6 backdrop-blur-sm\"\r\n                    style={{\r\n                        backgroundColor: isLight ? 'rgba(240,240,235,0.85)' : 'rgba(0,0,0,0.80)'\r\n                    }}\r\n                    onClick={onDismiss}\r\n                >\r\n                    <motion.div \r\n                        initial={{ scale: 0.9, opacity: 0 }}\r\n                        animate={{ scale: 1, opacity: 1 }}\r\n                        exit={{ scale: 0.9, opacity: 0 }}\r\n                        className=\"rounded-3xl overflow-hidden max-w-lg w-full shadow-2xl\"\r\n                        style={{\r\n                            backgroundColor: isLight ? '#FFFFFF' : '#1a1a1a',\r\n                            border: isLight ? '1px solid rgba(0,0,0,0.1)' : '1px solid rgba(255,255,255,0.1)'\r\n                        }}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                    >\r\n                        <div \r\n                            className=\"aspect-[4/3] w-full\"\r\n                            style={{\r\n                                backgroundImage: `url(${imageUrl})`,\r\n                                backgroundSize: 'cover',\r\n                                backgroundPosition: 'center',\r\n                            }}\r\n                        />\r\n                        <div className=\"p-8 text-center\">\r\n                            <h3 \r\n                                className=\"font-display text-xl mb-3 tracking-widest uppercase\"\r\n                                style={{\r\n                                    color: isLight ? '#A07855' : '#D4B87A'\r\n                                }}\r\n                            >\r\n                                Ritual Guidance\r\n                            </h3>\r\n                            <p \r\n                                className=\"text-sm leading-relaxed mb-6\"\r\n                                style={{\r\n                                    color: isLight ? 'rgba(0,0,0,0.7)' : 'rgba(255,255,255,0.7)'\r\n                                }}\r\n                            >\r\n                                {caption}\r\n                            </p>\r\n                            <button \r\n                                onClick={onDismiss}\r\n                                className=\"px-8 py-3 rounded-full transition-all text-sm font-bold tracking-widest uppercase\"\r\n                                style={{\r\n                                    backgroundColor: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)',\r\n                                    border: isLight ? '1px solid rgba(0,0,0,0.1)' : '1px solid rgba(255,255,255,0.1)',\r\n                                    color: isLight ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.9)'\r\n                                }}\r\n                                onMouseEnter={(e) => {\r\n                                    e.currentTarget.style.backgroundColor = isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.1)';\r\n                                }}\r\n                                onMouseLeave={(e) => {\r\n                                    e.currentTarget.style.backgroundColor = isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)';\r\n                                }}\r\n                            >\r\n                                Understood\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\MemorySelector.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[51,58],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useRitualStore } from '../../state/ritualStore';\r\n\r\nconst BASE = import.meta.env.BASE_URL || '/';\r\n\r\nconst MOCK_MEMORIES = [\r\n    \"A moment of pure gratitude in the morning sun.\",\r\n    \"The feeling of accomplishment after a long day.\",\r\n    \"A difficult conversation that led to growth.\",\r\n    \"The peaceful silence of a forest path.\",\r\n    \"A shared laugh with a dear friend.\"\r\n];\r\n\r\nexport function MemorySelector({ onSelect }) {\r\n    const { setSelectedMemory } = useRitualStore();\r\n    const [isSpinning, setIsSpinning] = useState(false);\r\n    const [result, setResult] = useState(null);\r\n\r\n    const handleSelect = () => {\r\n        setIsSpinning(true);\r\n        setResult(null);\r\n        \r\n        // Mock spinning animation duration\r\n        setTimeout(() => {\r\n            const randomMemory = MOCK_MEMORIES[Math.floor(Math.random() * MOCK_MEMORIES.length)];\r\n            setResult(randomMemory);\r\n            setSelectedMemory(randomMemory);\r\n            setIsSpinning(false);\r\n            onSelect && onSelect(randomMemory);\r\n        }, 3000);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center gap-8\">\r\n            <div className=\"relative w-32 h-32 flex items-center justify-center\">\r\n                <motion.div\r\n                    animate={isSpinning ? { rotate: 360 * 5 } : { rotate: 0 }}\r\n                    transition={isSpinning ? { duration: 3, ease: \"easeInOut\" } : { duration: 0.5 }}\r\n                    className=\"w-full h-full rounded-full\"\r\n                    style={{\r\n                        backgroundImage: `url(${BASE}assets/ritual/random_icon_v1.png)`,\r\n                        backgroundSize: 'contain',\r\n                        backgroundRepeat: 'no-repeat',\r\n                        filter: isSpinning ? 'drop-shadow(0 0 20px var(--accent-color)) saturate(2)' : 'none'\r\n                    }}\r\n                />\r\n                <AnimatePresence>\r\n                    {isSpinning && (\r\n                        <motion.div \r\n                            initial={{ opacity: 0, scale: 0.8 }}\r\n                            animate={{ opacity: 1, scale: 1.2 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"absolute -inset-4 border-2 border-gold/30 rounded-full animate-ping\"\r\n                        />\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            <AnimatePresence mode=\"wait\">\r\n                {result ? (\r\n                    <motion.div\r\n                        key=\"result\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className=\"p-6 bg-white/5 border border-white/10 rounded-2xl max-w-sm\"\r\n                    >\r\n                        <p className=\"text-gold text-xs uppercase tracking-widest mb-2 font-bold\">Selected Memory</p>\r\n                        <p className=\"text-white italic text-lg leading-relaxed\">\"{result}\"</p>\r\n                    </motion.div>\r\n                ) : (\r\n                    <motion.button\r\n                        key=\"button\"\r\n                        onClick={handleSelect}\r\n                        disabled={isSpinning}\r\n                        className={`px-8 py-3 rounded-full border border-white/20 hover:border-gold/50 transition-all ${isSpinning ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                    >\r\n                        <span className=\"text-xs font-bold tracking-widest uppercase text-white/70\">\r\n                            {isSpinning ? \"Selecting...\" : \"Reveal Memory\"}\r\n                        </span>\r\n                    </motion.button>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\PhotoReview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[28,67],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useRitualStore } from '../../state/ritualStore';\r\n\r\nexport function PhotoReview({ onProceed }) {\r\n    const { photoUrl, selectedMemory } = useRitualStore();\r\n\r\n    if (!photoUrl) return null;\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center gap-8\">\r\n            <div className=\"relative w-full max-w-sm aspect-square rounded-[40px] overflow-hidden border border-gold/20 shadow-[0_0_30px_rgba(212,184,122,0.15)]\">\r\n                <img src={photoUrl} className=\"w-full h-full object-cover\" alt=\"Witness Snapshot\" />\r\n                <div className=\"absolute inset-x-0 bottom-0 p-6 bg-gradient-to-t from-black to-transparent\">\r\n                    <p className=\"text-gold text-[10px] uppercase tracking-widest font-bold mb-1 opacity-80\">\r\n                        Witness Perspective\r\n                    </p>\r\n                    <p className=\"text-white text-xs italic opacity-90\">\r\n                        Captured during the Sacred Ritual\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {selectedMemory && (\r\n                <motion.div \r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className=\"p-6 bg-white/5 border border-white/10 rounded-2xl max-w-sm text-center\"\r\n                >\r\n                    <p className=\"text-gold text-[10px] uppercase tracking-widest mb-2 font-bold opacity-60\">Held Memory</p>\r\n                    <p className=\"text-white/80 italic text-sm italic\">\"{selectedMemory}\"</p>\r\n                </motion.div>\r\n            )}\r\n\r\n            <button\r\n                onClick={onProceed}\r\n                className=\"px-10 py-3 rounded-full bg-gold text-black font-bold tracking-widest uppercase hover:bg-gold/80 transition-all active:scale-95\"\r\n            >\r\n                Confirm & Seal\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\RitualAudioPrompt.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\RitualProgressBar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\RitualStepContainer.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[37,44],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'stepNumber' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"stepNumber"},"fix":{"range":[161,179],"text":""},"desc":"Remove unused variable 'stepNumber'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isOverlay' is assigned a value but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOverlay"},"fix":{"range":[179,203],"text":""},"desc":"Remove unused variable 'isOverlay'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport function RitualStepContainer({ \r\n    children, \r\n    backgroundUrl, \r\n    stepNumber,\r\n    isOverlay = false \r\n}) {\r\n    return (\r\n        <div className=\"relative w-full h-full min-h-[600px] flex flex-col items-center justify-center overflow-hidden bg-black text-white p-6\">\r\n            {/* Background Layer */}\r\n            <AnimatePresence mode=\"wait\">\r\n                <motion.div\r\n                    key={backgroundUrl}\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 0.6 }}\r\n                    exit={{ opacity: 0 }}\r\n                    transition={{ duration: 1.5, ease: \"easeInOut\" }}\r\n                    className=\"absolute inset-0 z-0\"\r\n                    style={{\r\n                        backgroundImage: `url(${backgroundUrl})`,\r\n                        backgroundSize: 'cover',\r\n                        backgroundPosition: 'center',\r\n                    }}\r\n                />\r\n            </AnimatePresence>\r\n\r\n            {/* Content Layer */}\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.5, duration: 0.8 }}\r\n                className=\"relative z-10 w-full max-w-2xl flex flex-col items-center gap-8\"\r\n            >\r\n                {children}\r\n            </motion.div>\r\n\r\n            {/* Atmospheric Overlays */}\r\n            <div className=\"absolute inset-x-0 bottom-0 h-32 bg-gradient-to-t from-black to-transparent pointer-events-none z-10\" />\r\n            <div className=\"absolute inset-x-0 top-0 h-24 bg-gradient-to-b from-black to-transparent pointer-events-none z-10\" />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\SummaryView.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[28,67],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useDisplayModeStore } from '../../state/displayModeStore';\r\n\r\nexport function SummaryView({ memory, photoUrl, onComplete }) {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center gap-8 max-w-md w-full mx-auto p-4\">\r\n            <motion.div \r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"text-center\"\r\n            >\r\n                <div \r\n                    className=\"inline-block px-4 py-1 rounded-full text-[10px] font-bold tracking-[0.2em] uppercase mb-4\"\r\n                    style={{\r\n                        backgroundColor: isLight ? 'rgba(160,120,85,0.1)' : 'rgba(212,184,122,0.1)',\r\n                        color: isLight ? '#A07855' : '#D4B87A',\r\n                        border: isLight ? '1px solid rgba(160,120,85,0.2)' : '1px solid rgba(212,184,122,0.2)'\r\n                    }}\r\n                >\r\n                    Ritual Complete\r\n                </div>\r\n                <h3 className=\"text-2xl font-display tracking-widest uppercase mb-2\"\r\n                    style={{ color: isLight ? '#4a4a4a' : 'white' }}\r\n                >\r\n                    Session Summary\r\n                </h3>\r\n            </motion.div>\r\n\r\n            <motion.div \r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                transition={{ delay: 0.2 }}\r\n                className=\"w-full rounded-2xl overflow-hidden border backdrop-blur-md\"\r\n                style={{\r\n                    backgroundColor: isLight ? 'rgba(255,255,255,0.5)' : 'rgba(255,255,255,0.03)',\r\n                    borderColor: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.1)'\r\n                }}\r\n            >\r\n                {/* Captured Photo */}\r\n                <div className=\"aspect-square w-full relative group\">\r\n                    {photoUrl ? (\r\n                        <img \r\n                            src={photoUrl} \r\n                            alt=\"Ritual Witness\" \r\n                            className=\"w-full h-full object-cover grayscale opacity-80\" \r\n                        />\r\n                    ) : (\r\n                        <div className=\"w-full h-full flex items-center justify-center bg-black/20\">\r\n                            <span className=\"text-4xl opacity-20\">≡ƒô╖</span>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\" />\r\n                    <div className=\"absolute bottom-4 left-4 right-4\">\r\n                        <p className=\"text-[10px] uppercase tracking-widest text-white/50 mb-1\">Ritual Witness</p>\r\n                        <p className=\"text-xs font-display text-white/90\">Captured Presence</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Focus Memory */}\r\n                <div className=\"p-6\">\r\n                    <p className=\"text-[10px] uppercase tracking-widest mb-3 opacity-40 font-bold\"\r\n                        style={{ color: isLight ? 'black' : 'white' }}\r\n                    >\r\n                        Focus Point\r\n                    </p>\r\n                    <p className=\"text-lg italic leading-relaxed\"\r\n                        style={{ color: isLight ? '#A07855' : '#D4B87A' }}\r\n                    >\r\n                        \"{memory || \"Stillness & Presence\"}\"\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Outcome Info */}\r\n                <div className=\"px-6 pb-6 pt-4 border-t\"\r\n                    style={{ borderColor: isLight ? 'rgba(0,0,0,0.05)' : 'rgba(255,255,255,0.05)' }}\r\n                >\r\n                    <div className=\"flex items-center gap-3 text-[10px] font-bold uppercase tracking-widest opacity-60\"\r\n                        style={{ color: isLight ? 'black' : 'white' }}\r\n                    >\r\n                        <span className=\"flex-shrink-0\">Γ£ô Logged to Progress</span>\r\n                        <div className=\"h-[1px] flex-grow bg-current opacity-20\" />\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3 text-[10px] font-bold uppercase tracking-widest opacity-60 mt-2\"\r\n                        style={{ color: isLight ? 'black' : 'white' }}\r\n                    >\r\n                        <span className=\"flex-shrink-0\">Γ£ô Sealed in Journal</span>\r\n                        <div className=\"h-[1px] flex-grow bg-current opacity-20\" />\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n\r\n            <motion.button\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                transition={{ delay: 0.6 }}\r\n                onClick={onComplete}\r\n                className=\"group relative px-12 py-4 rounded-full transition-all active:scale-95 overflow-hidden\"\r\n                style={{\r\n                    backgroundColor: isLight ? '#A07855' : '#D4B87A',\r\n                    color: isLight ? 'white' : 'black'\r\n                }}\r\n            >\r\n                <span className=\"relative z-10 text-xs font-black tracking-[0.3em] uppercase\">\r\n                    Return to Hub\r\n                </span>\r\n                <div className=\"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n            </motion.button>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\ThoughtObservation.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[70,77],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  32 |     const isLight = colorScheme === 'light';\n  33 |     const timerRef = useRef(null);\n> 34 |     const startTimeRef = useRef(Date.now());\n     |                                 ^^^^^^^^^^ Cannot call impure function\n  35 |     const selectedThoughtsRef = useRef([]);\n  36 |     const thoughtIndexRef = useRef(0);\n  37 |","line":34,"column":33,"nodeType":null,"endLine":34,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useDisplayModeStore } from '../../state/displayModeStore';\r\n\r\nconst POSITIVE_THOUGHTS = [\r\n    \"I am capable of growth\",\r\n    \"This moment is full of potential\",\r\n    \"I am doing my best\",\r\n    \"I can handle this challenge\",\r\n    \"I am learning and evolving\",\r\n    \"There is beauty in this present moment\",\r\n    \"I trust the process\",\r\n    \"I am enough as I am\"\r\n];\r\n\r\nconst NEGATIVE_THOUGHTS = [\r\n    \"I'm not good enough\",\r\n    \"This is too difficult\",\r\n    \"I always mess things up\",\r\n    \"Nothing ever works out\",\r\n    \"I'm falling behind\",\r\n    \"I should be better by now\",\r\n    \"Everyone else has it figured out\",\r\n    \"I'll never get this right\"\r\n];\r\n\r\nexport function ThoughtObservation({ photoUrl, onComplete }) {\r\n    const [currentThought, setCurrentThought] = useState(null);\r\n    const [thoughtType, setThoughtType] = useState(null);\r\n    const [observationTime, setObservationTime] = useState(0);\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n    const timerRef = useRef(null);\r\n    const startTimeRef = useRef(Date.now());\r\n    const selectedThoughtsRef = useRef([]);\r\n    const thoughtIndexRef = useRef(0);\r\n\r\n    // Select 3 random thoughts at initialization\r\n    useEffect(() => {\r\n        const allThoughts = [...POSITIVE_THOUGHTS, ...NEGATIVE_THOUGHTS];\r\n        const shuffled = [...allThoughts].sort(() => Math.random() - 0.5);\r\n        selectedThoughtsRef.current = shuffled.slice(0, 3);\r\n    }, []);\r\n\r\n    // Track observation duration\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setObservationTime(Math.floor((Date.now() - startTimeRef.current) / 1000));\r\n        }, 1000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Continuous thought cycle through selected 3 thoughts\r\n    useEffect(() => {\r\n        const showNextThought = () => {\r\n            if (selectedThoughtsRef.current.length === 0) return;\r\n\r\n            // Get the next thought in the cycle\r\n            const thought = selectedThoughtsRef.current[thoughtIndexRef.current];\r\n            thoughtIndexRef.current = (thoughtIndexRef.current + 1) % selectedThoughtsRef.current.length;\r\n\r\n            // Determine if it's positive or negative\r\n            const isPositive = POSITIVE_THOUGHTS.includes(thought);\r\n            \r\n            setThoughtType(isPositive ? 'positive' : 'negative');\r\n            setCurrentThought(thought);\r\n\r\n            // Wait 8-12 seconds before transitioning to next thought (10 +/- 2)\r\n            const nextInterval = 8000 + Math.random() * 4000;\r\n            timerRef.current = setTimeout(showNextThought, nextInterval);\r\n        };\r\n\r\n        // Start the cycle\r\n        showNextThought();\r\n\r\n        return () => {\r\n            if (timerRef.current) clearTimeout(timerRef.current);\r\n        };\r\n    }, []);\r\n\r\n    const handleProceed = () => {\r\n        if (timerRef.current) clearTimeout(timerRef.current);\r\n        setCurrentThought(null);\r\n        onComplete();\r\n    };\r\n\r\n    // Show proceed button after 30 seconds\r\n    const canProceed = observationTime >= 30;\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center gap-6 w-full max-w-md\">\r\n            {/* Thought Display - Above Image */}\r\n            <div className=\"w-full h-20 flex items-center justify-center relative\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {currentThought && (\r\n                        <motion.div\r\n                            key={currentThought}\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -10 }}\r\n                            transition={{ duration: 0.3 }}\r\n                            className=\"absolute inset-0 flex items-center justify-center px-4\"\r\n                        >\r\n                            <p \r\n                                className=\"text-center text-base font-medium italic px-4 py-2 rounded-xl border max-w-sm\"\r\n                                style={{\r\n                                    color: thoughtType === 'positive' \r\n                                        ? (isLight ? '#2E7D32' : '#66BB6A')\r\n                                        : (isLight ? '#C62828' : '#EF5350'),\r\n                                    backgroundColor: thoughtType === 'positive'\r\n                                        ? (isLight ? 'rgba(46,125,50,0.08)' : 'rgba(102,187,106,0.08)')\r\n                                        : (isLight ? 'rgba(198,40,40,0.08)' : 'rgba(239,83,80,0.08)'),\r\n                                    borderColor: thoughtType === 'positive'\r\n                                        ? (isLight ? 'rgba(46,125,50,0.25)' : 'rgba(102,187,106,0.25)')\r\n                                        : (isLight ? 'rgba(198,40,40,0.25)' : 'rgba(239,83,80,0.25)')\r\n                                }}\r\n                            >\r\n                                \"{currentThought}\"\r\n                            </p>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Photo Display */}\r\n            <div className=\"relative w-full aspect-square rounded-[40px] overflow-hidden border shadow-2xl\"\r\n                style={{\r\n                    borderColor: isLight ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.1)'\r\n                }}\r\n            >\r\n                <img \r\n                    src={photoUrl} \r\n                    alt=\"Self as Observer\" \r\n                    className=\"w-full h-full object-cover grayscale\"\r\n                />\r\n            </div>\r\n\r\n            {/* Instruction */}\r\n            <div className=\"text-center px-4\">\r\n                <p className=\"text-sm leading-relaxed opacity-60\"\r\n                    style={{ color: isLight ? 'black' : 'white' }}\r\n                >\r\n                    Notice the thoughts arising. You are <em>witnessing</em> them, not becoming them.\r\n                </p>\r\n                {canProceed && (\r\n                    <motion.p \r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        className=\"text-xs mt-3\"\r\n                        style={{ color: isLight ? '#A07855' : '#D4B87A' }}\r\n                    >\r\n                        {observationTime}s observed ΓÇó Ready to proceed\r\n                    </motion.p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Proceed Button */}\r\n            <AnimatePresence>\r\n                {canProceed && (\r\n                    <motion.button\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        onClick={handleProceed}\r\n                        className=\"group relative px-10 py-3 rounded-full border transition-all active:scale-95\"\r\n                        style={{\r\n                            borderColor: isLight ? 'rgba(0,0,0,0.2)' : 'rgba(255,255,255,0.2)',\r\n                            color: isLight ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.9)'\r\n                        }}\r\n                    >\r\n                        <span className=\"relative z-10 text-xs font-black tracking-[0.3em] uppercase\">\r\n                            Continue\r\n                        </span>\r\n                        <div className=\"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity rounded-full\"\r\n                            style={{ backgroundColor: isLight ? 'rgba(160,120,85,0.05)' : 'rgba(212,184,122,0.05)' }}\r\n                        />\r\n                    </motion.button>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Timer indicator */}\r\n            {!canProceed && (\r\n                <div className=\"text-[10px] uppercase font-bold tracking-widest opacity-30\"\r\n                    style={{ color: isLight ? 'black' : 'white' }}\r\n                >\r\n                    {observationTime}s\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ritual\\VisualMapDisplay.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[37,44],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'showOverlay' is assigned a value but never used.","line":14,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"showOverlay"},"fix":{"range":[449,470],"text":""},"desc":"Remove unused variable 'showOverlay'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst BASE = import.meta.env.BASE_URL || '/';\r\n\r\nconst PULSE_FRAMES = [\r\n    `${BASE}assets/ritual/glow_frame_1.png`,\r\n    `${BASE}assets/ritual/glow_frame_2.png`,\r\n    `${BASE}assets/ritual/glow_frame_3.png`,\r\n    `${BASE}assets/ritual/glow_frame_4.png`,\r\n    `${BASE}assets/ritual/glow_frame_5.png`,\r\n];\r\n\r\nexport function VisualMapDisplay({ isPulsing = false, showOverlay = false }) {\r\n    return (\r\n        <div className=\"relative w-80 h-80 flex items-center justify-center\">\r\n            {/* Base Map */}\r\n            <motion.div\r\n                initial={{ scale: 0.9, opacity: 0 }}\r\n                animate={{ scale: 1, opacity: 1 }}\r\n                transition={{ duration: 2 }}\r\n                className=\"absolute inset-0 z-10\"\r\n                style={{\r\n                    backgroundImage: `url(${BASE}assets/ritual/visual_map_v1.png)`,\r\n                    backgroundSize: 'contain',\r\n                    backgroundRepeat: 'no-repeat',\r\n                    backgroundPosition: 'center',\r\n                }}\r\n            />\r\n\r\n            {/* Pulse Layer */}\r\n            <AnimatePresence>\r\n                {isPulsing && (\r\n                    <motion.div\r\n                        className=\"absolute inset-0 z-20\"\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ \r\n                            opacity: [0, 0.8, 0],\r\n                        }}\r\n                        transition={{ \r\n                            duration: 4, \r\n                            repeat: Infinity, \r\n                            ease: \"easeInOut\" \r\n                        }}\r\n                    >\r\n                        {/* We could use CSS animation with frames here, or just pulse the scale/opacity of a glow frame */}\r\n                        <div \r\n                            className=\"w-full h-full\"\r\n                            style={{\r\n                                backgroundImage: `url(${PULSE_FRAMES[4]})`,\r\n                                backgroundSize: 'contain',\r\n                                backgroundRepeat: 'no-repeat',\r\n                                backgroundPosition: 'center',\r\n                                filter: 'drop-shadow(0 0 30px var(--accent-color))'\r\n                            }}\r\n                        />\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Scanned/Focus Ring */}\r\n            <motion.div \r\n                className=\"absolute inset-0 z-30 border border-white/5 rounded-full\"\r\n                animate={{ rotate: 360 }}\r\n                transition={{ duration: 20, repeat: Infinity, ease: \"linear\" }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ui\\PeripheralHalo.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\ui\\PillButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\DynamicClouds.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  15 |             return () => clearTimeout(timer);\n  16 |         } else {\n> 17 |             setCloudOpacity(0);\n     |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  18 |         }\n  19 |     }, [isVisible, opacity]);\n  20 |","line":17,"column":13,"nodeType":null,"endLine":17,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/DynamicClouds.jsx\r\n// Soft cloud layer that appears after first thought - earns complexity\r\n\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nexport function DynamicClouds({ isVisible, opacity = 0.08 }) {\r\n    const [cloudOpacity, setCloudOpacity] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (isVisible) {\r\n            // Fade in over 3 seconds\r\n            const timer = setTimeout(() => {\r\n                setCloudOpacity(opacity);\r\n            }, 100);\r\n            return () => clearTimeout(timer);\r\n        } else {\r\n            setCloudOpacity(0);\r\n        }\r\n    }, [isVisible, opacity]);\r\n\r\n    return (\r\n        <div\r\n            className=\"absolute inset-0 pointer-events-none\"\r\n            style={{\r\n                opacity: cloudOpacity,\r\n                transition: 'opacity 3s ease-out',\r\n            }}\r\n        >\r\n            {/* Soft cloud wisps - ultra-slow vertical drift */}\r\n            <div\r\n                className=\"absolute inset-0\"\r\n                style={{\r\n                    background: `\r\n            radial-gradient(ellipse 40% 20% at 20% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 50%),\r\n            radial-gradient(ellipse 35% 18% at 70% 45%, rgba(255, 255, 255, 0.25) 0%, transparent 50%),\r\n            radial-gradient(ellipse 30% 15% at 45% 60%, rgba(255, 255, 255, 0.2) 0%, transparent 50%)\r\n          `,\r\n                    animation: 'cloudDrift 120s ease-in-out infinite',\r\n                }}\r\n            />\r\n\r\n            <style>{`\r\n        @keyframes cloudDrift {\r\n          0%, 100% { transform: translateY(0); }\r\n          50% { transform: translateY(-20px); }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DynamicClouds;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\MiniAvatar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\RadialDial.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isDragging' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":23,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"isDragging"},"fix":{"range":[603,613],"text":""},"desc":"Remove unused variable 'isDragging'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/RadialDial.jsx\r\n// Category selection dial for thought classification\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { THOUGHT_CATEGORIES } from '../../data/vipassanaThemes';\r\n\r\nconst DIAL_SEGMENTS = [\r\n    { id: 'future', angle: -45 },\r\n    { id: 'past', angle: 45 },\r\n    { id: 'evaluating', angle: 135 },\r\n    { id: 'body', angle: -135 },\r\n];\r\n\r\nexport function RadialDial({\r\n    x,\r\n    y,\r\n    isVisible,\r\n    onSelect,\r\n    onDismiss,\r\n    autoDismissMs = 1200,\r\n}) {\r\n    const [hoveredSegment, setHoveredSegment] = useState(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const dialRef = useRef(null);\r\n    const dismissTimer = useRef(null);\r\n\r\n    // Auto-dismiss after timeout\r\n    useEffect(() => {\r\n        if (isVisible) {\r\n            dismissTimer.current = setTimeout(() => {\r\n                onDismiss?.();\r\n            }, autoDismissMs);\r\n\r\n            return () => {\r\n                if (dismissTimer.current) {\r\n                    clearTimeout(dismissTimer.current);\r\n                }\r\n            };\r\n        }\r\n    }, [isVisible, autoDismissMs, onDismiss]);\r\n\r\n    // Handle pointer movement for slide-to-select\r\n    const handlePointerMove = (e) => {\r\n        if (!dialRef.current) return;\r\n\r\n        const rect = dialRef.current.getBoundingClientRect();\r\n        const centerX = rect.left + rect.width / 2;\r\n        const centerY = rect.top + rect.height / 2;\r\n\r\n        const dx = e.clientX - centerX;\r\n        const dy = e.clientY - centerY;\r\n        const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n        // Check if within dial area\r\n        if (distance < 30) {\r\n            setHoveredSegment(null);\r\n            return;\r\n        }\r\n\r\n        // Calculate angle and find segment\r\n        const angle = Math.atan2(dy, dx) * (180 / Math.PI);\r\n\r\n        for (const segment of DIAL_SEGMENTS) {\r\n            const diff = Math.abs(angle - segment.angle);\r\n            if (diff < 45 || diff > 315) {\r\n                setHoveredSegment(segment.id);\r\n                return;\r\n            }\r\n        }\r\n        setHoveredSegment(null);\r\n    };\r\n\r\n    const handlePointerUp = () => {\r\n        if (hoveredSegment) {\r\n            onSelect?.(hoveredSegment);\r\n        } else {\r\n            onDismiss?.();\r\n        }\r\n        setIsDragging(false);\r\n    };\r\n\r\n    const handleSegmentClick = (categoryId) => {\r\n        onSelect?.(categoryId);\r\n    };\r\n\r\n    if (!isVisible) return null;\r\n\r\n    return (\r\n        <div\r\n            ref={dialRef}\r\n            className=\"fixed pointer-events-auto\"\r\n            style={{\r\n                left: x,\r\n                top: y,\r\n                transform: 'translate(-50%, -50%)',\r\n                zIndex: 100,\r\n            }}\r\n            onPointerMove={handlePointerMove}\r\n            onPointerUp={handlePointerUp}\r\n        >\r\n            {/* Background blur - larger and stronger */}\r\n            <div\r\n                className=\"absolute inset-0 rounded-full\"\r\n                style={{\r\n                    width: '150px',\r\n                    height: '150px',\r\n                    left: '-75px',\r\n                    top: '-75px',\r\n                    background: 'radial-gradient(circle, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.4) 70%, transparent 100%)',\r\n                    backdropFilter: 'blur(12px)',\r\n                    animation: 'dialFadeIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1)',\r\n                }}\r\n            />\r\n\r\n            {/* Category segments with staggered animation */}\r\n            {DIAL_SEGMENTS.map((segment, index) => {\r\n                const category = THOUGHT_CATEGORIES[segment.id];\r\n                const isHovered = hoveredSegment === segment.id;\r\n                const rad = (segment.angle * Math.PI) / 180;\r\n                const segmentX = Math.cos(rad) * 45;\r\n                const segmentY = Math.sin(rad) * 45;\r\n\r\n                return (\r\n                    <button\r\n                        key={segment.id}\r\n                        className=\"absolute flex flex-col items-center justify-center rounded-full transition-all\"\r\n                        style={{\r\n                            left: segmentX,\r\n                            top: segmentY,\r\n                            transform: `translate(-50%, -50%) scale(${isHovered ? 1.1 : 1})`,\r\n                            width: '42px',\r\n                            height: '42px',\r\n                            background: isHovered\r\n                                ? `linear-gradient(135deg, ${category.color}, rgba(0,0,0,0.3))`\r\n                                : 'rgba(255, 255, 255, 0.1)',\r\n                            border: `2px solid ${isHovered ? category.tint : 'rgba(255, 255, 255, 0.2)'}`,\r\n                            opacity: isHovered ? 1 : 0.85,\r\n                            boxShadow: isHovered ? `0 0 20px ${category.tint}` : 'none',\r\n                            animation: `segmentEntry 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.05}s backwards`,\r\n                        }}\r\n                        onClick={() => handleSegmentClick(segment.id)}\r\n                    >\r\n                        <span\r\n                            className=\"text-[11px] font-medium uppercase tracking-wider\"\r\n                            style={{\r\n                                color: isHovered ? '#fff' : 'rgba(255, 255, 255, 0.75)',\r\n                                textShadow: isHovered ? '0 2px 4px rgba(0,0,0,0.5)' : 'none',\r\n                            }}\r\n                        >\r\n                            {category.label}\r\n                        </span>\r\n                    </button>\r\n                );\r\n            })}\r\n\r\n            {/* Center indicator */}\r\n            <div\r\n                className=\"absolute rounded-full pointer-events-none\"\r\n                style={{\r\n                    width: '20px',\r\n                    height: '20px',\r\n                    left: '-10px',\r\n                    top: '-10px',\r\n                    background: 'rgba(255, 255, 255, 0.1)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                }}\r\n            />\r\n\r\n            <style>{`\r\n        @keyframes dialFadeIn {\r\n          from { opacity: 0; transform: scale(0.7); }\r\n          to { opacity: 1; transform: scale(1); }\r\n        }\r\n        @keyframes segmentEntry {\r\n          from { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }\r\n          to { opacity: 1; transform: translate(-50%, -50%) scale(1); }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RadialDial;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\ScrollingFog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\SessionSummary.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":21,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"_"},"fix":{"range":[629,630],"text":""},"desc":"Remove unused variable '_'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/SessionSummary.jsx\r\n// End-of-session passive reporting - no performance hierarchy\r\n\r\nimport React from 'react';\r\nimport { THOUGHT_CATEGORIES } from '../../data/vipassanaThemes';\r\nimport { PillButton } from '../ui/PillButton';\r\n\r\nexport function SessionSummary({\r\n    isVisible,\r\n    totalNotices,\r\n    categoryCounts = {},\r\n    onContinue,\r\n    onClose,\r\n}) {\r\n    const [showBreakdown, setShowBreakdown] = React.useState(false);\r\n\r\n    if (!isVisible) return null;\r\n\r\n    // Filter to only show categories that were used\r\n    const usedCategories = Object.entries(categoryCounts)\r\n        .filter(([_, count]) => count > 0)\r\n        .sort((a, b) => b[1] - a[1]);\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 flex items-center justify-center z-50\"\r\n            style={{\r\n                background: 'rgba(0, 0, 0, 0.7)',\r\n                backdropFilter: 'blur(8px)',\r\n                animation: 'summaryFadeIn 0.5s ease-out',\r\n            }}\r\n        >\r\n            <div\r\n                className=\"relative px-12 py-12 rounded-3xl text-center max-w-md\"\r\n                style={{\r\n                    background: 'rgba(20, 15, 25, 0.9)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    boxShadow: '0 20px 60px rgba(0, 0, 0, 0.5)',\r\n                }}\r\n            >\r\n                {/* Title - passive language */}\r\n                <h2\r\n                    className=\"text-lg uppercase tracking-[0.2em] mb-10\"\r\n                    style={{\r\n                        fontFamily: \"var(--font-display)\",\r\n                        fontWeight: 700,\r\n                        letterSpacing: 'var(--tracking-mythic)',\r\n                        color: 'rgba(255, 255, 255, 0.6)',\r\n                    }}\r\n                >\r\n                    Session Complete\r\n                </h2>\r\n\r\n                {/* Main stat - passive phrasing */}\r\n                <div className=\"mb-10\">\r\n                    <div\r\n                        className=\"text-sm mb-3\"\r\n                        style={{ color: 'rgba(255, 255, 255, 0.5)' }}\r\n                    >\r\n                        Thinking was noticed\r\n                    </div>\r\n                    <div\r\n                        className=\"text-3xl\"\r\n                        style={{\r\n                            fontFamily: \"var(--font-display)\",\r\n                            fontWeight: 700,\r\n                            color: 'rgba(255, 255, 255, 0.8)',\r\n                        }}\r\n                    >\r\n                        {totalNotices}\r\n                        <span className=\"text-sm ml-2\" style={{ color: 'rgba(255, 255, 255, 0.5)' }}>\r\n                            {totalNotices === 1 ? 'time' : 'times'}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Dominant thought pattern insight */}\r\n                {usedCategories.length > 0 && (() => {\r\n                    const [dominantCategory] = usedCategories[0]; // Already sorted by count\r\n                    const category = THOUGHT_CATEGORIES[dominantCategory];\r\n                    const percentage = Math.round((categoryCounts[dominantCategory] / totalNotices) * 100);\r\n\r\n                    return percentage > 30 ? (\r\n                        <div className=\"mb-10\">\r\n                            <div\r\n                                className=\"text-xs uppercase tracking-wider mb-2\"\r\n                                style={{ color: 'rgba(255, 255, 255, 0.4)' }}\r\n                            >\r\n                                Pattern observed\r\n                            </div>\r\n                            <div\r\n                                className=\"text-sm px-4 py-2 rounded-full inline-block\"\r\n                                style={{\r\n                                    background: `${category.tint}15`,\r\n                                    border: `1px solid ${category.tint}40`,\r\n                                    color: 'rgba(255, 255, 255, 0.7)',\r\n                                }}\r\n                            >\r\n                                Most thoughts were {category.label.toLowerCase()}-focused\r\n                            </div>\r\n                        </div>\r\n                    ) : null;\r\n                })()}\r\n\r\n                {/* Category breakdown - hidden by default */}\r\n                {usedCategories.length > 0 && (\r\n                    <div className=\"mb-8\">\r\n                        <button\r\n                            onClick={() => setShowBreakdown(!showBreakdown)}\r\n                            className=\"text-xs uppercase tracking-wider transition-all\"\r\n                            style={{\r\n                                color: 'rgba(255, 255, 255, 0.4)',\r\n                            }}\r\n                        >\r\n                            {showBreakdown ? 'Γû╛ Hide breakdown' : 'Γû╕ Show breakdown'}\r\n                        </button>\r\n\r\n                        {showBreakdown && (\r\n                            <div\r\n                                className=\"mt-4 space-y-2\"\r\n                                style={{ animation: 'breakdownSlide 0.3s ease-out' }}\r\n                            >\r\n                                {usedCategories.map(([categoryId, count]) => {\r\n                                    const category = THOUGHT_CATEGORIES[categoryId];\r\n                                    if (!category) return null;\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={categoryId}\r\n                                            className=\"flex items-center justify-between text-sm\"\r\n                                        >\r\n                                            <span\r\n                                                className=\"flex items-center gap-2\"\r\n                                                style={{ color: 'rgba(255, 255, 255, 0.5)' }}\r\n                                            >\r\n                                                <span\r\n                                                    className=\"w-2 h-2 rounded-full\"\r\n                                                    style={{ background: category.tint }}\r\n                                                />\r\n                                                {category.label}\r\n                                            </span>\r\n                                            <span style={{ color: 'rgba(255, 255, 255, 0.6)' }}>\r\n                                                {count}\r\n                                            </span>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Continue button */}\r\n                <PillButton\r\n                    onClick={onContinue || onClose}\r\n                    variant=\"secondary\"\r\n                    size=\"md\"\r\n                >\r\n                    Continue\r\n                </PillButton>\r\n            </div>\r\n\r\n            <style>{`\r\n        @keyframes summaryFadeIn {\r\n          from { opacity: 0; }\r\n          to { opacity: 1; }\r\n        }\r\n        @keyframes breakdownSlide {\r\n          from { opacity: 0; transform: translateY(-8px); }\r\n          to { opacity: 1; transform: translateY(0); }\r\n        }\r\n      `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SessionSummary;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\StaticTimer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\ThoughtElement.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'driftDirection' is assigned a value but never used.","line":17,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"driftDirection"},"fix":{"range":[509,547],"text":""},"desc":"Remove unused variable 'driftDirection'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'baseDuration', 'bobFrequency', 'onComplete', 'phase', 'spawnTime', 'x', and 'y'. Either include them or remove the dependency array. If 'onComplete' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":136,"column":8,"nodeType":"ArrayExpression","endLine":136,"endColumn":90,"suggestions":[{"desc":"Update the dependencies array to be: [id, vx, vy, bobAmplitude, flickerVariance, rotationSpeed, isSticky, fadeModifier, spawnTime, baseDuration, x, y, bobFrequency, phase, onComplete]","fix":{"range":[4683,4765],"text":"[id, vx, vy, bobAmplitude, flickerVariance, rotationSpeed, isSticky, fadeModifier, spawnTime, baseDuration, x, y, bobFrequency, phase, onComplete]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":147,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"e"},"fix":{"range":[5086,5087],"text":""},"desc":"Remove unused variable 'e'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/ThoughtElement.jsx\r\n// Individual thought event with dissolution animation\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { THOUGHT_CATEGORIES, PRACTICE_INVARIANT } from '../../data/vipassanaThemes';\r\nimport { STAMP_FILES } from '../../utils/stamps';\r\n\r\nexport function ThoughtElement({\r\n    id,\r\n    x,\r\n    y,\r\n    category = 'neutral',\r\n    spawnTime,\r\n    baseDuration = PRACTICE_INVARIANT.thoughtLifetime,\r\n    fadeModifier = 1.0,\r\n    isSticky = false,\r\n    driftDirection = { x: 0, y: 0 }, // Not used directly anymore, using vx/vy from thought object\r\n    vx = 0,\r\n    vy = 0,\r\n    phase = 0,\r\n    bobAmplitude = 0,\r\n    bobFrequency = 0,\r\n    flickerVariance = 0,\r\n    rotationSpeed = 0,\r\n    flipX = false,\r\n    variant = 0,\r\n    elementType = 'cloud',\r\n    onComplete,\r\n    onTap,\r\n    onLongPress,\r\n}) {\r\n    const [renderState, setRenderState] = useState({\r\n        opacity: 0,\r\n        scale: 0.95,\r\n        x: x,\r\n        y: y,\r\n        rotation: 0,\r\n        filter: 'none'\r\n    });\r\n\r\n    const elementRef = useRef(null);\r\n    const longPressTimer = useRef(null);\r\n    const animationRef = useRef(null);\r\n\r\n    const categoryData = THOUGHT_CATEGORIES[category] || THOUGHT_CATEGORIES.neutral;\r\n\r\n    // Naming map for folders\r\n    const pluralize = { cloud: 'clouds', bird: 'birds', leaf: 'leaves', lantern: 'lanterns' };\r\n    const folder = pluralize[elementType] || (elementType + 's');\r\n    const fileNumbers = STAMP_FILES[folder] || [];\r\n    const fileName = fileNumbers[variant] || fileNumbers[0];\r\n    const assetPath = `${import.meta.env.BASE_URL}vipassana/stamps/${folder}/${fileName}.gif`;\r\n\r\n    useEffect(() => {\r\n        const animate = () => {\r\n            const now = Date.now();\r\n            const elapsed = now - spawnTime;\r\n            const duration = baseDuration * fadeModifier * 1000;\r\n            const progress = Math.min(elapsed / duration, 1);\r\n            const ageSec = elapsed / 1000;\r\n\r\n            // Phase A/B/C logic from VipassanaCanvas\r\n            let opacity = 1;\r\n            let scale = 1;\r\n\r\n            if (ageSec < 2.5) {\r\n                opacity = Math.min(1, ageSec / 0.5);\r\n                scale = 0.95 + (opacity * 0.05);\r\n            } else if (ageSec < 8) {\r\n                const releaseProgress = (ageSec - 2.5) / 5.5;\r\n                opacity = 1 - (releaseProgress * 0.75);\r\n                scale = 1;\r\n            } else {\r\n                const ghostProgress = Math.min(1, (ageSec - 8) / 5);\r\n                opacity = 0.25 - (ghostProgress * 0.10);\r\n                opacity = Math.max(0.15, opacity);\r\n                scale = 1 + (ghostProgress * 0.1);\r\n            }\r\n\r\n            if (isSticky) {\r\n                opacity = 1;\r\n                scale = 1;\r\n            }\r\n\r\n            // Motion logic\r\n            const driftX = ageSec * vx * 15;\r\n            const driftY = ageSec * vy * 15;\r\n\r\n            let motionX = 0, motionY = 0;\r\n            let opacityModifier = 1;\r\n\r\n            if (bobAmplitude) {\r\n                motionY = Math.sin(now / 1000 * bobFrequency + phase) * bobAmplitude * 20;\r\n                opacityModifier = 0.9 + Math.sin(now / 3000 + phase) * 0.1;\r\n            }\r\n\r\n            if (flickerVariance) {\r\n                motionX = Math.sin(now / 200 + phase) * flickerVariance * 5;\r\n                motionY += Math.sin(now / 400 + phase * 1.5) * flickerVariance * 2;\r\n                opacityModifier = 0.7 + Math.sin(now / 800 + phase) * 0.3;\r\n            }\r\n\r\n            let rotation = 0;\r\n            if (rotationSpeed) {\r\n                rotation = (ageSec * rotationSpeed + phase) * (180 / Math.PI); // DOM uses degrees for CSS transform\r\n            }\r\n\r\n            const currentX = x + driftX + motionX;\r\n            const currentY = y + driftY + motionY;\r\n\r\n            // Dissolution filter\r\n            let blur = 0;\r\n            if (progress > PRACTICE_INVARIANT.dissolutionStart) {\r\n                const dissolveProgress = (progress - 0.75) / 0.25;\r\n                blur = dissolveProgress * 4;\r\n            }\r\n\r\n            setRenderState({\r\n                opacity: opacity * opacityModifier,\r\n                scale,\r\n                x: currentX,\r\n                y: currentY,\r\n                rotation,\r\n                filter: blur > 0 ? `blur(${blur}px)` : 'none'\r\n            });\r\n\r\n            if (progress < 1) {\r\n                animationRef.current = requestAnimationFrame(animate);\r\n            } else {\r\n                onComplete?.(id);\r\n            }\r\n        };\r\n\r\n        animationRef.current = requestAnimationFrame(animate);\r\n        return () => cancelAnimationFrame(animationRef.current);\r\n    }, [id, vx, vy, bobAmplitude, flickerVariance, rotationSpeed, isSticky, fadeModifier]);\r\n\r\n    // Gesture handlers\r\n    const handlePointerDown = (e) => {\r\n        e.stopPropagation();\r\n        longPressTimer.current = setTimeout(() => {\r\n            onLongPress?.(id);\r\n            longPressTimer.current = null;\r\n        }, PRACTICE_INVARIANT.longPressThreshold);\r\n    };\r\n\r\n    const handlePointerUp = (e) => {\r\n        if (longPressTimer.current) {\r\n            clearTimeout(longPressTimer.current);\r\n            longPressTimer.current = null;\r\n            onTap?.(id);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={elementRef}\r\n            className=\"absolute pointer-events-auto cursor-pointer select-none\"\r\n            style={{\r\n                left: renderState.x,\r\n                top: renderState.y,\r\n                transform: `translate(-50%, -50%) scale(${renderState.scale}) rotate(${renderState.rotation}deg) ${flipX ? 'scaleX(-1)' : ''}`,\r\n                opacity: renderState.opacity,\r\n                filter: renderState.filter,\r\n                transition: 'filter 0.5s ease-out',\r\n                zIndex: isSticky ? 20 : 10,\r\n            }}\r\n            onPointerDown={handlePointerDown}\r\n            onPointerUp={handlePointerUp}\r\n        >\r\n            <div className=\"relative group\">\r\n                {/* GIF Image */}\r\n                <img\r\n                    src={assetPath}\r\n                    alt=\"\"\r\n                    style={{\r\n                        width: '72px',\r\n                        height: '72px',\r\n                        display: 'block',\r\n                        filter: category !== 'neutral'\r\n                            ? `drop-shadow(0 0 12px ${categoryData.color})`\r\n                            : 'none',\r\n                        // Special cloud stretching\r\n                        transform: elementType === 'cloud' ? 'scaleX(1.5)' : 'none'\r\n                    }}\r\n                    draggable={false}\r\n                />\r\n\r\n                {/* Sticky Ring */}\r\n                {isSticky && (\r\n                    <div className=\"absolute inset-0 -m-2 rounded-full border-2 border-amber-300/40 animate-pulse\" />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ThoughtElement;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\ThoughtLabeling.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'stickyThoughtId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":51,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"stickyThoughtId"},"fix":{"range":[1714,1729],"text":""},"desc":"Remove unused variable 'stickyThoughtId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":97,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":97,"endColumn":19},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":97,"column":21,"nodeType":"BlockStatement","messageId":"unexpected","endLine":97,"endColumn":24,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3532,3533],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/ThoughtLabeling.jsx\r\n// Core gesture interpreter for thought labeling - Hybrid DOM/Canvas version\r\n\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { PRACTICE_INVARIANT, VIPASSANA_AUDIO } from '../../data/vipassanaThemes';\r\nimport { VipassanaCanvas } from './VipassanaCanvas';\r\nimport { RadialDial } from './RadialDial';\r\nimport { STAMP_CONFIG } from '../../utils/stamps';\r\nimport { ThoughtElement } from './ThoughtElement';\r\n\r\nlet thoughtIdCounter = 0;\r\n\r\n// Helper: random value in range [min, max]\r\nconst randomInRange = (min, max) => min + Math.random() * (max - min);\r\n\r\n// Theme-specific motion behaviors (AA-Level)\r\nconst THEME_BEHAVIORS = {\r\n    cloud: {\r\n        drift: { vx: [0.1, 0.5], vy: [-0.2, 0.15] },\r\n        bob: { amplitude: [0.2, 0.5], frequency: [0.08, 0.15] },\r\n        lifecycle: 'dissolve',\r\n    },\r\n    bird: {\r\n        drift: { vx: [0.2, 0.8], vy: [-0.15, 0.1] },\r\n        flap: { rate: [0.2, 0.5], poses: 3 },\r\n        tailWag: { angle: 4 },\r\n        lifecycle: 'flyAway',\r\n    },\r\n    leaf: {\r\n        drift: { vx: [-0.3, 0.4], vy: [0.2, 0.6] },\r\n        rotation: { speed: [0.03, 0.12] },\r\n        lifecycle: 'settle',\r\n    },\r\n    lantern: {\r\n        drift: { vx: [-0.1, 0.1], vy: [-0.3, -0.1] },\r\n        flicker: { rate: 0.8, variance: [0.1, 0.25] },\r\n        lifecycle: 'fadeUp',\r\n    },\r\n};\r\n\r\nexport function ThoughtLabeling({\r\n    theme,\r\n    onThoughtSpawn,\r\n    onThoughtComplete,\r\n    onThoughtCountChange,\r\n    audioEnabled = true,\r\n    atmosphericEvent = null,\r\n}) {\r\n    const [thoughts, setThoughts] = useState([]);\r\n    const [dialState, setDialState] = useState({ visible: false, x: 0, y: 0 });\r\n    const [stickyThoughtId, setStickyThoughtId] = useState(null);\r\n    const [ripples, setRipples] = useState([]);\r\n\r\n    const lastSpawnTimeRef = useRef(0);\r\n    const lastLifetimeCategoryRef = useRef(null);\r\n    const longPressTimer = useRef(null);\r\n    const tapStartTime = useRef(null);\r\n    const tapPosition = useRef({ x: 0, y: 0 });\r\n    const audioRefs = useRef({});\r\n\r\n    useEffect(() => {\r\n        onThoughtCountChange?.(thoughts.length);\r\n    }, [thoughts.length, onThoughtCountChange]);\r\n\r\n    useEffect(() => {\r\n        const checkExpired = () => {\r\n            const now = Date.now();\r\n            setThoughts(prev => {\r\n                const remaining = prev.filter(t => {\r\n                    const elapsed = now - t.spawnTime;\r\n                    const duration = t.baseDuration * t.fadeModifier * 1000;\r\n                    const isExpired = elapsed >= duration;\r\n                    if (isExpired) {\r\n                        onThoughtComplete?.(t.id);\r\n                    }\r\n                    return !isExpired;\r\n                });\r\n                return remaining.length !== prev.length ? remaining : prev;\r\n            });\r\n        };\r\n        const interval = setInterval(checkExpired, 500);\r\n        return () => clearInterval(interval);\r\n    }, [onThoughtComplete]);\r\n\r\n    const playAudio = useCallback((cueKey) => {\r\n        if (!audioEnabled) return;\r\n        const cue = VIPASSANA_AUDIO[cueKey];\r\n        if (!cue) return;\r\n        try {\r\n            if (!audioRefs.current[cueKey]) {\r\n                audioRefs.current[cueKey] = new Audio(`${import.meta.env.BASE_URL}${cue.file}`);\r\n            }\r\n            const audio = audioRefs.current[cueKey];\r\n            audio.volume = cue.volume;\r\n            audio.currentTime = 0;\r\n            audio.play().catch(() => { });\r\n        } catch (e) { }\r\n    }, [audioEnabled]);\r\n\r\n    const spawnThought = useCallback((x, y, category = 'neutral') => {\r\n        const now = Date.now();\r\n        const timeSinceLastSpawn = now - lastSpawnTimeRef.current;\r\n        const baseRefractoryMs = 2000;\r\n        const heavyRefractoryMs = 4000;\r\n        const requiredRefractory = lastLifetimeCategoryRef.current === 'heavy' ? heavyRefractoryMs : baseRefractoryMs;\r\n\r\n        if (timeSinceLastSpawn < requiredRefractory) {\r\n            const refractoryProgress = timeSinceLastSpawn / requiredRefractory;\r\n            const spawnChance = refractoryProgress * 0.7;\r\n            if (Math.random() > spawnChance) return;\r\n        }\r\n\r\n        const elementType = theme?.thoughtElement || 'cloud';\r\n        const behavior = THEME_BEHAVIORS[elementType] || THEME_BEHAVIORS.cloud;\r\n        const stampKey = elementType + 's';\r\n        const variantCount = STAMP_CONFIG[stampKey]?.count || 6;\r\n        const variant = Math.floor(Math.random() * variantCount);\r\n\r\n        const vx = randomInRange(behavior.drift.vx[0], behavior.drift.vx[1]);\r\n        const vy = randomInRange(behavior.drift.vy[0], behavior.drift.vy[1]);\r\n        const phase = Math.random() * Math.PI * 2;\r\n\r\n        const flapRate = behavior.flap ? randomInRange(behavior.flap.rate[0], behavior.flap.rate[1]) : 0;\r\n        const rotationSpeed = behavior.rotation ? randomInRange(behavior.rotation.speed[0], behavior.rotation.speed[1]) : 0;\r\n        const bobAmplitude = behavior.bob ? randomInRange(behavior.bob.amplitude[0], behavior.bob.amplitude[1]) : 0;\r\n        const bobFrequency = behavior.bob ? randomInRange(behavior.bob.frequency[0], behavior.bob.frequency[1]) : 0;\r\n        const flickerVariance = behavior.flicker ? randomInRange(behavior.flicker.variance[0], behavior.flicker.variance[1]) : 0;\r\n\r\n        const flipX = elementType === 'bird' && Math.random() < 0.5;\r\n        const directionMultiplier = flipX ? -1 : 1;\r\n\r\n        const newThought = {\r\n            id: `thought-${++thoughtIdCounter}`,\r\n            x,\r\n            y,\r\n            category,\r\n            elementType,\r\n            spawnTime: now,\r\n            baseDuration: PRACTICE_INVARIANT.getWeightedLifetime(),\r\n            fadeModifier: 1.0,\r\n            isSticky: false,\r\n            variant,\r\n            vx: vx * directionMultiplier,\r\n            vy,\r\n            phase,\r\n            flapRate,\r\n            rotationSpeed,\r\n            bobAmplitude,\r\n            bobFrequency,\r\n            flickerVariance,\r\n            flipX,\r\n        };\r\n\r\n        lastSpawnTimeRef.current = now;\r\n        const lifetime = newThought.baseDuration;\r\n        lastLifetimeCategoryRef.current = lifetime < 10 ? 'fleeting' : lifetime < 25 ? 'sticky' : 'heavy';\r\n\r\n        setThoughts((prev) => {\r\n            let updated = [...prev].map(thought => {\r\n                const age = (now - thought.spawnTime) / 1000;\r\n                if (age > 8) {\r\n                    const ghostAge = age - 8;\r\n                    const pressureFactor = 0.92 - (ghostAge * 0.01);\r\n                    return { ...thought, fadeModifier: thought.fadeModifier * Math.max(0.85, pressureFactor) };\r\n                }\r\n                return thought;\r\n            });\r\n            if (updated.length >= PRACTICE_INVARIANT.maxActiveThoughts) {\r\n                const sorted = [...updated].sort((a, b) => a.spawnTime - b.spawnTime);\r\n                const oldestIdx = updated.findIndex(t => t.id === sorted[0].id);\r\n                if (oldestIdx >= 0) updated[oldestIdx] = { ...updated[oldestIdx], fadeModifier: updated[oldestIdx].fadeModifier * 0.3 };\r\n            }\r\n            return [...updated, newThought].sort((a, b) => a.y - b.y);\r\n        });\r\n\r\n        playAudio('thoughtNoticed');\r\n        onThoughtSpawn?.(newThought);\r\n    }, [theme, playAudio, onThoughtSpawn]);\r\n\r\n    const handleEmptyTap = (x, y) => {\r\n        spawnThought(x, y, 'neutral');\r\n        const rippleId = Date.now();\r\n        setRipples(prev => [...prev, { id: rippleId, x, y }]);\r\n        setTimeout(() => setRipples(prev => prev.filter(r => r.id !== rippleId)), 600);\r\n    };\r\n\r\n    const handleEmptyLongPress = (x, y) => setDialState({ visible: true, x, y });\r\n    const handleDialSelect = (categoryId) => {\r\n        spawnThought(dialState.x, dialState.y, categoryId);\r\n        setDialState({ visible: false, x: 0, y: 0 });\r\n    };\r\n    const handleDialDismiss = () => setDialState({ visible: false, x: 0, y: 0 });\r\n\r\n    const handleThoughtTap = useCallback((thoughtId) => {\r\n        setThoughts((prev) => prev.map((t) => t.id === thoughtId ? { ...t, fadeModifier: t.fadeModifier * (1 - PRACTICE_INVARIANT.releaseReduction) } : t));\r\n        playAudio('thoughtRelease');\r\n    }, [playAudio]);\r\n\r\n    const handleThoughtLongPress = useCallback((thoughtId) => {\r\n        if (PRACTICE_INVARIANT.allowOneSticky) {\r\n            const now = Date.now();\r\n            setThoughts((prev) => prev.map((t) => ({ ...t, isSticky: t.id === thoughtId, stickyStartTime: t.id === thoughtId ? now : undefined })));\r\n            setStickyThoughtId(thoughtId);\r\n            playAudio('thoughtSticky');\r\n        }\r\n    }, [playAudio]);\r\n\r\n    const handlePointerDown = (e) => {\r\n        tapStartTime.current = Date.now();\r\n        tapPosition.current = { x: e.clientX, y: e.clientY };\r\n        longPressTimer.current = setTimeout(() => {\r\n            handleEmptyLongPress(e.clientX, e.clientY);\r\n            longPressTimer.current = null;\r\n        }, PRACTICE_INVARIANT.longPressThreshold);\r\n    };\r\n\r\n    const handlePointerUp = (e) => {\r\n        if (longPressTimer.current) {\r\n            clearTimeout(longPressTimer.current);\r\n            longPressTimer.current = null;\r\n            const elapsed = Date.now() - tapStartTime.current;\r\n            if (elapsed < PRACTICE_INVARIANT.longPressThreshold) handleEmptyTap(e.clientX, e.clientY);\r\n        }\r\n    };\r\n\r\n    const handlePointerLeave = () => {\r\n        if (longPressTimer.current) {\r\n            clearTimeout(longPressTimer.current);\r\n            longPressTimer.current = null;\r\n        }\r\n    };\r\n\r\n    const thoughtCount = thoughts.length;\r\n    const accumulation = PRACTICE_INVARIANT.accumulation;\r\n    let saturation = 1.0;\r\n    if (thoughtCount > accumulation.crowded.max) saturation = accumulation.coalescing.saturation;\r\n    else if (thoughtCount > accumulation.busy.max) saturation = accumulation.crowded.saturation;\r\n    else if (thoughtCount > accumulation.normal.max) saturation = accumulation.busy.saturation;\r\n\r\n    return (\r\n        <div\r\n            className=\"absolute inset-0 pointer-events-auto\"\r\n            style={{ cursor: 'crosshair', filter: `saturate(${saturation})` }}\r\n            onPointerDown={handlePointerDown}\r\n            onPointerUp={handlePointerUp}\r\n            onPointerLeave={handlePointerLeave}\r\n        >\r\n            <VipassanaCanvas\r\n                thoughts={thoughts}\r\n                theme={theme}\r\n                atmosphericEvent={atmosphericEvent}\r\n                showStamps={false}\r\n            />\r\n\r\n            <div className=\"absolute inset-0 pointer-events-none\">\r\n                {thoughts.map(thought => (\r\n                    <ThoughtElement\r\n                        key={thought.id}\r\n                        {...thought}\r\n                        onTap={handleThoughtTap}\r\n                        onLongPress={handleThoughtLongPress}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            {ripples.map((ripple) => (\r\n                <div key={ripple.id} className=\"absolute pointer-events-none\" style={{ left: ripple.x, top: ripple.y, transform: 'translate(-50%, -50%)' }}>\r\n                    <div className=\"absolute inset-0 rounded-full border-2 border-white/30\" style={{ width: '40px', height: '40px', left: '-20px', top: '-20px', animation: 'rippleExpand 0.6s ease-out forwards' }} />\r\n                </div>\r\n            ))}\r\n\r\n            <RadialDial x={dialState.x} y={dialState.y} isVisible={dialState.visible} onSelect={handleDialSelect} onDismiss={handleDialDismiss} />\r\n\r\n            <style>{`\r\n                @keyframes rippleExpand {\r\n                    from { transform: scale(0.5); opacity: 0.8; }\r\n                    to { transform: scale(2.5); opacity: 0; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ThoughtLabeling;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\VipassanaCanvas.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`performance.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  23 |     const [showDebug, setShowDebug] = useState(false);\n  24 |     const [fps, setFps] = useState(60);\n> 25 |     const lastFrameTimeRef = useRef(performance.now());\n     |                                     ^^^^^^^^^^^^^^^^^ Cannot call impure function\n  26 |     const frameCountRef = useRef(0);\n  27 |     const stampsReadyRef = useRef(false);\n  28 |","line":25,"column":37,"nodeType":null,"endLine":25,"endColumn":54},{"ruleId":"no-unused-vars","severity":2,"message":"'lastTime' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":160,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"lastTime"},"fix":{"range":[5576,5609],"text":""},"desc":"Remove unused variable 'lastTime'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'progress' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":212,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":212,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"progress"},"fix":{"range":[7739,7784],"text":""},"desc":"Remove unused variable 'progress'."}]},{"ruleId":"no-undef","severity":2,"message":"'now' is not defined.","line":441,"column":76,"nodeType":"Identifier","messageId":"undef","endLine":441,"endColumn":79},{"ruleId":"no-undef","severity":2,"message":"'now' is not defined.","line":442,"column":49,"nodeType":"Identifier","messageId":"undef","endLine":442,"endColumn":52},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'atmosphericEvent', 'showStamps', and 'theme?.thoughtElement'. Either include them or remove the dependency array.","line":551,"column":8,"nodeType":"ArrayExpression","endLine":551,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [thoughts, showDebug, fps, atmosphericEvent, showStamps, theme?.thoughtElement]","fix":{"range":[24601,24627],"text":"[thoughts, showDebug, fps, atmosphericEvent, showStamps, theme?.thoughtElement]"}}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/VipassanaCanvas.jsx\r\n// Canvas-based renderer for Vipassana thoughts\r\n// AA-Level: Stamp-based rendering with pre-baked tints\r\n\r\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\r\nimport { initializeStamps, getStamp, getHazeStamps } from '../../utils/stamps.js';\r\n\r\nexport function VipassanaCanvas({\r\n    thoughts = [],\r\n    theme,\r\n    onThoughtTap,\r\n    onThoughtLongPress,\r\n    atmosphericEvent = null,\r\n    showStamps = true,\r\n}) {\r\n    const canvasRef = useRef(null);\r\n    const containerRef = useRef(null);\r\n    const animationFrameRef = useRef(null);\r\n    const longPressTimerRef = useRef(null);\r\n    const longPressThoughtRef = useRef(null);\r\n\r\n    // Dev debug overlay toggle\r\n    const [showDebug, setShowDebug] = useState(false);\r\n    const [fps, setFps] = useState(60);\r\n    const lastFrameTimeRef = useRef(performance.now());\r\n    const frameCountRef = useRef(0);\r\n    const stampsReadyRef = useRef(false);\r\n\r\n    // Initialize stamps once on mount\r\n    useEffect(() => {\r\n        initializeStamps();\r\n        stampsReadyRef.current = true;\r\n    }, []);\r\n\r\n    // DPR calculation with battery awareness\r\n    const getDPR = useCallback(() => {\r\n        // Check battery status (if available)\r\n        const isBattery = navigator.getBattery?.()?.then(battery => !battery.charging);\r\n        const dprCap = isBattery ? 1.5 : 2.0;\r\n        return Math.min(window.devicePixelRatio || 1, dprCap);\r\n    }, []);\r\n\r\n    // Hit-testing: Find thought at coordinate\r\n    const getThoughtAtCoordinate = useCallback((x, y) => {\r\n        if (!canvasRef.current) return null;\r\n\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        const canvasX = x - rect.left;\r\n        const canvasY = y - rect.top;\r\n\r\n        // Iterate in reverse (top-most first)\r\n        for (let i = thoughts.length - 1; i >= 0; i--) {\r\n            const thought = thoughts[i];\r\n            const dx = canvasX - thought.x;\r\n            const dy = canvasY - thought.y;\r\n            const dist = Math.sqrt(dx * dx + dy * dy);\r\n\r\n            // Use a default radius of 36px (half of 72px thought size)\r\n            const radius = 36;\r\n            if (dist < radius) {\r\n                return thought;\r\n            }\r\n        }\r\n        return null;\r\n    }, [thoughts]);\r\n\r\n    // Canvas event handlers - stop propagation only when thought is hit\r\n    const handleCanvasPointerDown = useCallback((e) => {\r\n        const thought = getThoughtAtCoordinate(e.clientX, e.clientY);\r\n\r\n        if (thought) {\r\n            // Hit a thought - stop propagation so parent doesn't spawn\r\n            e.stopPropagation();\r\n\r\n            // Start long-press timer\r\n            longPressThoughtRef.current = thought;\r\n            longPressTimerRef.current = setTimeout(() => {\r\n                onThoughtLongPress?.(thought.id);\r\n                longPressTimerRef.current = null;\r\n            }, 350); // Match PRACTICE_INVARIANT.longPressThreshold\r\n        }\r\n        // If no thought hit, let event bubble to parent for empty space handling\r\n    }, [getThoughtAtCoordinate, onThoughtLongPress]);\r\n\r\n    const handleCanvasPointerUp = useCallback((e) => {\r\n        if (longPressTimerRef.current) {\r\n            clearTimeout(longPressTimerRef.current);\r\n            longPressTimerRef.current = null;\r\n\r\n            // Was a short tap on thought\r\n            const thought = longPressThoughtRef.current;\r\n            if (thought) {\r\n                e.stopPropagation(); // Prevent parent from spawning\r\n                onThoughtTap?.(thought.id);\r\n            }\r\n        }\r\n        longPressThoughtRef.current = null;\r\n    }, [onThoughtTap]);\r\n\r\n    const handleCanvasPointerLeave = useCallback(() => {\r\n        if (longPressTimerRef.current) {\r\n            clearTimeout(longPressTimerRef.current);\r\n            longPressTimerRef.current = null;\r\n        }\r\n        longPressThoughtRef.current = null;\r\n    }, []);\r\n\r\n    // Toggle debug overlay (long-press bottom-right corner)\r\n    const handleDebugToggle = useCallback((e) => {\r\n        const rect = canvasRef.current?.getBoundingClientRect();\r\n        if (!rect) return;\r\n\r\n        const x = e.clientX - rect.left;\r\n        const y = e.clientY - rect.top;\r\n        const cornerSize = 50;\r\n\r\n        if (x > rect.width - cornerSize && y > rect.height - cornerSize) {\r\n            setShowDebug(prev => !prev);\r\n        }\r\n    }, []);\r\n\r\n    // Setup canvas and handle resize\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        const container = containerRef.current;\r\n        if (!canvas || !container) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n\r\n        const resize = () => {\r\n            const rect = container.getBoundingClientRect();\r\n            const dpr = getDPR();\r\n\r\n            // Set actual size in memory (scaled by DPR)\r\n            canvas.width = rect.width * dpr;\r\n            canvas.height = rect.height * dpr;\r\n\r\n            // Set display size (CSS pixels)\r\n            canvas.style.width = `${rect.width}px`;\r\n            canvas.style.height = `${rect.height}px`;\r\n\r\n            // Scale context to match DPR\r\n            ctx.scale(dpr, dpr);\r\n        };\r\n\r\n        resize();\r\n        window.addEventListener('resize', resize);\r\n        return () => window.removeEventListener('resize', resize);\r\n    }, [getDPR]);\r\n\r\n    // Render loop\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n\r\n        let lastTime = performance.now();\r\n\r\n        const render = (currentTime) => {\r\n            // FPS calculation\r\n            frameCountRef.current++;\r\n            const elapsed = currentTime - lastFrameTimeRef.current;\r\n            if (elapsed >= 1000) {\r\n                setFps(Math.round((frameCountRef.current * 1000) / elapsed));\r\n                frameCountRef.current = 0;\r\n                lastFrameTimeRef.current = currentTime;\r\n            }\r\n\r\n            // Clear canvas\r\n            const rect = canvas.getBoundingClientRect();\r\n            ctx.clearRect(0, 0, rect.width, rect.height);\r\n\r\n            // Viewport culling: only render visible thoughts\r\n            const margin = 50;\r\n            const visibleThoughts = thoughts.filter(t =>\r\n                t.x > -margin &&\r\n                t.x < rect.width + margin &&\r\n                t.y > -margin &&\r\n                t.y < rect.height + margin\r\n            );\r\n\r\n            // PHASE 3: Visual Budget - Tiered rendering\r\n            const totalThoughts = visibleThoughts.length;\r\n            const overflowCount = Math.max(0, totalThoughts - 22);\r\n\r\n            // Particle Haze: Draw first (behind thoughts)\r\n            if (overflowCount > 0) {\r\n                const hazeStamps = getHazeStamps();\r\n                const hazeAlpha = Math.min(overflowCount * 0.015, 0.2);\r\n\r\n                hazeStamps.forEach(stamp => {\r\n                    const hazeX = stamp.x * rect.width;\r\n                    const hazeY = stamp.y * rect.height;\r\n                    ctx.globalAlpha = hazeAlpha * stamp.variance;\r\n                    if (stamp.canvas) {\r\n                        ctx.drawImage(stamp.canvas, hazeX - 64, hazeY - 64);\r\n                    }\r\n                });\r\n                ctx.globalAlpha = 1.0; // Reset\r\n            }\r\n\r\n            // Draw thoughts with tiered quality\r\n            visibleThoughts.forEach((thought, index) => {\r\n                if (!showStamps) return;\r\n\r\n                const now = Date.now();\r\n                const age = (now - thought.spawnTime) / 1000; // seconds\r\n                const lifetime = thought.baseDuration * thought.fadeModifier;\r\n                const progress = Math.min(age / lifetime, 1);\r\n\r\n                // Determine tier based on index\r\n                let tierAlphaModifier = 1.0;\r\n                let tierScaleModifier = 1.0;\r\n\r\n                if (index >= 22) {\r\n                    // Overflow: Skip rendering (already in haze)\r\n                    return;\r\n                } else if (index >= 18) {\r\n                    // Fading (19-22): Gradual fade to haze\r\n                    const fadingProgress = (index - 18) / 4; // 0 to 1\r\n                    tierAlphaModifier = 1.0 - fadingProgress * 0.7;\r\n                    tierScaleModifier = 1.0 - fadingProgress * 0.5;\r\n                } else if (index >= 12) {\r\n                    // Secondary (13-18): Reduced presence\r\n                    tierAlphaModifier = 0.4;\r\n                    tierScaleModifier = 0.7;\r\n                }\r\n                // Primary (1-12): Full render (no modifiers)\r\n\r\n                // Calculate position using per-thought motion parameters\r\n                const driftX = age * thought.vx * 15;\r\n                const driftY = age * thought.vy * 15;\r\n\r\n                // Theme-specific motion additions\r\n                let motionX = 0, motionY = 0;\r\n                let opacityModifier = 1; // For cloud drift opacity variation\r\n\r\n                // Clouds: gentle vertical bob + drift opacity variation\r\n                if (thought.bobAmplitude) {\r\n                    motionY = Math.sin(now / 1000 * thought.bobFrequency + thought.phase) * thought.bobAmplitude * 20;\r\n                    // Add gentle opacity drift (┬▒10% over 6 second cycle)\r\n                    opacityModifier = 0.9 + Math.sin(now / 3000 + thought.phase) * 0.1;\r\n                }\r\n\r\n                // Lanterns: firefly-like glow pulse + subtle float\r\n                if (thought.flickerVariance) {\r\n                    // Horizontal drift\r\n                    motionX = Math.sin(now / 200 + thought.phase) * thought.flickerVariance * 5;\r\n                    // Vertical float with secondary oscillation\r\n                    motionY += Math.sin(now / 400 + thought.phase * 1.5) * thought.flickerVariance * 2;\r\n                    // Firefly glow pulse (stronger variation, slower cycle)\r\n                    opacityModifier = 0.7 + Math.sin(now / 800 + thought.phase) * 0.3;\r\n                }\r\n\r\n                const renderX = (thought.originX || thought.x) + driftX + motionX;\r\n                const renderY = (thought.originY || thought.y) + driftY + motionY;\r\n\r\n                // Calculate opacity and scale using 3-phase curve\r\n                // Matches real Vipassana: recognize clearly, release quickly, remember faintly\r\n                let opacity = 1;\r\n                let scale = 1;\r\n\r\n                // Phase A: Recognition (0-2.5s) - \"I see you\"\r\n                if (age < 2.5) {\r\n                    opacity = Math.min(1, age / 0.5); // Fade in over 0.5s, then hold at 100%\r\n                    scale = 0.95 + (opacity * 0.05);\r\n                }\r\n                // Phase B: Release (2.5-8s) - \"I'm not holding you\"\r\n                else if (age < 8) {\r\n                    const releaseProgress = (age - 2.5) / 5.5; // 0 to 1 over 5.5 seconds\r\n                    opacity = 1 - (releaseProgress * 0.75); // Drop from 100% to 25%\r\n                    scale = 1;\r\n                }\r\n                // Phase C: Ghost (8s+) - Memory residue, not attention capture\r\n                else {\r\n                    const ghostProgress = Math.min(1, (age - 8) / 5); // Gentle fade over 5s\r\n                    opacity = 0.25 - (ghostProgress * 0.10); // 25% ΓåÆ 15%\r\n                    opacity = Math.max(0.15, opacity); // Clamp at 15%\r\n                    scale = 1 + (ghostProgress * 0.1); // Slight expansion\r\n                }\r\n\r\n                // Sticky thoughts don't fade\r\n                if (thought.isSticky) {\r\n                    opacity = 1;\r\n                    scale = 1;\r\n                }\r\n\r\n                // Apply tier modifiers and cloud/lantern opacity variation\r\n                opacity *= tierAlphaModifier * opacityModifier;\r\n                scale *= tierScaleModifier;\r\n\r\n                // Bird animation: calculate current wing frame\r\n                let animFrame = 0;\r\n                if (thought.flapRate) {\r\n                    animFrame = Math.floor((now / 1000 + thought.phase) * thought.flapRate * 3) % 3;\r\n                }\r\n\r\n                // Leaf rotation: tumbling motion (rotation + wobble)\r\n                let rotation = 0;\r\n                let leafWobbleX = 0, leafWobbleY = 0;\r\n                if (thought.rotationSpeed) {\r\n                    // Primary rotation\r\n                    rotation = (age * thought.rotationSpeed + thought.phase) % (Math.PI * 2);\r\n                    // Add tumble wobble (secondary axis)\r\n                    leafWobbleX = Math.sin(age * thought.rotationSpeed * 0.7 + thought.phase) * 3;\r\n                    leafWobbleY = Math.cos(age * thought.rotationSpeed * 0.5 + thought.phase) * 2;\r\n                }\r\n\r\n                ctx.globalAlpha = opacity;\r\n\r\n                // Draw sticky indicator ring (before thought) with 0.5s fade out\r\n                if (thought.isSticky && thought.stickyStartTime) {\r\n                    const timeSinceSticky = now - thought.stickyStartTime;\r\n                    const fadeOutDuration = 500; // 0.5 seconds\r\n\r\n                    // Calculate fade out opacity: 1.0 -> 0.0 over 500ms\r\n                    const fadeProgress = Math.min(timeSinceSticky / fadeOutDuration, 1.0);\r\n                    const circleOpacity = Math.max(0, 1.0 - fadeProgress);\r\n\r\n                    // Only render if still visible\r\n                    if (circleOpacity > 0) {\r\n                        const pulseScale = 1 + Math.sin(now / 400) * 0.08;\r\n\r\n                        // Outer ring\r\n                        ctx.strokeStyle = `rgba(255, 220, 100, ${0.6 * circleOpacity})`;\r\n                        ctx.lineWidth = 3;\r\n                        ctx.beginPath();\r\n                        ctx.arc(renderX, renderY, 42 * pulseScale, 0, Math.PI * 2);\r\n                        ctx.stroke();\r\n\r\n                        // Inner glow\r\n                        ctx.strokeStyle = `rgba(255, 255, 200, ${0.3 * circleOpacity})`;\r\n                        ctx.lineWidth = 6;\r\n                        ctx.beginPath();\r\n                        ctx.arc(renderX, renderY, 38 * pulseScale, 0, Math.PI * 2);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n\r\n                // Render using image-based stamp system\r\n                // Use thought's stored elementType so old thoughts keep their shape\r\n                const themeElement = thought.elementType || theme?.thoughtElement || 'cloud';\r\n                const variant = thought.variant || 0;\r\n                // Pluralization map for irregular plurals (leaf ΓåÆ leaves, not leafs)\r\n                const pluralize = { cloud: 'clouds', bird: 'birds', leaf: 'leaves', lantern: 'lanterns' };\r\n                const stampKey = pluralize[themeElement] || (themeElement + 's');\r\n                const stampData = getStamp(stampKey, variant, thought.category);\r\n                const stampSize = 64; // Standardized size for all stamps\r\n\r\n                if (stampData) {\r\n                    const { element: stamp, type: stampType } = stampData;\r\n\r\n                    // Determine if bird should be flipped (stored at spawn time)\r\n                    const shouldFlip = thought.flipX || false;\r\n\r\n                    // Get category color for glow effect\r\n                    const categoryColors = {\r\n                        neutral: 'rgba(255, 255, 255, 0)',\r\n                        future: 'rgba(96, 165, 250, 0.8)',      // Blue\r\n                        past: 'rgba(251, 191, 36, 0.8)',        // Amber\r\n                        evaluating: 'rgba(244, 114, 182, 0.8)', // Pink\r\n                        body: 'rgba(74, 222, 128, 0.8)',        // Green\r\n                    };\r\n                    const glowColor = categoryColors[thought.category] || categoryColors.neutral;\r\n\r\n                    // Apply transformations\r\n                    ctx.save();\r\n                    ctx.translate(renderX, renderY);\r\n\r\n                    // Add category glow (only if not neutral)\r\n                    if (thought.category !== 'neutral') {\r\n                        ctx.shadowBlur = 20 * scale;\r\n                        ctx.shadowColor = glowColor;\r\n                    }\r\n\r\n                    // For birds: flip horizontally if needed + wing shadow during flap\r\n                    if (themeElement === 'bird' && shouldFlip) {\r\n                        // Add subtle wing shadow during mid-flap (frame 1)\r\n                        if (animFrame === 1) {\r\n                            ctx.shadowBlur = 8 * scale;\r\n                            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';\r\n                            ctx.shadowOffsetY = 2;\r\n                        }\r\n                        // Video stamps are 2.6x larger (100% increase from base to make them visible)\r\n                        const xScale = stampType === 'video' ? scale * 2.6 : scale;\r\n                        ctx.scale(-xScale, scale); // Flip horizontally with expansion for video\r\n                    } else if (themeElement === 'bird') {\r\n                        // Add subtle wing shadow during mid-flap (frame 1)\r\n                        if (animFrame === 1) {\r\n                            ctx.shadowBlur = 8 * scale;\r\n                            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';\r\n                            ctx.shadowOffsetY = 2;\r\n                        }\r\n                        // Video stamps are 2.6x larger (100% increase from base to make them visible)\r\n                        const xScale = stampType === 'video' ? scale * 2.6 : scale;\r\n                        ctx.scale(xScale, scale);\r\n                    } else if (themeElement === 'leaf' && rotation !== 0) {\r\n                        // For leaves: apply rotation + wobble translation\r\n                        ctx.translate(leafWobbleX, leafWobbleY);\r\n                        ctx.rotate(rotation);\r\n                        ctx.scale(scale, scale);\r\n                    } else if (themeElement === 'cloud') {\r\n                        // For clouds: stretch horizontally 50%\r\n                        ctx.scale(scale * 1.5, scale);\r\n                    } else {\r\n                        // For lanterns and other elements\r\n                        ctx.scale(scale, scale);\r\n                    }\r\n\r\n                    // Draw the image/video centered\r\n                    // Note: drawImage works with both HTMLImageElement and HTMLVideoElement\r\n                    ctx.drawImage(stamp, -stampSize / 2, -stampSize / 2, stampSize, stampSize);\r\n                    ctx.restore();\r\n                } else {\r\n                    // Fallback: simple circle if stamps not loaded\r\n                    ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\r\n                    ctx.beginPath();\r\n                    ctx.arc(renderX, renderY, 24, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                }\r\n            });\r\n\r\n            // PHASE 5: Atmospheric Events rendering (after thoughts)\r\n            if (atmosphericEvent) {\r\n                const eventAge = (Date.now() - atmosphericEvent.startTime) / 1000;\r\n                const eventProgress = eventAge / (atmosphericEvent.type === 'ufo' ? 0.8 :\r\n                    atmosphericEvent.type === 'rainShimmer' ? 1.5 : 2.0);\r\n\r\n                ctx.save();\r\n\r\n                if (atmosphericEvent.type === 'rainShimmer') {\r\n                    // Subtle vertical shimmer lines across screen\r\n                    const lineCount = 40;\r\n                    ctx.strokeStyle = 'rgba(200, 220, 240, 0.15)';\r\n                    ctx.lineWidth = 1;\r\n\r\n                    for (let i = 0; i < lineCount; i++) {\r\n                        const x = (i / lineCount) * rect.width + (Math.sin(now / 300 + i) * 10);\r\n                        const offset = Math.sin(now / 200 + i * 0.5) * 50;\r\n                        ctx.globalAlpha = 0.1 + Math.sin(eventProgress * Math.PI) * 0.15;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(x, offset);\r\n                        ctx.lineTo(x, rect.height);\r\n                        ctx.stroke();\r\n                    }\r\n                } else if (atmosphericEvent.type === 'birdsDispersing') {\r\n                    // 30-50% of bird-type thoughts scatter outward\r\n                    const disperseCount = Math.floor(visibleThoughts.length * (0.3 + Math.random() * 0.2));\r\n                    const birdStampData = getStamp('birds', 0, 'neutral');\r\n\r\n                    ctx.globalAlpha = 0.3 * (1 - eventProgress);\r\n\r\n                    for (let i = 0; i < disperseCount; i++) {\r\n                        const angle = (i / disperseCount) * Math.PI * 2 + eventProgress * Math.PI;\r\n                        const radius = 200 + eventProgress * 400;\r\n                        const x = rect.width / 2 + Math.cos(angle) * radius;\r\n                        const y = rect.height / 2 + Math.sin(angle) * radius;\r\n\r\n                        if (birdStampData) {\r\n                            const { element: birdStamp } = birdStampData;\r\n                            ctx.drawImage(birdStamp, x - 36, y - 36, 48, 48);\r\n                        }\r\n                    }\r\n                } else if (atmosphericEvent.type === 'rainbow') {\r\n                    // Faint rainbow arc at top edge\r\n                    const arcCenterY = -200;\r\n                    const arcRadius = rect.width * 0.8;\r\n\r\n                    ctx.globalAlpha = 0.08 * Math.sin(eventProgress * Math.PI);\r\n\r\n                    const rainbowColors = [\r\n                        'rgba(255, 0, 0, 0.5)',\r\n                        'rgba(255, 127, 0, 0.5)',\r\n                        'rgba(255, 255, 0, 0.5)',\r\n                        'rgba(0, 255, 0, 0.5)',\r\n                        'rgba(0, 0, 255, 0.5)',\r\n                        'rgba(75, 0, 130, 0.5)',\r\n                        'rgba(148, 0, 211, 0.5)',\r\n                    ];\r\n\r\n                    rainbowColors.forEach((color, i) => {\r\n                        ctx.strokeStyle = color;\r\n                        ctx.lineWidth = 20;\r\n                        ctx.beginPath();\r\n                        ctx.arc(rect.width / 2, arcCenterY, arcRadius + i * 22, 0, Math.PI);\r\n                        ctx.stroke();\r\n                    });\r\n                } else if (atmosphericEvent.type === 'ufo') {\r\n                    // Small ellipse crossing top-right periphery\r\n                    const pathProgress = eventProgress;\r\n                    const startX = rect.width * 1.1;\r\n                    const endX = rect.width * -0.1;\r\n                    const x = startX + (endX - startX) * pathProgress;\r\n                    const y = rect.height * 0.1 + Math.sin(pathProgress * Math.PI * 2) * 20;\r\n\r\n                    ctx.globalAlpha = 0.4;\r\n                    ctx.fillStyle = 'rgba(200, 220, 255, 0.6)';\r\n                    ctx.beginPath();\r\n                    ctx.ellipse(x, y, 30, 12, 0, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n\r\n                    // Light beam\r\n                    ctx.fillStyle = 'rgba(200, 255, 255, 0.1)';\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(x - 10, y + 5);\r\n                    ctx.lineTo(x + 10, y + 5);\r\n                    ctx.lineTo(x + 30, y + 80);\r\n                    ctx.lineTo(x - 30, y + 80);\r\n                    ctx.closePath();\r\n                    ctx.fill();\r\n                }\r\n\r\n                ctx.restore();\r\n            }\r\n\r\n            // Debug overlay\r\n            if (showDebug) {\r\n                ctx.save();\r\n                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\r\n                ctx.fillRect(10, 10, 150, 80);\r\n                ctx.fillStyle = '#0f0';\r\n                ctx.font = '12px monospace';\r\n                ctx.fillText(`FPS: ${fps}`, 20, 30);\r\n                ctx.fillText(`Thoughts: ${thoughts.length}`, 20, 50);\r\n                ctx.fillText(`Visible: ${visibleThoughts.length}`, 20, 70);\r\n\r\n                // Draw bounding boxes\r\n                ctx.strokeStyle = 'rgba(255, 0, 0, 0.5)';\r\n                ctx.lineWidth = 1;\r\n                visibleThoughts.forEach(t => {\r\n                    ctx.beginPath();\r\n                    ctx.arc(t.x, t.y, 36, 0, Math.PI * 2);\r\n                    ctx.stroke();\r\n                });\r\n                ctx.restore();\r\n            }\r\n\r\n            animationFrameRef.current = requestAnimationFrame(render);\r\n        };\r\n\r\n        animationFrameRef.current = requestAnimationFrame(render);\r\n\r\n        return () => {\r\n            if (animationFrameRef.current) {\r\n                cancelAnimationFrame(animationFrameRef.current);\r\n            }\r\n        };\r\n    }, [thoughts, showDebug, fps]);\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className=\"absolute inset-0\"\r\n            style={{ cursor: 'crosshair' }}\r\n        >\r\n            <canvas\r\n                ref={canvasRef}\r\n                className=\"absolute inset-0\"\r\n                onPointerDown={handleCanvasPointerDown}\r\n                onPointerUp={handleCanvasPointerUp}\r\n                onPointerLeave={handleCanvasPointerLeave}\r\n                onContextMenu={handleDebugToggle}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default VipassanaCanvas;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\VipassanaVariantSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\VipassanaVideoLayer.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'opacity' is assigned a value but never used.","line":44,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"opacity"},"fix":{"range":[1758,1778],"text":""},"desc":"Remove unused variable 'opacity'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/VipassanaVideoLayer.jsx\r\n// Transparent video overlay for Vipassana practice\r\n// Uses WebM with alpha transparency for clean compositing\r\n\r\nimport React, { useRef, useEffect, useState } from 'react';\r\n\r\n// WebM with alpha transparency (VP9 codec) - the only browser-supported transparent video format\r\n// Updated with new clean alpha channel videos\r\nconst VIDEO_SOURCES = {\r\n    leaves: 'vipassana/background videos/assets/Gentle_Leaf_Movement_in_Dense_Air no watermark.mp4',\r\n    birds: 'vipassana/background videos/assets/Distant_Birds_Silhouettes_Ambient_Motion no watermark.mp4',\r\n    lanterns: 'vipassana/background videos/assets/Ambient_Sky_Lanterns_Video_Generation no watermark.mp4',\r\n    clouds: 'vipassana/background videos/assets/clouds.mov',\r\n};\r\n\r\n// Per-video-type positioning to fit portrait wallpaper\r\n// All videos are 1920x1080 (16:9) and need to fit in portrait (9:16) UI\r\nconst VIDEO_CONFIGS = {\r\n    leaves: {\r\n        scale: 0.35,           // Smaller for leaves drifting\r\n        translateY: '-75%',    // Upper portion of sky\r\n        opacity: 0.1,          // Very subtle\r\n    },\r\n    birds: {\r\n        scale: 0.4,            // Medium for bird flock\r\n        translateY: '-80%',    // High in sky\r\n        opacity: 0.1,          // Very subtle\r\n    },\r\n    lanterns: {\r\n        scale: 0.5,            // Larger for lanterns floating\r\n        translateY: '-70%',    // Upper sky\r\n        opacity: 0.1,          // Very subtle\r\n    },\r\n    clouds: {\r\n        scale: 0.6,            // Larger for clouds passing\r\n        translateY: '-65%',    // Mid-upper sky\r\n        opacity: 0.1,          // Very subtle\r\n    },\r\n};\r\n\r\nexport function VipassanaVideoLayer({\r\n    videoType = 'leaves',\r\n    enabled = true,\r\n    opacity = 0.6,\r\n}) {\r\n    const videoRef = useRef(null);\r\n    const [videoReady, setVideoReady] = useState(false);\r\n\r\n    // Get video source\r\n    const source = VIDEO_SOURCES[videoType];\r\n    const videoSrc = source ? `${import.meta.env.BASE_URL}${source}` : null;\r\n\r\n    // Force video playback after mount and handle seamless looping\r\n    useEffect(() => {\r\n        // Skip if disabled or no source\r\n        if (!enabled || !videoSrc) return;\r\n\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        const playVideo = async () => {\r\n            try {\r\n                video.muted = true;\r\n                video.loop = true;\r\n                video.playbackRate = 0.6; // Slow to 60% speed (40% slower)\r\n\r\n                // Wait for video to be ready before playing\r\n                if (video.readyState >= 3) {\r\n                    // Video is loaded enough to play\r\n                    await video.play();\r\n                    setVideoReady(true);\r\n                } else {\r\n                    // Wait for loadeddata event\r\n                    video.addEventListener('loadeddata', async () => {\r\n                        await video.play();\r\n                        setVideoReady(true);\r\n                    }, { once: true });\r\n                }\r\n            } catch (err) {\r\n                console.warn('Video autoplay blocked:', err);\r\n            }\r\n        };\r\n\r\n        // Handle seamless looping by manually restarting on end\r\n        // This prevents the pause that sometimes occurs with native loop\r\n        const handleEnded = () => {\r\n            if (video) {\r\n                video.currentTime = 0;\r\n                video.play().catch(err => console.warn('Loop restart failed:', err));\r\n            }\r\n        };\r\n\r\n        video.addEventListener('ended', handleEnded);\r\n\r\n        // Small delay to ensure DOM is ready\r\n        const timer = setTimeout(playVideo, 100);\r\n\r\n        return () => {\r\n            clearTimeout(timer);\r\n            video.removeEventListener('ended', handleEnded);\r\n        };\r\n    }, [enabled, videoSrc]);\r\n\r\n    // Get video-specific config (fallback to birds config)\r\n    const config = VIDEO_CONFIGS[videoType] || VIDEO_CONFIGS.birds;\r\n\r\n    // Early return after all hooks\r\n    if (!enabled || !source) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"absolute inset-0 flex items-center justify-center overflow-hidden pointer-events-none\"\r\n            style={{\r\n                opacity: videoReady ? 1 : 0,\r\n                transition: 'opacity 2s ease-in',\r\n            }}\r\n        >\r\n            {/* Container matching wallpaper aspect ratio (9:16 portrait) */}\r\n            <div\r\n                className=\"relative overflow-hidden\"\r\n                style={{\r\n                    // Match portrait wallpaper aspect ratio\r\n                    aspectRatio: '9 / 16',\r\n                    height: '100%',\r\n                    maxWidth: '100%',\r\n                }}\r\n            >\r\n                {/* Video layer - positioned per video type within the wallpaper bounds */}\r\n                <video\r\n                    ref={videoRef}\r\n                    src={videoSrc}\r\n                    autoPlay\r\n                    loop\r\n                    muted\r\n                    playsInline\r\n                    preload=\"auto\"\r\n                    className=\"pointer-events-none\"\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        objectFit: 'contain', // Preserve aspect ratio without cropping\r\n                        transform: `translate(-50%, ${config.translateY}) scale(${config.scale})`,\r\n                        opacity: config.opacity,\r\n                        filter: 'blur(1px)', // Soft haze for depth\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default VipassanaVideoLayer;\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\VipassanaVisual.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'phase' is assigned a value but never used.","line":15,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"phase"},"fix":{"range":[589,610],"text":""},"desc":"Remove unused variable 'phase'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'intensity' is assigned a value but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"intensity"},"fix":{"range":[610,630],"text":""},"desc":"Remove unused variable 'intensity'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/vipassana/VipassanaVisual.jsx\r\n// Visual component for Vipassana meditation practice\r\n// Supports two variants: 'thought-labeling' (standard) and 'sakshi' (Distance Training)\r\n\r\nimport React from 'react';\r\nimport { ThoughtLabeling } from './ThoughtLabeling';\r\n\r\n// Lazy import for DistanceTrainingStep is problematic with Vite and require\r\n// We'll define a placeholder or if it's actually in the project we should import it properly.\r\n// For now, we'll use a more robust check.\r\nlet DistanceTrainingStep = null;\r\n\r\nexport function VipassanaVisual({\r\n    isActive = false,\r\n    phase = 'idle',\r\n    intensity = 0,\r\n    variant = 'thought-labeling', // 'thought-labeling' or 'sakshi'\r\n    onComplete,\r\n    onCancel,\r\n    onExit,\r\n    durationSeconds,\r\n}) {\r\n    // If Sakshi variant selected and DistanceTrainingStep available\r\n    if (variant === 'sakshi') {\r\n        return (\r\n            <div\r\n                className=\"absolute inset-0 flex items-center justify-center p-8 text-center\"\r\n                style={{ opacity: isActive ? 1 : 0, transition: 'opacity 0.5s ease' }}\r\n            >\r\n                <div className=\"max-w-md\">\r\n                    <span className=\"text-6xl mb-6 block\">≡ƒ¬₧</span>\r\n                    <h2 className=\"text-2xl font-bold mb-4\">Sakshi ΓÇö Distance Training</h2>\r\n                    <p className=\"text-sm opacity-70 mb-8 leading-relaxed\">\r\n                        Distance Training involves witnessing consciousness from a place of radical compassion. \r\n                        Observe the observer, maintaining a gentle distance from arising phenomena.\r\n                    </p>\r\n                    <div className=\"p-4 rounded-xl bg-white/5 border border-white/10 mb-8\">\r\n                        <p className=\"text-xs italic opacity-60\">\r\n                            \"I am not the thought, I am the space in which the thought arises.\"\r\n                        </p>\r\n                    </div>\r\n                    {/* Fallback control since this part is still under development */}\r\n                    <div className=\"flex gap-4 justify-center\">\r\n                        <button\r\n                            onClick={onCancel || onExit}\r\n                            className=\"px-6 py-2 rounded-full bg-white/10 hover:bg-white/20 transition-all text-xs font-semibold uppercase tracking-wider\"\r\n                        >\r\n                            Return to Selection\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Default: Thought Labeling variant\r\n    return (\r\n        <div\r\n            className=\"absolute inset-0 flex items-center justify-center\"\r\n            style={{ opacity: isActive ? 1 : 0, transition: 'opacity 0.5s ease' }}\r\n        >\r\n            {isActive && (\r\n                <ThoughtLabeling \r\n                    durationSeconds={durationSeconds}\r\n                    onComplete={onComplete}\r\n                    onExit={onExit || onCancel}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default VipassanaVisual;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\vipassana\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\wisdom\\BigFiveAssessment.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\wisdom\\PersonalityWave.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\components\\wisdom\\SelfKnowledgeView.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'viaTopStrengths' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"viaTopStrengths"},"fix":{"range":[677,746],"text":""},"desc":"Remove unused variable 'viaTopStrengths'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'enneagram' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"enneagram"},"fix":{"range":[752,809],"text":""},"desc":"Remove unused variable 'enneagram'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'attachmentStyle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":18,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"attachmentStyle"},"fix":{"range":[815,884],"text":""},"desc":"Remove unused variable 'attachmentStyle'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/wisdom/SelfKnowledgeView.jsx\r\n// Self-Knowledge section for Wave Function management\r\n// Houses personality assessments and profile display\r\n\r\nimport React, { useState } from 'react';\r\nimport { useWaveStore } from '../../state/waveStore.js';\r\nimport { BigFiveAssessment } from './BigFiveAssessment.jsx';\r\nimport { PersonalityWave } from './PersonalityWave.jsx';\r\n\r\nexport function SelfKnowledgeView() {\r\n    const [showAssessment, setShowAssessment] = useState(false);\r\n    const [assessmentType, setAssessmentType] = useState(null);\r\n    const [draftScores, setDraftScores] = useState(null);\r\n\r\n    const bigFive = useWaveStore(state => state.bigFive);\r\n    const viaTopStrengths = useWaveStore(state => state.viaTopStrengths);\r\n    const enneagram = useWaveStore(state => state.enneagram);\r\n    const attachmentStyle = useWaveStore(state => state.attachmentStyle);\r\n    const selfDescribedTags = useWaveStore(state => state.selfDescribedTags);\r\n    const isMinimumViable = useWaveStore(state => state.isMinimumViable);\r\n    const getTraitSummary = useWaveStore(state => state.getTraitSummary);\r\n    const addSelfDescribedTag = useWaveStore(state => state.addSelfDescribedTag);\r\n    const removeSelfDescribedTag = useWaveStore(state => state.removeSelfDescribedTag);\r\n\r\n    const [newTag, setNewTag] = useState('');\r\n\r\n    // If showing Big Five assessment\r\n    if (showAssessment && assessmentType === 'bigFive') {\r\n        return (\r\n            <div className=\"space-y-6\">\r\n                {draftScores && (\r\n                    <div className=\"px-2 pt-4\">\r\n                        <PersonalityWave scores={draftScores} height={100} />\r\n                        <div className=\"text-[10px] text-center mt-2 opacity-40 uppercase tracking-widest\">\r\n                            Observing Draft Resonance...\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                <BigFiveAssessment\r\n                    onUpdate={(scores) => setDraftScores(scores)}\r\n                    onComplete={() => {\r\n                        setShowAssessment(false);\r\n                        setAssessmentType(null);\r\n                        setDraftScores(null);\r\n                    }}\r\n                    onCancel={() => {\r\n                        setShowAssessment(false);\r\n                        setAssessmentType(null);\r\n                        setDraftScores(null);\r\n                    }}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleAddTag = () => {\r\n        if (newTag.trim()) {\r\n            addSelfDescribedTag(newTag);\r\n            setNewTag('');\r\n        }\r\n    };\r\n\r\n    const traits = getTraitSummary();\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header / Wave Visualization */}\r\n            <div className=\"relative pt-2 pb-6\">\r\n                <div className=\"text-center mb-6\">\r\n                    <h2\r\n                        className=\"text-[16px] uppercase mb-1\"\r\n                        style={{\r\n                            fontFamily: 'var(--font-display)',\r\n                            fontWeight: 600,\r\n                            letterSpacing: 'var(--tracking-mythic)',\r\n                            color: 'var(--accent-color)'\r\n                        }}\r\n                    >\r\n                        Wave Function\r\n                    </h2>\r\n                    <p className=\"text-[12px] italic\" style={{ color: 'rgba(253,251,245,0.5)' }}>\r\n                        Your characteristic patterns for Four Modes guidance\r\n                    </p>\r\n                </div>\r\n\r\n                {bigFive && (\r\n                    <div className=\"px-2\">\r\n                        <PersonalityWave scores={bigFive.scores} height={120} />\r\n\r\n                        {/* Harmonic Influence Legend */}\r\n                        <div className=\"mt-4 grid grid-cols-2 gap-x-4 gap-y-2 px-2\">\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-[9px] uppercase tracking-widest text-[#4ade80]/60\">Amplitude</span>\r\n                                <span className=\"text-[10px] text-white/40 italic\">Sensitivity / Neuroticism</span>\r\n                            </div>\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-[9px] uppercase tracking-widest text-[#60a5fa]/60\">Complexity</span>\r\n                                <span className=\"text-[10px] text-white/40 italic\">Curiosity / Openness</span>\r\n                            </div>\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-[9px] uppercase tracking-widest text-[#facc15]/60\">Frequency</span>\r\n                                <span className=\"text-[10px] text-white/40 italic\">Social Velocity / Extraversion</span>\r\n                            </div>\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-[9px] uppercase tracking-widest text-[#f87171]/60\">Regularity</span>\r\n                                <span className=\"text-[10px] text-white/40 italic\">Order / Conscientiousness</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Status indicator */}\r\n            <div\r\n                className=\"flex items-center justify-center gap-2 py-2 px-4 rounded-full mx-auto w-fit\"\r\n                style={{\r\n                    background: isMinimumViable() ? 'rgba(74, 222, 128, 0.1)' : 'rgba(251, 191, 36, 0.1)',\r\n                    border: `1px solid ${isMinimumViable() ? 'rgba(74, 222, 128, 0.3)' : 'rgba(251, 191, 36, 0.3)'}`,\r\n                }}\r\n            >\r\n                <span style={{ color: isMinimumViable() ? '#4ade80' : '#fbbf24' }}>\r\n                    {isMinimumViable() ? 'Γ£ô' : 'Γùï'}\r\n                </span>\r\n                <span\r\n                    className=\"text-[11px] uppercase tracking-wider\"\r\n                    style={{ color: isMinimumViable() ? '#4ade80' : '#fbbf24' }}\r\n                >\r\n                    {isMinimumViable() ? 'Profile Active' : 'Setup Required'}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Big Five Card */}\r\n            <div\r\n                className=\"p-5 rounded-2xl\"\r\n                style={{\r\n                    background: 'rgba(0,0,0,0.25)',\r\n                    border: bigFive ? '1px solid var(--accent-20)' : '1px solid rgba(251, 191, 36, 0.3)',\r\n                }}\r\n            >\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                    <div>\r\n                        <div\r\n                            className=\"text-[12px] uppercase tracking-wider\"\r\n                            style={{ color: 'var(--accent-color)' }}\r\n                        >\r\n                            Personality (Big Five)\r\n                        </div>\r\n                        <div className=\"text-[10px] mt-0.5\" style={{ color: 'rgba(253,251,245,0.4)' }}>\r\n                            {bigFive ? 'Required ΓÇó Completed' : 'Required for Wave/Sword modes'}\r\n                        </div>\r\n                    </div>\r\n                    {bigFive && (\r\n                        <div\r\n                            className=\"text-[9px] uppercase px-2 py-1 rounded-full\"\r\n                            style={{\r\n                                background: 'var(--accent-10)',\r\n                                color: 'var(--accent-color)',\r\n                            }}\r\n                        >\r\n                            {bigFive.reliability} reliability\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {bigFive ? (\r\n                    <>\r\n                        {/* Score bars */}\r\n                        <div className=\"space-y-2 mb-4\">\r\n                            {Object.entries(bigFive.scores).map(([dim, value]) => (\r\n                                <div key={dim} className=\"flex items-center gap-3\">\r\n                                    <div\r\n                                        className=\"w-24 text-[10px] uppercase tracking-wider\"\r\n                                        style={{ color: 'rgba(253,251,245,0.6)' }}\r\n                                    >\r\n                                        {dim.slice(0, 1).toUpperCase()}\r\n                                    </div>\r\n                                    <div\r\n                                        className=\"flex-1 h-1.5 rounded-full overflow-hidden\"\r\n                                        style={{ background: 'rgba(255,255,255,0.1)' }}\r\n                                    >\r\n                                        <div\r\n                                            className=\"h-full rounded-full\"\r\n                                            style={{\r\n                                                width: `${value * 100}%`,\r\n                                                background: 'var(--accent-color)',\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                    <div\r\n                                        className=\"w-8 text-[10px] text-right\"\r\n                                        style={{ color: 'rgba(253,251,245,0.5)' }}\r\n                                    >\r\n                                        {(value * 100).toFixed(0)}%\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Trait tags */}\r\n                        {traits && traits.length > 0 && (\r\n                            <div className=\"flex flex-wrap gap-1.5\">\r\n                                {traits.map((trait, i) => (\r\n                                    <span\r\n                                        key={i}\r\n                                        className=\"px-2 py-0.5 rounded-full text-[10px]\"\r\n                                        style={{\r\n                                            background: 'var(--accent-10)',\r\n                                            color: 'rgba(253,251,245,0.7)',\r\n                                        }}\r\n                                    >\r\n                                        {trait}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        <button\r\n                            onClick={() => {\r\n                                setAssessmentType('bigFive');\r\n                                setShowAssessment(true);\r\n                            }}\r\n                            className=\"mt-3 text-[11px] uppercase tracking-wider\"\r\n                            style={{ color: 'var(--accent-60)' }}\r\n                        >\r\n                            Retake Assessment ΓåÆ\r\n                        </button>\r\n                    </>\r\n                ) : (\r\n                    <button\r\n                        onClick={() => {\r\n                            setAssessmentType('bigFive');\r\n                            setShowAssessment(true);\r\n                        }}\r\n                        className=\"w-full py-3 rounded-xl text-[12px] uppercase tracking-wider transition-all\"\r\n                        style={{\r\n                            background: 'linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(251, 191, 36, 0.1) 100%)',\r\n                            border: '1px solid rgba(251, 191, 36, 0.3)',\r\n                            color: '#fbbf24',\r\n                        }}\r\n                    >\r\n                        Begin Assessment (~3 min)\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Optional assessments - coming soon */}\r\n            <div className=\"space-y-3\">\r\n                <div\r\n                    className=\"text-[11px] uppercase tracking-wider\"\r\n                    style={{ color: 'rgba(253,251,245,0.4)' }}\r\n                >\r\n                    Optional Assessments\r\n                </div>\r\n\r\n                {/* VIA Strengths */}\r\n                <div\r\n                    className=\"p-4 rounded-xl flex items-center justify-between\"\r\n                    style={{\r\n                        background: 'rgba(0,0,0,0.2)',\r\n                        border: '1px solid var(--accent-10)',\r\n                        opacity: 0.6,\r\n                    }}\r\n                >\r\n                    <div>\r\n                        <div className=\"text-[12px]\" style={{ color: 'rgba(253,251,245,0.7)' }}>\r\n                            Character Strengths (VIA)\r\n                        </div>\r\n                        <div className=\"text-[10px]\" style={{ color: 'rgba(253,251,245,0.4)' }}>\r\n                            Coming soon\r\n                        </div>\r\n                    </div>\r\n                    <span style={{ color: 'rgba(253,251,245,0.3)' }}>Γùï</span>\r\n                </div>\r\n\r\n                {/* Enneagram */}\r\n                <div\r\n                    className=\"p-4 rounded-xl flex items-center justify-between\"\r\n                    style={{\r\n                        background: 'rgba(0,0,0,0.2)',\r\n                        border: '1px solid var(--accent-10)',\r\n                        opacity: 0.6,\r\n                    }}\r\n                >\r\n                    <div>\r\n                        <div className=\"text-[12px]\" style={{ color: 'rgba(253,251,245,0.7)' }}>\r\n                            Enneagram Type\r\n                        </div>\r\n                        <div className=\"text-[10px]\" style={{ color: 'rgba(253,251,245,0.4)' }}>\r\n                            Coming soon\r\n                        </div>\r\n                    </div>\r\n                    <span style={{ color: 'rgba(253,251,245,0.3)' }}>Γùï</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Self-described tags */}\r\n            <div\r\n                className=\"p-4 rounded-xl\"\r\n                style={{\r\n                    background: 'rgba(0,0,0,0.2)',\r\n                    border: '1px solid var(--accent-15)',\r\n                }}\r\n            >\r\n                <div\r\n                    className=\"text-[11px] uppercase tracking-wider mb-3\"\r\n                    style={{ color: 'var(--accent-color)' }}\r\n                >\r\n                    Self-Described Patterns\r\n                </div>\r\n                <div className=\"text-[10px] mb-3\" style={{ color: 'rgba(253,251,245,0.4)' }}>\r\n                    Add tags that describe your tendencies (e.g., \"conflict-averse\", \"values-honesty\")\r\n                </div>\r\n\r\n                {/* Existing tags transformed into Rune Stones */}\r\n                {selfDescribedTags.length > 0 && (\r\n                    <div className=\"flex flex-wrap gap-3 mb-6\">\r\n                        {selfDescribedTags.map((tag, i) => (\r\n                            <div\r\n                                key={i}\r\n                                className=\"relative px-4 py-2 text-[11px] group overflow-hidden\"\r\n                                style={{\r\n                                    // Irregular stone shape\r\n                                    borderRadius: '12px 24px 18px 28px',\r\n                                    background: 'linear-gradient(145deg, rgba(40,35,50,0.8), rgba(25,20,35,0.9))',\r\n                                    border: '1px solid rgba(200,180,255,0.15)',\r\n                                    boxShadow: 'inset 2px 2px 10px rgba(0,0,0,0.4), 0 4px 12px rgba(0,0,0,0.3)',\r\n                                    transform: `rotate(${(i % 2 === 0 ? 1 : -1) * (i % 3)}deg)`,\r\n                                    fontFamily: 'var(--font-body)'\r\n                                }}\r\n                            >\r\n                                {/* Stone texture overlay */}\r\n                                <div className=\"absolute inset-0 opacity-10 pointer-events-none\"\r\n                                    style={{ backgroundImage: 'radial-gradient(circle at 50% 50%, #fff 1px, transparent 1px)', backgroundSize: '4px 4px' }}></div>\r\n\r\n                                <div className=\"relative z-10 flex items-center gap-2\">\r\n                                    <span style={{ color: 'rgba(253,251,245,0.85)', letterSpacing: '0.05em' }}>\r\n                                        {tag}\r\n                                    </span>\r\n                                    <button\r\n                                        onClick={() => removeSelfDescribedTag(tag)}\r\n                                        className=\"hover:text-red-400 transition-colors\"\r\n                                        style={{ color: 'rgba(253,251,245,0.3)' }}\r\n                                    >\r\n                                        Γ£ò\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Add new tag */}\r\n                <div className=\"flex gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={newTag}\r\n                        onChange={(e) => setNewTag(e.target.value)}\r\n                        onKeyPress={(e) => e.key === 'Enter' && handleAddTag()}\r\n                        placeholder=\"Add a tag...\"\r\n                        maxLength={30}\r\n                        className=\"flex-1 px-3 py-2 rounded-lg text-[12px]\"\r\n                        style={{\r\n                            background: 'rgba(0,0,0,0.3)',\r\n                            border: '1px solid var(--accent-10)',\r\n                            color: 'rgba(253,251,245,0.9)',\r\n                        }}\r\n                    />\r\n                    <button\r\n                        onClick={handleAddTag}\r\n                        className=\"px-3 py-2 rounded-lg text-[12px]\"\r\n                        style={{\r\n                            background: 'var(--accent-10)',\r\n                            color: 'var(--accent-color)',\r\n                            opacity: newTag.trim() ? 1 : 0.5,\r\n                        }}\r\n                        disabled={!newTag.trim()}\r\n                    >\r\n                        Add\r\n                    </button>\r\n                </div>\r\n                <div className=\"text-[9px] mt-2 text-right\" style={{ color: 'rgba(253,251,245,0.3)' }}>\r\n                    {selfDescribedTags.length}/10 tags\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\constants\\stageColors.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useDisplayModeStore' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"useDisplayModeStore"},"fix":{"range":[230,297],"text":""},"desc":"Remove unused variable 'useDisplayModeStore'."}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":144,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":144,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ThemeContext - provides stage-based theming throughout the app\r\n\r\nimport React, { createContext, useContext, useMemo, useEffect } from 'react';\r\nimport { STAGE_THEMES, BASE_THEME, STAGE_NAME_MAP } from '../theme/stageColors';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\n\r\nconst ThemeContext = createContext(null);\r\n\r\n// Helper to convert hex to HSL\r\nfunction hexToHSL(hex) {\r\n    hex = hex.replace('#', '');\r\n\r\n    const r = parseInt(hex.substr(0, 2), 16) / 255;\r\n    const g = parseInt(hex.substr(2, 2), 16) / 255;\r\n    const b = parseInt(hex.substr(4, 2), 16) / 255;\r\n\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    let h, s, l = (max + min) / 2;\r\n\r\n    if (max === min) {\r\n        h = s = 0;\r\n    } else {\r\n        const d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n        switch (max) {\r\n            case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;\r\n            case g: h = ((b - r) / d + 2) / 6; break;\r\n            case b: h = ((r - g) / d + 4) / 6; break;\r\n            default: h = 0;\r\n        }\r\n    }\r\n\r\n    return {\r\n        h: Math.round(h * 360),\r\n        s: Math.round(s * 100),\r\n        l: Math.round(l * 100)\r\n    };\r\n}\r\n\r\n// Helper to convert hex to RGB components\r\nfunction hexToRgb(hex) {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16),\r\n    } : { r: 0, g: 0, b: 0 };\r\n}\r\n\r\nexport function ThemeProvider({ children, currentStage = 'Flame' }) {\r\n    // Map stage name to theme key\r\n    const stageKey = STAGE_NAME_MAP[currentStage] || 'FLAME';\r\n\r\n    const theme = useMemo(() => {\r\n        const stageTheme = STAGE_THEMES[stageKey] || STAGE_THEMES.FLAME;\r\n        return {\r\n            ...BASE_THEME,\r\n            stage: currentStage,\r\n            stageKey,\r\n            accent: stageTheme.accent,\r\n            text: { ...BASE_THEME.text, ...stageTheme.text },\r\n            ui: stageTheme.ui,\r\n        };\r\n    }, [currentStage, stageKey]);\r\n\r\n    // Set CSS custom properties on the root element\r\n    useEffect(() => {\r\n        const stageTheme = STAGE_THEMES[stageKey] || STAGE_THEMES.FLAME;\r\n        const root = document.documentElement;\r\n\r\n        console.log('≡ƒÄ¿ ThemeProvider updating for stage:', currentStage, 'ΓåÆ', stageKey);\r\n\r\n        // Convert primary color to HSL for backward compatibility\r\n        const hsl = hexToHSL(stageTheme.accent.primary);\r\n\r\n        console.log('  Primary color:', stageTheme.accent.primary, 'ΓåÆ HSL:', hsl);\r\n\r\n        // Backward compatibility - existing components use these\r\n        root.style.setProperty('--accent-h', String(hsl.h));\r\n        root.style.setProperty('--accent-s', `${hsl.s}%`);\r\n        root.style.setProperty('--accent-l', `${hsl.l}%`);\r\n        root.style.setProperty('--accent-color', `hsl(${hsl.h} ${hsl.s}% ${hsl.l}%)`);\r\n\r\n        console.log('  Set --accent-color to:', `hsl(${hsl.h} ${hsl.s}% ${hsl.l}%)`);\r\n\r\n        // RGB components for rgba() usage\r\n        const primaryRgb = hexToRgb(stageTheme.accent.primary);\r\n        root.style.setProperty('--accent-r', String(primaryRgb.r));\r\n        root.style.setProperty('--accent-g', String(primaryRgb.g));\r\n        root.style.setProperty('--accent-b', String(primaryRgb.b));\r\n\r\n        // Pre-computed alpha variants (most commonly used)\r\n        root.style.setProperty('--accent-10', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.1)`);\r\n        root.style.setProperty('--accent-15', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.15)`);\r\n        root.style.setProperty('--accent-20', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.2)`);\r\n        root.style.setProperty('--accent-25', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.25)`);\r\n        root.style.setProperty('--accent-30', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.3)`);\r\n        root.style.setProperty('--accent-40', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.4)`);\r\n        root.style.setProperty('--accent-50', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.5)`);\r\n        root.style.setProperty('--accent-60', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.6)`);\r\n        root.style.setProperty('--accent-70', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.7)`);\r\n        root.style.setProperty('--accent-80', `rgba(${primaryRgb.r}, ${primaryRgb.g}, ${primaryRgb.b}, 0.8)`);\r\n\r\n        // New semantic variables\r\n        root.style.setProperty('--accent-primary', stageTheme.accent.primary);\r\n        root.style.setProperty('--accent-secondary', stageTheme.accent.secondary);\r\n        root.style.setProperty('--accent-muted', stageTheme.accent.muted);\r\n        root.style.setProperty('--accent-glow', stageTheme.accent.glow);\r\n\r\n        // UI colors\r\n        root.style.setProperty('--ui-selected-bg', stageTheme.ui.selectedBg);\r\n        root.style.setProperty('--ui-selected-border', stageTheme.ui.selectedBorder);\r\n        root.style.setProperty('--ui-hover-bg', stageTheme.ui.hoverBg);\r\n        root.style.setProperty('--ui-progress-bar', stageTheme.ui.progressBar);\r\n        root.style.setProperty('--ui-button-gradient', stageTheme.ui.buttonGradient);\r\n\r\n        // Text\r\n        root.style.setProperty('--text-accent', stageTheme.text.accent);\r\n        root.style.setProperty('--text-accent-muted', stageTheme.text.accentMuted);\r\n\r\n        // Light mode specific stage variables (for adaptive manuscript look)\r\n        if (stageTheme.light) {\r\n            root.style.setProperty('--light-bg-base', stageTheme.light.bgBase);\r\n            root.style.setProperty('--light-bg-surface', stageTheme.light.bgSurface);\r\n            root.style.setProperty('--light-text-primary', stageTheme.light.textPrimary);\r\n            root.style.setProperty('--light-text-secondary', stageTheme.light.textSecondary);\r\n            root.style.setProperty('--light-accent', stageTheme.light.accent);\r\n            root.style.setProperty('--light-accent-muted', stageTheme.light.accentMuted);\r\n            root.style.setProperty('--light-border', stageTheme.light.border);\r\n            root.style.setProperty('--light-shadow-tint', stageTheme.light.shadowTint);\r\n        }\r\n\r\n    }, [stageKey, currentStage]);\r\n\r\n    return (\r\n        <ThemeContext.Provider value={theme}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useTheme() {\r\n    const context = useContext(ThemeContext);\r\n    if (!context) {\r\n        throw new Error('useTheme must be used within ThemeProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\bhaktiRituals.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\bodyScanPrompts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\fourModes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\navigationData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\pathDescriptions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\pathFX.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\practiceFamily.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\ringFXPresets.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\ritualFoundation14.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\bhakti\\divineLight.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\devotional\\gratitude.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\devotional\\metta.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\grounding\\lowerDanTien.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\grounding\\rootLock.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\grounding\\sankalpa.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\grounding\\standingMeditation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\invocation\\ancestralHealing.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\invocation\\deityYoga.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\invocation\\heartOpening.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\ritualCategories.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\transmutation\\forgiveness.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\witnessing\\surrender.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\rituals\\witnessing\\union.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\sakshiPrompts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\sensoryTypes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\treatise.generated.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\treatiseParts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\videoData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\vipassanaPrompts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\vipassanaThemes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\data\\wisdomRecommendations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useCurriculumIntegration.js","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n   97 |     parseCurriculumDay,\n   98 |     getNextLeg,\n>  99 |     wasFromCurriculum: autoStartedRef.current,\n      |                        ^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  100 |   };\n  101 | }\n  102 |","line":99,"column":24,"nodeType":null,"endLine":99,"endColumn":46},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\n   97 |     parseCurriculumDay,\n   98 |     getNextLeg,\n>  99 |     wasFromCurriculum: autoStartedRef.current,\n      |                        ^^^^^^^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  100 |   };\n  101 | }\n  102 |","line":99,"column":24,"nodeType":null,"endLine":99,"endColumn":46}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// useCurriculumIntegration.js\r\n// Handles curriculum-specific practice session logic\r\n\r\nimport { useEffect, useRef, useCallback } from 'react';\r\nimport { useCurriculumStore } from '../state/curriculumStore.js';\r\n\r\n/**\r\n * Custom hook for curriculum integration\r\n * @param {function} onSessionReady - Callback when curriculum session is ready to start\r\n * @returns {object} Curriculum integration state and methods\r\n */\r\nexport function useCurriculumIntegration(onSessionReady = null) {\r\n  const {\r\n    getActivePracticeDay,\r\n    activePracticeSession,\r\n    clearActivePracticeSession,\r\n  } = useCurriculumStore();\r\n\r\n  // Ref to track if we've already auto-started for this session\r\n  const autoStartedRef = useRef(null);\r\n\r\n  // Parse curriculum day into practice configuration\r\n  const parseCurriculumDay = useCallback((curriculumDay) => {\r\n    if (!curriculumDay) return null;\r\n\r\n    const legs = curriculumDay.legs || [];\r\n    const firstLeg = legs[0];\r\n\r\n    if (!firstLeg) return null;\r\n\r\n    // Determine if this is a circuit (multiple legs) or single practice\r\n    if (legs.length > 1) {\r\n      // Multi-leg circuit\r\n      const exercises = legs.map((leg, index) => ({\r\n        exercise: {\r\n          id: leg.id || `leg-${index}`,\r\n          name: leg.label || leg.practiceType,\r\n          type: leg.practiceType,\r\n          practiceType: leg.practiceType,\r\n          preset: leg.preset,\r\n          sensoryType: leg.sensoryType,\r\n        },\r\n        duration: leg.duration,\r\n      }));\r\n\r\n      const totalDuration = legs.reduce((acc, leg) => acc + (leg.duration || 0), 0);\r\n\r\n      return {\r\n        isCircuit: true,\r\n        practice: \"Circuit\",\r\n        duration: totalDuration,\r\n        circuitConfig: {\r\n          exercises,\r\n          exerciseDuration: totalDuration,\r\n        },\r\n      };\r\n    } else {\r\n      // Single leg practice\r\n      return {\r\n        isCircuit: false,\r\n        practice: firstLeg.practiceType,\r\n        duration: firstLeg.duration || 10,\r\n        preset: firstLeg.preset,\r\n        pattern: firstLeg.pattern,\r\n        sensoryType: firstLeg.sensoryType,\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  // Check for active curriculum session and trigger auto-start\r\n  useEffect(() => {\r\n    const curriculumDay = getActivePracticeDay();\r\n    \r\n    if (curriculumDay && activePracticeSession && autoStartedRef.current !== activePracticeSession) {\r\n      // Mark this session as auto-started to prevent re-triggering\r\n      autoStartedRef.current = activePracticeSession;\r\n      \r\n      const config = parseCurriculumDay(curriculumDay);\r\n      \r\n      if (config && onSessionReady) {\r\n        console.log('[useCurriculumIntegration] Auto-starting curriculum session:', config);\r\n        onSessionReady(config);\r\n      }\r\n    }\r\n  }, [activePracticeSession, getActivePracticeDay, parseCurriculumDay, onSessionReady]);\r\n\r\n  // Get next leg info for summary display\r\n  const getNextLeg = useCallback((currentSession, offset = 1) => {\r\n    const { getNextLeg: storeGetNextLeg } = useCurriculumStore.getState();\r\n    return currentSession ? storeGetNextLeg(currentSession, offset) : null;\r\n  }, []);\r\n\r\n  return {\r\n    activePracticeSession,\r\n    clearActivePracticeSession,\r\n    getActivePracticeDay,\r\n    parseCurriculumDay,\r\n    getNextLeg,\r\n    wasFromCurriculum: autoStartedRef.current,\r\n  };\r\n}\r\n\r\nexport default useCurriculumIntegration;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useCurriculumPractice.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useCymaticsAudio.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'oscillatorsRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'oscillatorsRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":205,"column":52,"nodeType":"Identifier","endLine":205,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/hooks/useCymaticsAudio.js\r\nimport { useRef, useCallback, useEffect } from 'react';\r\n\r\n/**\r\n * Audio hook for Cymatics visualization.\r\n * Supports multiple oscillators for chords, smooth transitions, and drift modulation.\r\n */\r\n\r\nexport function useCymaticsAudio() {\r\n    const audioContextRef = useRef(null);\r\n    const oscillatorsRef = useRef(new Map()); // Map<ratio, {osc, gain}>\r\n    const masterGainRef = useRef(null);\r\n    const driftIntervalRef = useRef(null);\r\n    const baseFrequencyRef = useRef(256);\r\n    const isDriftEnabledRef = useRef(false);\r\n\r\n    // Initialize audio context and master gain\r\n    const initAudio = useCallback(async () => {\r\n        if (audioContextRef.current) return;\r\n\r\n        const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n        audioContextRef.current = new AudioContext();\r\n\r\n        // Resume if suspended (autoplay policy)\r\n        if (audioContextRef.current.state === 'suspended') {\r\n            await audioContextRef.current.resume();\r\n        }\r\n\r\n        masterGainRef.current = audioContextRef.current.createGain();\r\n        masterGainRef.current.gain.value = 0; // Start silent\r\n        masterGainRef.current.connect(audioContextRef.current.destination);\r\n    }, []);\r\n\r\n    // Set base frequency with smooth transition\r\n    const setFrequency = useCallback((hz, transitionMs = 500) => {\r\n        baseFrequencyRef.current = hz;\r\n\r\n        if (!audioContextRef.current) return;\r\n\r\n        const ctx = audioContextRef.current;\r\n        const now = ctx.currentTime;\r\n        const transitionSec = transitionMs / 1000;\r\n\r\n        // Update all active oscillators\r\n        for (const [ratio, nodes] of oscillatorsRef.current.entries()) {\r\n            const targetFreq = hz * ratio;\r\n            nodes.osc.frequency.cancelScheduledValues(now);\r\n            nodes.osc.frequency.setValueAtTime(nodes.osc.frequency.value, now);\r\n            nodes.osc.frequency.linearRampToValueAtTime(targetFreq, now + transitionSec);\r\n        }\r\n    }, []);\r\n\r\n    // Add an interval to create a chord\r\n    const addInterval = useCallback(async (ratio) => {\r\n        await initAudio();\r\n\r\n        // Don't add if already exists\r\n        if (oscillatorsRef.current.has(ratio)) return;\r\n\r\n        const ctx = audioContextRef.current;\r\n        const freq = baseFrequencyRef.current * ratio;\r\n\r\n        // Create oscillator + gain\r\n        const osc = ctx.createOscillator();\r\n        const gain = ctx.createGain();\r\n\r\n        osc.type = 'sine';\r\n        osc.frequency.setValueAtTime(freq, ctx.currentTime);\r\n\r\n        // Individual oscillator gain (balance in chord)\r\n        gain.gain.setValueAtTime(0.3, ctx.currentTime);\r\n\r\n        osc.connect(gain);\r\n        gain.connect(masterGainRef.current);\r\n\r\n        osc.start();\r\n\r\n        oscillatorsRef.current.set(ratio, { osc, gain });\r\n    }, [initAudio]);\r\n\r\n    // Remove an interval\r\n    const removeInterval = useCallback((ratio) => {\r\n        const nodes = oscillatorsRef.current.get(ratio);\r\n        if (!nodes) return;\r\n\r\n        const ctx = audioContextRef.current;\r\n        const now = ctx.currentTime;\r\n\r\n        // Fade out before stopping\r\n        nodes.gain.gain.cancelScheduledValues(now);\r\n        nodes.gain.gain.setValueAtTime(nodes.gain.gain.value, now);\r\n        nodes.gain.gain.linearRampToValueAtTime(0, now + 0.05);\r\n\r\n        setTimeout(() => {\r\n            nodes.osc.stop();\r\n            nodes.osc.disconnect();\r\n            nodes.gain.disconnect();\r\n            oscillatorsRef.current.delete(ratio);\r\n        }, 100);\r\n    }, []);\r\n\r\n    // Clear all intervals and reset to root\r\n    const clearToRoot = useCallback(() => {\r\n        const ratios = Array.from(oscillatorsRef.current.keys());\r\n        for (const ratio of ratios) {\r\n            if (ratio !== 1.0) {\r\n                removeInterval(ratio);\r\n            }\r\n        }\r\n    }, [removeInterval]);\r\n\r\n    // Enable/disable frequency drift\r\n    const setDrift = useCallback((enabled) => {\r\n        isDriftEnabledRef.current = enabled;\r\n\r\n        if (enabled && !driftIntervalRef.current) {\r\n            // Start drift modulation\r\n            const driftRate = 0.2; // Hz (5 second cycle)\r\n            const driftAmount = 4; // ┬▒4 Hz\r\n            let phase = 0;\r\n\r\n            driftIntervalRef.current = setInterval(() => {\r\n                if (!audioContextRef.current || oscillatorsRef.current.size === 0) return;\r\n\r\n                const ctx = audioContextRef.current;\r\n                const now = ctx.currentTime;\r\n\r\n                phase += driftRate * 0.05; // Update every 50ms\r\n                const drift = Math.sin(phase * Math.PI * 2) * driftAmount;\r\n\r\n                // Apply drift to all oscillators proportionally\r\n                for (const [ratio, nodes] of oscillatorsRef.current.entries()) {\r\n                    const targetFreq = (baseFrequencyRef.current + drift) * ratio;\r\n                    nodes.osc.frequency.setValueAtTime(targetFreq, now);\r\n                }\r\n            }, 50);\r\n        } else if (!enabled && driftIntervalRef.current) {\r\n            // Stop drift, return to exact frequencies\r\n            clearInterval(driftIntervalRef.current);\r\n            driftIntervalRef.current = null;\r\n\r\n            if (audioContextRef.current) {\r\n                const ctx = audioContextRef.current;\r\n                const now = ctx.currentTime;\r\n\r\n                for (const [ratio, nodes] of oscillatorsRef.current.entries()) {\r\n                    const exactFreq = baseFrequencyRef.current * ratio;\r\n                    nodes.osc.frequency.cancelScheduledValues(now);\r\n                    nodes.osc.frequency.setValueAtTime(nodes.osc.frequency.value, now);\r\n                    nodes.osc.frequency.linearRampToValueAtTime(exactFreq, now + 0.2);\r\n                }\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // Set master volume with fade\r\n    const setVolume = useCallback((level, fadeMs = 100) => {\r\n        if (!masterGainRef.current) return;\r\n\r\n        const ctx = audioContextRef.current;\r\n        const now = ctx.currentTime;\r\n        const fadeSec = fadeMs / 1000;\r\n\r\n        masterGainRef.current.gain.cancelScheduledValues(now);\r\n        masterGainRef.current.gain.setValueAtTime(masterGainRef.current.gain.value, now);\r\n        masterGainRef.current.gain.linearRampToValueAtTime(level, now + fadeSec);\r\n    }, []);\r\n\r\n    // Fade in (from 0 to target volume)\r\n    const fadeIn = useCallback(async (durationMs, targetVolume = 0.4) => {\r\n        await initAudio();\r\n\r\n        // Resume audio context (required in some browsers)\r\n        if (audioContextRef.current.state === 'suspended') {\r\n            await audioContextRef.current.resume();\r\n        }\r\n\r\n        setVolume(targetVolume, durationMs);\r\n    }, [initAudio, setVolume]);\r\n\r\n    // Fade out (to 0)\r\n    const fadeOut = useCallback((durationMs) => {\r\n        setVolume(0, durationMs);\r\n    }, [setVolume]);\r\n\r\n    // Get current frequencies for display\r\n    const getCurrentFrequencies = useCallback(() => {\r\n        const freqs = [];\r\n        for (const [ratio] of oscillatorsRef.current.entries()) {\r\n            freqs.push({\r\n                ratio,\r\n                frequency: baseFrequencyRef.current * ratio\r\n            });\r\n        }\r\n        return freqs.sort((a, b) => a.ratio - b.ratio);\r\n    }, []);\r\n\r\n    // Cleanup on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (driftIntervalRef.current) {\r\n                clearInterval(driftIntervalRef.current);\r\n            }\r\n\r\n            for (const [, nodes] of oscillatorsRef.current.entries()) {\r\n                try {\r\n                    nodes.osc.stop();\r\n                    nodes.osc.disconnect();\r\n                    nodes.gain.disconnect();\r\n                } catch {\n                    // Oscillator may already be stopped\r\n                }\r\n            }\r\n\r\n            oscillatorsRef.current.clear();\r\n\r\n            if (audioContextRef.current) {\r\n                audioContextRef.current.close();\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    return {\r\n        setFrequency,\r\n        addInterval,\r\n        removeInterval,\r\n        clearToRoot,\r\n        setDrift,\r\n        setVolume,\r\n        fadeIn,\r\n        fadeOut,\r\n        getCurrentFrequencies\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useEntryMemoization.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useLockPulse.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useRef' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRef"},"fix":{"range":[374,382],"text":""},"desc":"Remove unused variable 'useRef'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * useLockPulse.js\r\n * Golden-ratio lock feedback: visual pulse + haptic ramp\r\n * \r\n * When user \"locks\" a frequency or completes a session,\r\n * this creates visceral feedback that imprints on the nervous system:\r\n * - Visual: 3-second golden-ratio pulse (1:1.618 rhythm)\r\n * - Haptic: 5-stage vibration pattern matching the pulse\r\n */\r\n\r\nimport { useState, useCallback, useRef } from 'react';\r\n\r\nconst GOLDEN_RATIO = 1.618;\r\nconst SHORT_MS = 350;\r\nconst LONG_MS = Math.round(SHORT_MS * GOLDEN_RATIO); // ~566ms\r\n\r\n/**\r\n * Hook for triggering golden-ratio lock pulse feedback\r\n * @returns {{ triggerLockPulse: Function, lockPulseScale: number, lockPulseOpacity: number, isLockPulsing: boolean }}\r\n */\r\nexport function useLockPulse() {\r\n    const [scale, setScale] = useState(1);\r\n    const [opacity, setOpacity] = useState(1);\r\n    const [isPulsing, setIsPulsing] = useState(false);\r\n\r\n    const triggerLockPulse = useCallback((intensity = 1.0) => {\r\n        if (isPulsing) return; // Prevent overlapping pulses\r\n\r\n        setIsPulsing(true);\r\n\r\n        // Calculate intensity-scaled values\r\n        const scaleBoost = 0.25 * intensity;\r\n        const smallBoost = 0.18 * intensity;\r\n\r\n        // Visual pulse sequence: golden-ratio timing\r\n        const sequence = [\r\n            { scale: 1 + scaleBoost, duration: SHORT_MS },   // Expand\r\n            { scale: 1.0, duration: LONG_MS },                // Contract\r\n            { scale: 1 + smallBoost, duration: SHORT_MS },    // Smaller expand\r\n            { scale: 1.0, duration: LONG_MS },                // Contract\r\n            { scale: 1.0, opacity: 0.7, duration: 600 },      // Gentle fade\r\n            { scale: 1.0, opacity: 1.0, duration: 400 },      // Return\r\n        ];\r\n\r\n        let totalDelay = 0;\r\n        sequence.forEach((step) => {\n            setTimeout(() => {\r\n                setScale(step.scale);\r\n                if (step.opacity !== undefined) {\r\n                    setOpacity(step.opacity);\r\n                }\r\n            }, totalDelay);\r\n            totalDelay += step.duration;\r\n        });\r\n\r\n        // End pulse state\r\n        setTimeout(() => {\r\n            setIsPulsing(false);\r\n            setScale(1);\r\n            setOpacity(1);\r\n        }, totalDelay);\r\n\r\n        // Haptic feedback (if available)\r\n        triggerHapticRamp();\r\n\r\n    }, [isPulsing]);\r\n\r\n    return {\r\n        triggerLockPulse,\r\n        lockPulseScale: scale,\r\n        lockPulseOpacity: opacity,\r\n        isLockPulsing: isPulsing,\r\n    };\r\n}\r\n\r\n/**\r\n * Trigger haptic feedback ramp pattern\r\n * Pattern: short - long - short - long - fade\r\n */\r\nfunction triggerHapticRamp() {\r\n    // Check for Vibration API support\r\n    if (!navigator.vibrate) return;\r\n\r\n    try {\r\n        // Pattern: [vibrate, pause, vibrate, pause, ...]\r\n        // short-long-short-long-fade matches golden-ratio visual pulse\r\n        navigator.vibrate([\r\n            SHORT_MS,           // Short vibration\r\n            LONG_MS - 50,       // Pause (slightly shorter to sync)\r\n            SHORT_MS,           // Short vibration  \r\n            LONG_MS - 50,       // Pause\r\n            200,                // Final fade buzz\r\n        ]);\r\n    } catch (e) {\r\n        // Haptics not available - fail silently\r\n        console.debug('Haptic feedback unavailable:', e);\r\n    }\r\n}\r\n\r\n/**\r\n * CSS class to apply lock pulse animation manually via CSS\r\n */\r\nexport const LOCK_PULSE_CSS = `\r\n@keyframes goldenRatioPulse {\r\n  0% { transform: scale(1); opacity: 1; }\r\n  12% { transform: scale(1.25); opacity: 1; }\r\n  30% { transform: scale(1.0); opacity: 1; }\r\n  42% { transform: scale(1.18); opacity: 1; }\r\n  60% { transform: scale(1.0); opacity: 1; }\r\n  80% { transform: scale(1.0); opacity: 0.7; }\r\n  100% { transform: scale(1.0); opacity: 1; }\r\n}\r\n\r\n.lock-pulse {\r\n  animation: goldenRatioPulse 2.8s ease-out forwards;\r\n}\r\n`;\r\n\r\nexport default useLockPulse;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\usePracticeSession.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\usePracticeTimer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useSessionInstrumentation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useVisualizationAudio.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useVisualizationEngine.js","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`animate` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  128 |\n  129 |         // Continue animation loop\n> 130 |         frameRef.current = requestAnimationFrame(animate);\n      |                                                  ^^^^^^^ `animate` accessed before it is declared\n  131 |     }, []);\n  132 |\n  133 |     // Start the engine\n\n   80 |\n   81 |     // Main animation loop - drift-free using absolute timestamps\n>  82 |     const animate = useCallback((now) => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  83 |         if (!isRunningRef.current) return;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  84 |\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 130 |         frameRef.current = requestAnimationFrame(animate);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 131 |     }, []);\n      | ^^^^^^^^^^^^ `animate` is declared here\n  132 |\n  133 |     // Start the engine\n  134 |     const start = useCallback(() => {","line":130,"column":50,"nodeType":null,"endLine":130,"endColumn":57}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/hooks/useVisualizationEngine.js\r\n// 4-phase state machine for Visualization practice\r\n// Phases: fadeIn ΓåÆ display ΓåÆ fadeOut ΓåÆ void ΓåÆ (cycle repeats)\r\n\r\nimport { useState, useRef, useCallback, useEffect, useMemo } from 'react';\r\n\r\nconst PHASES = ['fadeIn', 'display', 'fadeOut', 'void'];\r\n\r\nexport function useVisualizationEngine({\r\n    fadeInDuration = 2.5,\r\n    displayDuration = 10,\r\n    fadeOutDuration = 2.5,\r\n    voidDuration = 10,\r\n    onPhaseChange = null,\r\n    onCycleComplete = null,\r\n} = {}) {\r\n    // Core state\r\n    const [phase, setPhase] = useState('fadeIn');\r\n    const [progress, setProgress] = useState(0);\r\n    const [cycleCount, setCycleCount] = useState(0);\r\n    const [totalElapsed, setTotalElapsed] = useState(0);\r\n    const [isRunning, setIsRunning] = useState(false);\r\n\r\n    // Session seed for procedural variance (generated once per session)\r\n    const [sessionSeed, setSessionSeed] = useState(0);\r\n\r\n    // Keep latest callbacks/durations in refs so the animation loop stays stable\r\n    const onPhaseChangeRef = useRef(onPhaseChange);\r\n    const onCycleCompleteRef = useRef(onCycleComplete);\r\n    const durationsRef = useRef({\r\n        fadeIn: fadeInDuration * 1000,\r\n        display: displayDuration * 1000,\r\n        fadeOut: fadeOutDuration * 1000,\r\n        void: voidDuration * 1000,\r\n    });\r\n    const isRunningRef = useRef(false);\r\n\r\n    // Animation refs\r\n    const frameRef = useRef(null);\r\n    const startTimeRef = useRef(null);\r\n    const phaseStartTimeRef = useRef(null);\r\n    const currentPhaseRef = useRef('fadeIn');\r\n    const cycleCountRef = useRef(0);\r\n\r\n    // Duration lookup\r\n    const phaseDurations = useMemo(\r\n        () => ({\r\n            fadeIn: fadeInDuration * 1000,\r\n            display: displayDuration * 1000,\r\n            fadeOut: fadeOutDuration * 1000,\r\n            void: voidDuration * 1000,\r\n        }),\r\n        [fadeInDuration, displayDuration, fadeOutDuration, voidDuration]\r\n    );\r\n\r\n    // Keep ref in sync for the animation loop\r\n    useEffect(() => {\r\n        durationsRef.current = phaseDurations;\r\n    }, [phaseDurations]);\r\n\r\n    const totalCycleDuration = useMemo(\r\n        () => Object.values(phaseDurations).reduce((a, b) => a + b, 0),\r\n        [phaseDurations]\r\n    );\r\n\r\n    // Get next phase in cycle\r\n    const getNextPhase = (currentPhase) => {\r\n        const idx = PHASES.indexOf(currentPhase);\r\n        return PHASES[(idx + 1) % PHASES.length];\r\n    };\r\n\r\n    // Keep callback refs updated so animate never re-subscribes\r\n    useEffect(() => {\r\n        onPhaseChangeRef.current = onPhaseChange;\r\n    }, [onPhaseChange]);\r\n\r\n    useEffect(() => {\r\n        onCycleCompleteRef.current = onCycleComplete;\r\n    }, [onCycleComplete]);\r\n\r\n    // Main animation loop - drift-free using absolute timestamps\r\n    const animate = useCallback((now) => {\r\n        if (!isRunningRef.current) return;\r\n\r\n        if (!startTimeRef.current) {\r\n            startTimeRef.current = now;\r\n            phaseStartTimeRef.current = now;\r\n        }\r\n\r\n        // Calculate total elapsed time\r\n        const elapsed = now - startTimeRef.current;\r\n        setTotalElapsed(elapsed / 1000);\r\n\r\n        // Calculate time within current phase\r\n        const phaseElapsed = now - phaseStartTimeRef.current;\r\n        const currentPhaseDuration = durationsRef.current[currentPhaseRef.current];\r\n\r\n        // Calculate progress within phase (0.0 to 1.0)\r\n        const phaseProgress = Math.min(phaseElapsed / currentPhaseDuration, 1.0);\r\n        setProgress(phaseProgress);\r\n\r\n        // Check for phase transition\r\n        if (phaseElapsed >= currentPhaseDuration) {\r\n            const oldPhase = currentPhaseRef.current;\r\n            const newPhase = getNextPhase(oldPhase);\r\n\r\n            // Update refs and state\r\n            currentPhaseRef.current = newPhase;\r\n            phaseStartTimeRef.current = now;\r\n            setPhase(newPhase);\r\n            setProgress(0);\r\n\r\n            // Fire phase change callback\r\n            if (onPhaseChangeRef.current) {\r\n                onPhaseChangeRef.current(newPhase, oldPhase);\r\n            }\r\n\r\n            // Check for cycle completion (when void ends ΓåÆ fadeIn begins)\r\n            if (oldPhase === 'void') {\r\n                cycleCountRef.current += 1;\r\n                setCycleCount(cycleCountRef.current);\r\n\r\n                if (onCycleCompleteRef.current) {\r\n                    onCycleCompleteRef.current(cycleCountRef.current);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Continue animation loop\r\n        frameRef.current = requestAnimationFrame(animate);\r\n    }, []);\r\n\r\n    // Start the engine\r\n    const start = useCallback(() => {\r\n        if (isRunningRef.current) return;\r\n\r\n        // Generate new session seed\r\n        setSessionSeed(Math.random());\r\n\r\n        // Reset state\r\n        setPhase('fadeIn');\r\n        setProgress(0);\r\n        setCycleCount(0);\r\n        setTotalElapsed(0);\r\n        currentPhaseRef.current = 'fadeIn';\r\n        cycleCountRef.current = 0;\r\n        startTimeRef.current = null;\r\n        phaseStartTimeRef.current = null;\r\n\r\n        // Start animation loop\r\n        isRunningRef.current = true;\r\n        setIsRunning(true);\r\n        frameRef.current = requestAnimationFrame(animate);\r\n    }, [animate]);\r\n\r\n    // Stop the engine\r\n    const stop = useCallback(() => {\r\n        if (frameRef.current) {\r\n            cancelAnimationFrame(frameRef.current);\r\n            frameRef.current = null;\r\n        }\r\n        isRunningRef.current = false;\r\n        setIsRunning(false);\r\n    }, []);\r\n\r\n    // Cleanup on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            stop();\r\n        };\r\n    }, [stop]);\r\n\r\n    // Calculate estimated total cycles for session\r\n    const getEstimatedCycles = (sessionDurationMinutes) => {\r\n        return Math.floor((sessionDurationMinutes * 60 * 1000) / totalCycleDuration);\r\n    };\r\n\r\n    return {\r\n        // Current state\r\n        phase,\r\n        progress,\r\n        cycleCount,\r\n        totalElapsed,\r\n        isRunning,\r\n        sessionSeed,\r\n\r\n        // Actions\r\n        start,\r\n        stop,\r\n\r\n        // Utilities\r\n        getEstimatedCycles,\r\n        totalCycleDuration: totalCycleDuration / 1000, // in seconds\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\hooks\\useWakeLock.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\Icon.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\iconNames.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\iconStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Bhakti.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\BodyScan.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Bookmark.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Breathwork.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Broken.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Copy.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Cosmos.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Devotion.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Export.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Fire.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Flow.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Foundation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Frozen.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Grounding.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Heart.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Milestone.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Practice.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Sakshi.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Spiral.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\StreakActive.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Transition.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Unwitnessed.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Vipassana.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Visualization.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Warning.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\Wisdom.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\filled\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Bhakti.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Bhakti({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `bhakti-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Bhakti icon\r\nimport React from 'react';\r\n\r\nexport function Bhakti({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `bhakti-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"40%\" r=\"60%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.5\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" />\r\n                    <feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge>\r\n                </filter>\r\n            </defs>\r\n            <ellipse cx=\"12\" cy=\"12\" rx=\"10\" ry=\"10\" fill={`url(#${id}-aura)`} />\r\n            <path\r\n                d=\"M12 21c-1-1-8-5-8-11 0-3 2-5 4.5-5 1.5 0 2.8.8 3.5 2 .7-1.2 2-2 3.5-2 2.5 0 4.5 2 4.5 5 0 6-7 10-8 11z\"\r\n                fill={color}\r\n                filter={`url(#${id}-glow)`}\r\n            />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\BodyScan.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function BodyScan({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `bodyscan-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                                 ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>","line":5,"column":33,"nodeType":null,"endLine":5,"endColumn":46}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - BodyScan icon\r\nimport React from 'react';\r\n\r\nexport function BodyScan({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `bodyscan-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.6\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1\" result=\"blur\" />\r\n                    <feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge>\r\n                </filter>\r\n            </defs>\r\n            <circle cx=\"12\" cy=\"12\" r=\"10\" fill={`url(#${id}-aura)`} />\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\">\r\n                <circle cx=\"12\" cy=\"4\" r=\"2\" />\r\n                <path d=\"M12 8v6\" />\r\n                <path d=\"M9 18l3-4 3 4\" />\r\n                <path d=\"M4 10c1 0 2 1 2 2s-1 2-2 2\" strokeOpacity=\"0.6\" />\r\n                <path d=\"M20 10c-1 0-2 1-2 2s1 2 2 2\" strokeOpacity=\"0.6\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Bookmark.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Bookmark({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `book-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                             ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":29,"nodeType":null,"endLine":5,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Bookmark icon\r\nimport React from 'react';\r\n\r\nexport function Bookmark({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `book-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <path d=\"M5 4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v18l-7-4-7 4V4z\" fill={color} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Breathwork.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Breathwork({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `breathwork-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                                   ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg","line":5,"column":35,"nodeType":null,"endLine":5,"endColumn":48}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Breathwork icon\r\nimport React from 'react';\r\n\r\nexport function Breathwork({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `breathwork-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg\r\n            width={size}\r\n            height={size}\r\n            viewBox=\"0 0 24 24\"\r\n            className={className}\r\n        >\r\n            <defs>\r\n                <linearGradient id={`${id}-grad`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.4\" />\r\n                    <stop offset=\"50%\" stopColor={color} stopOpacity=\"0.8\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.4\" />\r\n                </linearGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1\" result=\"blur\" />\r\n                    <feMerge>\r\n                        <feMergeNode in=\"blur\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`}>\r\n                <path\r\n                    d=\"M2 8c2-2 4-2 6 0s4 2 6 0 4-2 6 0\"\r\n                    fill=\"none\"\r\n                    stroke={`url(#${id}-grad)`}\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                />\r\n                <path\r\n                    d=\"M2 12c2-2 4-2 6 0s4 2 6 0 4-2 6 0\"\r\n                    fill=\"none\"\r\n                    stroke={color}\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                />\r\n                <path\r\n                    d=\"M2 16c2-2 4-2 6 0s4 2 6 0 4-2 6 0\"\r\n                    fill=\"none\"\r\n                    stroke={`url(#${id}-grad)`}\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Broken.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Broken({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `broken-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Broken icon\r\nimport React from 'react';\r\n\r\nexport function Broken({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `broken-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\">\r\n                <path d=\"M12 21s-8-5-8-11c0-3 2-5 4.5-5 1.5 0 2.8.8 3.5 2\" />\r\n                <path d=\"M12 21s8-5 8-11c0-3-2-5-4.5-5-1.5 0-2.8.8-3.5 2\" />\r\n                <path d=\"M12 8l-2 4 4-2-2 5\" strokeLinecap=\"round\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Copy.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Copy({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `copy-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                             ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":29,"nodeType":null,"endLine":5,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Copy icon\r\nimport React from 'react';\r\n\r\nexport function Copy({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `copy-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\">\r\n                <rect x=\"8\" y=\"8\" width=\"12\" height=\"12\" rx=\"2\" />\r\n                <path d=\"M16 8V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Cosmos.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Cosmos({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `cosmos-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Cosmos icon\r\nimport React from 'react';\r\n\r\nexport function Cosmos({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `cosmos-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.6\" />\r\n                    <stop offset=\"60%\" stopColor={color} stopOpacity=\"0.2\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <circle cx=\"12\" cy=\"12\" r=\"11\" fill={`url(#${id}-aura)`} />\r\n            <g filter={`url(#${id}-glow)`}>\r\n                <circle cx=\"12\" cy=\"12\" r=\"3\" fill={color} />\r\n                <circle cx=\"6\" cy=\"6\" r=\"1.5\" fill={color} opacity=\"0.7\" />\r\n                <circle cx=\"18\" cy=\"8\" r=\"1\" fill={color} opacity=\"0.6\" />\r\n                <circle cx=\"16\" cy=\"18\" r=\"1.2\" fill={color} opacity=\"0.7\" />\r\n                <circle cx=\"5\" cy=\"16\" r=\"0.8\" fill={color} opacity=\"0.5\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Devotion.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Devotion({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `devot-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                              ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":30,"nodeType":null,"endLine":5,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Devotion icon\r\nimport React from 'react';\r\n\r\nexport function Devotion({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `devot-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"30%\" r=\"60%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.5\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1.2\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <ellipse cx=\"12\" cy=\"12\" rx=\"10\" ry=\"12\" fill={`url(#${id}-aura)`} />\r\n            <path d=\"M7 10c0-3 2-5 5-5s5 2 5 5c0 4-5 9-5 9s-5-5-5-9z\" fill={color} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Export.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Export({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `export-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Export icon\r\nimport React from 'react';\r\n\r\nexport function Export({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `export-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <path d=\"M12 3v12\" />\r\n                <path d=\"M8 7l4-4 4 4\" />\r\n                <path d=\"M4 15v4a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-4\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Fire.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Fire({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `fire-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                             ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":29,"nodeType":null,"endLine":5,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Fire icon\r\nimport React from 'react';\r\n\r\nexport function Fire({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `fire-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <linearGradient id={`${id}-grad`} x1=\"50%\" y1=\"100%\" x2=\"50%\" y2=\"0%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.4\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"1\" />\r\n                </linearGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <path d=\"M12 22c-4 0-7-3-7-7 0-3 2-5 3-7 0 2 1 3 3 3 0-4 2-9 4-9 0 5 4 6 4 10 0 4-3 10-7 10z\" fill={`url(#${id}-grad)`} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Flow.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Flow({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `flow-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                             ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":29,"nodeType":null,"endLine":5,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Flow icon\r\nimport React from 'react';\r\n\r\nexport function Flow({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `flow-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <linearGradient id={`${id}-grad`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.3\" />\r\n                    <stop offset=\"50%\" stopColor={color} stopOpacity=\"0.9\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.3\" />\r\n                </linearGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" strokeWidth=\"2\" strokeLinecap=\"round\">\r\n                <path d=\"M3 6c4-3 6 3 10 0s6 3 8 0\" stroke={`url(#${id}-grad)`} />\r\n                <path d=\"M3 12c4-3 6 3 10 0s6 3 8 0\" stroke={color} />\r\n                <path d=\"M3 18c4-3 6 3 10 0s6 3 8 0\" stroke={`url(#${id}-grad)`} />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Foundation.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Foundation({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `found-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                              ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg","line":5,"column":30,"nodeType":null,"endLine":5,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Foundation icon\r\nimport React from 'react';\r\n\r\nexport function Foundation({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `found-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg\r\n            width={size}\r\n            height={size}\r\n            viewBox=\"0 0 24 24\"\r\n            className={className}\r\n        >\r\n            <defs>\r\n                <linearGradient id={`${id}-leaf`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.8\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.3\" />\r\n                </linearGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1.2\" result=\"blur\" />\r\n                    <feMerge>\r\n                        <feMergeNode in=\"blur\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`}>\r\n                {/* Stem */}\r\n                <path d=\"M12 22V10\" stroke={color} strokeWidth=\"2\" fill=\"none\" />\r\n                {/* Left leaf */}\r\n                <path d=\"M12 13c-4-4-8 0-8 0s0 4 4 4\" fill={`url(#${id}-leaf)`} />\r\n                {/* Right leaf */}\r\n                <path d=\"M12 8c4-4 8 0 8 0s0 4-4 4\" fill={`url(#${id}-leaf)`} />\r\n                {/* Ground glow */}\r\n                <path d=\"M6 22h12\" stroke={color} strokeWidth=\"2\" strokeOpacity=\"0.6\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Frozen.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Frozen({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `frozen-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Frozen icon\r\nimport React from 'react';\r\n\r\nexport function Frozen({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `frozen-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`} stroke={color} strokeWidth=\"1.5\" strokeLinecap=\"round\">\r\n                <path d=\"M12 2v20M2 12h20\" />\r\n                <path d=\"M4.5 4.5l15 15M4.5 19.5l15-15\" strokeOpacity=\"0.6\" />\r\n                <path d=\"M12 6l-2-2M12 6l2-2M12 18l-2 2M12 18l2 2\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Grounding.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Grounding({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `ground-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Grounding icon\r\nimport React from 'react';\r\n\r\nexport function Grounding({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `ground-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.8\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <circle cx=\"12\" cy=\"12\" r=\"11\" fill={`url(#${id}-aura)`} />\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"8\" strokeOpacity=\"0.4\" />\r\n                <path d=\"M12 4v4M12 16v4M4 12h4M16 12h4\" />\r\n            </g>\r\n            <circle cx=\"12\" cy=\"12\" r=\"2\" fill={color} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Heart.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Heart({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `heart-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                              ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":30,"nodeType":null,"endLine":5,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Heart icon\r\nimport React from 'react';\r\n\r\nexport function Heart({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `heart-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"40%\" r=\"60%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.5\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <ellipse cx=\"12\" cy=\"12\" rx=\"10\" ry=\"10\" fill={`url(#${id}-aura)`} />\r\n            <path d=\"M12 21c-1-1-8-5-8-11 0-3 2-5 4.5-5 1.5 0 2.8.8 3.5 2 .7-1.2 2-2 3.5-2 2.5 0 4.5 2 4.5 5 0 6-7 10-8 11z\" fill={color} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Milestone.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Milestone({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `mile-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                             ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":29,"nodeType":null,"endLine":5,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Milestone icon\r\nimport React from 'react';\r\n\r\nexport function Milestone({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `mile-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <path d=\"M12 2l2 6h6l-5 4 2 6-5-4-5 4 2-6-5-4h6z\" fill={color} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Practice.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Practice({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `prac-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                             ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg","line":5,"column":29,"nodeType":null,"endLine":5,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Practice icon\r\nimport React from 'react';\r\n\r\nexport function Practice({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `prac-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg\r\n            width={size}\r\n            height={size}\r\n            viewBox=\"0 0 24 24\"\r\n            className={className}\r\n        >\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"30%\" r=\"60%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.6\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1\" result=\"blur\" />\r\n                    <feMerge>\r\n                        <feMergeNode in=\"blur\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n            </defs>\r\n            {/* Aura behind figure */}\r\n            <circle cx=\"12\" cy=\"10\" r=\"10\" fill={`url(#${id}-aura)`} />\r\n            <g filter={`url(#${id}-glow)`}>\r\n                {/* Head */}\r\n                <circle cx=\"12\" cy=\"5\" r=\"2.5\" fill={color} />\r\n                {/* Body */}\r\n                <path d=\"M12 10v4\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n                {/* Arms */}\r\n                <path d=\"M8 12c-2 0-3 2-3 2\" stroke={color} strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n                <path d=\"M16 12c2 0 3 2 3 2\" stroke={color} strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n                {/* Base */}\r\n                <path d=\"M7 18c0-3 2-4 5-4s5 1 5 4\" stroke={color} strokeWidth=\"1.5\" fill=\"none\" />\r\n                <path d=\"M6 20h12\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Sakshi.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Sakshi({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `sakshi-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Sakshi icon\r\nimport React from 'react';\r\n\r\nexport function Sakshi({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `sakshi-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.8\" />\r\n                    <stop offset=\"50%\" stopColor={color} stopOpacity=\"0.3\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" />\r\n                    <feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge>\r\n                </filter>\r\n            </defs>\r\n            <circle cx=\"12\" cy=\"12\" r=\"11\" fill={`url(#${id}-aura)`} />\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"8\" strokeOpacity=\"0.4\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"4\" strokeOpacity=\"0.7\" />\r\n            </g>\r\n            <circle cx=\"12\" cy=\"12\" r=\"1.5\" fill={color} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Spiral.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Spiral({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `spiral-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Spiral icon\r\nimport React from 'react';\r\n\r\nexport function Spiral({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `spiral-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <path d=\"M12 12c0-1 1-2 2-2s2 1 2 2c0 2-2 4-4 4s-5-2-5-5c0-4 4-7 7-7s8 4 8 8c0 5-5 10-10 10\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\StreakActive.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function StreakActive({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `streak-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - StreakActive icon\r\nimport React from 'react';\r\n\r\nexport function StreakActive({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `streak-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <linearGradient id={`${id}-grad`} x1=\"50%\" y1=\"100%\" x2=\"50%\" y2=\"0%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.4\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"1\" />\r\n                </linearGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"2\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <path d=\"M12 22c-4 0-7-3-7-7 0-3 2-5 3-7 0 2 1 3 3 3 0-4 2-9 4-9 0 5 4 6 4 10 0 4-3 10-7 10z\" fill={`url(#${id}-grad)`} filter={`url(#${id}-glow)`} />\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Transition.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Transition({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `trans-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                              ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":30,"nodeType":null,"endLine":5,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Transition icon\r\nimport React from 'react';\r\n\r\nexport function Transition({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `trans-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <radialGradient id={`${id}-aura`} cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.6\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <circle cx=\"12\" cy=\"12\" r=\"11\" fill={`url(#${id}-aura)`} />\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\">\r\n                <path d=\"M4 12h16M12 4v16\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Unwitnessed.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Unwitnessed({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `unwit-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                              ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":30,"nodeType":null,"endLine":5,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Unwitnessed icon\r\nimport React from 'react';\r\n\r\nexport function Unwitnessed({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `unwit-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" stroke={color} strokeWidth=\"1.5\" strokeLinecap=\"round\">\r\n                <path d=\"M2 12s4-7 10-7 10 7 10 7-4 7-10 7-10-7-10-7z\" />\r\n                <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n                <path d=\"M1 1l22 22\" strokeWidth=\"2\" />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Vipassana.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Vipassana({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `vipassana-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                                  ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>","line":5,"column":34,"nodeType":null,"endLine":5,"endColumn":47}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Vipassana icon\r\nimport React from 'react';\r\n\r\nexport function Vipassana({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `vipassana-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <linearGradient id={`${id}-grad`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.3\" />\r\n                    <stop offset=\"50%\" stopColor={color} stopOpacity=\"0.8\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.3\" />\r\n                </linearGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1\" result=\"blur\" />\r\n                    <feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge>\r\n                </filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`} fill=\"none\" strokeWidth=\"2\" strokeLinecap=\"round\">\r\n                <path d=\"M2 6c3-2 5 2 8 0s5-2 8 0 4 2 4 0\" stroke={`url(#${id}-grad)`} />\r\n                <path d=\"M2 12c3-2 5 2 8 0s5-2 8 0 4 2 4 0\" stroke={color} />\r\n                <path d=\"M2 18c3-2 5 2 8 0s5-2 8 0 4 2 4 0\" stroke={`url(#${id}-grad)`} />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Visualization.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Visualization({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `viz-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                            ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg","line":5,"column":28,"nodeType":null,"endLine":5,"endColumn":41}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Visualization icon\r\nimport React from 'react';\r\n\r\nexport function Visualization({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `viz-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg\r\n            width={size}\r\n            height={size}\r\n            viewBox=\"0 0 24 24\"\r\n            className={className}\r\n        >\r\n            <defs>\r\n                <radialGradient id={`${id}-iris`} cx=\"50%\" cy=\"50%\" r=\"50%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"1\" />\r\n                    <stop offset=\"70%\" stopColor={color} stopOpacity=\"0.5\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.2\" />\r\n                </radialGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1.5\" result=\"blur\" />\r\n                    <feMerge>\r\n                        <feMergeNode in=\"blur\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`}>\r\n                {/* Eye outline */}\r\n                <path\r\n                    d=\"M2 12s4-7 10-7 10 7 10 7-4 7-10 7-10-7-10-7z\"\r\n                    fill=\"none\"\r\n                    stroke={color}\r\n                    strokeWidth=\"1.5\"\r\n                    strokeOpacity=\"0.6\"\r\n                />\r\n                {/* Iris glow */}\r\n                <circle cx=\"12\" cy=\"12\" r=\"4\" fill={`url(#${id}-iris)`} />\r\n                {/* Bright pupil */}\r\n                <circle cx=\"12\" cy=\"12\" r=\"1.5\" fill={color} />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Warning.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Warning({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `warn-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                             ^^^^^^^^^^^^^ Cannot call impure function\n  6 |     return (\n  7 |         <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\n  8 |             <defs>","line":5,"column":29,"nodeType":null,"endLine":5,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Warning icon\r\nimport React from 'react';\r\n\r\nexport function Warning({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `warn-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 24 24\" className={className}>\r\n            <defs>\r\n                <filter id={`${id}-glow`}><feGaussianBlur stdDeviation=\"1\" result=\"blur\" /><feMerge><feMergeNode in=\"blur\" /><feMergeNode in=\"SourceGraphic\" /></feMerge></filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`}>\r\n                <path d=\"M12 3L2 21h20L12 3z\" fill=\"none\" stroke={color} strokeWidth=\"1.5\" />\r\n                <path d=\"M12 10v4\" stroke={color} strokeWidth=\"2\" />\r\n                <circle cx=\"12\" cy=\"17\" r=\"1\" fill={color} />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\Wisdom.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  3 |\n  4 | export function Wisdom({ size = 24, color = 'currentColor', className = '' }) {\n> 5 |     const id = `wisdom-glow-${Math.random().toString(36).substr(2, 9)}`;\n    |                               ^^^^^^^^^^^^^ Cannot call impure function\n  6 |\n  7 |     return (\n  8 |         <svg","line":5,"column":31,"nodeType":null,"endLine":5,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Glow style - Wisdom icon\r\nimport React from 'react';\r\n\r\nexport function Wisdom({ size = 24, color = 'currentColor', className = '' }) {\r\n    const id = `wisdom-glow-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n    return (\r\n        <svg\r\n            width={size}\r\n            height={size}\r\n            viewBox=\"0 0 24 24\"\r\n            className={className}\r\n        >\r\n            <defs>\r\n                <linearGradient id={`${id}-page`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.7\" />\r\n                    <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.2\" />\r\n                </linearGradient>\r\n                <filter id={`${id}-glow`}>\r\n                    <feGaussianBlur stdDeviation=\"1\" result=\"blur\" />\r\n                    <feMerge>\r\n                        <feMergeNode in=\"blur\" />\r\n                        <feMergeNode in=\"SourceGraphic\" />\r\n                    </feMerge>\r\n                </filter>\r\n            </defs>\r\n            <g filter={`url(#${id}-glow)`}>\r\n                {/* Left page */}\r\n                <path\r\n                    d=\"M2 4v14c0 1 1 2 2 2h6c1 0 2-1 2-1V5c-2 0-5 0-6 1s-3 2-4 2V4z\"\r\n                    fill={`url(#${id}-page)`}\r\n                />\r\n                {/* Right page */}\r\n                <path\r\n                    d=\"M22 4v14c0 1-1 2-2 2h-6c-1 0-2-1-2-1V5c2 0 5 0 6 1s3 2 4 2V4z\"\r\n                    fill={`url(#${id}-page)`}\r\n                />\r\n                {/* Glowing spine */}\r\n                <rect x=\"11\" y=\"5\" width=\"2\" height=\"14\" fill={color} />\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\glow\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Bhakti.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\BodyScan.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Bookmark.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Breathwork.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Broken.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Copy.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Cosmos.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Devotion.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Export.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Fire.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Flow.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Foundation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Frozen.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Grounding.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Heart.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Milestone.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Practice.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Sakshi.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Spiral.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\StreakActive.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Transition.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Unwitnessed.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Vipassana.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Visualization.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Warning.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\Wisdom.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\icons\\library\\line\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\main.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file has exports. Move your component(s) to a separate file.","line":18,"column":7,"nodeType":"Identifier","messageId":"noExport","endLine":18,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport App from \"./App.jsx\";\r\nimport { TracePage } from \"./pages/TracePage.jsx\";\r\nimport \"./immanence.css\";\r\nimport \"./index.css\";\r\n\r\n// Simple path-based routing (no React Router needed)\r\nconst getRoute = () => {\r\n  const path = window.location.pathname;\r\n  // Handle both /Immanence/trace and /trace\r\n  if (path.endsWith('/trace') || path.endsWith('/trace/')) {\r\n    return 'trace';\r\n  }\r\n  return 'app';\r\n};\r\n\r\nconst RootComponent = () => {\r\n  const route = getRoute();\r\n\r\n  if (route === 'trace') {\r\n    return <TracePage />;\r\n  }\r\n\r\n  return <App />;\r\n};\r\n\r\nconst container = document.getElementById(\"root\");\r\nif (!window._root) {\r\n  window._root = ReactDOM.createRoot(container);\r\n}\r\nwindow._root.render(\r\n  <React.StrictMode>\r\n    <RootComponent />\r\n  </React.StrictMode>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\pages\\TracePage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[12,26],"text":""},"desc":"Remove unused variable 'useState'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { SigilSealingArea } from '../components/SigilSealingArea';\r\nimport { useDisplayModeStore } from '../state/displayModeStore.js';\r\nimport { ThemeProvider } from '../context/ThemeContext.jsx';\r\n\r\n/**\r\n * Minimal page for quick sigil tracing.\r\n * Accessed via /trace route or App Shortcut.\r\n * Uses the working SigilSealingArea component from Navigation section.\r\n */\r\nexport function TracePage() {\r\n    const colorScheme = useDisplayModeStore(s => s.colorScheme);\r\n    const isLight = colorScheme === 'light';\r\n\r\n    const handleClose = () => {\r\n        // Close the PWA window/tab\r\n        window.close();\r\n        // Fallback: if window.close() is blocked, navigate to about:blank\r\n        setTimeout(() => {\r\n            window.location.href = 'about:blank';\r\n        }, 100);\r\n    };\r\n\r\n    return (\r\n        <ThemeProvider currentStage=\"Flame\">\r\n            <div\r\n                className={`min-h-screen flex flex-col items-center justify-center p-6 ${isLight ? 'light-mode' : ''}`}\r\n                style={{\r\n                    background: isLight\r\n                        ? 'linear-gradient(180deg, #F5F0E6 0%, #EDE5D8 100%)'\r\n                        : 'black'\r\n                }}\r\n            >\r\n                {/* Close button */}\r\n                <button\r\n                    onClick={handleClose}\r\n                    className=\"absolute top-4 right-4 px-4 py-2 rounded-full text-xs uppercase tracking-widest transition-all\"\r\n                    style={{\r\n                        background: isLight ? 'rgba(255, 250, 240, 0.9)' : 'rgba(10, 5, 15, 0.8)',\r\n                        color: isLight ? 'rgba(100, 80, 60, 0.6)' : 'rgba(253, 251, 245, 0.4)',\r\n                        border: `1px solid ${isLight ? 'rgba(180, 120, 40, 0.2)' : 'rgba(255, 220, 120, 0.1)'}`,\r\n                        fontFamily: 'var(--font-display)'\r\n                    }}\r\n                >\r\n                    Close\r\n                </button>\r\n\r\n                {/* Sigil Sealing Area */}\r\n                <div className=\"w-full max-w-lg\">\r\n                    <SigilSealingArea />\r\n                </div>\r\n            </div>\r\n        </ThemeProvider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\services\\audioGuidanceService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\services\\benchmarkManager.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\services\\circuitIntegration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\services\\circuitManager.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\services\\cycleManager.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\services\\llmService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\services\\ritualService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\applicationStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\attentionStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\chainStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\circuitJournalStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\circuitManager.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\curriculumStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\cycleStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\displayModeStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\historyStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\journalStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\lunarStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\mandalaStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\modeTrainingStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\navigationStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\pathStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\practiceConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\practiceStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\progressStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\ritualStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\settingsStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\sigilStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\stageConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\trackingStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\videoStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\waveStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\state\\wisdomStore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\styles\\cardMaterial.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\theme\\stageColors.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\attentionPathScoring.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\chladniMath.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\dateUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\devDataGenerator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\devHelpers.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\dynamicLighting.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_isLight' is assigned a value but never used.","line":36,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"_isLight"},"fix":{"range":[1438,1456],"text":""},"desc":"Remove unused variable '_isLight'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/utils/dynamicLighting.js\r\n// Calculate gradient angles for gold borders based on element position relative to avatar\r\n\r\n/**\r\n * Calculates the gradient angle for a gold border based on element position\r\n * relative to the avatar (light source)\r\n * @param {DOMRect} elementRect - The element's bounding rectangle\r\n * @param {Object} avatarCenter - Avatar center coordinates {x, y}\r\n * @returns {number} Gradient angle in degrees (0-360)\r\n */\r\nexport function calculateGradientAngle(elementRect, avatarCenter) {\r\n    // Calculate element center\r\n    const elementCenterX = elementRect.left + elementRect.width / 2;\r\n    const elementCenterY = elementRect.top + elementRect.height / 2;\r\n\r\n    // Calculate angle from avatar to element\r\n    const deltaX = elementCenterX - avatarCenter.x;\r\n    const deltaY = elementCenterY - avatarCenter.y;\r\n\r\n    // Convert to degrees (0┬░ = right, 90┬░ = down, 180┬░ = left, 270┬░ = up)\r\n    let angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);\r\n\r\n    // Add 180┬░ to get the \"light from avatar\" direction\r\n    // This makes the gradient point FROM the avatar TO the element\r\n    angle = (angle + 180) % 360;\r\n\r\n    return Math.round(angle);\r\n}\r\n\r\n/**\r\n * Gets the gold gradient string with dynamic angle\r\n * @param {number} angle - Gradient angle in degrees\r\n * @param {boolean} isLight - Light mode flag\r\n * @returns {string} CSS gradient string\r\n */\r\nexport function getDynamicGoldGradient(angle, _isLight = false) {\n    return `linear-gradient(${angle}deg, #AF8B2C 0%, #D4AF37 25%, #FBF5B7 50%, #D4AF37 75%, #AF8B2C 100%)`;\r\n}\r\n\r\n/**\r\n * Hook to get avatar center position (assumes avatar is centered in viewport)\r\n * @returns {Object} Avatar center coordinates {x, y}\r\n */\r\nexport function getAvatarCenter() {\r\n    // Avatar is typically centered horizontally and in upper portion of viewport\r\n    const viewportWidth = window.innerWidth;\r\n    const viewportHeight = window.innerHeight;\r\n\r\n    return {\r\n        x: viewportWidth / 2,\r\n        y: viewportHeight * 0.25 // Roughly where the avatar sits\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\entryExport.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\frequencyLibrary.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\geometryRenderers.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\imagePreloader.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\mockAttentionData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\stamps.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_category' is assigned a value but never used.","line":123,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"_category"},"fix":{"range":[5121,5144],"text":""},"desc":"Remove unused variable '_category'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/utils/stamps.js\r\n// Image and video-based stamp system for Vipassana thoughts\r\n// Loads PNG assets and WebM videos from public/vipassana/stamps/\r\n\r\n// Image file mappings (based on actual files in public/vipassana/stamps/)\r\nexport const STAMP_FILES = {\r\n    birds: ['birds1', 'birds2', 'birds3', 'birds4', 'birds5', 'birds6', 'birds8', 'bird7', 'birds no watermark'],\r\n    clouds: ['cloud2', 'cloud3', 'cloud4', 'cloud5', 'cloud6', 'cloud7', 'cloud8', 'cloud9', 'Untitled', 'clouds no watermark'],\r\n    lanterns: ['lanterns1', 'lantern2', 'lantern3', 'lantern4', 'lantern5', 'lantern6', 'lantern8', 'lantern9', 'lanterns s no watermark'],\r\n    leaves: ['leaves1', 'leaves2', 'leaves3', 'leaves4', 'leaves2 no watermark'],\r\n};\r\n\r\n// Video stamp mappings (WebM files with alpha transparency)\r\nconst VIDEO_STAMP_FILES = {\r\n    birds: ['singlebird'], // singlebird.webm\r\n};\r\n\r\nexport const STAMP_CONFIG = {\r\n    clouds: { count: STAMP_FILES.clouds.length },\r\n    birds: { count: STAMP_FILES.birds.length + (VIDEO_STAMP_FILES.birds?.length || 0) },\r\n    leaves: { count: STAMP_FILES.leaves.length },\r\n    lanterns: { count: STAMP_FILES.lanterns.length },\r\n};\r\n\r\n// Category tint colors (applied as overlay)\r\nconst CATEGORY_TINTS = {\r\n    neutral: { r: 255, g: 255, b: 255, a: 0 },        // No tint\r\n    future: { r: 96, g: 165, b: 250, a: 0.25 },       // Blue wash\r\n    past: { r: 251, g: 191, b: 36, a: 0.25 },         // Amber wash\r\n    evaluating: { r: 244, g: 114, b: 182, a: 0.25 },  // Pink wash\r\n    body: { r: 74, g: 222, b: 128, a: 0.2 },          // Green wash\r\n};\r\n\r\n// Stamp cache: Map<string, {element: HTMLImageElement|HTMLVideoElement, type: 'image'|'video'}>\r\nlet stampCache = null;\r\nlet loadingPromise = null;\r\n\r\n/**\r\n * Initialize stamp system - loads all images and videos\r\n * Returns a promise that resolves when all assets are loaded\r\n */\r\nexport function initializeStamps() {\r\n    if (stampCache) return Promise.resolve(stampCache);\r\n    if (loadingPromise) return loadingPromise;\r\n\r\n    stampCache = new Map();\r\n    const loadPromises = [];\r\n\r\n    // Load all GIF stamp images\r\n    for (const [type, fileNumbers] of Object.entries(STAMP_FILES)) {\r\n        for (const fileName of fileNumbers) {\r\n            const img = new Image();\r\n            const path = `${import.meta.env.BASE_URL}vipassana/stamps/${type}/${fileName}.gif`;\r\n\r\n            const promise = new Promise((resolve) => {\r\n                img.onload = () => {\r\n                    stampCache.set(`${type}-${fileName}`, { element: img, type: 'image' });\r\n                    resolve();\r\n                };\r\n                img.onerror = () => {\r\n                    console.warn(`[Stamps] Failed to load GIF: ${path}`);\r\n                    resolve(); // Don't reject, just skip this stamp\r\n                };\r\n            });\r\n\r\n            img.src = path;\r\n            loadPromises.push(promise);\r\n        }\r\n    }\r\n\r\n    // Load all WebM video stamps\r\n    for (const [type, fileNames] of Object.entries(VIDEO_STAMP_FILES)) {\r\n        for (const name of fileNames) {\r\n            const video = document.createElement('video');\r\n            const path = `${import.meta.env.BASE_URL}vipassana/stamps/${type}/${name}.webm`;\r\n\r\n            // Configure video for canvas rendering\r\n            video.muted = true;\r\n            video.loop = true;\r\n            video.playsInline = true;\r\n            video.autoplay = true;\r\n            video.preload = 'auto';\r\n\r\n            const promise = new Promise((resolve) => {\r\n                video.onloadeddata = () => {\r\n                    // Start playing the video\r\n                    video.play().then(() => {\r\n                        stampCache.set(`${type}-video-${name}`, { element: video, type: 'video' });\r\n                        resolve();\r\n                    }).catch(err => {\r\n                        console.warn(`[Stamps] Failed to play video: ${path}`, err);\r\n                        resolve();\r\n                    });\r\n                };\r\n                video.onerror = () => {\r\n                    console.warn(`[Stamps] Failed to load video: ${path}`);\r\n                    resolve(); // Don't reject, just skip this stamp\r\n                };\r\n            });\r\n\r\n            video.src = path;\r\n            loadPromises.push(promise);\r\n        }\r\n    }\r\n\r\n    loadingPromise = Promise.all(loadPromises).then(() => {\r\n        const imageCount = Array.from(stampCache.values()).filter(s => s.type === 'image').length;\r\n        const videoCount = Array.from(stampCache.values()).filter(s => s.type === 'video').length;\r\n        console.log(`[Stamps] Loaded ${imageCount} stamp images and ${videoCount} video stamps`);\r\n        return stampCache;\r\n    });\r\n\r\n    return loadingPromise;\r\n}\r\n\r\n/**\r\n * Get a stamp for drawing\r\n * @param {string} theme - 'clouds' | 'birds' | 'leaves' | 'lanterns'\r\n * @param {number} variant - Stamp variant index (0-based)\r\n * @param {string} category - 'neutral' | 'future' | 'past' | 'body' | 'evaluating'\r\n * @returns {{element: HTMLImageElement|HTMLVideoElement, type: 'image'|'video'}|null}\r\n */\r\nexport function getStamp(theme, variant, _category = 'neutral') {\n    if (!stampCache) return null;\r\n\r\n    const fileNumbers = STAMP_FILES[theme];\r\n    const videoFiles = VIDEO_STAMP_FILES[theme] || [];\r\n    const totalCount = (fileNumbers?.length || 0) + videoFiles.length;\r\n\r\n    if (variant >= totalCount) return null;\r\n\r\n    // Check if this variant is a video (videos come after images)\r\n    const imageCount = fileNumbers?.length || 0;\r\n    if (variant >= imageCount && videoFiles.length > 0) {\r\n        // This is a video stamp\r\n        const videoIndex = variant - imageCount;\r\n        const videoName = videoFiles[videoIndex];\r\n        return stampCache.get(`${theme}-video-${videoName}`);\r\n    }\r\n\r\n    // This is an image stamp\r\n    if (!fileNumbers || variant >= fileNumbers.length) return null;\r\n    const fileName = fileNumbers[variant];\r\n    return stampCache.get(`${theme}-${fileName}`);\r\n}\r\n\r\n/**\r\n * Get category tint color\r\n */\r\nexport function getCategoryTint(category) {\r\n    return CATEGORY_TINTS[category] || CATEGORY_TINTS.neutral;\r\n}\r\n\r\n/**\r\n * Get haze stamps for particle overlay (not implemented for image-based system)\r\n */\r\nexport function getHazeStamps() {\r\n    return [];\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\textUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Unity Apps\\immanence-os\\src\\utils\\thoughtRenderers.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_theme' is defined but never used.","line":42,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"_theme"},"fix":{"range":[1393,1401],"text":""},"desc":"Remove unused variable '_theme'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_theme' is defined but never used.","line":68,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"_theme"},"fix":{"range":[2143,2151],"text":""},"desc":"Remove unused variable '_theme'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_theme' is defined but never used.","line":91,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"_theme"},"fix":{"range":[2734,2742],"text":""},"desc":"Remove unused variable '_theme'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_theme' is defined but never used.","line":119,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"_theme"},"fix":{"range":[3429,3437],"text":""},"desc":"Remove unused variable '_theme'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/utils/thoughtRenderers.js\r\n// Theme-specific rendering functions for Vipassana thoughts\r\n// Fixed: Gradients now created at correct position after translation\r\n\r\nimport { THOUGHT_CATEGORIES } from '../data/vipassanaThemes';\r\n\r\n/**\r\n * Create a radial gradient at current position (after translate)\r\n * @param {CanvasRenderingContext2D} ctx \r\n * @param {string} type - gradient type ('soft', 'glow', etc.)\r\n * @param {string} color - base color\r\n * @param {number} radius - gradient radius\r\n * @returns {CanvasGradient}\r\n */\r\nfunction createGradient(ctx, type, color, radius) {\r\n    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, radius);\r\n\r\n    switch (type) {\r\n        case 'soft':\r\n            // Soft cloud-like gradient\r\n            gradient.addColorStop(0, color);\r\n            gradient.addColorStop(0.5, color);\r\n            gradient.addColorStop(1, 'transparent');\r\n            break;\r\n        case 'glow':\r\n            // Glow effect without blur\r\n            gradient.addColorStop(0, color);\r\n            gradient.addColorStop(0.5, color.replace('0.6)', '0.3)'));\r\n            gradient.addColorStop(1, 'transparent');\r\n            break;\r\n        default:\r\n            gradient.addColorStop(0, color);\r\n            gradient.addColorStop(1, 'transparent');\r\n    }\r\n\r\n    return gradient;\r\n}\r\n\r\n/**\r\n * Draw a bird silhouette\r\n */\r\nexport function drawBird(ctx, thought, _theme) {\n    const categoryData = THOUGHT_CATEGORIES[thought.category] || THOUGHT_CATEGORIES.neutral;\r\n\r\n    ctx.save();\r\n    ctx.translate(thought.x, thought.y);\r\n\r\n    // Create gradient AFTER translate so it's centered at thought position\r\n    const gradient = createGradient(ctx, 'soft', categoryData.color, 36);\r\n    ctx.fillStyle = gradient;\r\n\r\n    // Bird silhouette using bezier curves\r\n    ctx.beginPath();\r\n    ctx.moveTo(-30, 0);\r\n    ctx.quadraticCurveTo(-18, -12, 0, 0);\r\n    ctx.quadraticCurveTo(18, -12, 30, 0);\r\n    ctx.quadraticCurveTo(18, 6, 0, -3);\r\n    ctx.quadraticCurveTo(-18, 6, -30, 0);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n\r\n    ctx.restore();\r\n}\r\n\r\n/**\r\n * Draw a leaf shape\r\n */\r\nexport function drawLeaf(ctx, thought, _theme) {\n    const categoryData = THOUGHT_CATEGORIES[thought.category] || THOUGHT_CATEGORIES.neutral;\r\n\r\n    ctx.save();\r\n    ctx.translate(thought.x, thought.y);\r\n\r\n    const gradient = createGradient(ctx, 'soft', categoryData.color, 36);\r\n    ctx.fillStyle = gradient;\r\n\r\n    // Leaf shape\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, -30);\r\n    ctx.quadraticCurveTo(24, -6, 0, 30);\r\n    ctx.quadraticCurveTo(-24, -6, 0, -30);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n\r\n    ctx.restore();\r\n}\r\n\r\n/**\r\n * Draw a cloud (multiple overlapping circles)\r\n */\r\nexport function drawCloud(ctx, thought, _theme) {\n    const categoryData = THOUGHT_CATEGORIES[thought.category] || THOUGHT_CATEGORIES.neutral;\r\n\r\n    ctx.save();\r\n    ctx.translate(thought.x, thought.y);\r\n\r\n    const gradient = createGradient(ctx, 'soft', categoryData.color, 30);\r\n    ctx.fillStyle = gradient;\r\n\r\n    // Multiple overlapping circles for cloud puffiness\r\n    ctx.beginPath();\r\n    ctx.arc(-12, 0, 20, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    ctx.beginPath();\r\n    ctx.arc(0, -6, 24, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    ctx.beginPath();\r\n    ctx.arc(12, 0, 20, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    ctx.restore();\r\n}\r\n\r\n/**\r\n * Draw a lantern (ellipse with glow)\r\n */\r\nexport function drawLantern(ctx, thought, _theme) {\n    const categoryData = THOUGHT_CATEGORIES[thought.category] || THOUGHT_CATEGORIES.neutral;\r\n\r\n    ctx.save();\r\n    ctx.translate(thought.x, thought.y);\r\n\r\n    // Outer glow using compositing\r\n    const glowGradient = createGradient(ctx, 'glow', categoryData.color, 45);\r\n    ctx.globalCompositeOperation = 'screen';\r\n    ctx.fillStyle = glowGradient;\r\n    ctx.beginPath();\r\n    ctx.ellipse(0, 0, 36, 24, 0, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Main lantern shape\r\n    ctx.globalCompositeOperation = 'source-over';\r\n    const mainGradient = createGradient(ctx, 'soft', categoryData.color, 30);\r\n    ctx.fillStyle = mainGradient;\r\n    ctx.beginPath();\r\n    ctx.ellipse(0, 0, 30, 21, 0, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    ctx.restore();\r\n}\r\n\r\n/**\r\n * Main render function - delegates to theme-specific renderer\r\n */\r\nexport function renderThought(ctx, thought, theme) {\r\n    const elementType = theme?.thoughtElement || 'cloud';\r\n\r\n    switch (elementType) {\r\n        case 'bird':\r\n            drawBird(ctx, thought, theme);\r\n            break;\r\n        case 'leaf':\r\n            drawLeaf(ctx, thought, theme);\r\n            break;\r\n        case 'lantern':\r\n            drawLantern(ctx, thought, theme);\r\n            break;\r\n        case 'cloud':\r\n        default:\r\n            drawCloud(ctx, thought, theme);\r\n            break;\r\n    }\r\n}\r\n\r\n","usedDeprecatedRules":[]}]
