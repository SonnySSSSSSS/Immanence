import{D as e,E as t,I as n,J as r,K as i,R as a,S as o,V as s,W as c,Z as l,a as u,at as d,b as f,c as p,d as m,i as h,it as g,k as _,l as v,nt as y,o as b,s as x,tt as ee,u as te,w as ne,x as re,y as S}from"./index-NOppfZ3u.js";import{a as ie,c as C,d as ae,f as oe,i as se,l as w,m as ce,n as T,o as E,p as D,r as le,s as O,t as k,u as A}from"./cardTuner-i_DwiPKa.js";import{t as ue}from"./pickerChannel-BlqIvKQn.js";import{a as de,i as fe,n as pe,o as me,r as he,s as ge,t as _e}from"./controlsFxPresets-D9y6oR4b.js";import{a as ve,c as ye,i as be,n as xe,o as Se,s as Ce,t as we}from"./plateFxPresets-DA-YbPFg.js";var j=ee(),M=d(g(),1);function Te(e,t){let n=[],r=new Date;return!t||!Array.isArray(t)?[]:(t.forEach((t,i)=>{if(t>0){let a=new Date(r);a.setDate(a.getDate()-(6-i)),n.push({id:`mock_${e}_${i}_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,domain:e,date:a.toISOString(),dateKey:c(a),duration:t,timestamp:a.getTime(),metadata:{subType:`mock`,mock:!0}})}}),n)}const Ee={beginner:{label:`üå± Beginner (5-10 min)`,breathwork:[5,7,0,8,10,0,6],visualization:[0,5,5,0,6,0,0],wisdom:[3,0,5,5,0,4,0]},dedicated:{label:`üî• Dedicated (15-25 min)`,breathwork:[15,18,20,0,22,25,28],visualization:[10,12,15,18,20,0,15],wisdom:[8,10,12,0,15,18,20]},intense:{label:`‚ö° Intense (30-60 min)`,breathwork:[30,35,40,60,45,35,40],visualization:[25,30,35,45,40,30,35],wisdom:[20,25,30,40,35,25,30]},burnout:{label:`üíÄ Burnout (declining)`,breathwork:[45,40,30,20,10,5,0],visualization:[35,30,25,15,8,0,0],wisdom:[25,20,15,10,5,0,0]},chaotic:{label:`üå™Ô∏è Chaotic (inconsistent)`,breathwork:[0,80,0,0,15,0,60],visualization:[45,0,0,20,0,0,35],wisdom:[0,0,60,0,0,25,0]}};var De=`immanence.tutorial.overrides`,Oe=[{key:`breath-01.webp`,label:`Breath 01`},{key:`breath-02.webp`,label:`Breath 02`},{key:`stillness-01.webp`,label:`Stillness 01`},{key:`practice-01.webp`,label:`Practice 01`},{key:`awareness-01.webp`,label:`Awareness 01`}];function N(e){let t=[];return!e||typeof e!=`object`?(t.push(`Must be an object`),t):(typeof e.title!=`string`&&t.push(`Missing or invalid "title" (must be string)`),Array.isArray(e.steps)?(e.steps.forEach((e,n)=>{if(typeof e.title!=`string`&&t.push(`Step ${n+1}: missing or invalid "title"`),typeof e.body!=`string`&&t.push(`Step ${n+1}: missing or invalid "body"`),e.placement&&![`top`,`right`,`bottom`,`left`,`center`].includes(e.placement)&&t.push(`Step ${n+1}: invalid "placement" (must be top|right|bottom|left|center)`),e.target!==null&&typeof e.target!=`string`&&t.push(`Step ${n+1}: invalid "target" (must be null or string)`),e.media!==void 0){if(!Array.isArray(e.media))t.push(`Step ${n+1}: invalid "media" (must be array)`);else if(e.media.length>1)t.push(`Step ${n+1}: max 1 image allowed per step`);else if(e.media.length===1){let r=e.media[0];!r.key||typeof r.key!=`string`?t.push(`Step ${n+1}: media missing or invalid "key"`):/^[a-zA-Z0-9._-]+\.(png|jpg|jpeg|webp)$/.test(r.key)?r.key.includes(`/`)&&t.push(`Step ${n+1}: media key contains "/" (path traversal not allowed)`):t.push(`Step ${n+1}: media key must match ^[a-zA-Z0-9._-]+\\.(png|jpg|jpeg|webp)$`),(!r.alt||typeof r.alt!=`string`||r.alt.length<3)&&t.push(`Step ${n+1}: media "alt" required, min 3 chars`)}}}),t):(t.push(`Missing or invalid "steps" (must be array)`),t))}function ke(){let[e,t]=(0,M.useState)(``),[n,r]=(0,M.useState)(``),[i,a]=(0,M.useState)([]),[o,s]=(0,M.useState)(``),[c,l]=(0,M.useState)((()=>{try{let e=localStorage.getItem(De);return e?JSON.parse(e):{}}catch{return{}}})()),u=Array.from(new Set([...Object.keys(p),...Object.keys(c)])).sort();return(0,M.useEffect)(()=>{if(!e)return;let t=setTimeout(()=>{let t=c[e]||p[e];t?(r(JSON.stringify(t,null,2)),a([]),s(c[e]?`Loaded saved override`:`Loaded from registry`)):s(`Not found`)},0);return()=>clearTimeout(t)},[e,c]),(0,j.jsxs)(`div`,{className:`space-y-3 p-4 bg-black/20 rounded-lg border border-white/10`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/90 font-semibold mb-2`,children:`Tutorial Script Editor`}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`label`,{className:`text-[10px] text-white/60 mb-1 block`,children:`Tutorial ID`}),(0,j.jsxs)(`select`,{value:e,onChange:e=>t(e.target.value),className:`w-full px-2 py-1.5 rounded bg-black/40 border border-white/20 text-xs text-white/90`,children:[(0,j.jsx)(`option`,{value:``,children:`-- Select tutorial --`}),u.map(e=>(0,j.jsxs)(`option`,{value:e,children:[e,` `,c[e]?`(override)`:``]},e))]})]}),e&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(`textarea`,{value:n,onChange:e=>r(e.target.value),className:`w-full h-64 px-3 py-2 rounded bg-black/60 border border-white/20 text-[11px] text-white/90 font-mono resize-y`,placeholder:`Tutorial JSON...`,spellCheck:!1}),(0,j.jsxs)(`div`,{className:`text-[10px] text-white/60 space-y-2 bg-black/30 p-2 rounded border border-white/10`,children:[(0,j.jsx)(`div`,{className:`font-semibold`,children:`üì∏ Whitelisted Tutorial Images:`}),(0,j.jsx)(`div`,{className:`grid grid-cols-3 gap-1`,children:Oe.map(e=>(0,j.jsx)(`div`,{className:`text-[9px] bg-black/50 p-1 rounded`,children:e.label},e.key))}),(0,j.jsxs)(`div`,{className:`pt-2 border-t border-white/10`,children:[(0,j.jsx)(`div`,{className:`font-semibold`,children:`Media JSON format (add to step):`}),(0,j.jsx)(`code`,{className:`block text-[9px] whitespace-pre-wrap break-words bg-black/50 p-1 rounded mt-1`,children:`"media": [{
  "key": "breath-01.webp",
  "alt": "Breath practice diagram",
  "caption": "Optional caption"
}]`})]})]}),i.length>0&&(0,j.jsx)(`div`,{className:`text-[10px] text-red-400 space-y-1`,children:i.map((e,t)=>(0,j.jsxs)(`div`,{children:[`‚Ä¢ `,e]},t))}),o&&(0,j.jsx)(`div`,{className:`text-[10px] text-green-400`,children:o}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,j.jsx)(`button`,{onClick:()=>{if(!e)return;let t=p[e];t?(r(JSON.stringify(t,null,2)),a([]),s(`Loaded from registry`)):s(`Not found in registry`)},className:`px-3 py-1.5 rounded text-[10px] bg-blue-500/20 text-blue-300 border border-blue-500/30 hover:bg-blue-500/30 transition-colors`,children:`Load Registry`}),(0,j.jsx)(`button`,{onClick:()=>{if(!e)return;let t=c[e];t?(r(JSON.stringify(t,null,2)),a([]),s(`Loaded saved override`)):s(`No saved override for this tutorial`)},className:`px-3 py-1.5 rounded text-[10px] bg-purple-500/20 text-purple-300 border border-purple-500/30 hover:bg-purple-500/30 transition-colors`,children:`Load Override`}),(0,j.jsx)(`button`,{onClick:()=>{try{let e=N(JSON.parse(n));a(e),e.length===0?s(`‚úì Valid tutorial JSON`):s(``)}catch(e){a([`JSON parse error: ${e.message}`]),s(``)}},className:`px-3 py-1.5 rounded text-[10px] bg-yellow-500/20 text-yellow-300 border border-yellow-500/30 hover:bg-yellow-500/30 transition-colors`,children:`Validate JSON`}),(0,j.jsx)(`button`,{onClick:()=>{if(!e){s(`Select a tutorialId first`);return}try{let t=JSON.parse(n),r=N(t);if(r.length>0){a(r),s(`Cannot save: validation failed`);return}let i={...c,[e]:t};localStorage.setItem(De,JSON.stringify(i)),l(i),a([]),s(`‚úì Saved override for "${e}"`),window.dispatchEvent(new CustomEvent(`tutorial-override-changed`))}catch(e){a([`Save failed: ${e.message}`]),s(``)}},className:`px-3 py-1.5 rounded text-[10px] bg-green-500/20 text-green-300 border border-green-500/30 hover:bg-green-500/30 transition-colors`,children:`Save Override`}),(0,j.jsx)(`button`,{onClick:()=>{if(!e)return;if(!c[e]){s(`No override to clear`);return}let t={...c};delete t[e],localStorage.setItem(De,JSON.stringify(t)),l(t),s(`‚úì Cleared override for "${e}"`),window.dispatchEvent(new CustomEvent(`tutorial-override-changed`))},className:`px-3 py-1.5 rounded text-[10px] bg-red-500/20 text-red-300 border border-red-500/30 hover:bg-red-500/30 transition-colors col-span-2`,children:`Clear Override`})]})]})]})}function Ae(){try{e.getState()._devReset(),console.log(`[DevHelper] Reset lunarStore`)}catch(e){console.warn(`[DevHelper] Failed to reset lunarStore:`,e)}try{_.getState()._devReset(),console.log(`[DevHelper] Reset pathStore`)}catch(e){console.warn(`[DevHelper] Failed to reset pathStore:`,e)}console.log(`[DevHelper] All stores reset`)}function je(){return{lunar:{progress:e.getState().progress,totalPracticeDays:e.getState().totalPracticeDays,currentStage:e.getState().getCurrentStage(),recentActivity:e.getState().recentActivity,intention:e.getState().intention,vacationMode:e.getState().vacationMode,ceilingCyclesCompleted:e.getState().ceilingCyclesCompleted},path:{currentPath:_.getState().currentPath,pathStatus:_.getState().pathStatus,pendingPath:_.getState().pendingPath,pendingCeremony:_.getState().pendingCeremony,complementaryPaths:_.getState().complementaryPaths,practiceLogCount:_.getState().practiceLog?.length||0},progress:{sessionsCount:s.getState().sessions?.length||0,streak:s.getState().streak,lastPracticeType:s.getState().lastPracticeType,vacationMode:s.getState().vacation?.active||!1}}}var P=`dev-nav-btn-tuner-enabled`,Me=`dev.navButtonTuner.global.v1`;const F=Object.freeze({enabled:!1,navBtnBg:`255, 255, 255`,navBtnBgAlpha:.08,navBtnBorder:`var(--accent-30)`,navBtnBorderWidth:1,navBtnGlow:25,navBtnTextColor:`var(--accent-color)`,navBtnTextGlow:10,navBtnBackdropBlur:8,navBtnOpacity:1,navBtnHoverIntensity:.25});var I={...F},Ne=new Set,L={navBtnBg:`--nav-btn-bg`,navBtnBgAlpha:`--nav-btn-bg-alpha`,navBtnBorder:`--nav-btn-border`,navBtnBorderWidth:`--nav-btn-border-width`,navBtnGlow:`--nav-btn-glow`,navBtnTextColor:`--nav-btn-text-color`,navBtnTextGlow:`--nav-btn-text-glow`,navBtnBackdropBlur:`--nav-btn-backdrop-blur`,navBtnOpacity:`--nav-btn-opacity`,navBtnHoverIntensity:`--nav-btn-hover-intensity`};function R(){return typeof window<`u`&&typeof document<`u`&&!1}function z(e,t,n){return Math.max(e,Math.min(n,t))}function Pe(e={}){let t={...F,...e};return{enabled:!!t.enabled,navBtnBg:typeof t.navBtnBg==`string`&&t.navBtnBg.trim()?t.navBtnBg.trim():F.navBtnBg,navBtnBgAlpha:z(0,Number(t.navBtnBgAlpha)||0,1),navBtnBorder:typeof t.navBtnBorder==`string`&&t.navBtnBorder.trim()?t.navBtnBorder.trim():F.navBtnBorder,navBtnBorderWidth:z(0,Number(t.navBtnBorderWidth)||0,6),navBtnGlow:z(0,Number(t.navBtnGlow)||0,80),navBtnTextColor:typeof t.navBtnTextColor==`string`&&t.navBtnTextColor.trim()?t.navBtnTextColor.trim():F.navBtnTextColor,navBtnTextGlow:z(0,Number(t.navBtnTextGlow)||0,60),navBtnBackdropBlur:z(0,Number(t.navBtnBackdropBlur)||0,40),navBtnOpacity:z(0,Number(t.navBtnOpacity)||0,1),navBtnHoverIntensity:z(0,Number(t.navBtnHoverIntensity)||0,2)}}function Fe(e,t){if(!R())return t;try{let n=localStorage.getItem(e);return n?JSON.parse(n):t}catch{return t}}function B(e,t){if(R())try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function V(e,t){e.setProperty(L.navBtnBg,`${t.navBtnBg}`),e.setProperty(L.navBtnBgAlpha,`${t.navBtnBgAlpha}`),e.setProperty(L.navBtnBorder,`${t.navBtnBorder}`),e.setProperty(L.navBtnBorderWidth,`${t.navBtnBorderWidth}px`),e.setProperty(L.navBtnGlow,`${t.navBtnGlow}px`),e.setProperty(L.navBtnTextColor,`${t.navBtnTextColor}`),e.setProperty(L.navBtnTextGlow,`${t.navBtnTextGlow}px`),e.setProperty(L.navBtnBackdropBlur,`${t.navBtnBackdropBlur}px`),e.setProperty(L.navBtnOpacity,`${t.navBtnOpacity}`),e.setProperty(L.navBtnHoverIntensity,`${t.navBtnHoverIntensity}`)}function H(e){Object.values(L).forEach(t=>e.removeProperty(t))}function Ie(){let e=U();Ne.forEach(t=>t(e))}function U(){return{enabled:!!I.enabled,settings:{...I}}}function Le(){return R()?(I=Pe(Fe(Me,F)),document.body.classList.toggle(P,I.enabled),I.enabled?V(document.documentElement.style,I):H(document.documentElement.style),Ie(),U()):U()}function Re(e){return Ne.add(e),e(U()),()=>Ne.delete(e)}function ze(e){R()&&(I=Pe({...I,enabled:!!e}),document.body.classList.toggle(P,I.enabled),I.enabled?V(document.documentElement.style,I):H(document.documentElement.style),B(Me,I),Ie())}function Be(e){R()&&(I=Pe({...I,...e,enabled:I.enabled}),I.enabled&&V(document.documentElement.style,I),B(Me,I),Ie())}function Ve(){if(!R())return;let e=!!I.enabled;I=Pe({...F,enabled:e}),I.enabled&&V(document.documentElement.style,I),B(Me,I),Ie()}function He({title:e,expanded:t,onToggle:n,children:r,isLight:i=!1}){return(0,j.jsxs)(`div`,{className:`border rounded-xl overflow-hidden`,style:{background:i?`rgba(180, 155, 110, 0.08)`:`rgba(255, 255, 255, 0.03)`,borderColor:i?`rgba(180, 155, 110, 0.2)`:`rgba(255, 255, 255, 0.1)`},children:[(0,j.jsxs)(`button`,{onClick:n,className:`w-full flex items-center justify-between px-4 py-3 text-left hover:bg-white/5 transition-colors`,children:[(0,j.jsx)(`span`,{className:`text-sm font-medium`,style:{color:i?`rgba(45, 40, 35, 0.85)`:`rgba(255, 255, 255, 0.8)`},children:e}),(0,j.jsx)(`span`,{style:{color:i?`rgba(60, 50, 40, 0.5)`:`rgba(255, 255, 255, 0.4)`},children:t?`‚ñº`:`‚ñ∂`})]}),t&&(0,j.jsx)(`div`,{className:`px-4 pb-4 pt-2 border-t border-white/5`,children:r})]})}var W=He;function Ue({onClick:e,children:t}){return(0,j.jsx)(`button`,{onClick:e,className:`bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg px-3 py-2 text-xs text-white/70 hover:text-white/90 transition-all`,children:t})}var G=Ue;function We({label:e,armed:t,onArm:n}){return(0,j.jsx)(`button`,{onClick:n,className:`w-full rounded-lg px-3 py-2 text-xs font-medium transition-all ${t?`bg-red-500/30 border-2 border-red-500 text-red-300 animate-pulse`:`bg-red-500/10 border border-red-500/30 text-red-400/70 hover:bg-red-500/20`}`,children:t?`‚ö†Ô∏è CONFIRM: ${e}?`:e})}var Ge=We;function Ke(e,t){return!!(e&&t)}var qe=Ke;function Je({label:e,value:t,min:n,max:r,step:i,onChange:a,disabled:o=!1,suffix:s=``}){let c=Number(i)<1?Number(t).toFixed(2):String(Math.round(t));return(0,j.jsxs)(`label`,{className:`block text-[11px] ${o?`opacity-45`:``}`,children:[(0,j.jsxs)(`div`,{className:`flex items-center justify-between mb-1`,children:[(0,j.jsx)(`span`,{className:`text-white/70`,children:e}),(0,j.jsxs)(`span`,{className:`font-mono text-white/85`,children:[c,s]})]}),(0,j.jsx)(`input`,{type:`range`,min:n,max:r,step:i,value:t,disabled:o,onChange:e=>a(Number(e.target.value)),className:`w-full accent-amber-400 disabled:cursor-not-allowed`})]})}var K=Je,Ye=[`none`,...u],Xe={bg:`Background`,stage:`Plant / Foreground`,glass:`Glass`,ring:`Rune Ring`},Ze={enabled:!0,opacity:1,scale:1,rotateDeg:0,x:0,y:0,linkTo:null,linkOpacity:!1};function Qe({expanded:e,onToggle:t,isLight:n=!1,editingStageKey:r=`seedling`,prodGuarded:i=!1,prodArmed:a=!1}){let o=`// AVATAR_DEFAULTS:START`,s=`// AVATAR_DEFAULTS:END`,c=b(e=>e.avatarComposite),l=b(e=>e.setAvatarCompositeEnabled),d=b(e=>e.setAvatarCompositeDebugOverlay),f=b(e=>e.getAvatarCompositeRoleTransform),p=b(e=>e.setAvatarCompositeRoleTransform),m=b(e=>e.setAvatarCompositeRoleTransformEnabled),h=b(e=>e.setAvatarCompositeRoleTransformValue),g=b(e=>e.setAvatarCompositeRoleTransformLink),_=b(e=>e.setAvatarCompositeRoleTransformLinkOpacity),v=b(e=>e.resetAvatarCompositeStage),y=b(e=>e.copyAvatarCompositeStage),ee=b(e=>e.copyAvatarCompositeStageToAll),te=b(e=>e.getAvatarCompositeSettingsJSON),ne=b(e=>e.setAvatarCompositeSettingsJSON),re=b(e=>e.getAvatarCompositeAllStagesJSON),S=b(e=>e.getAvatarCompositeDefaultsSnippet),[ie,C]=(0,M.useState)({bg:!0,stage:!1,glass:!1,ring:!1}),[ae,oe]=(0,M.useState)(`none`),[se,w]=(0,M.useState)(``),[ce,T]=(0,M.useState)(``),E=x(r),D=E.charAt(0).toUpperCase()+E.slice(1),le=(0,M.useMemo)(()=>{let e={};return u.forEach(t=>{e[t]=f(E,t)}),e},[c,f,E]),O=c?.enabled!==!1,k=!!c?.showDebugOverlay,A=i&&!a,ue=e=>{C(t=>({...t,[e]:!t[e]}))},de=(e,t)=>{let n=le[e];n&&h(E,e,`rotateDeg`,n.rotateDeg+t)},fe=e=>{h(E,e,`scale`,1),h(E,e,`rotateDeg`,0),h(E,e,`x`,0),h(E,e,`y`,0)};return(0,j.jsxs)(W,{title:`Avatar Composite Tuner`,expanded:e,onToggle:t,isLight:n,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/50 mb-3`,children:"Dev-only live tuning for `bg`, `stage`, `glass`, and `ring` layers."}),(0,j.jsxs)(`div`,{className:`text-[11px] text-white/70 mb-3`,children:[`Editing stage: `,(0,j.jsx)(`span`,{className:`font-semibold text-white/90`,children:D})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-3`,children:[(0,j.jsx)(`button`,{onClick:()=>l(!O),className:`rounded-lg px-3 py-2 text-xs border transition-all ${O?`bg-emerald-500/20 border-emerald-400/50 text-emerald-100`:`bg-white/5 border-white/15 text-white/70`}`,children:O?`Tuner Enabled`:`Tuner Disabled`}),(0,j.jsx)(`button`,{onClick:()=>d(!k),className:`rounded-lg px-3 py-2 text-xs border transition-all ${k?`bg-cyan-500/20 border-cyan-400/50 text-cyan-100`:`bg-white/5 border-white/15 text-white/70`}`,children:k?`Debug Overlay On`:`Debug Overlay Off`})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-[1fr_auto] gap-2 mb-3 items-center`,children:[(0,j.jsx)(`select`,{value:ae,onChange:e=>oe(e.target.value),className:`w-full rounded-lg px-3 py-2 text-xs`,style:{background:n?`rgba(255, 255, 255, 0.9)`:`#0a0a12`,border:n?`1px solid rgba(180, 155, 110, 0.3)`:`1px solid rgba(255, 255, 255, 0.25)`,color:n?`rgba(60, 50, 40, 0.95)`:`white`,colorScheme:n?`light`:`dark`},children:Ye.map(e=>(0,j.jsx)(`option`,{value:e,children:e===`none`?`None`:`Link all to ${e}`},e))}),(0,j.jsx)(`button`,{onClick:()=>{if(A)return;let e=ae===`none`?null:ae;u.forEach(t=>{g(E,t,e&&t!==e?e:null)})},disabled:A,className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all disabled:opacity-40 disabled:cursor-not-allowed`,children:`Apply`})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-4`,children:[(0,j.jsx)(`button`,{onClick:()=>{A||y(`seedling`,E)},disabled:A,className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all disabled:opacity-40 disabled:cursor-not-allowed`,children:`Copy Seedling -> Current Stage`}),(0,j.jsx)(`button`,{onClick:()=>{A||i&&a&&!window.confirm(`Copy current stage tuning to ALL stages? This will overwrite existing presets for ember, flame, beacon, and stellar.`)||ee(E)},disabled:A,className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all disabled:opacity-40 disabled:cursor-not-allowed`,children:`Copy Current Stage -> All Stages`})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-4`,children:[(0,j.jsx)(`button`,{onClick:()=>{A||v(E)},disabled:A,className:`rounded-lg px-3 py-2 text-xs bg-red-500/10 border border-red-500/35 text-red-300/80 hover:bg-red-500/20 transition-all disabled:opacity-40 disabled:cursor-not-allowed`,children:`Reset Current Stage`}),(0,j.jsx)(`button`,{onClick:async()=>{let e=te(E);if(w(e),typeof navigator<`u`&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(e),T(`Copied to clipboard.`);return}catch{}T(`Copied to editor field.`)},className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all`,children:`Copy Current Stage JSON`}),(0,j.jsx)(`button`,{onClick:async()=>{let e=re();if(w(e),typeof navigator<`u`&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(e),T(`Copied all stages JSON to clipboard.`);return}catch{}T(`Copied all stages JSON to editor field.`)},className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all`,children:`Copy All Stages JSON`}),(0,j.jsx)(`button`,{onClick:async()=>{let e=S();if(w(e),typeof navigator<`u`&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(e),T(`Copied defaults snippet to clipboard. Paste into createDefaultAvatarComposite().`);return}catch{}T(`Copied defaults snippet to editor field.`)},className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all`,children:`Copy Defaults Snippet`}),(0,j.jsx)(`button`,{onClick:async()=>{let e=async()=>{let e=S();if(w(e),typeof navigator<`u`&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(e),!0}catch{return!1}return!1};if(typeof window>`u`||typeof window.showOpenFilePicker!=`function`){let t=await e()?`This browser does not support file picker write. Defaults snippet was copied to clipboard. Paste it into createDefaultAvatarComposite() in src/state/devPanelStore.js.`:`This browser does not support file picker write. Use Copy Defaults Snippet and paste into createDefaultAvatarComposite() in src/state/devPanelStore.js.`;T(t),typeof window<`u`&&typeof window.alert==`function`&&window.alert(t);return}try{let[e]=await window.showOpenFilePicker({multiple:!1,types:[{description:`JavaScript`,accept:{"text/javascript":[`.js`]}}]});if(!e){T(`File selection canceled.`);return}let t=await(await e.getFile()).text(),n=t.indexOf(o),r=t.indexOf(s);if(n===-1||r===-1||r<=n){T(`Could not find avatar defaults markers in selected file.`);return}let i=t.lastIndexOf(`
`,n)+1,a=t.indexOf(`
`,r),c=a===-1?t.length:a,l=`    ${o}\n${S().split(`
`).map(e=>`    ${e}`).join(`
`)}\n    ${s}`,u=`${t.slice(0,i)}${l}${t.slice(c)}`,d=await e.createWritable();await d.write(u),await d.close(),T(`Updated src/state/devPanelStore.js defaults. Now run git add/commit/push.`)}catch{T(await e()?`File write canceled/failed. Defaults snippet was copied to clipboard.`:`File write canceled/failed. Use Copy Defaults Snippet.`)}},className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all`,children:`Write Defaults To File`})]}),A&&(0,j.jsx)(`div`,{className:`text-[10px] text-white/55 mb-4`,children:`Arm to enable destructive actions (prod only).`}),(0,j.jsx)(`div`,{className:`space-y-2 mb-4`,children:u.map(e=>{let t=le[e]||{enabled:!0,opacity:1,scale:1,rotateDeg:0,x:0,y:0,linkTo:null,linkOpacity:!1},r=t.linkTo||`none`,i=!!t.linkTo,a=i,o=i&&t.linkOpacity;return(0,j.jsxs)(`div`,{className:`rounded-lg border border-white/15 bg-white/5`,children:[(0,j.jsxs)(`button`,{onClick:()=>ue(e),className:`w-full flex items-center justify-between px-3 py-2 text-left`,children:[(0,j.jsxs)(`span`,{className:`text-xs text-white/85`,children:[Xe[e],` (`,e,`)`]}),(0,j.jsx)(`span`,{className:`text-[10px] text-white/55`,children:ie[e]?`Hide`:`Show`})]}),ie[e]&&(0,j.jsxs)(`div`,{className:`px-3 pb-3 space-y-2 border-t border-white/10`,children:[(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 pt-2`,children:[(0,j.jsx)(`button`,{onClick:()=>m(E,e,!t.enabled),className:`rounded-lg px-2 py-1.5 text-[11px] border transition-all ${t.enabled?`bg-emerald-500/20 border-emerald-400/50 text-emerald-100`:`bg-white/5 border-white/15 text-white/65`}`,children:t.enabled?`Layer On`:`Layer Off`}),(0,j.jsx)(`button`,{onClick:()=>p(E,e,Ze),className:`rounded-lg px-2 py-1.5 text-[11px] bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all`,children:`Reset Layer`})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-[1fr_auto] gap-2 items-center`,children:[(0,j.jsx)(`select`,{value:r,onChange:t=>g(E,e,t.target.value===`none`?null:t.target.value),className:`w-full rounded-lg px-2 py-1.5 text-[11px]`,style:{background:n?`rgba(255, 255, 255, 0.9)`:`#0a0a12`,border:n?`1px solid rgba(180, 155, 110, 0.3)`:`1px solid rgba(255, 255, 255, 0.25)`,color:n?`rgba(60, 50, 40, 0.95)`:`white`,colorScheme:n?`light`:`dark`},children:Ye.map(t=>(0,j.jsx)(`option`,{value:t,disabled:t===e,children:t===`none`?`Link: None`:`Link: ${t}`},`${e}-${t}`))}),i&&(0,j.jsx)(`button`,{onClick:()=>_(E,e,!t.linkOpacity),className:`rounded-lg px-2 py-1.5 text-[11px] border transition-all ${t.linkOpacity?`bg-cyan-500/20 border-cyan-400/50 text-cyan-100`:`bg-white/5 border-white/15 text-white/70`}`,children:t.linkOpacity?`Opacity Linked`:`Opacity Free`})]}),(0,j.jsx)(K,{label:`Opacity`,value:t.opacity,min:0,max:1,step:.01,disabled:!O||!t.enabled||o,onChange:t=>h(E,e,`opacity`,t)}),(0,j.jsx)(K,{label:`Scale`,value:t.scale,min:.5,max:2,step:.01,disabled:!O||!t.enabled||a,onChange:t=>h(E,e,`scale`,t)}),(0,j.jsx)(K,{label:`Rotate`,value:t.rotateDeg,min:-180,max:180,step:1,suffix:`deg`,disabled:!O||!t.enabled||a,onChange:t=>h(E,e,`rotateDeg`,t)}),(0,j.jsxs)(`div`,{className:`grid grid-cols-3 gap-2`,children:[(0,j.jsx)(`button`,{onClick:()=>de(e,-5),disabled:!O||!t.enabled||a,className:`rounded-lg px-2 py-1.5 text-[11px] bg-white/5 border border-white/15 text-white/70 disabled:opacity-40 disabled:cursor-not-allowed`,children:`-5 deg`}),(0,j.jsx)(`button`,{onClick:()=>de(e,5),disabled:!O||!t.enabled||a,className:`rounded-lg px-2 py-1.5 text-[11px] bg-white/5 border border-white/15 text-white/70 disabled:opacity-40 disabled:cursor-not-allowed`,children:`+5 deg`}),(0,j.jsx)(`button`,{onClick:()=>h(E,e,`rotateDeg`,0),disabled:!O||!t.enabled||a,className:`rounded-lg px-2 py-1.5 text-[11px] bg-white/5 border border-white/15 text-white/70 disabled:opacity-40 disabled:cursor-not-allowed`,children:`Reset Rot`})]}),(0,j.jsx)(K,{label:`X`,value:t.x,min:-100,max:100,step:1,suffix:`px`,disabled:!O||!t.enabled||a,onChange:t=>h(E,e,`x`,t)}),(0,j.jsx)(K,{label:`Y`,value:t.y,min:-100,max:100,step:1,suffix:`px`,disabled:!O||!t.enabled||a,onChange:t=>h(E,e,`y`,t)}),(0,j.jsx)(`button`,{onClick:()=>fe(e),disabled:!O||!t.enabled||a,className:`rounded-lg px-2 py-1.5 text-[11px] bg-white/5 border border-white/15 text-white/70 disabled:opacity-40 disabled:cursor-not-allowed`,children:`Reset X/Y/Scale/Rot`})]})]},e)})}),(0,j.jsxs)(`div`,{className:`space-y-2`,children:[(0,j.jsx)(`textarea`,{value:se,onChange:e=>w(e.target.value),placeholder:`Paste Avatar Composite settings JSON here`,rows:5,className:`w-full rounded-lg px-3 py-2 text-[11px] font-mono`,style:{background:n?`rgba(255, 255, 255, 0.9)`:`#0a0a12`,border:n?`1px solid rgba(180, 155, 110, 0.3)`:`1px solid rgba(255, 255, 255, 0.25)`,color:n?`rgba(60, 50, 40, 0.95)`:`white`,colorScheme:n?`light`:`dark`}}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,j.jsx)(`button`,{onClick:()=>{let e=ne(E,se);T(e?.ok?`Settings applied.`:`Paste failed: ${e?.error||`Unknown error`}`)},className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all`,children:`Paste Settings JSON`}),(0,j.jsx)(`button`,{onClick:()=>{w(``),T(``)},className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/60 hover:bg-white/10 transition-all`,children:`Clear JSON`})]}),!!ce&&(0,j.jsx)(`div`,{className:`text-[10px] text-white/55`,children:ce})]})]})}var $e=Qe;function et({universalPickerKind:e,controlsSelectedId:t,controlsSelectedRoleGroup:n,controlsSurfaceIsRoot:r,controlsSurfaceDebug:i,controlsElectricBorderEnabled:a,setControlsElectricBorderEnabled:o,controlsFxDraft:s,setControlsFxDraft:c,setControlsFxPreset:l,resetControlsFxPreset:u,getControlsFxPreset:d,controlsPresetJson:f,setControlsPresetJson:p,controlsPresetStatus:m,setControlsPresetStatus:h,exportControlsFxPresetsJson:g,importControlsFxPresetsJson:_,resetAllControlsFxPresets:v,utcViolations:y}){return e===`controls`?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(`div`,{className:`space-y-2 mb-3`,children:[(0,j.jsxs)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10`,children:[`Selected: `,t||`none`]}),(0,j.jsxs)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10`,children:[`Role group: `,n||`null`]}),(0,j.jsxs)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10`,children:[`Surface: `,t?r?`root`:`descendant`:`n/a`]}),(0,j.jsxs)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10`,children:[`Surface node: `,i?`${i.tag}${i.className?`.${String(i.className).trim().split(/\s+/g).slice(0,3).join(`.`)}`:``}`:`null`]})]}),(0,j.jsxs)(`div`,{className:`border-t border-white/10 pt-3 mt-3 mb-3`,children:[(0,j.jsx)(`div`,{className:`text-[11px] text-white/80 font-semibold mb-2`,children:`FX: Selected Control Electric Border`}),(0,j.jsx)(`button`,{onClick:()=>o(!a),disabled:!t,className:`w-full px-3 py-2 rounded-lg text-xs border transition-all ${a?`bg-amber-500/20 text-amber-200 border-amber-400/50`:`bg-white/5 text-white/70 border-white/15`} ${t?``:`opacity-50 cursor-not-allowed`}`,children:a?`Enable Selected Control FX: ON`:`Enable Selected Control FX: OFF`}),(0,j.jsxs)(`div`,{className:`text-[10px] text-white/45 mt-2`,children:[`Target: current `,(0,j.jsx)(`span`,{className:`font-mono`,children:`data-ui-id`}),` (role-scope)`]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-3`,children:[(0,j.jsx)(K,{label:`Thickness`,value:s.thickness,min:1,max:12,step:1,disabled:!t,onChange:e=>{c({...s,thickness:e}),t&&l(t,{thickness:e})}}),(0,j.jsx)(K,{label:`Offset`,value:s.offsetPx,min:0,max:40,step:1,suffix:`px`,disabled:!t,onChange:e=>{c({...s,offsetPx:e}),t&&l(t,{offsetPx:e})}})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-2`,children:[(0,j.jsx)(K,{label:`Speed`,value:s.speed,min:0,max:.2,step:.005,disabled:!t,onChange:e=>{c({...s,speed:e}),t&&l(t,{speed:e})}}),(0,j.jsx)(K,{label:`Chaos`,value:s.chaos,min:0,max:.3,step:.005,disabled:!t,onChange:e=>{c({...s,chaos:e}),t&&l(t,{chaos:e})}})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-2`,children:[(0,j.jsx)(K,{label:`Glow`,value:s.glow,min:0,max:64,step:1,suffix:`px`,disabled:!t,onChange:e=>{c({...s,glow:e}),t&&l(t,{glow:e})}}),(0,j.jsx)(K,{label:`Blur`,value:s.blur,min:0,max:24,step:1,suffix:`px`,disabled:!t,onChange:e=>{c({...s,blur:e}),t&&l(t,{blur:e})}})]}),(0,j.jsx)(`div`,{className:`mt-2`,children:(0,j.jsx)(K,{label:`Opacity`,value:s.opacity,min:.1,max:1,step:.01,disabled:!t,onChange:e=>{c({...s,opacity:e}),t&&l(t,{opacity:e})}})}),(0,j.jsxs)(`div`,{className:`mt-2 grid grid-cols-2 gap-2 items-center`,children:[(0,j.jsx)(`div`,{className:`text-[10px] text-white/55`,children:`Color`}),(0,j.jsxs)(`div`,{className:`flex items-center justify-end gap-2`,children:[(0,j.jsx)(`input`,{type:`color`,value:typeof s.color==`string`&&s.color.startsWith(`#`)?s.color:`#ffffff`,disabled:!t,onChange:e=>{let n=e?.target?.value||null;c({...s,color:n}),t&&l(t,{color:n})},className:`h-8 w-12 p-0 border border-white/15 rounded`,style:{background:`transparent`}}),(0,j.jsx)(`button`,{disabled:!t,onClick:()=>{c({...s,color:null}),t&&l(t,{color:null})},className:`px-2 py-2 rounded-lg text-[10px] border transition-all ${t?`bg-white/5 border-white/15 text-white/70 hover:bg-white/10`:`opacity-50 cursor-not-allowed bg-white/5 border-white/10 text-white/35`}`,children:`Use role color`})]})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-2`,children:[(0,j.jsx)(`button`,{disabled:!t,onClick:()=>{t&&(u(t),c(d(t)))},className:`px-3 py-2 rounded-lg text-xs border transition-all ${t?`bg-white/5 border-white/15 text-white/70 hover:bg-white/10`:`opacity-50 cursor-not-allowed bg-white/5 border-white/10 text-white/35`}`,children:`Reset Preset`}),(0,j.jsxs)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10`,children:[`Preset: `,t?`saved`:`n/a`]})]}),(0,j.jsx)(`div`,{className:`mt-2 text-[10px] text-white/55`,children:`Presets JSON`}),(0,j.jsx)(`textarea`,{"data-testid":`controls-presets-json`,value:f,onChange:e=>p(e?.target?.value||``),className:`w-full mt-1 rounded-lg border border-white/15 bg-white/5 text-white/80 p-2 text-[11px] font-mono`,rows:5,placeholder:`{"version":2,"presets":{"homeHub:mode:navigation":{"glow":24}}}`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-2`,children:[(0,j.jsx)(`button`,{"data-testid":`controls-presets-export`,onClick:()=>{p(g()),h(`Exported presets JSON.`)},className:`px-3 py-2 rounded-lg text-xs border transition-all bg-white/5 border-white/15 text-white/70 hover:bg-white/10`,children:`Export Presets`}),(0,j.jsx)(`button`,{"data-testid":`controls-presets-import`,onClick:()=>{let e=_(f,{replace:!0});if(!e?.ok){h(`Import failed: invalid JSON.`);return}c(d(t)),h(`Imported ${e.count} preset(s).`)},className:`px-3 py-2 rounded-lg text-xs border transition-all bg-white/5 border-white/15 text-white/70 hover:bg-white/10`,children:`Import Presets`})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-2`,children:[(0,j.jsx)(`button`,{"data-testid":`controls-presets-reset-all`,onClick:()=>{v(),c(d(t)),h(`Reset all control presets.`)},className:`px-3 py-2 rounded-lg text-xs border transition-all bg-white/5 border-white/15 text-white/70 hover:bg-white/10`,children:`Reset All Presets`}),(0,j.jsx)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10`,children:m||`No preset action yet.`})]})]}),(0,j.jsxs)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10 mb-2`,children:[`UTC Violations: `,y.length]}),y.slice(0,5).map(e=>(0,j.jsxs)(`div`,{className:`text-[10px] mb-1 rounded-md border border-red-400/30 bg-red-500/10 px-2 py-1.5 text-red-200/90`,children:[(0,j.jsx)(`div`,{className:`font-mono`,children:e.violationKey}),(0,j.jsx)(`div`,{className:`text-red-200/70`,children:e.reasons.join(`, `)})]},e.violationKey))]}):null}var tt=et;function nt({universalPickerKind:e,platesSelectedId:t,platesFxEnabled:n,setPlatesFxEnabled:r,platesFxDraft:i,patchSelectedPlatePreset:a,platesResolved:o,platesAdvancedOpen:s,setPlatesAdvancedOpen:c,activePlateOverrideCount:l,resetSelectedPlateOverrides:u}){return e===`plates`?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(`div`,{className:`space-y-2 mb-3`,children:(0,j.jsxs)(`div`,{className:`rounded-lg px-3 py-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10`,children:[`Selected: `,t||`none`]})}),(0,j.jsxs)(`div`,{className:`border-t border-white/10 pt-3 mt-3 mb-3`,children:[(0,j.jsx)(`div`,{className:`text-[11px] text-white/80 font-semibold mb-2`,children:`Plates (Caption Tuner)`}),(0,j.jsx)(`button`,{onClick:()=>r(!n),className:`w-full px-3 py-2 rounded-lg text-xs border transition-all ${n?`bg-amber-500/20 text-amber-200 border-amber-400/50`:`bg-white/5 text-white/70 border-white/15`}`,children:n?`Global Plate FX: ON`:`Global Plate FX: OFF`}),(0,j.jsxs)(`label`,{className:`flex items-center gap-2 text-xs text-white/70 mt-3`,children:[(0,j.jsx)(`input`,{type:`checkbox`,checked:i.enabled,disabled:!t,onChange:e=>a({enabled:e.target.checked}),className:`rounded border-white/20`}),`Enabled for this plate`]}),(0,j.jsxs)(`div`,{className:`mt-3`,children:[(0,j.jsx)(`label`,{className:`block text-[10px] text-white/55 mb-1`,children:`Profile`}),(0,j.jsxs)(`select`,{value:i.profile,disabled:!t,onChange:e=>a({profile:e.target.value===`mythic`?`mythic`:`subtle`}),className:`w-full rounded-lg px-3 py-2 text-xs border bg-white/5 border-white/15 text-white/80 ${t?``:`opacity-50 cursor-not-allowed`}`,style:{colorScheme:`dark`},children:[(0,j.jsx)(`option`,{value:`subtle`,children:`Subtle`}),(0,j.jsx)(`option`,{value:`mythic`,children:`Mythic`})]})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-3 gap-2 mt-3`,children:[(0,j.jsx)(K,{label:`Border Thickness`,value:o.effective.borderW,min:.5,max:6,step:.05,disabled:!t,onChange:e=>a({borderW:e})}),(0,j.jsx)(K,{label:`Speed`,value:o.effective.speed,min:4,max:24,step:.5,disabled:!t,onChange:e=>a({speed:e}),suffix:`s`}),(0,j.jsx)(K,{label:`Border Opacity`,value:o.effective.opacity,min:0,max:1,step:.05,disabled:!t,onChange:e=>a({opacity:e})})]}),(0,j.jsxs)(`div`,{className:`space-y-2 mt-3`,children:[(0,j.jsx)(`div`,{className:`text-[10px] text-white/55`,children:`Color Mode`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,j.jsx)(`button`,{disabled:!t,onClick:()=>a({colorMode:`stage`}),className:`px-3 py-2 rounded-lg text-xs border transition-all ${i.colorMode===`stage`?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`} ${t?``:`opacity-50 cursor-not-allowed`}`,children:`Stage Accent`}),(0,j.jsx)(`button`,{disabled:!t,onClick:()=>a({colorMode:`custom`}),className:`px-3 py-2 rounded-lg text-xs border transition-all ${i.colorMode===`custom`?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`} ${t?``:`opacity-50 cursor-not-allowed`}`,children:`Custom`})]}),i.colorMode===`custom`&&(0,j.jsxs)(`div`,{className:`flex items-center gap-2 mt-2`,children:[(0,j.jsx)(`input`,{type:`color`,value:i.color||`#FFD278`,disabled:!t,onChange:e=>a({color:e?.target?.value||null}),className:`h-8 w-12 p-0 border border-white/15 rounded`,style:{background:`transparent`}}),(0,j.jsx)(`span`,{className:`text-xs text-white/50 font-mono`,children:i.color||`#FFD278`})]})]}),(0,j.jsx)(`button`,{onClick:()=>c(e=>!e),disabled:!t,className:`w-full mt-3 px-3 py-2 rounded-lg text-xs border transition-all ${s?`bg-cyan-500/20 text-cyan-200 border-cyan-400/50`:`bg-white/5 text-white/70 border-white/15`} ${t?``:`opacity-50 cursor-not-allowed`}`,children:s?`More: ON (${l} override${l===1?``:`s`})`:`More...`}),s&&(0,j.jsxs)(`div`,{className:`mt-3 p-3 rounded-lg border border-white/10 bg-white/5 space-y-3`,children:[(0,j.jsxs)(`div`,{className:`grid grid-cols-3 gap-2`,children:[(0,j.jsx)(K,{label:`Glow`,value:o.effective.glow,min:0,max:24,step:.5,disabled:!t,onChange:e=>a({glow:e}),suffix:`px`}),(0,j.jsx)(K,{label:`Glow Opacity`,value:o.effective.glowOpacity,min:0,max:.32,step:.01,disabled:!t,onChange:e=>a({glowOpacity:e})}),(0,j.jsx)(K,{label:`BG Opacity`,value:o.effective.bgOpacity,min:0,max:.45,step:.01,disabled:!t,onChange:e=>a({bgOpacity:e})})]}),(0,j.jsxs)(`label`,{className:`flex items-center gap-2 text-xs text-white/70`,children:[(0,j.jsx)(`input`,{type:`checkbox`,checked:!!o.effective.sheen,disabled:!t,onChange:e=>a({sheen:e.target.checked}),className:`rounded border-white/20`}),`Sheen`]}),(0,j.jsxs)(`label`,{className:`flex items-center gap-2 text-xs text-white/70`,children:[(0,j.jsx)(`input`,{type:`checkbox`,checked:!!o.effective.animate,disabled:!t,onChange:e=>a({animate:e.target.checked}),className:`rounded border-white/20`}),`Animate`]}),(0,j.jsx)(`button`,{onClick:u,disabled:!t,className:`w-full px-3 py-2 rounded-lg text-xs border transition-all bg-white/5 border-white/15 text-white/70 hover:bg-white/10 ${t?``:`opacity-50 cursor-not-allowed`}`,children:`Reset Overrides`})]})]})]}):null}var rt=nt;function it({activeDraft:e,selectedDisabled:t,onChangeCardSetting:n}){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(K,{label:`Tint H`,value:e.cardTintH,min:0,max:360,step:1,disabled:t,onChange:e=>n(`cardTintH`,e)}),(0,j.jsx)(K,{label:`Tint S`,value:e.cardTintS,min:0,max:100,step:1,suffix:`%`,disabled:t,onChange:e=>n(`cardTintS`,e)}),(0,j.jsx)(K,{label:`Tint L`,value:e.cardTintL,min:0,max:100,step:1,suffix:`%`,disabled:t,onChange:e=>n(`cardTintL`,e)}),(0,j.jsx)(K,{label:`Alpha`,value:e.cardAlpha,min:0,max:1,step:.01,disabled:t,onChange:e=>n(`cardAlpha`,e)}),(0,j.jsx)(K,{label:`Border A`,value:e.cardBorderAlpha,min:0,max:1,step:.01,disabled:t,onChange:e=>n(`cardBorderAlpha`,e)}),(0,j.jsx)(K,{label:`Blur`,value:e.cardBlur,min:0,max:60,step:1,suffix:`px`,disabled:t,onChange:e=>n(`cardBlur`,e)})]})}function q({expanded:e,onToggle:t,isLight:n,devtoolsEnabled:r,legacyPickersEnabled:i,cardState:a,handleStopPickFlow:o,handleStartPickFlow:s,cardApplyToAll:c,setCardApplyToAll:l,handleTogglePeek:u,handleConfirmPickFlow:d,activeDraft:f,selectedDisabled:p,onChangeCardSetting:m,cardElectricBorderEnabled:h,setCardElectricBorderEnabled:g,practiceButtonFxEnabled:_,setPracticeButtonFxEnabled:v,practiceButtonPickMode:y,setPracticeButtonPickMode:b,stopUniversalPickCaptureImmediate:x,setUniversalPickMode:ee,setPickMode:te,setPeekMode:ne,practiceButtonApplyToAll:re,setPracticeButtonApplyToAll:S,practiceButtonSelectedKey:ie,saveGlobal:C,globalDraft:ae,saveSelected:oe,selectedDraft:se,resetGlobal:w,resetSelected:ce,clearAll:T}){return(0,j.jsx)(W,{title:`Card Styling Tuner`,expanded:e,onToggle:t,isLight:n,children:r?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(`div`,{className:`text-[10px] text-white/50 mb-2`,children:[`Pick a `,(0,j.jsx)(`span`,{className:`font-mono`,children:`data-card="true"`}),` target and tune vars live.`]}),!i&&(0,j.jsxs)(`div`,{className:`text-[10px] text-white/45 mb-2`,children:[`Legacy pick controls hidden. Use `,(0,j.jsx)(`span`,{className:`font-mono`,children:`Inspector (NEW)`}),` to pick targets.`]}),(0,j.jsxs)(`div`,{className:`grid ${i?`grid-cols-2`:`grid-cols-1`} gap-2 mb-3`,children:[i&&(0,j.jsx)(`button`,{onClick:()=>a.pickMode?o():s(),className:`px-3 py-2 rounded-lg text-xs border transition-all ${a.pickMode?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:a.pickMode?`Stop Picking`:`Pick Card`}),(0,j.jsx)(`button`,{onClick:()=>l(e=>!e),className:`px-3 py-2 rounded-lg text-xs border transition-all ${c?`bg-cyan-500/25 text-cyan-200 border-cyan-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:c?`Apply to all: ON`:`Apply to all: OFF`})]}),i&&(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-3`,children:[(0,j.jsx)(`button`,{onClick:u,className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70 hover:bg-white/10 transition-all`,children:`Peek UI`}),(0,j.jsx)(`button`,{onClick:d,disabled:!a.pickMode,className:`rounded-lg px-3 py-2 text-xs transition-all ${a.pickMode?`bg-amber-500/20 border border-amber-400/50 text-amber-200`:`bg-white/5 border border-white/10 text-white/35 cursor-not-allowed`}`,children:`Confirm Pick`})]}),(0,j.jsxs)(`div`,{className:`mb-3 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10 rounded-lg px-3 py-2`,children:[`Selected: `,a.hasSelected?a.selectedCardId||a.selectedLabel||`card`:`none`]}),(0,j.jsxs)(`div`,{className:`text-[10px] text-white/50 mb-3`,children:[`Quick peek shortcut: `,(0,j.jsx)(`span`,{className:`font-mono text-white/80`,children:`Ctrl+Alt+Shift+K`})]}),(0,j.jsx)(`div`,{className:`space-y-2 mb-3`,children:(0,j.jsx)(it,{activeDraft:f,selectedDisabled:p,onChangeCardSetting:m})}),(0,j.jsxs)(`div`,{className:`border-t border-white/10 pt-3 mt-3 mb-3`,children:[(0,j.jsx)(`div`,{className:`text-[11px] text-white/80 font-semibold mb-2`,children:`FX: Selected Card Electric Border`}),(0,j.jsx)(`button`,{onClick:()=>g(!h),disabled:!a.hasSelected,className:`w-full px-3 py-2 rounded-lg text-xs border transition-all ${h?`bg-amber-500/20 text-amber-200 border-amber-400/50`:`bg-white/5 text-white/70 border-white/15`} ${a.hasSelected?``:`opacity-50 cursor-not-allowed`}`,children:h?`Enable Selected Card FX: ON`:`Enable Selected Card FX: OFF`}),(0,j.jsxs)(`div`,{className:`text-[10px] text-white/45 mt-2`,children:[`Target: current `,(0,j.jsx)(`span`,{className:`font-mono`,children:`selectedCardId`})]})]}),(0,j.jsxs)(`div`,{className:`border-t border-white/10 pt-3 mt-3 mb-3`,children:[(0,j.jsx)(`div`,{className:`text-[11px] text-white/80 font-semibold mb-2`,children:`FX: Practice Button Electric Border`}),(0,j.jsx)(`button`,{onClick:()=>v(!_),className:`w-full px-3 py-2 rounded-lg text-xs border transition-all ${_?`bg-cyan-500/20 text-cyan-200 border-cyan-400/50`:`bg-white/5 text-white/70 border-white/15`}`,children:_?`Enable Practice Button FX: ON`:`Enable Practice Button FX: OFF`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mt-2`,children:[i&&(0,j.jsx)(`button`,{onClick:()=>b(e=>{let t=!e;return t&&(x(),ee(!1),te(!1),ne(!1)),t}),className:`px-3 py-2 rounded-lg text-xs border transition-all ${y?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:y?`Stop Picking`:`Pick Button`}),(0,j.jsx)(`button`,{onClick:()=>S(e=>!e),className:`px-3 py-2 rounded-lg text-xs border transition-all ${re?`bg-cyan-500/25 text-cyan-200 border-cyan-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:re?`Apply to all: ON`:`Apply to all: OFF`})]}),(0,j.jsxs)(`div`,{className:`mt-2 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10 rounded-lg px-3 py-2`,children:[`Selected: `,ie||`none`]}),(0,j.jsxs)(`div`,{className:`text-[10px] text-white/45 mt-2`,children:[`Targets: `,(0,j.jsx)(`span`,{className:`font-mono`,children:`data-ui="practice-button"`})]})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-2`,children:[(0,j.jsx)(G,{onClick:()=>C(ae),children:`Save Global`}),(0,j.jsx)(`button`,{onClick:()=>oe(se),disabled:!a.hasSelected||!a.selectedCardId,className:`rounded-lg px-3 py-2 text-xs transition-all ${!a.hasSelected||!a.selectedCardId?`bg-white/5 text-white/30 border border-white/10 cursor-not-allowed`:`bg-white/5 hover:bg-white/10 border border-white/10 text-white/70`}`,children:`Save Selected`})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-2`,children:[(0,j.jsx)(G,{onClick:w,children:`Reset Global`}),(0,j.jsx)(`button`,{onClick:ce,disabled:!a.hasSelected,className:`rounded-lg px-3 py-2 text-xs transition-all ${a.hasSelected?`bg-white/5 hover:bg-white/10 border border-white/10 text-white/70`:`bg-white/5 text-white/30 border border-white/10 cursor-not-allowed`}`,children:`Reset Selected`})]}),(0,j.jsx)(`button`,{onClick:T,className:`w-full rounded-lg px-3 py-2 text-xs bg-red-500/10 border border-red-500/30 text-red-400/70 hover:bg-red-500/20 transition-all`,children:`Clear All`})]}):(0,j.jsx)(`div`,{className:`text-xs text-white/50`,children:`Locked`})})}var at=q;function ot({label:e,value:t,onChange:n,disabled:r=!1,placeholder:i=``,mono:a=!0}){return(0,j.jsxs)(`label`,{className:`block text-[11px] ${r?`opacity-45`:``}`,children:[(0,j.jsx)(`div`,{className:`flex items-center justify-between mb-1`,children:(0,j.jsx)(`span`,{className:`text-white/70`,children:e})}),(0,j.jsx)(`input`,{type:`text`,value:t??``,placeholder:i,disabled:r,onChange:e=>n(String(e.target.value)),className:`w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-xs text-white/90 ${a?`font-mono`:``}`})]})}var st=ot;function ct({expanded:e,onToggle:t,isLight:n,devtoolsEnabled:r,navBtnProbeEnabled:i,setNavBtnProbeEnabled:a,navBtnState:o,setNavButtonTunerEnabled:s,navBtnDraft:c,onChangeNavBtnSetting:l,resetNavButtonSettings:u}){return(0,j.jsx)(W,{title:`Navigation Button FX Tuner`,expanded:e,onToggle:t,isLight:n,children:r?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(`div`,{className:`text-[10px] text-white/50 mb-2`,children:[`Targets `,(0,j.jsx)(`span`,{className:`font-mono`,children:`.im-nav-btn`}),` only. Uses `,(0,j.jsx)(`span`,{className:`font-mono`,children:`--nav-btn-*`}),` tokens.`]}),(0,j.jsx)(`button`,{onClick:()=>a(e=>!e),className:`w-full mb-2 px-3 py-2 rounded-lg text-xs border transition-all ${i?`bg-fuchsia-500/15 text-fuchsia-200 border-fuchsia-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:i?`Nav Button Probe: ON`:`Nav Button Probe: OFF`}),(0,j.jsx)(`button`,{onClick:()=>s(!o.enabled),className:`w-full mb-3 px-3 py-2 rounded-lg text-xs border transition-all ${o.enabled?`bg-emerald-500/20 text-emerald-200 border-emerald-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:o.enabled?`Nav Button Tuner: ON`:`Nav Button Tuner: OFF`}),(0,j.jsxs)(`div`,{className:`space-y-3`,children:[(0,j.jsxs)(`div`,{className:`grid grid-cols-1 gap-2`,children:[(0,j.jsx)(st,{label:`Border color`,value:c.navBtnBorder,onChange:e=>l(`navBtnBorder`,e),disabled:!o.enabled,placeholder:`e.g. var(--accent-30) or rgba(255,255,255,0.2)`}),(0,j.jsx)(st,{label:`Text color`,value:c.navBtnTextColor,onChange:e=>l(`navBtnTextColor`,e),disabled:!o.enabled,placeholder:`e.g. var(--accent-color)`}),(0,j.jsx)(st,{label:`Background RGB`,value:c.navBtnBg,onChange:e=>l(`navBtnBg`,e),disabled:!o.enabled,placeholder:`e.g. 255, 255, 255`})]}),(0,j.jsx)(K,{label:`Transparency`,value:c.navBtnOpacity,min:0,max:1,step:.02,onChange:e=>l(`navBtnOpacity`,e),disabled:!o.enabled}),(0,j.jsx)(K,{label:`Background alpha`,value:c.navBtnBgAlpha,min:0,max:.3,step:.01,onChange:e=>l(`navBtnBgAlpha`,e),disabled:!o.enabled}),(0,j.jsx)(K,{label:`Stroke thickness`,value:c.navBtnBorderWidth,min:0,max:4,step:.25,onChange:e=>l(`navBtnBorderWidth`,e),disabled:!o.enabled,suffix:`px`}),(0,j.jsx)(K,{label:`Stroke glow`,value:c.navBtnGlow,min:0,max:60,step:1,onChange:e=>l(`navBtnGlow`,e),disabled:!o.enabled,suffix:`px`}),(0,j.jsx)(K,{label:`Blur`,value:c.navBtnBackdropBlur,min:0,max:20,step:1,onChange:e=>l(`navBtnBackdropBlur`,e),disabled:!o.enabled,suffix:`px`}),(0,j.jsx)(K,{label:`Text glow`,value:c.navBtnTextGlow,min:0,max:60,step:1,onChange:e=>l(`navBtnTextGlow`,e),disabled:!o.enabled,suffix:`px`}),(0,j.jsx)(K,{label:`Hover intensity`,value:c.navBtnHoverIntensity,min:0,max:1.5,step:.05,onChange:e=>l(`navBtnHoverIntensity`,e),disabled:!o.enabled})]}),(0,j.jsx)(`button`,{onClick:()=>{u()},disabled:!o.enabled,className:`w-full mt-3 rounded-lg px-3 py-2 text-xs transition-all ${o.enabled?`bg-white/5 hover:bg-white/10 border border-white/10 text-white/70`:`bg-white/5 text-white/30 border border-white/10 cursor-not-allowed`}`,children:`Reset Nav Button FX`})]}):(0,j.jsx)(`div`,{className:`text-xs text-white/50`,children:`Locked`})})}var lt=ct;function ut({expanded:e,onToggle:t,isLight:n,devtoolsEnabled:r,universalPickerKind:i,setUniversalPickerKind:a,universalPickMode:o,handleStopUniversalPickFlow:s,handleStartUniversalPickFlow:c,legacyPickersEnabled:l,setLegacyPickersEnabled:u,pickDebugEnabled:d,setPickDebugEnabledLocal:f,uiTargetProbeEnabled:p,setUiTargetProbeEnabled:m,cardIdProbeEnabled:h,setCardIdProbeEnabled:g,pickDebugResolvedMode:_,pickDebugResolvedId:v,controlsSelectedId:y,controlsSelectedRoleGroup:b,controlsSurfaceIsRoot:x,controlsSurfaceDebug:ee,controlsElectricBorderEnabled:te,setControlsElectricBorderEnabled:ne,controlsFxDraft:re,setControlsFxDraft:S,setControlsFxPreset:ie,resetControlsFxPreset:C,getControlsFxPreset:ae,controlsPresetJson:oe,setControlsPresetJson:se,controlsPresetStatus:w,setControlsPresetStatus:ce,exportControlsFxPresetsJson:T,importControlsFxPresetsJson:E,resetAllControlsFxPresets:D,utcViolations:le,platesSelectedId:O,platesFxEnabled:k,setPlatesFxEnabled:A,platesFxDraft:ue,patchSelectedPlatePreset:de,platesResolved:fe,platesAdvancedOpen:pe,setPlatesAdvancedOpen:me,activePlateOverrideCount:he,resetSelectedPlateOverrides:ge,cardApplyToAll:_e,setCardApplyToAll:ve,cardState:ye,activeDraft:be,selectedDisabled:xe,onChangeCardSetting:Se,cardTunerExpanded:Ce,onToggleCardTuner:we,handleStopPickFlow:M,handleStartPickFlow:Te,handleTogglePeek:Ee,handleConfirmPickFlow:De,cardElectricBorderEnabled:Oe,setCardElectricBorderEnabled:N,practiceButtonFxEnabled:ke,setPracticeButtonFxEnabled:Ae,practiceButtonPickMode:je,setPracticeButtonPickMode:P,stopUniversalPickCaptureImmediate:Me,setUniversalPickMode:F,setPickMode:I,setPeekMode:Ne,practiceButtonApplyToAll:L,setPracticeButtonApplyToAll:R,practiceButtonSelectedKey:z,saveGlobal:Pe,globalDraft:Fe,saveSelected:B,selectedDraft:V,resetGlobal:H,resetSelected:Ie,clearAll:U,navBtnTunerExpanded:Le,onToggleNavBtnTuner:Re,navBtnProbeEnabled:ze,setNavBtnProbeEnabled:Be,navBtnState:Ve,setNavButtonTunerEnabled:He,navBtnDraft:Ue,onChangeNavBtnSetting:G,resetNavButtonSettings:We}){return(0,j.jsx)(W,{title:`Inspector`,expanded:e,onToggle:t,isLight:n,children:(0,j.jsxs)(`div`,{"data-testid":`devpanel-unified-inspector`,className:`space-y-3`,children:[r?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(`div`,{className:`text-[10px] text-white/50 mb-2`,children:`Universal picker (parity phase): controls + plates + cards. Conflict rule: only one global capture listener active.`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-3 gap-2 mb-2`,children:[(0,j.jsx)(`button`,{onClick:()=>a(`controls`),className:`px-3 py-2 rounded-lg text-xs border transition-all ${i===`controls`?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:`Controls`}),(0,j.jsx)(`button`,{onClick:()=>a(`card`),className:`px-3 py-2 rounded-lg text-xs border transition-all ${i===`card`?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:`Cards`}),(0,j.jsx)(`button`,{onClick:()=>a(`plates`),className:`px-3 py-2 rounded-lg text-xs border transition-all ${i===`plates`?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:`Plates`})]}),(0,j.jsx)(`button`,{onClick:()=>o?s():c(),className:`w-full mb-3 px-3 py-2 rounded-lg text-xs border transition-all ${o?`bg-amber-500/25 text-amber-200 border-amber-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:o?`Stop Picking`:`Pick Target`}),(0,j.jsx)(`button`,{onClick:()=>u(e=>!e),className:`w-full mb-3 px-3 py-2 rounded-lg text-xs border transition-all ${l?`bg-white/5 text-white/70 border-white/15 hover:bg-white/10`:`bg-fuchsia-500/15 text-fuchsia-200 border-fuchsia-400/60`}`,children:l?`Legacy pickers: ON`:`Legacy pickers: OFF`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-3 gap-2 mb-3`,children:[(0,j.jsxs)(`button`,{onClick:()=>f(e=>!e),className:`px-3 py-2 rounded-lg text-xs border transition-all ${d?`bg-emerald-500/20 text-emerald-200 border-emerald-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:[`Pick Debug `,d?`ON`:`OFF`]}),(0,j.jsx)(`button`,{onClick:()=>m(e=>!e),className:`px-3 py-2 rounded-lg text-xs border transition-all ${p?`bg-fuchsia-500/15 text-fuchsia-200 border-fuchsia-400/60`:`bg-white/5 text-white/70 border-white/15`}`,children:`Probe: Targets`}),(0,j.jsx)(`button`,{onClick:()=>g(e=>!e),className:`px-3 py-2 rounded-lg text-xs border transition-all ${h?`bg-cyan-500/20 text-cyan-200 border-cyan-400/50`:`bg-white/5 text-white/70 border-white/15`}`,children:`Probe: Cards`})]}),(0,j.jsxs)(`div`,{className:`mb-3 text-[11px] text-white/70 font-mono bg-white/5 border border-white/10 rounded-lg px-3 py-2`,children:[`Debug resolved: `,_?`${_} ‚Üí ${v||`null`}`:`none`]}),(0,j.jsx)(tt,{universalPickerKind:i,controlsSelectedId:y,controlsSelectedRoleGroup:b,controlsSurfaceIsRoot:x,controlsSurfaceDebug:ee,controlsElectricBorderEnabled:te,setControlsElectricBorderEnabled:ne,controlsFxDraft:re,setControlsFxDraft:S,setControlsFxPreset:ie,resetControlsFxPreset:C,getControlsFxPreset:ae,controlsPresetJson:oe,setControlsPresetJson:se,controlsPresetStatus:w,setControlsPresetStatus:ce,exportControlsFxPresetsJson:T,importControlsFxPresetsJson:E,resetAllControlsFxPresets:D,utcViolations:le}),(0,j.jsx)(rt,{universalPickerKind:i,platesSelectedId:O,platesFxEnabled:k,setPlatesFxEnabled:A,platesFxDraft:ue,patchSelectedPlatePreset:de,platesResolved:fe,platesAdvancedOpen:pe,setPlatesAdvancedOpen:me,activePlateOverrideCount:he,resetSelectedPlateOverrides:ge}),i===`card`&&(0,j.jsx)(`div`,{className:`text-[10px] text-white/45 mb-2`,children:`Card styling and Practice Button FX are below.`}),(0,j.jsx)(`div`,{className:`text-[10px] text-white/45 mb-2`,children:`Nav Button FX is below.`})]}):(0,j.jsx)(`div`,{className:`text-xs text-white/50`,children:`Locked`}),(0,j.jsx)(at,{expanded:Ce,onToggle:we,isLight:n,devtoolsEnabled:r,legacyPickersEnabled:l,cardState:ye,handleStopPickFlow:M,handleStartPickFlow:Te,cardApplyToAll:_e,setCardApplyToAll:ve,handleTogglePeek:Ee,handleConfirmPickFlow:De,activeDraft:be,selectedDisabled:xe,onChangeCardSetting:Se,cardElectricBorderEnabled:Oe,setCardElectricBorderEnabled:N,practiceButtonFxEnabled:ke,setPracticeButtonFxEnabled:Ae,practiceButtonPickMode:je,setPracticeButtonPickMode:P,stopUniversalPickCaptureImmediate:Me,setUniversalPickMode:F,setPickMode:I,setPeekMode:Ne,practiceButtonApplyToAll:L,setPracticeButtonApplyToAll:R,practiceButtonSelectedKey:z,saveGlobal:Pe,globalDraft:Fe,saveSelected:B,selectedDraft:V,resetGlobal:H,resetSelected:Ie,clearAll:U}),(0,j.jsx)(lt,{expanded:Le,onToggle:Re,isLight:n,devtoolsEnabled:r,navBtnProbeEnabled:ze,setNavBtnProbeEnabled:Be,navBtnState:Ve,setNavButtonTunerEnabled:He,navBtnDraft:Ue,onChangeNavBtnSetting:G,resetNavButtonSettings:We})]})})}var dt=ut,ft={Seedling:{color:`#588B7A`,secondary:`#22c55e`},Ember:{color:`#f97316`,secondary:`#ea580c`},Flame:{color:`#fcd34d`,secondary:`#f59e0b`},Beacon:{color:`#22d3ee`,secondary:`#06b6d4`},Stellar:{color:`#a78bfa`,secondary:`#8b5cf6`}},pt={basic:{label:`Basic`,bloomStrength:2,bloomRadius:.4,bloomThreshold:.3,breathSpeed:.8,streakStrength:0,streakThreshold:.85,streakLength:.65,streakAngle:0,rayEnabled:!1,rayExposure:.15,rayWeight:.5,rayDecay:.95,raySamples:50,rayDensity:.6,rayClampMax:.75,raySunY:.45,raySunZ:-2,raySunRadius:.1,occluderEnabled:!1,occluderPattern:`cross`,occluderScale:1.2,occluderDepthOffset:-1.5,trailEnabled:!1,trailIntensity:.8,trailLength:40,trailSpread:.04,trailSpeed:.6,trailSparkle:.3},soft:{label:`Soft`,bloomStrength:1.2,bloomRadius:.6,bloomThreshold:.5,breathSpeed:.6,streakStrength:0,streakThreshold:.85,streakLength:.65,streakAngle:0,rayEnabled:!1,rayExposure:.1,rayWeight:.4,rayDecay:.93,raySamples:40,rayDensity:.5,rayClampMax:.6,raySunY:.45,raySunZ:-2,raySunRadius:.1,occluderEnabled:!1,occluderPattern:`cross`,occluderScale:1.2,occluderDepthOffset:-1.5,trailEnabled:!1,trailIntensity:.5,trailLength:30,trailSpread:.02,trailSpeed:.4,trailSparkle:.1},radiant:{label:`Radiant`,bloomStrength:2.4,bloomRadius:.55,bloomThreshold:.28,breathSpeed:.9,streakStrength:.3,streakThreshold:.85,streakLength:.65,streakAngle:0,rayEnabled:!0,rayExposure:.15,rayWeight:.5,rayDecay:.95,raySamples:50,rayDensity:.6,rayClampMax:.75,raySunY:.45,raySunZ:-2,raySunRadius:.1,occluderEnabled:!0,occluderPattern:`cross`,occluderScale:1.2,occluderDepthOffset:-1.5,trailEnabled:!0,trailIntensity:.8,trailLength:50,trailSpread:.04,trailSpeed:.6,trailSparkle:.3},cinematic:{label:`Cinematic`,bloomStrength:2.8,bloomRadius:.6,bloomThreshold:.25,breathSpeed:1,streakStrength:.5,streakThreshold:.82,streakLength:.7,streakAngle:0,rayEnabled:!0,rayExposure:.18,rayWeight:.6,rayDecay:.96,raySamples:60,rayDensity:.7,rayClampMax:.8,raySunY:.45,raySunZ:-2,raySunRadius:.12,occluderEnabled:!0,occluderPattern:`cross`,occluderScale:1.3,occluderDepthOffset:-1.5,trailEnabled:!0,trailIntensity:1.2,trailLength:70,trailSpread:.06,trailSpeed:.8,trailSparkle:.5}},mt=[`basic`,`soft`,`radiant`,`cinematic`];function J({label:e,min:t,max:n,step:r,value:i,onChange:a,format:o,isLight:s}){return(0,j.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,j.jsx)(`span`,{style:{minWidth:`92px`,fontSize:`11px`,color:s?`rgba(60,50,40,0.6)`:`rgba(255,255,255,0.6)`,flexShrink:0},children:e}),(0,j.jsx)(`input`,{type:`range`,min:t,max:n,step:r,value:i,onChange:e=>a(parseFloat(e.target.value)),style:{flex:1,minWidth:0,accentColor:`#f59e0b`}}),(0,j.jsx)(`span`,{style:{width:`38px`,textAlign:`right`,fontFamily:`monospace`,fontSize:`11px`,color:s?`rgba(60,50,40,0.45)`:`rgba(255,255,255,0.45)`,flexShrink:0},children:(o||(e=>e.toFixed(2)))(i)})]})}function Y({label:e,checked:t,onChange:n,isLight:r}){return(0,j.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,j.jsx)(`span`,{style:{fontSize:`11px`,color:r?`rgba(60,50,40,0.6)`:`rgba(255,255,255,0.6)`},children:e}),(0,j.jsx)(`input`,{type:`checkbox`,checked:t,onChange:e=>n(e.target.checked),style:{accentColor:`#f59e0b`,width:`14px`,height:`14px`}})]})}function ht({label:e,value:t,onChange:n,options:r,isLight:i}){return(0,j.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,gap:`8px`},children:[(0,j.jsx)(`span`,{style:{fontSize:`11px`,color:i?`rgba(60,50,40,0.6)`:`rgba(255,255,255,0.6)`,flexShrink:0},children:e}),(0,j.jsx)(`select`,{value:t,onChange:e=>n(e.target.value),style:{fontSize:`11px`,flex:1,background:i?`rgba(255,255,255,0.9)`:`#0a0a12`,border:i?`1px solid rgba(180,155,110,0.3)`:`1px solid rgba(255,255,255,0.2)`,color:i?`rgba(60,50,40,0.95)`:`white`,borderRadius:`4px`,padding:`2px 4px`,colorScheme:i?`light`:`dark`},children:r.map(e=>(0,j.jsx)(`option`,{value:e.value,children:e.label},e.value))})]})}function X({label:e,open:t,onToggle:n,isLight:r}){return(0,j.jsxs)(`button`,{onClick:n,style:{display:`flex`,alignItems:`center`,gap:`6px`,width:`100%`,background:`none`,border:`none`,cursor:`pointer`,padding:`4px 0`,color:r?`rgba(60,50,40,0.5)`:`rgba(255,255,255,0.45)`},children:[(0,j.jsx)(`span`,{style:{fontSize:`9px`,fontFamily:`monospace`},children:t?`‚ñæ`:`‚ñ∏`}),(0,j.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,letterSpacing:`0.06em`,textTransform:`uppercase`},children:e}),(0,j.jsx)(`span`,{style:{flex:1,height:`1px`,background:r?`rgba(180,155,110,0.2)`:`rgba(255,255,255,0.1)`,marginLeft:`4px`}})]})}function gt({isLight:e=!1}){let[t,n]=(0,M.useState)(`basic`),[r,a]=(0,M.useState)(`Flame`),[o,s]=(0,M.useState)(2),[c,l]=(0,M.useState)(.8),[u,d]=(0,M.useState)(.4),[f,p]=(0,M.useState)(.3),[m,h]=(0,M.useState)(0),[g,_]=(0,M.useState)(.85),[v,y]=(0,M.useState)(.65),[b,x]=(0,M.useState)(0),[ee,te]=(0,M.useState)(!1),[ne,re]=(0,M.useState)(.8),[S,ie]=(0,M.useState)(40),[C,ae]=(0,M.useState)(.04),[oe,se]=(0,M.useState)(.6),[w,ce]=(0,M.useState)(.3),[T,E]=(0,M.useState)(!1),[D,le]=(0,M.useState)(.15),[O,k]=(0,M.useState)(.5),[A,ue]=(0,M.useState)(.95),[de,fe]=(0,M.useState)(50),[pe,me]=(0,M.useState)(.6),[he,ge]=(0,M.useState)(.75),[_e,ve]=(0,M.useState)(.45),[ye,be]=(0,M.useState)(-2),[xe,Se]=(0,M.useState)(.1),[Ce,we]=(0,M.useState)(!1),[Te,Ee]=(0,M.useState)(`cross`),[De,Oe]=(0,M.useState)(1.2),[N,ke]=(0,M.useState)(-1.5),[Ae,je]=(0,M.useState)(!1),[P,Me]=(0,M.useState)(!1),[F,I]=(0,M.useState)(!1),[Ne,L]=(0,M.useState)(!1),[R,z]=(0,M.useState)(!1),[Pe,Fe]=(0,M.useState)(`inhale`),[B,V]=(0,M.useState)(0),[H,Ie]=(0,M.useState)(!0),U=(0,M.useRef)(null),[Le,Re]=(0,M.useState)({w:0,h:0});(0,M.useEffect)(()=>{if(!U.current)return;let e=new ResizeObserver(e=>{for(let t of e){let{width:e,height:n}=t.contentRect;Re({w:Math.floor(e),h:Math.floor(n)})}});return e.observe(U.current),()=>e.disconnect()},[]);let ze=e=>{let t=pt[e];t&&(n(e),s(t.bloomStrength),d(t.bloomRadius),p(t.bloomThreshold),l(t.breathSpeed),h(t.streakStrength),_(t.streakThreshold),y(t.streakLength),x(t.streakAngle),E(t.rayEnabled),le(t.rayExposure),k(t.rayWeight),ue(t.rayDecay),fe(t.raySamples),me(t.rayDensity),ge(t.rayClampMax),ve(t.raySunY),be(t.raySunZ),Se(t.raySunRadius),we(t.occluderEnabled),Ee(t.occluderPattern),Oe(t.occluderScale),ke(t.occluderDepthOffset),te(t.trailEnabled),re(t.trailIntensity),ie(t.trailLength),ae(t.trailSpread),se(t.trailSpeed),ce(t.trailSparkle),t.trailEnabled&&I(!0),t.rayEnabled&&L(!0))},Be=ft[r]?.color||`#ffffff`,Ve=Le.w>=50&&Le.h>=50,He=o>2.4?Math.max(u,.45):u,W=o>2.4?Math.max(f,.22):f,Ue={borderTop:`1px solid ${e?`rgba(180,155,110,0.2)`:`rgba(255,255,255,0.1)`}`,marginTop:`8px`,paddingTop:`8px`},G=e?`rgba(60,50,40,0.45)`:`rgba(255,255,255,0.4)`,We={fontSize:`11px`,fontWeight:600,borderRadius:`6px`,padding:`4px 8px`,cursor:`pointer`,border:`1px solid`,transition:`all 0.15s ease`},Ge=e=>({background:`${e}22`,borderColor:e,color:e}),Ke={background:`transparent`,borderColor:e?`rgba(180,155,110,0.3)`:`rgba(255,255,255,0.2)`,color:e?`rgba(60,50,40,0.55)`:`rgba(255,255,255,0.5)`};return(0,j.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,j.jsx)(`div`,{ref:U,style:{background:e?`rgba(255,255,255,0.95)`:`rgba(10,10,18,0.5)`,borderRadius:`8px`,overflow:`hidden`,border:`1px solid ${e?`rgba(180,155,110,0.2)`:`rgba(255,255,255,0.1)`}`,width:`100%`,maxWidth:`300px`,height:`300px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:Ve?(0,j.jsx)(i,{params:{width:Le.w,height:Le.h,bloomStrength:o,bloomRadius:He,bloomThreshold:W,breathSpeed:c,streakStrength:m,streakThreshold:g,streakLength:v,rayEnabled:T,rayExposure:D,rayWeight:O,rayDecay:A,raySamples:de,rayDensity:pe,rayClampMax:he,raySunY:_e,raySunZ:ye,raySunRadius:xe,occluderEnabled:Ce,occluderPattern:Te,occluderScale:De,occluderDepthOffset:N,debugOccluders:Ae,trailEnabled:ee,trailIntensity:ne,trailLength:S,trailSpread:C,trailSpeed:oe,trailSparkle:w,...R?{breathDriver:{phase:Pe,cycleProgress01:0,phaseProgress01:B}}:{}},accentColor:Be,mode:`lab`}):(0,j.jsx)(`div`,{style:{fontSize:`10px`,color:G},children:`Waiting for layout‚Ä¶`})}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`div`,{style:{fontSize:`10px`,color:G,marginBottom:`6px`,textTransform:`uppercase`,letterSpacing:`0.07em`},children:`Preset`}),(0,j.jsx)(`div`,{style:{display:`flex`,gap:`6px`,flexWrap:`wrap`},children:mt.map(e=>{let n=t===e;return(0,j.jsx)(`button`,{onClick:()=>ze(e),style:{...We,...n?Ge(Be):Ke},children:pt[e].label},e)})})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`div`,{style:{fontSize:`10px`,color:G,marginBottom:`6px`,textTransform:`uppercase`,letterSpacing:`0.07em`},children:`Stage`}),(0,j.jsx)(`div`,{style:{display:`flex`,gap:`5px`,flexWrap:`wrap`},children:Object.entries(ft).map(([e,{color:t}])=>{let n=r===e;return(0,j.jsx)(`button`,{onClick:()=>a(e),style:{...We,fontSize:`10px`,padding:`3px 7px`,...n?Ge(t):Ke},children:e},e)})})]}),(0,j.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`,...Ue},children:[(0,j.jsx)(J,{label:`Breath Speed`,min:.1,max:2.5,step:.05,value:c,onChange:l,isLight:e}),(0,j.jsx)(J,{label:`Radiance`,min:0,max:3,step:.05,value:o,onChange:s,isLight:e})]}),(0,j.jsxs)(`div`,{style:Ue,children:[(0,j.jsx)(X,{label:`Advanced`,open:P,onToggle:()=>Me(e=>!e),isLight:e,accent:Be}),P&&(0,j.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`,paddingTop:`8px`},children:[(0,j.jsx)(`div`,{style:{fontSize:`10px`,color:G,marginBottom:`2px`},children:`Bloom`}),(0,j.jsx)(J,{label:`Radius`,min:0,max:1,step:.01,value:u,onChange:d,isLight:e}),(0,j.jsx)(J,{label:`Threshold`,min:0,max:1,step:.01,value:f,onChange:p,isLight:e}),(0,j.jsx)(`div`,{style:{fontSize:`10px`,color:G,marginTop:`6px`,marginBottom:`2px`},children:`Ring / Streak`}),(0,j.jsx)(J,{label:`Core/Shoulder`,min:0,max:2,step:.01,value:m,onChange:h,isLight:e}),(0,j.jsx)(J,{label:`Streak Length`,min:0,max:1,step:.01,value:v,onChange:y,isLight:e}),(0,j.jsx)(J,{label:`Streak Angle`,min:-90,max:90,step:1,value:b,onChange:x,isLight:e,format:e=>`${e}¬∞`})]})]}),(0,j.jsxs)(`div`,{style:Ue,children:[(0,j.jsx)(X,{label:`Trail`,open:F,onToggle:()=>I(e=>!e),isLight:e,accent:Be}),F&&(0,j.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`,paddingTop:`8px`},children:[(0,j.jsx)(Y,{label:`Enabled`,checked:ee,onChange:te,isLight:e}),(0,j.jsx)(J,{label:`Intensity`,min:0,max:2,step:.05,value:ne,onChange:re,isLight:e}),(0,j.jsx)(J,{label:`Length`,min:5,max:80,step:1,value:S,onChange:ie,isLight:e,format:e=>`${Math.round(e)}`}),(0,j.jsx)(J,{label:`Spread`,min:0,max:.2,step:.005,value:C,onChange:ae,isLight:e,format:e=>e.toFixed(3)}),(0,j.jsx)(J,{label:`Speed`,min:.05,max:2,step:.05,value:oe,onChange:se,isLight:e}),(0,j.jsx)(J,{label:`Sparkle`,min:0,max:1,step:.05,value:w,onChange:ce,isLight:e})]})]}),(0,j.jsxs)(`div`,{style:Ue,children:[(0,j.jsx)(X,{label:`Phase Sim`,open:H,onToggle:()=>Ie(e=>!e),isLight:e}),H&&(0,j.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`,paddingTop:`8px`},children:[(0,j.jsx)(Y,{label:`Use Phase Truth`,checked:R,onChange:z,isLight:e}),R&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ht,{label:`Phase`,value:Pe,onChange:Fe,options:[{value:`inhale`,label:`Inhale`},{value:`holdTop`,label:`Hold Top`},{value:`exhale`,label:`Exhale`},{value:`holdBottom`,label:`Hold Bottom`}],isLight:e}),(0,j.jsx)(J,{label:`Phase Prog`,min:0,max:1,step:.01,value:B,onChange:V,isLight:e})]})]})]}),(0,j.jsxs)(`div`,{style:Ue,children:[(0,j.jsx)(X,{label:`Expert`,open:Ne,onToggle:()=>L(e=>!e),isLight:e,accent:Be}),Ne&&(0,j.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`,paddingTop:`8px`},children:[(0,j.jsx)(Y,{label:`God Rays`,checked:T,onChange:E,isLight:e}),T&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(J,{label:`Ray Exposure`,min:0,max:1,step:.01,value:D,onChange:le,isLight:e}),(0,j.jsx)(J,{label:`Ray Weight`,min:0,max:1,step:.05,value:O,onChange:k,isLight:e}),(0,j.jsx)(J,{label:`Ray Decay`,min:.8,max:1,step:.01,value:A,onChange:ue,isLight:e}),(0,j.jsx)(J,{label:`Ray Samples`,min:20,max:100,step:5,value:de,onChange:fe,isLight:e,format:e=>`${Math.round(e)}`}),(0,j.jsx)(J,{label:`Ray Density`,min:0,max:2,step:.05,value:pe,onChange:me,isLight:e}),(0,j.jsx)(J,{label:`Ray ClampMax`,min:.2,max:1,step:.05,value:he,onChange:ge,isLight:e})]}),(0,j.jsx)(`div`,{style:{fontSize:`10px`,color:e?`rgba(60,50,40,0.45)`:`rgba(255,255,255,0.4)`,marginTop:`4px`},children:`Sun Proxy`}),(0,j.jsx)(J,{label:`Sun Y`,min:0,max:1,step:.01,value:_e,onChange:ve,isLight:e}),(0,j.jsx)(J,{label:`Sun Z`,min:-3,max:-.5,step:.1,value:ye,onChange:be,isLight:e,format:e=>e.toFixed(1)}),(0,j.jsx)(J,{label:`Sun Radius`,min:.02,max:.25,step:.01,value:xe,onChange:Se,isLight:e}),(0,j.jsx)(`div`,{style:{fontSize:`10px`,color:e?`rgba(60,50,40,0.45)`:`rgba(255,255,255,0.4)`,marginTop:`4px`},children:`Occluders`}),(0,j.jsx)(Y,{label:`Enabled`,checked:Ce,onChange:we,isLight:e}),(0,j.jsx)(ht,{label:`Pattern`,value:Te,onChange:Ee,options:[{value:`cross`,label:`Cross`},{value:`grid`,label:`Grid`},{value:`radial`,label:`Radial`}],isLight:e}),(0,j.jsx)(J,{label:`Scale`,min:.5,max:2.5,step:.1,value:De,onChange:Oe,isLight:e,format:e=>e.toFixed(1)}),(0,j.jsx)(J,{label:`Depth`,min:-3,max:-.5,step:.1,value:N,onChange:ke,isLight:e,format:e=>e.toFixed(1)}),(0,j.jsx)(Y,{label:`Debug Occluders`,checked:Ae,onChange:je,isLight:e})]})]}),(0,j.jsx)(`div`,{style:{fontSize:`10px`,borderRadius:`6px`,padding:`6px 8px`,marginTop:`4px`,background:e?`rgba(180,155,110,0.08)`:`rgba(255,255,255,0.05)`,color:e?`rgba(60,50,40,0.45)`:`rgba(255,255,255,0.35)`},children:`Phase 2 ¬∑ Stage-aware presets + particle trail prototype. Trail layer is bloom-aware and stage-accent driven.`})]})}function _t({stageKey:e}){let[t,n]=M.useState(`pending`),[r,i]=M.useState(``),[a,o]=M.useState(``);return M.useEffect(()=>{if(!e)return;o(`/Immanence/`);let t=getStageWallpaperUrl(e);i(t);let r=new window.Image;r.onload=()=>n(`loaded`),r.onerror=()=>n(`error`),r.src=t},[e]),(0,j.jsxs)(`div`,{style:{fontSize:11,fontFamily:`monospace`,background:`#181818`,color:`#b5f4ff`,borderRadius:6,padding:8,margin:`8px 0`},children:[(0,j.jsx)(`div`,{children:(0,j.jsx)(`b`,{children:`Practice Card Wallpaper Diagnostics`})}),(0,j.jsxs)(`div`,{children:[`stageKey: `,(0,j.jsx)(`span`,{style:{color:`#fff`},children:e})]}),(0,j.jsxs)(`div`,{children:[`BASE_URL: `,(0,j.jsx)(`span`,{style:{color:`#fff`},children:a})]}),(0,j.jsxs)(`div`,{children:[`wallpaperUrl: `,(0,j.jsx)(`span`,{style:{color:`#fff`},children:r})]}),(0,j.jsxs)(`div`,{children:[`status: `,(0,j.jsx)(`span`,{style:{color:t===`loaded`?`#7fff7f`:t===`error`?`#ff7f7f`:`#fff`},children:t})]})]})}var vt=[`Seedling`,`Ember`,`Flame`,`Beacon`,`Stellar`],yt=[`Yantra`,`Kaya`,`Chitra`,`Nada`];function bt(e=[]){let t=null;return e.forEach(e=>{let n=e?.dateKey;n&&(!t||n>t)&&(t=n)}),t}function xt(){let[e,t]=(0,M.useState)(0);return(0,M.useEffect)(()=>{let e=()=>t(document.querySelectorAll(`[data-tutorial]`).length);e();let n=setInterval(e,1e3);return()=>clearInterval(n)},[]),(0,j.jsx)(`span`,{className:`text-white/70 font-mono`,children:e})}function St({isOpen:e,onClose:n,avatarStage:i,setAvatarStage:a,avatarPath:s,setAvatarPath:c,showCore:u,setShowCore:d,avatarAttention:p,setAvatarAttention:g}){let _=(i||`seedling`).toLowerCase(),b=l(e=>e.showCoordinateHelper),ee=l(e=>e.setCoordinateHelper),Te=l(e=>e.practiceButtonFxEnabled),Ee=l(e=>e.setPracticeButtonFxEnabled),De=l(e=>e.cardElectricBorderEnabled),Oe=l(e=>e.setCardElectricBorderEnabled);l(e=>e.lightModeRingType),l(e=>e.setLightModeRingType);let N=l(e=>e.photic),P=l(e=>e.setPhoticSetting),Me=y(e=>e.colorScheme),I=y(e=>e.stageAssetStyle),Ne=y(e=>e.setStageAssetStyle),L=Me===`light`,R=h(),[z,Pe]=(0,M.useState)(!1),Fe=R,B=Fe&&!z,V=!!R,H=qe(e,V),Ie=(typeof window<`u`?window.location.pathname:``)===`/__playground`,[U,He]=(0,M.useState)(`Flame`),[Ue,We]=(0,M.useState)(yt[0]||`Yantra`),[Ke,Je]=(0,M.useState)(!0),[K,Ye]=(0,M.useState)(`none`),Xe=i??U,Ze=a??He,Qe=s??Ue,et=c??We,tt=u??Ke,nt=d??Je,rt=p??K,it=g??Ye;(0,M.useEffect)(()=>{e&&s===null&&c&&c(Ue)},[e]);let[q,at]=(0,M.useState)({avatar:!0,avatarCompositeTuner:!0,inspectorNew:!1,cardTuner:!0,navBtnTuner:!1,playground:!1,curriculum:!1,tracking:!1,data:!1,bloomRingLab:!1}),[ot,st]=(0,M.useState)(null),[ct,lt]=(0,M.useState)(!1),[ut,ft]=(0,M.useState)(null),[pt,mt]=(0,M.useState)(!1),[J,Y]=(0,M.useState)(!1),[ht,X]=(0,M.useState)(!1),[bt,St]=(0,M.useState)(!0),[Tt,Et]=(0,M.useState)(null),Dt=`immanence.dev.pickers.legacy.enabled`,[Ot,kt]=(0,M.useState)(!0),At=`immanence.dev.pickers.pickDebug.enabled`,[jt,Mt]=(0,M.useState)(!1),[Nt,Pt]=(0,M.useState)(!1),[Ft,It]=(0,M.useState)(`controls`),[Lt,Rt]=(0,M.useState)(!1),[zt,Bt]=(0,M.useState)(!1),[Vt,Ht]=(0,M.useState)([]),[Ut,Wt]=(0,M.useState)(null),[Gt,Kt]=(0,M.useState)(null),[qt,Jt]=(0,M.useState)(!1),[Yt,Xt]=(0,M.useState)(null),[Zt,Qt]=(0,M.useState)(null),[$t,en]=(0,M.useState)(null),tn=(0,M.useRef)(null),nn=(0,M.useRef)(null),rn=l(e=>!!e.controlsElectricBorderEnabled),an=l(e=>e.setControlsElectricBorderEnabled),[on,sn]=(0,M.useState)({..._e}),[cn,ln]=(0,M.useState)(``),[un,dn]=(0,M.useState)(``),[Z,fn]=(0,M.useState)(null),[pn,mn]=(0,M.useState)({...we}),[hn,gn]=(0,M.useState)(!1),_n=l(e=>!!e.platesFxEnabled),vn=l(e=>e.setPlatesFxEnabled),yn=(0,M.useCallback)(e=>{if(!(typeof window>`u`))try{ue(`immanence.dev.controlsFxPicker`,`immanence-controls-fx-picker`,e)}catch{}},[]),bn=(0,M.useCallback)(e=>(...t)=>{if(!B)return e(...t)},[B]),xn=(0,M.useCallback)((e,t)=>{},[]),Sn=(0,M.useCallback)(e=>e instanceof Element?{tag:String(e.tagName||``).toLowerCase(),class:typeof e.className==`string`?e.className:null,dataset:e.dataset?{...e.dataset}:{}}:null,[]),Cn=(0,M.useCallback)((e,t=12)=>{let n=[],r=e instanceof Element?e:null;for(;r&&n.length<t;)n.push(Sn(r)),r=r.parentElement;return n},[Sn]);(0,M.useEffect)(()=>{if(!H)return;if(!zt&&!Lt){Ht([]);return}let e=0;return e=window.requestAnimationFrame(()=>{try{let e=Array.from(document.querySelectorAll(`[data-ui-target="true"]`)),t=[];for(let n of e){let e=ne(n);e.ok||t.push({violationKey:e.violationKey||`UNKNOWN`,reasons:Array.isArray(e.reasons)?e.reasons:[`invalid`]})}Ht(t)}catch{Ht([])}}),()=>{e&&window.cancelAnimationFrame(e)}},[e,V,zt,Lt]);let wn=(0,M.useCallback)((e,t,n,r)=>{},[jt,Cn,Sn]),Tn=(0,M.useCallback)(()=>{let e=tn.current;e&&(document.removeEventListener(`click`,e,!0),tn.current=null)},[]),En=(0,M.useCallback)(()=>{let e=nn.current;e&&(document.removeEventListener(`click`,e,!0),nn.current=null)},[]),[Q,Dn]=(0,M.useState)({pickMode:!1,hasSelected:!1,selectedCardId:null,selectedCardCarouselId:null,selectedLabel:null,lastPickFailure:null,globalSettings:{...k},selectedSettings:null}),[On,kn]=(0,M.useState)({...k}),[An,jn]=(0,M.useState)({...k}),[Mn,Nn]=(0,M.useState)({enabled:!1,settings:{...F}}),[Pn,Fn]=(0,M.useState)({...F}),[In,Ln]=(0,M.useState)(!1),Rn=localStorage.getItem(`immanence.tutorial.admin`)===`1`,$=e=>{at(t=>({...t,[e]:!t[e]}))},zn=(0,M.useCallback)((e,t)=>{ot===e?(t(),st(null)):(st(e),setTimeout(()=>st(null),3e3))},[ot]),Bn=()=>{ft(je()),lt(!0)},Vn=()=>{Rn?localStorage.removeItem(`immanence.tutorial.admin`):localStorage.setItem(`immanence.tutorial.admin`,`1`),location.reload()},Hn=()=>{typeof window>`u`||(sessionStorage.setItem(`dev:returnPath`,window.location.pathname),window.location.assign(`/__playground`))},Un=()=>{if(typeof window>`u`)return;let e=sessionStorage.getItem(`dev:returnPath`)||`/`;window.location.assign(e)};(0,M.useEffect)(()=>{if(!H)return;E();let e=ce(e=>{Dn(e),e.globalSettings&&kn(e.globalSettings),e.selectedSettings&&jn(e.selectedSettings)});return()=>{D(!1),Y(!1),e()}},[e,V]),(0,M.useEffect)(()=>{if(H)try{let e=window.localStorage.getItem(At);e===`1`&&Mt(!0),e===`0`&&Mt(!1)}catch{}},[e,V]),(0,M.useEffect)(()=>{if(H){try{window.localStorage.setItem(At,jt?`1`:`0`)}catch{}try{oe(!!jt)}catch{}}},[e,V,jt]),(0,M.useEffect)(()=>{if(H)return document.body.classList.toggle(`dev-card-id-probe`,Nt),()=>document.body.classList.remove(`dev-card-id-probe`)},[e,V,Nt]),(0,M.useEffect)(()=>{if(!H)return;Le();let e=Re(e=>{Nn(e),e?.settings&&Fn(e.settings)});return()=>e()},[e,V]),(0,M.useEffect)(()=>{if(V)return document.body.classList.toggle(`dev-nav-btn-probe`,In),()=>document.body.classList.remove(`dev-nav-btn-probe`)},[V,In]),(0,M.useEffect)(()=>{if(!H)return;let e=e=>{let t=String(e.key||``).toLowerCase();e.ctrlKey&&e.altKey&&e.shiftKey&&t===`k`&&(e.preventDefault(),Y(e=>!e))};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[e,V]);let Wn=pt?On:Q.hasSelected?An:On,Gn=!pt&&!Q.hasSelected,Kn=(e,t)=>{if(pt){let n={...On,[e]:t};kn(n),T(n);return}if(!Q.hasSelected)return;let n={...An,[e]:t};jn(n),le(n)},qn=()=>{En(),Tn(),Rt(!1),X(!1),D(!0),Y(!0)},Jn=(e,t)=>{let n={...Pn,[e]:t};Fn(n),Be(n)},Yn=()=>{D(!1)},Xn=()=>{D(!1),Y(!1)},Zn=()=>{D(!1),Y(!1),Tn(),X(!1),Wt(null),Kt(null),Jt(!1),Xt(null),Qt(null),en(null),fn(null),Rt(!0)},Qn=()=>{D(!1),Rt(!1)},$n=()=>{Y(e=>!e)},er=`immanence.dev.practiceButtonFxPicker`,tr=(0,M.useCallback)(e=>{if(!(typeof window>`u`))try{ue(er,`immanence-practice-button-fx-picker`,e)}catch{}},[]);(0,M.useEffect)(()=>{if(H)try{let e=window.localStorage.getItem(er);if(!e)return;let t=JSON.parse(e);St(t?.applyToAll!==!1),Et(typeof t?.selectedKey==`string`?t.selectedKey:null)}catch{}},[e,V]),(0,M.useEffect)(()=>{if(H)try{let e=window.localStorage.getItem(Dt);e===`0`&&kt(!1),e===`1`&&kt(!0)}catch{}},[e,V]),(0,M.useEffect)(()=>{if(H)try{window.localStorage.setItem(Dt,Ot?`1`:`0`)}catch{}},[e,V,Ot]),(0,M.useEffect)(()=>{H&&(Ot||(D(!1),Y(!1),Tn(),X(!1)))},[e,V,Ot,Tn]),(0,M.useEffect)(()=>{H&&tr({applyToAll:bt,selectedKey:Tt})},[e,V,bt,Tt,tr]),(0,M.useEffect)(()=>{H&&yn({selectedId:Ut||null})},[e,V,Ut,yn]),(0,M.useEffect)(()=>{H&&sn(he(Ut))},[e,V,Ut]),(0,M.useEffect)(()=>{if(!H||!ht)return;D(!1),Y(!1),Rt(!1);let e=e=>{let t=String(e||``).trim().toLowerCase();return t?t===`perception`?`visual`:t===`resonance`?`sound`:t:null},t=t=>{let n=t?.target instanceof Element?t.target:null;if(!n)return;let r=n.closest(`[data-ui="practice-button"]`);if(wn(`legacy:practice-button`,`legacy`,t,r),Qt(`legacy:practice-button`),en(null),!r){xn(`practice-button`,n);return}t.preventDefault(),t.stopPropagation(),typeof t.stopImmediatePropagation==`function`&&t.stopImmediatePropagation();let i=e(r.getAttribute(`data-practice-type`)),a=r.getAttribute(`data-practice-id`)||r.id||i||`practice`,o=`${i||`practice`}:${a}`;en(o),Et(o),St(!1)};return Tn(),tn.current=t,document.addEventListener(`click`,t,!0),()=>{document.removeEventListener(`click`,t,!0),tn.current===t&&(tn.current=null)}},[e,V,ht,wn,xn,Tn]),(0,M.useEffect)(()=>{let t=()=>{try{document.body.classList.remove(`dev-plates-picker-active`)}catch{}};if(!e||!V){o(),f(),En(),t();return}if(!Lt){o(),f(),En(),t();return}if(D(!1),Y(!1),Tn(),X(!1),Ft===`controls`||Ft===`plates`){if(En(),S(),Ft===`plates`)try{document.body.classList.add(`dev-plates-picker-active`)}catch{}else t();return re({kind:Ft,onPick:({validation:e})=>{let t=e?.rootId||null;if(t){if(Ft===`controls`){Qt(`universal:controls`),en(t),Wt(t),Kt(e?.roleGroup||null),Jt(!!e?.surfaceIsRoot);let n=e?.surfaceEl&&typeof e.surfaceEl.tagName==`string`?e.surfaceEl:null;Xt(n?{tag:String(n.tagName||``).toLowerCase(),className:typeof n.className==`string`?n.className:null}:null);return}Qt(`universal:plates`),en(t),fn(t);try{ue(`immanence.dev.platesFxPicker`,`immanence-plates-fx-picker`,{selectedId:t})}catch{}}}}),()=>{o(),f(),t()}}if(Ft===`card`){o(),f(),t(),En();let e=e=>{let t=e?.target instanceof Element?e.target:null;if(!t||t.closest?.(`[data-devpanel-root="true"]`))return;let n=ie(e);wn(`universal:card`,`universal`,e,n),Qt(`universal:card`),en(n?.getAttribute?.(`data-card-id`)||null),n&&(e.preventDefault(),e.stopPropagation(),typeof e.stopImmediatePropagation==`function`&&e.stopImmediatePropagation(),ae(n))};return nn.current=e,window.addEventListener(`click`,e,!0),()=>{window.removeEventListener(`click`,e,!0),nn.current===e&&(nn.current=null)}}o(),f(),En(),t()},[e,V,Lt,Ft,wn,Tn,En]),(0,M.useEffect)(()=>{H&&(mn(be(Z)),gn(!1))},[e,V,Z]),(0,M.useEffect)(()=>{if(!(!e||!V||!Z))return ye(()=>{mn(be(Z))})},[e,V,Z]);let nr=(0,M.useCallback)(e=>{Z&&(mn({...pn,...e||{}}),Ce(Z,e||{}))},[Z,pn]),rr=(0,M.useCallback)(()=>{Z&&(ve(Z),mn(be(Z)))},[Z]);(0,M.useEffect)(()=>{H&&Q?.pickMode&&(X(!1),Rt(!1))},[e,V,Q?.pickMode]),(0,M.useEffect)(()=>{if(H)return document.body.classList.toggle(`dev-ui-target-probe`,zt),()=>document.body.classList.remove(`dev-ui-target-probe`)},[e,V,zt]);let ir=Se(pn),ar=xe(),or=Object.keys(ar).reduce((e,t)=>pn[t]!==null&&pn[t]!==void 0?e+1:e,0);return e?J?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(_t,{stageKey:_}),(0,j.jsx)(`div`,{"data-testid":`devpanel-peek`,className:`fixed inset-0 z-[9999] pointer-events-none`,children:(0,j.jsxs)(`div`,{className:`absolute top-3 right-3 pointer-events-auto w-[280px] rounded-xl border border-white/20 bg-[#0a0a12]/95 backdrop-blur-md p-3 shadow-2xl`,children:[(0,j.jsx)(`div`,{className:`text-[11px] text-white/80 mb-2`,children:`Card Picker Active`}),(0,j.jsx)(`div`,{className:`text-[10px] text-white/55 mb-3`,children:`Click any marked card in the UI, then confirm to return to the panel.`}),(0,j.jsxs)(`div`,{className:`text-[10px] text-white/50 mb-3`,children:[`Shortcut: `,(0,j.jsx)(`span`,{className:`font-mono text-white/80`,children:`Ctrl+Alt+Shift+K`})]}),(0,j.jsxs)(`div`,{className:`text-[10px] font-mono text-white/75 mb-3 bg-white/5 border border-white/10 rounded px-2 py-1.5`,children:[`Selected: `,Q.hasSelected?Q.selectedCardId||Q.selectedLabel||`card`:`none`]}),Q.lastPickFailure?.message&&(0,j.jsx)(`div`,{className:`text-[10px] mb-3 rounded-md border border-red-400/30 bg-red-500/10 px-2 py-1.5 text-red-200/90`,children:Q.lastPickFailure.message}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,j.jsx)(`button`,{onClick:Xn,className:`rounded-lg px-3 py-2 text-xs bg-amber-500/20 border border-amber-400/50 text-amber-200`,children:Q.hasSelected?`Confirm + Return`:`Return`}),(0,j.jsx)(`button`,{onClick:n,className:`rounded-lg px-3 py-2 text-xs bg-white/5 border border-white/15 text-white/70`,children:`Close Panel`})]})]})})]}):(0,j.jsxs)(`div`,{"data-testid":`devpanel-root`,"data-devpanel-root":`true`,className:`fixed inset-0 z-[9999] flex pointer-events-none`,children:[V&&(0,j.jsx)(`style`,{children:`
                    .dev-card-id-probe [data-card-id] {
                        outline: 4px solid #00ffff !important;
                        box-shadow: 0 0 0 8px rgba(0, 255, 255, 0.25) !important;
                    }
                `}),(0,j.jsxs)(`div`,{className:`relative pointer-events-auto ml-auto w-[400px] h-full border-l overflow-y-auto no-scrollbar`,style:{background:L?`#F5F0E6`:`#0a0a12`,borderColor:L?`rgba(180, 155, 110, 0.25)`:`rgba(255, 255, 255, 0.1)`},children:[(0,j.jsxs)(`div`,{className:`sticky top-0 z-10 border-b px-4 py-3 flex items-center justify-between`,style:{background:L?`#F5F0E6`:`#0a0a12`,borderColor:L?`rgba(180, 155, 110, 0.25)`:`rgba(255, 255, 255, 0.1)`},children:[(0,j.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,j.jsx)(`span`,{className:`text-lg`,children:`üîß`}),(0,j.jsx)(`span`,{className:`text-sm font-semibold tracking-wide`,style:{color:L?`rgba(45, 40, 35, 0.95)`:`rgba(255, 255, 255, 0.9)`},children:`DEVELOPER PANEL`}),(0,j.jsx)(`span`,{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full border`,style:{borderColor:`rgba(255, 120, 120, 0.65)`,color:`rgba(255, 140, 140, 0.9)`,background:`rgba(255, 120, 120, 0.08)`,letterSpacing:`0.08em`},children:`PROD DEV PANEL`}),Fe&&(0,j.jsx)(`button`,{type:`button`,onClick:()=>Pe(e=>!e),className:`text-[10px] font-semibold px-2 py-0.5 rounded-full border transition-all ${z?`border-emerald-400/60 text-emerald-200 bg-emerald-500/15`:`border-amber-400/50 text-amber-200/90 bg-amber-500/10`}`,title:z?`Destructive actions enabled (prod)`:`Arm to enable destructive actions (prod)`,children:z?`ARMED`:`ARM`})]}),(0,j.jsx)(`button`,{onClick:()=>{D(!1),Y(!1),Tn(),X(!1),En(),Rt(!1),n()},"data-testid":`devpanel-close`,className:`w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 transition-colors`,style:{color:L?`rgba(60, 50, 40, 0.6)`:`rgba(255, 255, 255, 0.6)`},children:`‚úï`})]}),(0,j.jsxs)(`div`,{className:`p-4 space-y-4`,children:[(0,j.jsxs)(W,{title:`Avatar Stage (Wallpaper)`,expanded:q.avatar,onToggle:()=>$(`avatar`),isLight:L,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/50 mb-3`,children:`Stage controls color/wallpaper. Path controls sigil geometry, breath, bloom intensity.`}),(0,j.jsxs)(`div`,{className:`flex items-center gap-3 mb-4`,children:[(0,j.jsx)(`label`,{className:`text-sm font-medium w-16`,style:{color:L?`rgba(60, 50, 40, 0.9)`:`white`},children:`Stage`}),(0,j.jsx)(`select`,{value:Xe,onChange:e=>{Ze(e.target.value),window.dispatchEvent(new CustomEvent(`dev-avatar-stage`,{detail:{stage:e.target.value}}))},className:`flex-1 rounded-lg px-3 py-2.5 text-base font-medium`,style:{background:L?`rgba(255, 255, 255, 0.9)`:`#0a0a12`,border:L?`1px solid rgba(180, 155, 110, 0.3)`:`1px solid rgba(255, 255, 255, 0.3)`,color:L?`rgba(60, 50, 40, 0.95)`:`white`,colorScheme:L?`light`:`dark`},children:vt.map(e=>(0,j.jsx)(`option`,{value:e,children:e},e))})]}),(0,j.jsxs)(`div`,{className:`flex items-center gap-3 mb-4`,children:[(0,j.jsx)(`label`,{className:`text-sm font-medium w-16`,style:{color:L?`rgba(60, 50, 40, 0.9)`:`white`},children:`Path`}),(0,j.jsxs)(`select`,{value:Qe||``,onChange:e=>et(e.target.value||null),className:`flex-1 rounded-lg px-3 py-2.5 text-base font-medium`,style:{background:L?`rgba(255, 255, 255, 0.9)`:`#0a0a12`,border:L?`1px solid rgba(180, 155, 110, 0.3)`:`1px solid rgba(255, 255, 255, 0.3)`,color:L?`rgba(60, 50, 40, 0.95)`:`white`,colorScheme:L?`light`:`dark`},children:[(0,j.jsx)(`option`,{value:``,children:`None (default)`}),yt.map(e=>(0,j.jsx)(`option`,{value:e,children:e},e))]})]}),(0,j.jsxs)(`div`,{className:`flex items-center gap-3 mb-4`,children:[(0,j.jsx)(`label`,{className:`text-xs w-16`,style:{color:L?`rgba(140, 100, 60, 0.9)`:`#fb923c`},children:`Preview`}),(0,j.jsx)(`button`,{onClick:()=>nt(!tt),className:`px-3 py-1.5 rounded-lg text-xs font-semibold`,style:{background:tt?`rgba(212, 168, 74, 0.2)`:`rgba(255, 255, 255, 0.06)`,color:L?`rgba(60, 50, 40, 0.9)`:`white`,border:L?`1px solid rgba(180, 155, 110, 0.35)`:`1px solid rgba(255, 255, 255, 0.2)`},children:tt?`Core On`:`Core Off`}),(0,j.jsx)(`select`,{value:rt,onChange:e=>it(e.target.value),className:`flex-1 rounded-lg px-3 py-1.5 text-xs font-medium`,style:{background:L?`rgba(255, 255, 255, 0.9)`:`#0a0a12`,border:L?`1px solid rgba(180, 155, 110, 0.3)`:`1px solid rgba(255, 255, 255, 0.3)`,color:L?`rgba(60, 50, 40, 0.95)`:`white`,colorScheme:L?`light`:`dark`},children:[`none`,`ekagrata`,`sahaja`,`vigilance`].map(e=>(0,j.jsx)(`option`,{value:e,children:e},e))})]}),(0,j.jsxs)(`div`,{className:`flex items-center gap-3 mb-4`,children:[(0,j.jsx)(`label`,{className:`text-xs w-16`,style:{color:L?`rgba(140, 100, 60, 0.9)`:`#fb923c`},children:`Title Set`}),(0,j.jsx)(`div`,{className:`flex bg-white/5 rounded-lg p-1 gap-1`,children:[1,2,3,4,5].map(e=>(0,j.jsx)(`button`,{onClick:()=>Ne(e),className:`w-7 h-7 flex items-center justify-center rounded text-[10px] font-bold transition-all ${I===e?`bg-amber-500/20 text-amber-300 border border-amber-500/30`:`text-white/40 hover:text-white/60 hover:bg-white/5`}`,children:e},e))})]})]}),(0,j.jsx)($e,{expanded:q.avatarCompositeTuner,onToggle:()=>$(`avatarCompositeTuner`),isLight:L,editingStageKey:x(Xe),prodGuarded:Fe,prodArmed:z}),(0,j.jsx)(dt,{expanded:q.inspectorNew,onToggle:()=>$(`inspectorNew`),isLight:L,devtoolsEnabled:V,universalPickerKind:Ft,setUniversalPickerKind:It,universalPickMode:Lt,handleStopUniversalPickFlow:Qn,handleStartUniversalPickFlow:Zn,legacyPickersEnabled:Ot,setLegacyPickersEnabled:kt,pickDebugEnabled:jt,setPickDebugEnabledLocal:Mt,uiTargetProbeEnabled:zt,setUiTargetProbeEnabled:Bt,cardIdProbeEnabled:Nt,setCardIdProbeEnabled:Pt,pickDebugResolvedMode:Zt,pickDebugResolvedId:$t,controlsSelectedId:Ut,controlsSelectedRoleGroup:Gt,controlsSurfaceIsRoot:qt,controlsSurfaceDebug:Yt,controlsElectricBorderEnabled:rn,setControlsElectricBorderEnabled:an,controlsFxDraft:on,setControlsFxDraft:sn,setControlsFxPreset:ge,resetControlsFxPreset:bn(me),getControlsFxPreset:he,controlsPresetJson:cn,setControlsPresetJson:ln,controlsPresetStatus:un,setControlsPresetStatus:dn,exportControlsFxPresetsJson:pe,importControlsFxPresetsJson:fe,resetAllControlsFxPresets:bn(de),utcViolations:Vt,platesSelectedId:Z,platesFxEnabled:_n,setPlatesFxEnabled:vn,platesFxDraft:pn,patchSelectedPlatePreset:nr,platesResolved:ir,platesAdvancedOpen:hn,setPlatesAdvancedOpen:gn,activePlateOverrideCount:or,resetSelectedPlateOverrides:bn(rr),cardApplyToAll:pt,setCardApplyToAll:mt,cardState:Q,activeDraft:Wn,selectedDisabled:Gn,onChangeCardSetting:Kn,cardTunerExpanded:q.cardTuner,onToggleCardTuner:()=>$(`cardTuner`),handleStopPickFlow:Yn,handleStartPickFlow:qn,handleTogglePeek:$n,handleConfirmPickFlow:Xn,cardElectricBorderEnabled:De,setCardElectricBorderEnabled:Oe,practiceButtonFxEnabled:Te,setPracticeButtonFxEnabled:Ee,practiceButtonPickMode:ht,setPracticeButtonPickMode:X,stopUniversalPickCaptureImmediate:En,setUniversalPickMode:Rt,setPickMode:D,setPeekMode:Y,practiceButtonApplyToAll:bt,setPracticeButtonApplyToAll:St,practiceButtonSelectedKey:Tt,saveGlobal:w,globalDraft:On,saveSelected:A,selectedDraft:An,resetGlobal:bn(O),resetSelected:bn(C),clearAll:bn(se),navBtnTunerExpanded:q.navBtnTuner,onToggleNavBtnTuner:()=>$(`navBtnTuner`),navBtnProbeEnabled:In,setNavBtnProbeEnabled:Ln,navBtnState:Mn,setNavButtonTunerEnabled:ze,navBtnDraft:Pn,onChangeNavBtnSetting:Jn,resetNavButtonSettings:bn(Ve)}),(0,j.jsx)(W,{title:`UI Playground`,expanded:q.playground,onToggle:()=>$(`playground`),isLight:L,children:(0,j.jsxs)(`div`,{className:`flex items-center justify-between gap-2`,children:[(0,j.jsxs)(`span`,{className:`text-xs opacity-70`,style:{color:L?`rgba(60, 50, 40, 0.75)`:`rgba(255, 255, 255, 0.7)`},children:[`Launcher `,(0,j.jsx)(`span`,{className:`font-mono text-[10px] opacity-80`,children:`BUILD_PROBE`})]}),Ie?(0,j.jsx)(`button`,{onClick:Un,className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all border`,style:{background:L?`rgba(180, 155, 110, 0.12)`:`rgba(255, 255, 255, 0.06)`,color:L?`rgba(60, 50, 40, 0.95)`:`rgba(255, 255, 255, 0.95)`,borderColor:L?`rgba(180, 155, 110, 0.35)`:`rgba(255, 255, 255, 0.22)`},children:`Back`}):(0,j.jsx)(`button`,{onClick:Hn,className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all border`,style:{background:L?`rgba(180, 155, 110, 0.12)`:`rgba(255, 255, 255, 0.06)`,color:L?`rgba(60, 50, 40, 0.95)`:`rgba(255, 255, 255, 0.95)`,borderColor:L?`rgba(180, 155, 110, 0.35)`:`rgba(255, 255, 255, 0.22)`},children:`Open Playground`})]})}),(0,j.jsx)(wt,{expanded:q.curriculum,onToggle:()=>$(`curriculum`),armed:ot,handleDestructive:zn,destructiveLocked:B,makeGuardedAction:bn,isLight:L}),(0,j.jsx)(Ct,{expanded:q.tracking,onToggle:()=>$(`tracking`),isLight:L}),(0,j.jsxs)(W,{title:`Reporting Layer (Dashboard Queries)`,expanded:q.reporting||!1,onToggle:()=>$(`reporting`),isLight:L,children:[(0,j.jsx)(`div`,{className:`text-[10px] text-white/50 mb-3`,children:`Pure reporting queries for dashboard metrics`}),(0,j.jsxs)(`div`,{className:`mb-4 bg-white/5 rounded-lg p-3`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/80 font-mono mb-2`,children:`lifetime scope:`}),(()=>{try{let e=m({scope:`lifetime`,range:`365d`});return(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 text-[10px] font-mono`,children:[(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Minutes: `,(0,j.jsx)(`span`,{className:`text-emerald-300`,children:e.minutes})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Sessions: `,(0,j.jsx)(`span`,{className:`text-emerald-300`,children:e.sessionCount})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Days: `,(0,j.jsx)(`span`,{className:`text-emerald-300`,children:e.activeDays})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Complete: `,(0,j.jsxs)(`span`,{className:`text-emerald-300`,children:[e.completionRate,`%`]})]})]})}catch(e){return(0,j.jsxs)(`div`,{className:`text-red-300 text-[10px]`,children:[`Error: `,e.message]})}})()]}),(0,j.jsxs)(`div`,{className:`mb-4 bg-white/5 rounded-lg p-3`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/80 font-mono mb-2`,children:`runId scope (active path):`}),(()=>{try{let e=m({scope:`runId`,range:`all`});return(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 text-[10px] font-mono`,children:[(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Minutes: `,(0,j.jsx)(`span`,{className:`text-sky-300`,children:e.minutes})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Sessions: `,(0,j.jsx)(`span`,{className:`text-sky-300`,children:e.sessionCount})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Days: `,(0,j.jsx)(`span`,{className:`text-sky-300`,children:e.activeDays})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 p-1.5 rounded`,children:[`Complete: `,(0,j.jsxs)(`span`,{className:`text-sky-300`,children:[e.completionRate,`%`]})]})]})}catch(e){return(0,j.jsxs)(`div`,{className:`text-red-300 text-[10px]`,children:[`Error: `,e.message]})}})()]}),(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg p-3 mb-4`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/80 font-mono mb-2`,children:`Practice breakdown (lifetime):`}),(()=>{try{let e=v({scope:`lifetime`,range:`365d`});return e.length===0?(0,j.jsx)(`div`,{className:`text-white/40 text-[10px]`,children:`No sessions recorded`}):(0,j.jsx)(`div`,{className:`space-y-1`,children:e.map(e=>(0,j.jsxs)(`div`,{className:`flex justify-between text-[10px] text-white/70 font-mono`,children:[(0,j.jsxs)(`span`,{children:[e.label,`:`]}),(0,j.jsxs)(`span`,{className:`text-white/90`,children:[e.minutes,`m (`,e.count,` sessions, `,e.percent,`%)`]})]},e.familyKey))})}catch(e){return(0,j.jsxs)(`div`,{className:`text-red-300 text-[10px]`,children:[`Error: `,e.message]})}})()]}),(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg p-3`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/80 font-mono mb-2`,children:`Breathwork detail (lifetime):`}),(()=>{try{let e=te({scope:`lifetime`,range:`365d`,practiceFamily:`breathwork`});return!e||e.sessionCount===0?(0,j.jsx)(`div`,{className:`text-white/40 text-[10px]`,children:`No breathwork sessions`}):(0,j.jsxs)(`div`,{className:`space-y-1 text-[10px] text-white/70 font-mono`,children:[(0,j.jsxs)(`div`,{children:[`Minutes: `,(0,j.jsxs)(`span`,{className:`text-white/90`,children:[e.totalMinutes,`m`]})]}),(0,j.jsxs)(`div`,{children:[`Sessions: `,(0,j.jsx)(`span`,{className:`text-white/90`,children:e.sessionCount})]}),(0,j.jsxs)(`div`,{children:[`Avg Duration: `,(0,j.jsxs)(`span`,{className:`text-white/90`,children:[e.avgDurationMin,`m`]})]}),(0,j.jsxs)(`div`,{children:[`Completion: `,(0,j.jsxs)(`span`,{className:`text-white/90`,children:[e.completionRate,`%`]})]}),(0,j.jsxs)(`div`,{children:[`On-time: `,(0,j.jsxs)(`span`,{className:`text-white/90`,children:[e.adherencePercent,`%`]})]})]})}catch(e){return(0,j.jsxs)(`div`,{className:`text-red-300 text-[10px]`,children:[`Error: `,e.message]})}})()]})]}),(0,j.jsxs)(W,{title:`Tutorial Tools`,expanded:q.tutorialTools||!1,onToggle:()=>$(`tutorialTools`),isLight:L,children:[(0,j.jsxs)(`div`,{className:`flex items-center justify-between mb-4 bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsxs)(`div`,{className:`flex flex-col`,children:[(0,j.jsx)(`span`,{className:`text-xs text-white/90`,children:`Tutorial Admin Mode`}),(0,j.jsx)(`span`,{className:`text-[10px] text-white/40`,children:`Enable tutorial edit controls`})]}),(0,j.jsx)(`button`,{onClick:Vn,className:`px-3 py-1.5 rounded-lg text-xs transition-colors ${Rn?`bg-emerald-500/30 text-emerald-300 border border-emerald-500/50`:`bg-white/5 text-white/50 border border-white/10`}`,children:Rn?`ON`:`OFF`})]}),(0,j.jsxs)(`div`,{className:`flex items-center justify-between mb-4 bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsxs)(`div`,{className:`flex flex-col`,children:[(0,j.jsx)(`span`,{className:`text-xs text-white/90`,children:`Coordinate Helper`}),(0,j.jsx)(`span`,{className:`text-[10px] text-white/40`,children:`Tutorial Pick mode for anchors`})]}),(0,j.jsx)(`button`,{onClick:()=>ee(!b),className:`px-3 py-1.5 rounded-lg text-xs transition-colors ${b?`bg-cyan-500/30 text-cyan-300 border border-cyan-500/50`:`bg-white/5 text-white/50 border border-white/10`}`,children:b?`ACTIVE`:`OFF`})]}),(0,j.jsxs)(`div`,{className:`text-[10px] text-white/40 mb-4 px-3`,children:[`Anchors in DOM: `,(0,j.jsx)(xt,{})]}),b&&(0,j.jsx)(r,{}),(0,j.jsx)(`div`,{className:`mt-4`,children:(0,j.jsx)(ke,{})})]}),(0,j.jsx)(W,{title:`üîµ Breathing Ring Lab (Phase 1)`,expanded:q.bloomRingLab,onToggle:()=>$(`bloomRingLab`),isLight:L,children:(0,j.jsx)(M.Suspense,{fallback:(0,j.jsx)(`div`,{className:`text-xs text-white/40 py-2`,children:`Loading lab...`}),children:(0,j.jsx)(gt,{isLight:L})})}),(0,j.jsx)(W,{title:`Design & Diagnostic`,expanded:q.design||!1,onToggle:()=>$(`design`),isLight:L,children:(0,j.jsx)(`div`,{className:`mb-3`,children:(0,j.jsx)(`button`,{onClick:()=>{N.beginnerMode?(P(`beginnerMode`,!1),P(`activeGuideStep`,null)):(P(`beginnerMode`,!0),P(`activeGuideStep`,`protocol`),t.getState().openTutorial(`page:photic-beginner`))},style:{width:`100%`,padding:`6px 10px`,fontSize:`11px`,borderRadius:`6px`,border:`1px solid var(--accent-25)`,background:N.beginnerMode?`var(--accent)`:`transparent`,color:N.beginnerMode?`#000`:`var(--text-muted)`,cursor:`pointer`,fontFamily:`var(--font-display)`,fontWeight:600,transition:`all 200ms ease`},children:N.beginnerMode?`End Beginner Guide`:`Start Beginner Guide`})})}),(0,j.jsxs)(W,{title:`Data Management`,expanded:q.data,onToggle:()=>$(`data`),isLight:L,children:[(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-3`,children:[(0,j.jsx)(G,{onClick:Bn,children:`Inspect Stores`}),(0,j.jsx)(G,{onClick:()=>{let e=je();console.log(`Store Snapshot:`,e),navigator.clipboard?.writeText(JSON.stringify(e,null,2))},children:`Copy to Clipboard`})]}),(0,j.jsxs)(`div`,{style:B?{opacity:.5}:void 0,children:[(0,j.jsx)(Ge,{label:`Reset ALL Stores`,armed:ot===`all`,onArm:bn(()=>zn(`all`,Ae))}),B&&(0,j.jsx)(`div`,{className:`text-[10px] text-white/50 mt-1`,children:`Arm to enable destructive actions (prod only).`})]})]})]}),(0,j.jsx)(`div`,{className:`sticky bottom-0 bg-[#0a0a12] border-t border-white/10 px-4 py-2 text-center text-[10px] text-white/30`,children:`Dev Panel ‚Ä¢ Ctrl+Shift+D to toggle`})]}),ct&&(0,j.jsxs)(`div`,{className:`fixed inset-0 z-[10000] flex items-center justify-center`,children:[(0,j.jsx)(`div`,{className:`absolute inset-0 bg-black/80`,onClick:()=>lt(!1)}),(0,j.jsxs)(`div`,{className:`relative bg-[#0a0a12] border border-white/20 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-hidden`,children:[(0,j.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-white/10`,children:[(0,j.jsx)(`span`,{className:`text-sm font-semibold text-white/90`,children:`Store Inspector`}),(0,j.jsx)(`button`,{onClick:()=>lt(!1),className:`text-white/50 hover:text-white`,children:`‚úï`})]}),(0,j.jsx)(`pre`,{className:`p-4 text-xs text-white/70 overflow-auto max-h-[60vh] font-mono`,children:JSON.stringify(ut,null,2)})]})]})]}):null}function Ct({expanded:e,onToggle:t,isLight:n=!1}){let{sessions:r}=s(),[i,a]=(0,M.useState)(`dedicated`),o=e=>{let t=Ee[e],n=[...Te(`breathwork`,t.breathwork),...Te(`visualization`,t.visualization),...Te(`wisdom`,t.wisdom)],r=n.length>0?bt(n):null;s.setState(e=>({sessions:n,...r?{streak:{...e.streak,lastPracticeDate:r}}:{}})),console.log(`‚úÖ Injected ${n.length} mock sessions (${t.label})`)},c=()=>{let e=r.filter(e=>!e.metadata?.mock);s.setState({sessions:e}),console.log(`üóëÔ∏è Cleared all mock data`)},l=e=>{let t=[],n=Date.now(),r={ascending:{label:`Ascending (Improving)`,daysPerWeek:e=>Math.min(3+Math.floor(e*.5),7),precision:e=>.6+e*.04},steady:{label:`Steady (Consistent)`,daysPerWeek:()=>5,precision:()=>.75+(Math.random()*.1-.05)},declining:{label:`Declining (Falling Off)`,daysPerWeek:e=>Math.max(6-Math.floor(e*.6),2),precision:e=>Math.max(.85-e*.05,.4)}}[e];for(let i=7;i>=0;i--){let a=r.daysPerWeek(8-i-1),o=1440*60*1e3,s=n-i*7*o;[0,1,2,3,4,5,6].sort(()=>Math.random()-.5).slice(0,a).forEach(n=>{let a=new Date(s+n*o),c=a.toISOString().split(`T`)[0],l=Math.min(Math.max(r.precision(8-i-1),0),1),u=new Date(a);u.setHours(12,0,0,0);let d=(Math.random()*120-60)*(1-l*.5),f=new Date(u.getTime()+d*1e3),p=10+Math.floor(Math.random()*5),m=Math.floor(p*6),h=Math.floor(m*l);t.push({id:`traj_mock_${a.getTime()}_${Math.random().toString(36).substr(2,9)}`,dateKey:c,timestamp:f.getTime(),practiceType:`breath`,practiceFamily:`attention`,scheduledTime:`12:00`,actualTime:f.toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`,hour12:!1}),duration:p,durationMs:p*60*1e3,exitType:Math.random()>.1?`completed`:`early_exit`,completionRatio:Math.random()>.1?1:.7+Math.random()*.2,precision:{breath:{rhythmAccuracy:l,totalCycles:m,accurateCycles:h,avgDeviation:Math.abs(d)}},pauseCount:Math.floor(Math.random()*2),pauseTotalMs:Math.floor(Math.random()*3e4),aliveSignalCount:m,circuitExercises:null,metadata:{mock:!0,trajectoryPattern:e}})})}s.setState({sessions:t}),console.log(`‚úÖ Injected ${t.length} trajectory sessions (${r.label}) over 8 weeks`)},u=()=>{let e=r.filter(e=>!e.metadata?.mock);s.setState({sessions:e}),console.log(`üóëÔ∏è Cleared trajectory mock data`)},d=r.filter(e=>e.metadata?.trajectoryPattern),f=d.length,p=d.filter(e=>e.metadata?.mock).length,m=r.filter(e=>e.metadata?.mock).length,h=r.length;return(0,j.jsxs)(W,{title:`TrackingHub Mock Data`,expanded:e,onToggle:t,isLight:n,children:[(0,j.jsxs)(`div`,{className:`mb-6 pb-4 border-b border-white/10`,children:[(0,j.jsx)(`div`,{className:`text-xs font-semibold uppercase tracking-wider mb-3`,style:{color:n?`rgba(60, 50, 40, 0.7)`:`rgba(255, 255, 255, 0.5)`},children:`üìà Trajectory (8 Weeks)`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-3 text-xs`,children:[(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsx)(`div`,{className:`text-white/40`,children:`Total Sessions`}),(0,j.jsx)(`div`,{className:`text-white/90 font-mono`,children:f})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsx)(`div`,{className:`text-white/40`,children:`Mock Sessions`}),(0,j.jsx)(`div`,{className:`text-white/90 font-mono`,children:p})]})]}),(0,j.jsx)(`div`,{className:`space-y-2 mb-3`,children:[`ascending`,`steady`,`declining`].map(e=>(0,j.jsx)(`button`,{onClick:()=>l(e),className:`w-full text-left px-3 py-2 rounded-lg text-xs transition-all bg-white/5 text-white/60 hover:bg-white/10 hover:text-white/90 border border-white/10 hover:border-white/20`,children:e===`ascending`?`‚Üë Ascending (Improving)`:e===`steady`?`‚Üí Steady (Consistent)`:`‚Üì Declining (Falling Off)`},e))}),(0,j.jsx)(`button`,{onClick:u,className:`w-full px-3 py-2 rounded-lg text-xs bg-red-500/10 border border-red-500/30 text-red-400/70 hover:bg-red-500/20 transition-all`,children:`üóëÔ∏è Clear Trajectory Data`})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`div`,{className:`text-xs font-semibold uppercase tracking-wider mb-3`,style:{color:n?`rgba(60, 50, 40, 0.7)`:`rgba(255, 255, 255, 0.5)`},children:`üìä Progress Stats (Legacy)`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-4 text-xs`,children:[(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsx)(`div`,{className:`text-white/40`,children:`Total Sessions`}),(0,j.jsx)(`div`,{className:`text-white/90 font-mono`,children:h})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsx)(`div`,{className:`text-white/40`,children:`Mock Sessions`}),(0,j.jsx)(`div`,{className:`text-white/90 font-mono`,children:m})]})]}),(0,j.jsxs)(`div`,{className:`mb-4`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/50 mb-2`,children:`Inject Mock Pattern`}),(0,j.jsx)(`div`,{className:`space-y-2`,children:Object.entries(Ee).map(([e,t])=>(0,j.jsx)(`button`,{onClick:()=>{a(e),o(e)},className:`
                                    w-full text-left px-3 py-2 rounded-lg text-xs transition-all
                                    ${i===e?`bg-amber-500/20 text-amber-300 border border-amber-500/50`:`bg-white/5 text-white/60 hover:bg-white/10 border border-white/10`}
                                `,children:t.label},e))})]}),(0,j.jsx)(`button`,{onClick:c,className:`w-full px-3 py-2 rounded-lg text-xs bg-red-500/10 border border-red-500/30 text-red-400/70 hover:bg-red-500/20 transition-all`,children:`üóëÔ∏è Clear Progress Data`})]}),(0,j.jsx)(`div`,{className:`mt-3 pt-3 border-t border-white/10`,children:(0,j.jsx)(`div`,{className:`text-[10px] text-white/40`,children:`Trajectory data populates the TrajectoryCard on the Hub`})})]})}function wt({expanded:e,onToggle:t,armed:r,handleDestructive:i,destructiveLocked:o,makeGuardedAction:s,isLight:c=!1}){let l=a(e=>e.getCurrentDayNumber),u=a(e=>e._devSetDay);a(e=>e._devCompleteDay);let d=a(e=>e.logLegCompletion),f=a(e=>e.logDayCompletion),p=a(e=>e.dayCompletions),m=a(e=>e.legCompletions),h=a(e=>e.onboardingComplete),g=a(e=>e._devReset),_=a(e=>e.getActiveCurriculum),v=n(e=>e.activePath?.activePathId??null),y=n(e=>e.abandonPath),b=_(),x=b?.duration||14,ee=b?.days?.[0]?.legs?.length||2,te=l(),ne=Object.keys(p).filter(e=>p[e].completed).length,re=Object.keys(m).length,[S,ie]=M.useState(x),[C,ae]=M.useState(ee),oe=()=>{let e=a.getState();if(e.onboardingComplete&&e.curriculumStartDate&&e.practiceTimeSlots?.length>0)return;let t=e.practiceTimeSlots?.length>0?e.practiceTimeSlots:[`08:00`,`20:00`],n=e.thoughtCatalog?.length>0?[]:[{text:`I am not good enough`,weight:1},{text:`I always mess things up`,weight:1},{text:`Everyone else has it figured out`,weight:0},{text:`I should be better by now`,weight:0},{text:`Nothing ever works out`,weight:0}];e.completeOnboarding(t,n),console.log(`[DevPanel] Auto-completed onboarding with defaults:`,{timeSlots:t,thoughts:n.length,curriculumStartDate:a.getState().curriculumStartDate})};return(0,j.jsxs)(W,{title:`Curriculum Simulation`,expanded:e,onToggle:t,isLight:c,children:[!h&&(0,j.jsx)(`div`,{className:`mb-3 px-3 py-2 rounded-lg bg-yellow-500/10 border border-yellow-500/30 text-xs text-yellow-300`,children:`‚ö†Ô∏è Onboarding not complete ‚Äî curriculum card won't render. Click "Quick Setup" or any simulation button below.`}),v&&(0,j.jsxs)(`div`,{className:`mb-3 px-3 py-2 rounded-lg bg-orange-500/10 border border-orange-500/30 text-xs text-orange-300`,children:[`‚ö†Ô∏è Active navigation path "`,v,`" is blocking the curriculum card.`,(0,j.jsx)(`button`,{className:`ml-2 underline hover:text-orange-200 transition-colors`,onClick:()=>{y(),console.log(`‚úÖ Navigation path cleared ‚Äî curriculum card should now be visible`)},children:`Clear path`})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-3 gap-2 mb-4 text-xs`,children:[(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsx)(`div`,{className:`text-white/40`,children:`Current Day`}),(0,j.jsxs)(`div`,{className:`text-white/90 font-mono`,children:[te,`/`,x]})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsx)(`div`,{className:`text-white/40`,children:`Days Done`}),(0,j.jsx)(`div`,{className:`text-white/90 font-mono`,children:ne})]}),(0,j.jsxs)(`div`,{className:`bg-white/5 rounded-lg px-3 py-2`,children:[(0,j.jsx)(`div`,{className:`text-white/40`,children:`Legs Done`}),(0,j.jsx)(`div`,{className:`text-white/90 font-mono`,children:re})]})]}),!h&&(0,j.jsx)(`div`,{className:`mb-3`,children:(0,j.jsx)(G,{onClick:()=>{oe(),console.log(`‚úÖ Onboarding complete ‚Äî curriculum card should now be visible`)},children:`‚ö° Quick Setup (onboarding only)`})}),(0,j.jsxs)(`div`,{className:`grid grid-cols-4 gap-2 mb-3`,children:[(0,j.jsx)(G,{onClick:()=>u(1),children:`Day 1`}),(0,j.jsx)(G,{onClick:()=>u(Math.floor(x/2)),children:`Mid`}),(0,j.jsx)(G,{onClick:()=>u(x),children:`End`}),(0,j.jsx)(G,{onClick:()=>u(Math.min(te+1,x)),children:`+1 Day`})]}),(0,j.jsxs)(`div`,{className:`mb-3`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/50 mb-2`,children:`Simulation Settings`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-2`,children:[(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`label`,{className:`text-[10px] text-white/40 block mb-1`,children:`Days`}),(0,j.jsx)(`input`,{type:`number`,min:`1`,max:`365`,value:S,onChange:e=>ie(parseInt(e.target.value)||1),className:`w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-xs text-white/90`})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`label`,{className:`text-[10px] text-white/40 block mb-1`,children:`Legs/Day`}),(0,j.jsx)(`input`,{type:`number`,min:`1`,max:`10`,value:C,onChange:e=>ae(parseInt(e.target.value)||1),className:`w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-xs text-white/90`})]})]})]}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2 mb-3`,children:[(0,j.jsx)(G,{onClick:()=>{oe();let e=a.getState().getCurrentDayNumber();console.log(`[DevPanel] Completing current day:`,e),d(e,1,{duration:5,focusRating:4,challenges:[],notes:`Dev completed leg 1`}),d(e,2,{duration:5,focusRating:5,challenges:[],notes:`Dev completed leg 2`}),f(e,{duration:10,focusRating:4,challenges:[],notes:`Dev completed day ${e}`}),console.log(`‚úÖ Completed Day ${e}: 2 legs + dayCompletion written`)},children:`Complete Today`}),(0,j.jsxs)(G,{onClick:()=>{oe(),console.log(`[DevPanel] Starting curriculum simulation:`,{simDays:S,simLegs:C});for(let e=1;e<=S;e++){for(let t=1;t<=C;t++)d(e,t,{duration:5+Math.floor(Math.random()*3),focusRating:3+Math.floor(Math.random()*3),challenges:[],notes:`Dev simulated day ${e}, leg ${t}`});f(e,{duration:C*5,focusRating:4,challenges:[],notes:`Dev simulated day ${e}`})}console.log(`‚úÖ Completed curriculum simulation: ${S} days √ó ${C} legs, ${S} dayCompletions written`)},children:[`Complete All `,S,` Days`]})]}),(0,j.jsxs)(`div`,{className:`border-t border-white/10 pt-3 mt-3 mb-3`,children:[(0,j.jsx)(`div`,{className:`text-xs text-white/50 mb-2`,children:`Thought Catalog Testing`}),(0,j.jsxs)(`div`,{className:`grid grid-cols-2 gap-2`,children:[(0,j.jsx)(G,{onClick:()=>{let{completeOnboarding:e,practiceTimeSlots:t}=a.getState();e(t?.length>0?t:[`08:00`,`20:00`],[{text:`I am not good enough`,weight:1},{text:`I always mess things up`,weight:1},{text:`Everyone else has it figured out`,weight:0},{text:`I should be better by now`,weight:0},{text:`Nothing ever works out`,weight:0},{text:`I am capable of growth`,weight:0},{text:`This moment is full of potential`,weight:0}]),console.log(`‚úÖ Populated 7 sample thoughts (2 priority, 5 normal) + onboarding complete`)},children:`Add Sample Thoughts`}),(0,j.jsx)(G,{onClick:()=>{let{getWeightedRandomThought:e}=a.getState(),t=e();t?console.log(`üé≤ Random thought selected:`,t.text,`(weight: ${t.weight})`):console.log(`‚ùå No thoughts in catalog`)},children:`Test Random Selection`})]})]}),(0,j.jsxs)(`div`,{style:o?{opacity:.5}:void 0,children:[(0,j.jsx)(Ge,{label:`Reset Curriculum`,armed:r===`curriculum`,onArm:s(()=>i(`curriculum`,g))}),o&&(0,j.jsx)(`div`,{className:`text-[10px] text-white/50 mt-1`,children:`Arm to enable destructive actions (prod only).`})]})]})}var Tt=St;export{St as DevPanel,Tt as default};