var e=`immanence.dev.plateFxPresets.v1`,t=`immanence.dev.plateFxPresets.v2`,n=2;const r=`immanence-plate-fx-presets-updated`;Object.freeze([`borderW`,`speed`,`opacity`,`glow`,`glowOpacity`,`bgOpacity`,`sheen`,`animate`]);const i=Object.freeze({borderW:1.25,speed:14,opacity:.65,glow:6,glowOpacity:.18,bgOpacity:.18,sheen:!1,animate:!0}),a=Object.freeze({borderW:2.25,speed:8,opacity:.85,glow:14,glowOpacity:.32,bgOpacity:.24,sheen:!0,animate:!0}),o=Object.freeze({enabled:!1,profile:`subtle`,borderW:null,speed:null,opacity:null,glow:null,glowOpacity:null,bgOpacity:null,sheen:null,animate:null,colorMode:`stage`,color:null});function s(){return typeof window<`u`&&typeof document<`u`}function c(e,t,n,r){let i=Number(e);return Number.isFinite(i)?Math.max(t,Math.min(n,i)):r}function l(e){return e===`mythic`?`mythic`:`subtle`}function u(e,t,n){if(e==null||e===``)return null;let r=Number(e);return Number.isFinite(r)?c(r,t,n,t):null}function d(e){return e==null?null:!!e}function f(e){return e===`custom`?`custom`:`stage`}function p(e){if(typeof e!=`string`)return null;let t=e.trim();return t.length?t:null}function m(e={}){return{enabled:!!e.enabled,profile:l(e.profile),borderW:u(e.borderW,.5,6),speed:u(e.speed,4,24),opacity:u(e.opacity,0,1),glow:u(e.glow,0,24),glowOpacity:u(e.glowOpacity,0,.32),bgOpacity:u(e.bgOpacity,0,.45),sheen:d(e.sheen),animate:d(e.animate),colorMode:f(e.colorMode),color:p(e.color)}}function h(e){let t={};if(!e||typeof e!=`object`)return t;for(let[n,r]of Object.entries(e))!n||typeof n!=`string`||(t[n]=m(r||{}));return t}function g(e,t=null){if(!e)return{kind:`missing`,data:{}};try{let n=JSON.parse(e);return!n||typeof n!=`object`?{kind:`ok`,data:{}}:typeof t==`number`&&n.version===t&&n.presets&&typeof n.presets==`object`||n.presets&&typeof n.presets==`object`?{kind:`ok`,data:n.presets}:{kind:`ok`,data:n}}catch{return{kind:`malformed`,data:{}}}}function _(e={}){return m({enabled:!!e.enabled,profile:`subtle`,borderW:e.borderW,speed:e.speed,opacity:e.opacity,glow:null,glowOpacity:null,bgOpacity:null,sheen:null,colorMode:f(e.colorMode),color:p(e.color)})}function v(e){let t={};if(!e||typeof e!=`object`)return t;for(let[n,r]of Object.entries(e))!n||typeof n!=`string`||(t[n]=_(r||{}));return t}function y(e,{emitEvent:i=!0}={}){if(!s())return;let a=h(e);try{window.localStorage.setItem(t,JSON.stringify({version:n,presets:a}))}catch{}if(i)try{window.dispatchEvent(new CustomEvent(r))}catch{}}function b(){if(!s())return{};let r=g(window.localStorage.getItem(t),n);if(r.kind===`ok`)return h(r.data);if(r.kind===`malformed`)return y({},{emitEvent:!1}),{};let i=g(window.localStorage.getItem(e),1);if(i.kind===`malformed`)return y({},{emitEvent:!1}),{};let a=v(i.data);return y(a,{emitEvent:!1}),a}function x(e){return e===`mythic`?a:i}function S(e={}){let t=m(e),n=x(t.profile),r={borderW:t.borderW??n.borderW,speed:t.speed??n.speed,opacity:t.opacity??n.opacity,glow:t.glow??n.glow,glowOpacity:t.glowOpacity??n.glowOpacity,bgOpacity:t.bgOpacity??n.bgOpacity,sheen:t.sheen??n.sheen,animate:t.animate??n.animate};return{...t,effective:r}}function C(){return{borderW:null,speed:null,opacity:null,glow:null,glowOpacity:null,bgOpacity:null,sheen:null,animate:null}}function w(e){if(!e||typeof e!=`string`)return{...o};let t=b()?.[e]||null;return m({...o,...t||{}})}function T(e,t){if(!s()||!e||typeof e!=`string`)return;let n=b(),r=m({...n?.[e]||{},...t||{}});y({...n,[e]:r})}function E(e){if(!s()||!e||typeof e!=`string`)return;let t=b(),n=m({...t?.[e]||{},...C()});y({...t,[e]:n})}function D(){return b()}function O(e){if(!s()||typeof e!=`function`)return()=>{};let t=()=>e();return window.addEventListener(r,t),()=>window.removeEventListener(r,t)}export{E as a,O as c,w as i,C as n,S as o,D as r,T as s,o as t};