import{O as e,_ as t,at as n,it as r,n as i,nt as a,r as o,tt as s,v as c}from"./index-NOppfZ3u.js";var l=n(r(),1),u=s(),d=[`Recommendations`,`Treatise`,`Bookmarks`,`Videos`,`Self-Knowledge`];function f({isOpen:e,onClose:t,currentTab:n,onSelectTab:r,bookmarksCount:i=0}){return(0,l.useEffect)(()=>{if(!e)return;let n=e=>{e.key===`Escape`&&t()};return window.addEventListener(`keydown`,n),()=>window.removeEventListener(`keydown`,n)},[e,t]),e?(0,u.jsxs)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50`,style:{background:`rgba(0, 0, 0, 0.7)`,backdropFilter:`blur(8px)`,animation:`fadeIn 200ms ease-out`},onClick:t,children:[(0,u.jsxs)(`div`,{className:`relative p-8 rounded-[2rem] max-w-md w-full mx-4 glass-capsule`,"data-card":`true`,"data-card-id":`modal:wisdomSelection`,style:{animation:`slideUp 300ms ease-out`},onClick:e=>e.stopPropagation(),children:[(0,u.jsx)(`div`,{className:`mb-6 text-center`,style:{fontFamily:`var(--font-display)`,fontSize:`11px`,letterSpacing:`var(--tracking-mythic)`,textTransform:`uppercase`,color:`rgba(253, 251, 245, 0.4)`},children:`Wisdom`}),(0,u.jsx)(`div`,{className:`space-y-2`,children:d.map(e=>{let a=e===n,o=e===`Bookmarks`&&i>0?` (${i})`:``;return(0,u.jsxs)(`button`,{onClick:()=>{r(e),t()},className:`w-full px-6 py-4 rounded-full transition-all duration-300 group relative overflow-hidden ${a?`glass-capsule`:`hover:bg-white/5`}`,style:{border:a?`0.5px solid var(--accent-40)`:`0.5px solid transparent`,fontFamily:`var(--font-display)`,fontSize:`12px`,letterSpacing:`var(--tracking-mythic)`,color:a?`var(--accent-color)`:`rgba(253, 251, 245, 0.5)`,textAlign:`center`,background:a?`rgba(255, 255, 255, 0.05)`:`transparent`},children:[a&&(0,u.jsx)(`div`,{className:`absolute inset-0 bg-radial-gradient from-[var(--accent-10)] to-transparent opacity-50`}),(0,u.jsxs)(`span`,{className:`relative z-10`,children:[e,o]})]},e)})}),(0,u.jsx)(`div`,{className:`mt-6 text-center`,style:{fontFamily:`var(--font-body)`,fontSize:`9px`,letterSpacing:`var(--tracking-wide)`,color:`rgba(253, 251, 245, 0.3)`},children:`Press ESC or click outside to close`})]}),(0,u.jsx)(`style`,{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]}):null}const p=[{id:`part-1`,number:1,title:`The Call`,subtitle:`The Invitation to Conscious Living`,chapterRange:[1,5]},{id:`part-2`,number:2,title:`The Architecture of Being`,subtitle:`The Mythology of the Inner World`,chapterRange:[6,10]},{id:`part-3`,number:3,title:`Shadow as Curriculum`,subtitle:`Integration Through Awareness`,chapterRange:[11,16]},{id:`part-4`,number:4,title:`The Hybrid Layer of Reality`,subtitle:`Where Inner Meets Outer`,chapterRange:[17,41]},{id:`part-5`,number:5,title:`The Practice`,subtitle:`Skillful Navigation`,chapterRange:[42,53]},{id:`part-6`,number:6,title:`Integration & Evolution`,subtitle:`Becoming What You Practice`,chapterRange:[54,58]},{id:`appendices`,number:null,title:`Appendices`,subtitle:`Reference Materials`,chapterRange:null,isAppendix:!0}];function m(e,t){let n=p.find(t=>t.id===e);if(!n)return[];if(n.isAppendix)return t.filter(e=>typeof e.order==`string`);if(n.chapterRange){let[e,r]=n.chapterRange;return t.filter(t=>typeof t.order==`number`&&t.order>=e&&t.order<=r)}return[]}const h={"focus-presence":{label:`Focus & Presence`,description:`For scattered energy, attention fragmentation, overstimulation`,symptoms:[`Scattered`,`Fragmented`,`Overstimulated`],chapters:[{title:`The Four Modes - Why Evolution Requires All Four`,reasoning:`Choose the mode that matches your current need. Scattered energy often needs MODE 1 (grounding) or MODE 4 (channeling).`,chapterRef:`chapter-44-the-four-modes-why-evolution-requires-all-four`},{title:`The Bridge of Breath/Resonance`,reasoning:`Breath is the anchor between thought and body. Returns attention to present moment.`,chapterRef:`chapter-14-the-bridge-of-breath-resonance`},{title:`The Nature of Thoughts—Why Thinking About Your Thoughts Doesn't Work`,reasoning:`Scattered attention often comes from over-thinking. This explains why metacognition fails and what actually works.`,chapterRef:`chapter-15-the-nature-of-thoughtswhy-thinking-about-your-thoughts-doesnt-work`}]},"emotional-regulation":{label:`Emotional Regulation`,description:`For dysregulation, mood instability, feeling overwhelmed`,symptoms:[`Reactive`,`Overwhelmed`,`Flooded`],chapters:[{title:`The Resonant Symphony`,reasoning:`Your emotions are not random. They're an orchestra following patterns. Understanding the structure lets you conduct it.`,chapterRef:`chapter-42-the-resonant-symphony`},{title:`Feeling as Knowing - The Intelligence of Emotion`,reasoning:`Emotions aren't problems to solve. They're signals. This chapter teaches you to read them as data, not noise.`,chapterRef:`chapter-13-feeling-as-knowing-the-intelligence-of-emotion`},{title:`The Living Current - Understanding Your Energy Body`,reasoning:`Dysregulation lives in your energy centers. This maps where emotions physically lodge and how to shift them.`,chapterRef:`chapter-10-the-living-current-understanding-your-energy-body`},{title:`The Inner Ensemble - Working with Archetypal Energies as Conscious Practice`,reasoning:`Meet the different parts of yourself that are in conflict. Orchestra becomes conscious collaboration.`,chapterRef:`chapter-47-the-inner-ensemble-working-with-archetypal-energies-as-conscious-practice`}]},"grounding-safety":{label:`Grounding & Safety`,description:`For anxiety, disconnection, rootlessness, feeling unmoored`,symptoms:[`Anxious`,`Unmoored`,`Dissociated`],chapters:[{title:`The Sacred Ego - Boundary, Tool, and Divine Instrument`,reasoning:`The ego's job is to create boundaries and maintain safety. This reclaims it as sacred function, not enemy.`,chapterRef:`chapter-9-the-sacred-ego-boundary-tool-and-divine-instrument`},{title:`The Living Current - Understanding Your Energy Body`,reasoning:`Root center work. Physical grounding practices. Where safety lives in your body.`,chapterRef:`chapter-10-the-living-current-understanding-your-energy-body`},{title:`MIND/BODY/SPIRIT: The Three Interfaces of Immanent Being`,reasoning:`Grounding requires integrating all three. Purely mental or spiritual bypasses don't create real safety.`,chapterRef:`chapter-16-mindbodyspirit-the-three-interfaces-of-immanent-being`},{title:`Practical Applications - The Modes in Daily Life`,reasoning:`MODE 1 is the grounding mode. This shows how to activate it moment-to-moment.`,chapterRef:`chapter-46-practical-applications-the-modes-in-daily-life`}]},"shadow-integration":{label:`Shadow & Integration`,description:`For recurring patterns, shame, denied parts of yourself, self-sabotage`,symptoms:[`Triggered`,`Avoiding`,`Projecting`],chapters:[{title:`Shadow as Curriculum - The Architecture of the Unchosen Self`,reasoning:`Your shadow isn't pathology. It's curriculum. The parts you were trained to hide often contain your medicine.`,chapterRef:`chapter-x-shadow-as-curriculum-the-architecture-of-the-unchosen-self`},{title:`The Inner Ensemble - Working with Archetypal Energies as Conscious Practice`,reasoning:`Shadow work means meeting these parts as collaborators, not enemies. Orchestrate them consciously.`,chapterRef:`chapter-47-the-inner-ensemble-working-with-archetypal-energies-as-conscious-practice`},{title:`The Architecture of Integration`,reasoning:`Integration isn't dissolving the shadow. It's making conscious what was unconscious.`,chapterRef:`chapter-43-the-architecture-of-integration`},{title:`The Sacred Ego - Boundary, Tool, and Divine Instrument`,reasoning:`Understand what your ego is hiding and why. Conscious ego can integrate shadow.`,chapterRef:`chapter-9-the-sacred-ego-boundary-tool-and-divine-instrument`}]},"expression-voice":{label:`Expression & Voice`,description:`For suppressed creativity, difficulty speaking truth, blocked communication`,symptoms:[`Suppressed`,`Inauthentic`,`Voiceless`],chapters:[{title:`The Bridge of Breath/Resonance`,reasoning:`Breath moves from heart to throat. This is how unspoken truth becomes articulated.`,chapterRef:`chapter-14-the-bridge-of-breath-resonance`},{title:`The Nature of Thoughts—Why Thinking About Your Thoughts Doesn't Work`,reasoning:`Blocked expression often comes from overthinking. This shows why and what creates flow instead.`,chapterRef:`chapter-15-the-nature-of-thoughtswhy-thinking-about-your-thoughts-doesnt-work`},{title:`Language & Geometry as Cosmic Expression`,reasoning:`Language itself is sacred geometry. This unlocks the creative power of words and expression.`,chapterRef:`language-geometry-as-cosmic-expression`},{title:`The Sacred Dance - Divine Masculine and Feminine`,reasoning:`Expression requires balance between the impulse to speak (masculine) and the wisdom of what to speak (feminine).`,chapterRef:`chapter-11-the-sacred-dance-divine-masculine-and-feminine`}]},"heart-connection":{label:`Heart & Connection`,description:`For isolation, relationship difficulty, closed heart, loneliness`,symptoms:[`Disconnected`,`Guarded`,`Lonely`],chapters:[{title:`Love: The Invisible Reconciler`,reasoning:`Love isn't sentiment. It's the recognition of value in that which is not yourself. This is how connection works.`,chapterRef:`chapter-40-love-the-invisible-reconciler`},{title:`The Sacred Dance - Divine Masculine and Feminine`,reasoning:`Relationships require polarity. Healthy connection means understanding your masculine/feminine dance.`,chapterRef:`chapter-11-the-sacred-dance-divine-masculine-and-feminine`},{title:`The Living Current - Understanding Your Energy Body`,reasoning:`Heart center work. Where love gets blocked and how to open it.`,chapterRef:`chapter-10-the-living-current-understanding-your-energy-body`},{title:`The Sacred Cycle - Birth, Death, and Continuity of Consciousness (Part 1)`,reasoning:`Deep intimacy requires understanding that all connection involves cycles of meeting and separating.`,chapterRef:`chapter-20-the-sacred-cycle-birth-death-and-continuity-of-consciousness-part-1`}]},"resonance-alignment":{label:`Resonance & Alignment`,description:`For understanding life patterns, frequency work, attracting what you want`,symptoms:[`Misaligned`,`Off-rhythm`,`Forcing`],chapters:[{title:`The Resonant Symphony`,reasoning:`Your inner frequency broadcasts outward and structures your reality. This maps how.`,chapterRef:`chapter-42-the-resonant-symphony`},{title:`As Above, So Below: The Architecture of Resonance`,reasoning:`Your inner state = your outer reality. This shows the mechanics of that relationship.`,chapterRef:`chapter-12-as-above-so-below-the-architecture-of-resonance`},{title:`Practical Applications - The Modes in Daily Life`,reasoning:`Align your moment-to-moment choices with your desired frequency.`,chapterRef:`chapter-46-practical-applications-the-modes-in-daily-life`},{title:`The Dance of the Modes & Integration`,reasoning:`Integration means your inner orchestra plays in harmony, which radiates coherent frequency.`,chapterRef:`chapter-45-the-dance-of-the-modes-integration`}]},"self-knowledge":{label:`Self-Knowledge`,description:`For deeper understanding of your nature, who you are, your purpose`,symptoms:[`Confused`,`Identity-lost`,`Seeking`],chapters:[{title:`The Architecture of Integration / Before You Practice`,reasoning:`Foundation for all self-knowledge work. Maps how consciousness knows itself.`,chapterRef:`chapter-41-the-architecture-and-reality-of-integration`},{title:`The Resonant Symphony`,reasoning:`Your self is the orchestration. Knowing your 'symphony' is knowing yourself.`,chapterRef:`chapter-42-the-resonant-symphony`},{title:`Sacred Cartography - Jyotish as Navigational Consciousness`,reasoning:`Your particular nature (birth chart) shows your gifts, challenges, and navigational compass.`,chapterRef:`chapter-48-sacred-cartography-jyotish-as-navigational-consciousness`},{title:`The Four Modes - Why Evolution Requires All Four`,reasoning:`Self-knowledge requires knowing which modes you naturally default to and which you're avoiding.`,chapterRef:`chapter-44-the-four-modes-why-evolution-requires-all-four`},{title:`When the Dance of Creation Becomes a Knife Fight`,reasoning:`Self-knowledge includes understanding conflict patterns and how your particular psychology creates them.`,chapterRef:`chapter-19-when-the-dance-of-creation-becomes-a-knife-fight`}]}};function g(){return Object.entries(h).map(([e,t])=>({key:e,label:t.label,description:t.description,symptoms:t.symptoms||[]}))}function _(e){return!e||typeof e!=`string`?e:e.replace(/â€™/g,`'`).replace(/â€˜/g,`'`).replace(/â€œ/g,`"`).replace(/â€\u009d/g,`"`).replace(/â€/g,`"`).replace(/â€"/g,`—`).replace(/â€"/g,`–`).replace(/â€¦/g,`...`).replace(/Ã©/g,`é`).replace(/Ã¨/g,`è`).replace(/Ã /g,`à`).replace(/Ã¢/g,`â`).replace(/âˆ'/g,`∞`).replace(/Â°/g,`°`).replace(/Â /g,` `)}const v=[{id:`music-transmission-consciousness`,provider:`self`,externalId:`videos/Music__A_Transmission_of_Consciousness.mp4`,title:`Music: A Transmission of Consciousness`,category:`wisdom`,duration:`~10:00`,durationSec:600,description:`Exploring how music transmits and transforms consciousness.`,order:1,tags:[`music`,`consciousness`,`transmission`],isFeatured:!0,pathId:null,week:null,iconType:`circle`,embedOptions:{}},{id:`ai-oracle`,provider:`self`,externalId:`videos/The_AI_Oracle.mp4`,title:`The AI Oracle`,category:`wisdom`,duration:`~15:00`,durationSec:900,description:`AI as a modern oracle and tool for consciousness exploration.`,order:2,tags:[`ai`,`oracle`,`technology`,`consciousness`],isFeatured:!0,pathId:null,week:null,iconType:`hex`,embedOptions:{}},{id:`cosmic-dance`,provider:`self`,externalId:`videos/The_Cosmic_Dance.mp4`,title:`The Cosmic Dance`,category:`wisdom`,duration:`~14:00`,durationSec:840,description:`The universal dance of creation and dissolution.`,order:3,tags:[`cosmos`,`dance`,`creation`,`philosophy`],isFeatured:!0,pathId:null,week:null,iconType:`circle`,embedOptions:{}},{id:`map-of-self`,provider:`self`,externalId:`videos/The_Map_of_The_Self.mp4`,title:`The Map of The Self`,category:`wisdom`,duration:`~14:00`,durationSec:840,description:`Understanding the layers and territories of self.`,order:4,tags:[`self`,`identity`,`psychology`,`map`],isFeatured:!0,pathId:null,week:null,iconType:`triangle`,embedOptions:{}},{id:`mechanics-life-death`,provider:`self`,externalId:`videos/The_Mechanics_of_Life_&_Death.mp4`,title:`The Mechanics of Life & Death`,category:`wisdom`,duration:`~13:00`,durationSec:780,description:`The fundamental mechanics underlying life and death.`,order:5,tags:[`life`,`death`,`mechanics`,`philosophy`],isFeatured:!1,pathId:null,week:null,iconType:`circle`,embedOptions:{}},{id:`mechanics-meaning`,provider:`self`,externalId:`videos/The_Mechanics_of_Meaning.mp4`,title:`The Mechanics of Meaning`,category:`wisdom`,duration:`~12:00`,durationSec:720,description:`How meaning arises and organizes experience.`,order:6,tags:[`meaning`,`mechanics`,`philosophy`,`semiotics`],isFeatured:!1,pathId:null,week:null,iconType:`hex`,embedOptions:{}},{id:`souls-journey`,provider:`self`,externalId:`videos/The_Soul_s_Journey.mp4`,title:`The Soul's Journey`,category:`wisdom`,duration:`~11:00`,durationSec:660,description:`The path of the soul through transformation.`,order:7,tags:[`soul`,`journey`,`transformation`,`spirituality`],isFeatured:!1,pathId:null,week:null,iconType:`triangle`,embedOptions:{}},{id:`what-is-information`,provider:`self`,externalId:`videos/What_is_Information,_Really_.mp4`,title:`What is Information, Really?`,category:`wisdom`,duration:`~12:00`,durationSec:720,description:`Deep exploration of the nature of information.`,order:8,tags:[`information`,`reality`,`physics`,`philosophy`],isFeatured:!1,pathId:null,week:null,iconType:`hex`,embedOptions:{}}];function y(e,t={}){let{autoplay:n=!1,start:r=0}=t;switch(e.provider){case`youtube`:{let t=new URLSearchParams({modestbranding:`1`,rel:`0`,enablejsapi:`1`,origin:window.location.origin});return n&&t.set(`autoplay`,`1`),r>0&&t.set(`start`,String(Math.floor(r))),`https://www.youtube.com/embed/${e.externalId}?${t}`}case`vimeo`:{let t=new URLSearchParams({title:`0`,byline:`0`,portrait:`0`});return n&&t.set(`autoplay`,`1`),`https://player.vimeo.com/video/${e.externalId}?${t}`}case`cloudflare`:return`https://iframe.cloudflarestream.com/${e.externalId}`;case`self`:return`/Immanence/${e.externalId}`;default:return console.warn(`Unknown video provider: ${e.provider}`),null}}function b({flareIntensity:e=0}){let t=(0,l.useRef)(null),n=(0,l.useRef)([]),r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=t.current;if(!e)return;let i=e.getContext(`2d`),a=n.current,o=(t=20)=>{for(let n=0;n<t;n++)a.push({x:Math.random()*e.width,y:e.height+Math.random()*50,size:Math.random()*4+2,speedY:Math.random()*1.2+.4,speedX:(Math.random()-.5)*.3,opacity:Math.random()*.5+.2,hue:Math.random()*30+20,life:Math.random()*100+50})},s=()=>{i.clearRect(0,0,e.width,e.height),a.forEach((t,n)=>{i.beginPath(),i.arc(t.x,t.y,t.size,0,Math.PI*2);let r=i.createRadialGradient(t.x,t.y,0,t.x,t.y,t.size);r.addColorStop(0,`hsla(${t.hue}, 100%, 60%, ${t.opacity})`),r.addColorStop(1,`hsla(${t.hue}, 100%, 40%, 0)`),i.fillStyle=r,i.fill(),t.y-=t.speedY,t.x+=t.speedX+Math.sin(t.y*.015)*.4,--t.life,t.opacity*=.995,(t.life<=0||t.y<-20||t.opacity<.02)&&(a[n]={x:Math.random()*e.width,y:e.height+Math.random()*20,size:Math.random()*4+2,speedY:Math.random()*1.2+.4,speedX:(Math.random()-.5)*.3,opacity:Math.random()*.5+.2,hue:Math.random()*30+20,life:Math.random()*100+50})}),r.current=requestAnimationFrame(s)},c=()=>{e.width=e.offsetWidth*window.devicePixelRatio,e.height=e.offsetHeight*window.devicePixelRatio,i.scale(window.devicePixelRatio,window.devicePixelRatio),a.length=0,o(25)};return c(),window.addEventListener(`resize`,c),s(),window.flareEmbers=(e=30)=>{o(e)},()=>{window.removeEventListener(`resize`,c),r.current&&cancelAnimationFrame(r.current)}},[]),(0,l.useEffect)(()=>{e>0&&window.flareEmbers&&window.flareEmbers(e)},[e]),(0,u.jsxs)(`div`,{className:`absolute inset-0 flex flex-col items-center justify-center overflow-hidden`,children:[(0,u.jsx)(`div`,{className:`absolute inset-0`,style:{background:`radial-gradient(ellipse at center bottom, rgba(255,100,30,0.15) 0%, rgba(20,10,5,0.95) 60%, #0a0a0f 100%)`}}),(0,u.jsx)(`canvas`,{ref:t,className:`absolute inset-0 pointer-events-none`,style:{mixBlendMode:`screen`,width:`100%`,height:`100%`}}),(0,u.jsx)(`p`,{className:`relative z-10 text-[11px] uppercase text-neutral-500`,style:{fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`},children:`Select a video to tend the fire`})]})}function x({video:e,isPlaying:n,setIsPlaying:r,isTransitioning:i,onClear:a,isLight:o,recommendedBudgetMin:s}){let c=(0,l.useRef)(null),{updateProgress:d,markCompleted:f}=t();(0,l.useEffect)(()=>{c.current&&e&&(c.current.pause(),c.current.currentTime=0,c.current.load())},[e?.id]);let p=e?y(e):null;return(0,u.jsxs)(`section`,{className:`w-full flex flex-col items-center justify-center px-4 pt-4 pb-8 relative z-10`,style:{background:o?`rgba(250, 245, 235, 0.98)`:`rgba(10,10,15,0.98)`,boxShadow:n?o?`inset 0 0 80px rgba(180, 140, 100, 0.15)`:`inset 0 0 80px rgba(255,120,40,0.08)`:`none`,transition:`all 0.5s ease`},children:[(0,u.jsxs)(`div`,{className:`w-full max-w-3xl rounded-xl overflow-hidden relative`,style:{aspectRatio:`16 / 9`,background:`#0a0a0f`,boxShadow:e?`0 0 60px rgba(255,100,30,0.25), 0 0 120px rgba(255,80,20,0.15), 0 25px 50px rgba(0,0,0,0.5)`:`0 25px 50px rgba(0,0,0,0.5)`,border:e?`2px solid rgba(255,120,40,0.4)`:`1px solid rgba(255,255,255,0.06)`,transition:`all 0.5s ease`},children:[!e&&(0,u.jsx)(`div`,{className:`absolute inset-0`,children:(0,u.jsx)(b,{})}),e&&(0,u.jsx)(`div`,{className:`absolute inset-0 z-10 transition-opacity duration-300`,style:{opacity:i?0:1},children:(0,u.jsx)(`video`,{ref:c,src:p,className:`w-full h-full object-contain`,style:{colorScheme:`dark`,backgroundColor:`#0a0a0f`},controls:!0,onPlay:()=>r(!0),onPause:()=>r(!1),onEnded:()=>{r(!1),f(e.id)},onTimeUpdate:t=>{let n=t.target.currentTime,r=t.target.duration;r>0&&d(e.id,n/r,n)}},e.id)}),e&&!i&&(0,u.jsx)(`button`,{onClick:a,className:`absolute top-3 right-3 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all opacity-40 hover:opacity-100`,style:{background:`rgba(0,0,0,0.6)`,border:`1px solid rgba(255,255,255,0.2)`},title:`Clear video`,children:(0,u.jsx)(`span`,{className:`text-white text-sm`,children:`✕`})})]}),e&&!i&&(0,u.jsxs)(`div`,{className:`mt-4 text-center max-w-2xl`,children:[(0,u.jsx)(`h2`,{className:`text-lg mb-1`,style:{fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-wide)`,color:`var(--accent-color)`},children:e.title}),(0,u.jsxs)(`div`,{className:`text-[11px] text-neutral-500 font-medium`,style:{fontFamily:`var(--font-body)`,letterSpacing:`0.01em`},children:[e.duration,typeof s==`number`?` • Suggested ${s}m`:``,e.description?` • ${e.description}`:``]})]})]})}function S({video:e,isSelected:t,onClick:n,isLight:r}){let i={featured:`◈`,foundations:`△`,explorations:`◇`,wisdom:`✦`,circle:`◯`,triangle:`△`,hex:`⬡`},a=i[e.iconType]||i[e.category]||`◆`;return(0,u.jsxs)(`button`,{onClick:()=>n(e),"data-card":`true`,"data-card-id":`video-token`,className:`flex-shrink-0 w-40 p-3 text-left transition-all duration-200 rounded-lg border im-card`,style:{background:t?r?`rgba(180, 140, 100, 0.2)`:`rgba(255,140,50,0.1)`:r?`rgba(80, 60, 40, 0.08)`:`rgba(255,255,255,0.02)`,borderColor:t?r?`rgba(180, 140, 100, 0.6)`:`rgba(255,140,50,0.5)`:r?`rgba(80, 60, 40, 0.2)`:`rgba(255,255,255,0.08)`,boxShadow:t?r?`0 0 20px rgba(180, 140, 100, 0.3)`:`0 0 20px rgba(255,120,40,0.2)`:`none`,transform:t?`scale(1.02)`:`scale(1)`},children:[(0,u.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,u.jsx)(`span`,{className:`text-sm`,style:{color:t?r?`rgba(140, 100, 60, 0.9)`:`rgba(255,180,100,0.9)`:r?`rgba(80, 60, 40, 0.5)`:`rgba(255,255,255,0.3)`},children:a}),(0,u.jsx)(`span`,{className:`text-[9px] font-mono`,style:{color:t?r?`rgba(140, 100, 60, 0.8)`:`rgba(255,180,100,0.7)`:r?`rgba(80, 60, 40, 0.5)`:`rgba(255,255,255,0.3)`},children:e.duration})]}),(0,u.jsx)(`h3`,{className:`text-[11px] leading-tight line-clamp-2`,style:{color:t?r?`rgba(80, 60, 40, 0.95)`:`rgba(255,220,180,0.95)`:r?`rgba(80, 60, 40, 0.8)`:`rgba(255,255,255,0.6)`,fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-wide)`},children:e.title})]})}function C({label:e,videos:t,activeVideoId:n,onSelect:r,isLight:i}){let a=(0,l.useRef)(null),[o,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),f=()=>{if(!a.current)return;let{scrollLeft:e,scrollWidth:t,clientWidth:n}=a.current;s(e>10),d(e<t-n-10)};(0,l.useEffect)(()=>{f();let e=a.current;return e&&(e.addEventListener(`scroll`,f),window.addEventListener(`resize`,f)),()=>{e&&e.removeEventListener(`scroll`,f),window.removeEventListener(`resize`,f)}},[t]);let p=e=>{if(!a.current)return;let t=a.current.clientWidth*.8;a.current.scrollBy({left:e===`left`?-t:t,behavior:`smooth`})};return!t||t.length===0?null:(0,u.jsxs)(`div`,{className:`mb-7`,children:[(0,u.jsxs)(`div`,{className:`flex items-center justify-between mb-4 px-4`,children:[(0,u.jsxs)(`div`,{children:[(0,u.jsxs)(`div`,{className:`text-[10px] uppercase tracking-[0.2em]`,style:{color:i?`rgba(140, 100, 60, 0.85)`:`rgba(255,200,120,0.7)`,fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`},children:[`▶ `,e]}),e===`Featured`&&(0,u.jsx)(`div`,{className:`text-[8px] italic mt-0.5`,style:{color:i?`rgba(100, 80, 60, 0.5)`:`rgba(255,200,120,0.4)`},children:`Curated picks`}),e===`Library`&&(0,u.jsx)(`div`,{className:`text-[8px] italic mt-0.5`,style:{color:i?`rgba(100, 80, 60, 0.5)`:`rgba(255,200,120,0.4)`},children:`All videos`})]}),(0,u.jsxs)(`div`,{className:`flex gap-2`,children:[(0,u.jsx)(`button`,{onClick:()=>p(`left`),disabled:!o,className:`w-6 h-6 rounded-full flex items-center justify-center transition-all`,style:{background:o?`rgba(255,180,100,0.15)`:`transparent`,color:o?`rgba(255,180,100,0.8)`:`rgba(255,255,255,0.2)`,cursor:o?`pointer`:`default`,opacity:o?.7:.15},children:`←`}),(0,u.jsx)(`button`,{onClick:()=>p(`right`),disabled:!c,className:`w-6 h-6 rounded-full flex items-center justify-center transition-all`,style:{background:c?`rgba(255,180,100,0.15)`:`transparent`,color:c?`rgba(255,180,100,0.8)`:`rgba(255,255,255,0.2)`,cursor:c?`pointer`:`default`,opacity:c?.7:.15},children:`→`})]})]}),(0,u.jsxs)(`div`,{className:`relative`,children:[o&&(0,u.jsx)(`div`,{className:`absolute left-0 top-0 bottom-0 w-12 z-10 pointer-events-none`,style:{background:i?`linear-gradient(to right, rgba(250, 245, 235, 1), transparent)`:`linear-gradient(to right, rgba(10,10,15,1), transparent)`}}),(0,u.jsxs)(`div`,{ref:a,className:`flex gap-3 px-4 pb-3`,style:{overflowX:`auto`,overflowY:`hidden`,scrollbarWidth:`none`,msOverflowStyle:`none`,WebkitOverflowScrolling:`touch`},children:[(0,u.jsx)(`style`,{children:`
                        .offering-scroll::-webkit-scrollbar { display: none; }
                    `}),t.map(e=>(0,u.jsx)(S,{video:e,isSelected:e.id===n,onClick:r,isLight:i},e.id))]}),c&&(0,u.jsx)(`div`,{className:`absolute right-0 top-0 bottom-0 w-12 z-10 pointer-events-none`,style:{background:i?`linear-gradient(to left, rgba(250, 245, 235, 1), transparent)`:`linear-gradient(to left, rgba(10,10,15,1), transparent)`}})]})]})}function w(){return(0,u.jsx)(`div`,{className:`h-24 pointer-events-none`,style:{background:`linear-gradient(to top, rgba(20,15,12,0.8), transparent)`}})}function T({initialVideoId:e=null,initialVideoBudgetMin:t=null}){let n=a(e=>e.colorScheme)===`light`,[r,i]=(0,l.useState)(null),[o,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),[f,p]=(0,l.useState)(null),m=v.filter(e=>e.isFeatured),h=v,g=n=>{r?.id!==n.id&&(window.flareEmbers&&window.flareEmbers(35),d(!0),setTimeout(()=>{i(n),s(!1),p(n?.id&&n.id===e&&typeof t==`number`?t:null),d(!1)},300))};return(0,l.useEffect)(()=>{if(!e)return;let n=v.find(t=>t.id===e);n&&(p(typeof t==`number`?t:null),g(n))},[e,t]),(0,u.jsxs)(`div`,{className:`w-full min-h-[70vh] flex flex-col relative`,style:{background:n?`rgba(250, 245, 235, 1)`:`rgba(10,10,15,1)`,zIndex:50},children:[(0,u.jsx)(x,{video:r,isPlaying:o,setIsPlaying:s,isTransitioning:c,onClear:()=>{r&&(window.flareEmbers&&window.flareEmbers(25),d(!0),setTimeout(()=>{i(null),s(!1),d(!1),p(null)},300))},isLight:n,recommendedBudgetMin:f}),(0,u.jsxs)(`div`,{className:`flex-1 pt-6 pb-4`,children:[m.length>0&&(0,u.jsx)(C,{label:`Featured`,videos:m,activeVideoId:r?.id,onSelect:g,isLight:n}),(0,u.jsx)(C,{label:`Library`,videos:h,activeVideoId:r?.id,onSelect:g,isLight:n})]}),(0,u.jsx)(w,{})]})}var E=[{id:1,text:`Extraverted, enthusiastic`,dimension:`extraversion`,reversed:!1},{id:2,text:`Critical, quarrelsome`,dimension:`agreeableness`,reversed:!0},{id:3,text:`Dependable, self-disciplined`,dimension:`conscientiousness`,reversed:!1},{id:4,text:`Anxious, easily upset`,dimension:`neuroticism`,reversed:!1},{id:5,text:`Open to new experiences, complex`,dimension:`openness`,reversed:!1},{id:6,text:`Reserved, quiet`,dimension:`extraversion`,reversed:!0},{id:7,text:`Sympathetic, warm`,dimension:`agreeableness`,reversed:!1},{id:8,text:`Disorganized, careless`,dimension:`conscientiousness`,reversed:!0},{id:9,text:`Calm, emotionally stable`,dimension:`neuroticism`,reversed:!0},{id:10,text:`Conventional, uncreative`,dimension:`openness`,reversed:!0}],D=[{value:1,label:`Disagree strongly`},{value:2,label:`Disagree moderately`},{value:3,label:`Disagree a little`},{value:4,label:`Neither agree nor disagree`},{value:5,label:`Agree a little`},{value:6,label:`Agree moderately`},{value:7,label:`Agree strongly`}];function O(e){let t={extraversion:[],agreeableness:[],conscientiousness:[],neuroticism:[],openness:[]};E.forEach(n=>{let r=e[n.id];if(r!==void 0){let e=n.reversed?8-r:r;t[n.dimension].push(e)}});let n={};for(let[e,r]of Object.entries(t))r.length>0?n[e]=(r.reduce((e,t)=>e+t,0)/r.length-1)/6:n[e]=.5;return n}function k(e){if(!e)return[];let t=[];return e.openness>.6&&t.push(`open to experience`),e.openness<.4&&t.push(`practical, conventional`),e.conscientiousness>.6&&t.push(`organized, disciplined`),e.conscientiousness<.4&&t.push(`flexible, spontaneous`),e.extraversion>.6&&t.push(`socially energized`),e.extraversion<.4&&t.push(`reserved, reflective`),e.agreeableness>.6&&t.push(`cooperative, trusting`),e.agreeableness<.4&&t.push(`skeptical, direct`),e.neuroticism>.6&&t.push(`emotionally sensitive`),e.neuroticism<.4&&t.push(`emotionally stable`),t}function A(e,t=`tipi-10`){return{scores:e,version:t,reliability:t===`bfi-44`?`high`:t===`ipip-20`?`medium`:`low`,completedAt:Date.now()}}function j({onComplete:e,onCancel:t,onUpdate:n,onSave:r}){let[i,a]=(0,l.useState)(0),[o,s]=(0,l.useState)({}),[c,d]=(0,l.useState)(!1),[f,p]=(0,l.useState)(null),m=E[i],h=Object.keys(o).length/E.length,g=Object.keys(o).length===E.length,_=e=>{let t={...o,[m.id]:e};s(t);let r=O(t);n?.(r),setTimeout(()=>{i<E.length-1&&a(i+1)},150)},v=()=>{let e=O(o),t=A(e,`tipi-10`);p(e),r?.(t),d(!0)},y=()=>{e?.()};if(c&&f){let e=k(f);return(0,u.jsxs)(`div`,{className:`space-y-6`,children:[(0,u.jsxs)(`div`,{className:`text-center`,children:[(0,u.jsx)(`div`,{className:`text-2xl mb-2`,children:`✦`}),(0,u.jsx)(`h3`,{style:{fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`,color:`var(--accent-color)`},children:`Wave Function Established`}),(0,u.jsx)(`p`,{style:{color:`rgba(253,251,245,0.6)`,fontSize:`13px`},children:`Your personality profile is now available for Four Modes guidance`})]}),(0,u.jsx)(`div`,{className:`space-y-4`,children:Object.entries(f).map(([e,t])=>(0,u.jsxs)(`div`,{children:[(0,u.jsxs)(`div`,{className:`flex justify-between text-[11px] uppercase tracking-wider mb-1`,children:[(0,u.jsx)(`span`,{style:{color:`var(--accent-color)`},children:e.charAt(0).toUpperCase()+e.slice(1)}),(0,u.jsxs)(`span`,{style:{color:`rgba(253,251,245,0.5)`},children:[(t*100).toFixed(0),`%`]})]}),(0,u.jsx)(`div`,{className:`h-2 rounded-full overflow-hidden`,style:{background:`rgba(255,255,255,0.1)`},children:(0,u.jsx)(`div`,{className:`h-full rounded-full transition-all duration-500`,style:{width:`${t*100}%`,background:`linear-gradient(90deg, var(--accent-40), var(--accent-color))`}})})]},e))}),e&&e.length>0&&(0,u.jsxs)(`div`,{className:`p-4 rounded-xl`,style:{background:`rgba(0,0,0,0.3)`,border:`1px solid var(--accent-20)`},children:[(0,u.jsx)(`div`,{className:`text-[10px] uppercase tracking-wider mb-2`,style:{color:`var(--accent-color)`},children:`Your Profile`}),(0,u.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:e.map((e,t)=>(0,u.jsx)(`span`,{className:`px-2 py-1 rounded-full text-[11px]`,style:{background:`var(--accent-10)`,color:`rgba(253,251,245,0.8)`},children:e},t))})]}),(0,u.jsx)(`div`,{className:`text-center text-[11px] italic`,style:{color:`rgba(253,251,245,0.4)`},children:`This is a brief assessment. Take the full 44-item version for higher accuracy.`}),(0,u.jsx)(`button`,{onClick:y,className:`w-full py-3 rounded-full text-[13px] uppercase tracking-wider transition-all`,style:{background:`var(--ui-button-gradient)`,color:`rgba(0,0,0,0.9)`,fontWeight:600},children:`Continue`})]})}return(0,u.jsxs)(`div`,{className:`space-y-6`,children:[(0,u.jsxs)(`div`,{className:`text-center`,children:[(0,u.jsx)(`h3`,{style:{fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`,color:`var(--accent-color)`},children:`Wave Function Setup`}),(0,u.jsx)(`p`,{style:{color:`rgba(253,251,245,0.5)`,fontSize:`12px`},children:`Rate how well each pair describes you`})]}),(0,u.jsxs)(`div`,{className:`relative`,children:[(0,u.jsx)(`div`,{className:`h-1 rounded-full overflow-hidden`,style:{background:`rgba(255,255,255,0.1)`},children:(0,u.jsx)(`div`,{className:`h-full rounded-full transition-all duration-300`,style:{width:`${h*100}%`,background:`var(--accent-color)`}})}),(0,u.jsxs)(`div`,{className:`text-[10px] mt-1 text-right`,style:{color:`rgba(253,251,245,0.4)`},children:[i+1,` of `,E.length]})]}),(0,u.jsxs)(`div`,{className:`text-center py-4`,children:[(0,u.jsx)(`div`,{className:`text-[11px] uppercase tracking-wider mb-3`,style:{color:`rgba(253,251,245,0.5)`},children:`I see myself as:`}),(0,u.jsx)(`div`,{className:`text-[18px] font-medium`,style:{fontFamily:`var(--font-body)`,color:`rgba(253,251,245,0.95)`},children:m.text})]}),(0,u.jsx)(`div`,{className:`space-y-2`,children:D.map(e=>{let t=o[m.id]===e.value;return(0,u.jsxs)(`button`,{onClick:()=>_(e.value),className:`w-full py-3 px-4 rounded-xl text-[13px] transition-all text-left flex items-center justify-between`,style:{background:t?`var(--accent-20)`:`rgba(0,0,0,0.2)`,border:t?`1px solid var(--accent-40)`:`1px solid var(--accent-10)`,color:t?`var(--accent-color)`:`rgba(253,251,245,0.7)`},children:[(0,u.jsx)(`span`,{children:e.label}),(0,u.jsx)(`span`,{style:{opacity:.5},children:e.value})]},e.value)})}),(0,u.jsxs)(`div`,{className:`flex items-center justify-between pt-2`,children:[(0,u.jsx)(`button`,{onClick:()=>i>0&&a(i-1),className:`px-4 py-2 rounded-full text-[12px] transition-all`,style:{opacity:i>0?1:.3,border:`1px solid var(--accent-20)`,color:`rgba(253,251,245,0.6)`},disabled:i===0,children:`← Back`}),g?(0,u.jsx)(`button`,{onClick:v,className:`px-6 py-2 rounded-full text-[12px] uppercase tracking-wider transition-all`,style:{background:`var(--ui-button-gradient)`,color:`rgba(0,0,0,0.9)`,fontWeight:600},children:`View Results`}):(0,u.jsx)(`button`,{onClick:()=>i<E.length-1&&a(i+1),className:`px-4 py-2 rounded-full text-[12px] transition-all`,style:{opacity:i<E.length-1?1:.3,border:`1px solid var(--accent-20)`,color:`rgba(253,251,245,0.6)`},disabled:i===E.length-1,children:`Skip →`})]}),t&&(0,u.jsx)(`div`,{className:`text-center`,children:(0,u.jsx)(`button`,{onClick:t,className:`text-[11px] uppercase tracking-wider transition-all`,style:{color:`rgba(253,251,245,0.3)`},children:`Cancel Assessment`})})]})}function M({scores:e,width:t=400,height:n=150}){let r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let i=r.current;if(!i)return;let a=i.getContext(`2d`),o,s=0,c={openness:e?.openness??.5,conscientiousness:e?.conscientiousness??.5,extraversion:e?.extraversion??.5,agreeableness:e?.agreeableness??.5,neuroticism:e?.neuroticism??.5},l=20+c.neuroticism*30,u=.01+c.openness*.02,d=.02+c.extraversion*.05,f=c.neuroticism*.5+(1-c.conscientiousness)*.5,p=()=>{s+=d,a.clearRect(0,0,t,n);let e=a.createLinearGradient(0,0,t,0);c.agreeableness>.6?(e.addColorStop(0,`rgba(200, 180, 255, 0.4)`),e.addColorStop(.5,`rgba(150, 200, 255, 0.6)`),e.addColorStop(1,`rgba(200, 180, 255, 0.4)`)):(e.addColorStop(0,`rgba(100, 80, 180, 0.4)`),e.addColorStop(.5,`rgba(60, 150, 180, 0.6)`),e.addColorStop(1,`rgba(100, 80, 180, 0.4)`)),a.beginPath(),a.moveTo(0,n/2);for(let e=0;e<=t;e++){let t=Math.sin(e*u+s)*l;t+=Math.sin(e*u*2.5+s*1.5)*(l*.3*c.openness),f>.1&&(t+=Math.sin(e*u*5+s*3)*(f*10)),a.lineTo(e,n/2+t)}a.strokeStyle=e,a.lineWidth=3,a.lineCap=`round`,a.stroke(),a.lineTo(t,n),a.lineTo(0,n);let r=a.createLinearGradient(0,0,t,0);c.agreeableness>.6?(r.addColorStop(0,`rgba(200, 180, 255, 0.05)`),r.addColorStop(.5,`rgba(150, 200, 255, 0.1)`),r.addColorStop(1,`rgba(200, 180, 255, 0.05)`)):(r.addColorStop(0,`rgba(100, 80, 180, 0.05)`),r.addColorStop(.5,`rgba(60, 150, 180, 0.1)`),r.addColorStop(1,`rgba(100, 80, 180, 0.05)`)),a.fillStyle=r,a.fill(),o=requestAnimationFrame(p)};return p(),()=>{cancelAnimationFrame(o)}},[e,t,n]),(0,u.jsxs)(`div`,{className:`relative w-full overflow-hidden rounded-2xl bg-black/20 border border-white/5`,children:[(0,u.jsx)(`canvas`,{ref:r,width:t,height:n,className:`w-full h-auto block`}),(0,u.jsxs)(`div`,{className:`absolute inset-x-4 top-2 flex justify-between pointer-events-none`,children:[(0,u.jsx)(`span`,{className:`text-[9px] uppercase tracking-widest text-white/20`,children:`Openness`}),(0,u.jsx)(`span`,{className:`text-[9px] uppercase tracking-widest text-white/20`,children:`Stability`})]})]})}function N(){return{bigFive:null,selfDescribedTags:[]}}function P(e){if(!e)return[];let t=[];return e.openness>.6&&t.push(`open to experience`),e.openness<.4&&t.push(`practical, conventional`),e.conscientiousness>.6&&t.push(`organized, disciplined`),e.conscientiousness<.4&&t.push(`flexible, spontaneous`),e.extraversion>.6&&t.push(`socially energized`),e.extraversion<.4&&t.push(`reserved, reflective`),e.agreeableness>.6&&t.push(`cooperative, trusting`),e.agreeableness<.4&&t.push(`skeptical, direct`),e.neuroticism>.6&&t.push(`emotionally sensitive`),e.neuroticism<.4&&t.push(`emotionally stable`),t}function F(){let[e,t]=(0,l.useState)(!1),[n,r]=(0,l.useState)(null),[i,a]=(0,l.useState)(null),[o,s]=(0,l.useState)(N),[c,d]=(0,l.useState)(``),f=o.bigFive,p=o.selfDescribedTags,m=!!f;if(e&&n===`bigFive`)return(0,u.jsxs)(`div`,{className:`space-y-6 im-card`,"data-card-id":`wisdom:selfKnowledgePanel`,children:[i&&(0,u.jsxs)(`div`,{className:`px-2 pt-4`,children:[(0,u.jsx)(M,{scores:i,height:100}),(0,u.jsx)(`div`,{className:`text-[10px] text-center mt-2 opacity-40 uppercase tracking-widest`,children:`Observing Draft Resonance...`})]}),(0,u.jsx)(j,{onUpdate:e=>a(e),onSave:e=>{s(t=>({...t,bigFive:e}))},onComplete:()=>{t(!1),r(null),a(null)},onCancel:()=>{t(!1),r(null),a(null)}})]});let h=()=>{let e=c.trim().toLowerCase().slice(0,30);e&&(p.length>=10||p.includes(e)||(s({...o,selfDescribedTags:[...p,e]}),d(``)))},g=e=>{s({...o,selfDescribedTags:p.filter(t=>t!==e)})},_=P(f?.scores);return(0,u.jsxs)(`div`,{className:`space-y-6 im-card`,"data-card-id":`wisdom:selfKnowledgePanel`,children:[(0,u.jsxs)(`div`,{className:`relative pt-2 pb-6`,children:[(0,u.jsxs)(`div`,{className:`text-center mb-6`,children:[(0,u.jsx)(`h2`,{className:`text-[16px] uppercase mb-1`,style:{fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`,color:`var(--accent-color)`},children:`Wave Function`}),(0,u.jsx)(`p`,{className:`text-[12px] italic`,style:{color:`rgba(253,251,245,0.5)`},children:`Your characteristic patterns for Four Modes guidance`})]}),f&&(0,u.jsxs)(`div`,{className:`px-2`,children:[(0,u.jsx)(M,{scores:f.scores,height:120}),(0,u.jsxs)(`div`,{className:`mt-4 grid grid-cols-2 gap-x-4 gap-y-2 px-2`,children:[(0,u.jsxs)(`div`,{className:`flex flex-col`,children:[(0,u.jsx)(`span`,{className:`text-[9px] uppercase tracking-widest text-[#4ade80]/60`,children:`Amplitude`}),(0,u.jsx)(`span`,{className:`text-[10px] text-white/40 italic`,children:`Sensitivity / Neuroticism`})]}),(0,u.jsxs)(`div`,{className:`flex flex-col`,children:[(0,u.jsx)(`span`,{className:`text-[9px] uppercase tracking-widest text-[#60a5fa]/60`,children:`Complexity`}),(0,u.jsx)(`span`,{className:`text-[10px] text-white/40 italic`,children:`Curiosity / Openness`})]}),(0,u.jsxs)(`div`,{className:`flex flex-col`,children:[(0,u.jsx)(`span`,{className:`text-[9px] uppercase tracking-widest text-[#facc15]/60`,children:`Frequency`}),(0,u.jsx)(`span`,{className:`text-[10px] text-white/40 italic`,children:`Social Velocity / Extraversion`})]}),(0,u.jsxs)(`div`,{className:`flex flex-col`,children:[(0,u.jsx)(`span`,{className:`text-[9px] uppercase tracking-widest text-[#f87171]/60`,children:`Regularity`}),(0,u.jsx)(`span`,{className:`text-[10px] text-white/40 italic`,children:`Order / Conscientiousness`})]})]})]})]}),(0,u.jsxs)(`div`,{className:`flex items-center justify-center gap-2 py-2 px-4 rounded-full mx-auto w-fit`,style:{background:m?`rgba(74, 222, 128, 0.1)`:`rgba(251, 191, 36, 0.1)`,border:`1px solid ${m?`rgba(74, 222, 128, 0.3)`:`rgba(251, 191, 36, 0.3)`}`},children:[(0,u.jsx)(`span`,{style:{color:m?`#4ade80`:`#fbbf24`},children:m?`✓`:`○`}),(0,u.jsx)(`span`,{className:`text-[11px] uppercase tracking-wider`,style:{color:m?`#4ade80`:`#fbbf24`},children:m?`Profile Active`:`Setup Required`})]}),(0,u.jsxs)(`div`,{className:`p-5 rounded-2xl`,style:{background:`rgba(0,0,0,0.25)`,border:f?`1px solid var(--accent-20)`:`1px solid rgba(251, 191, 36, 0.3)`},children:[(0,u.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,u.jsxs)(`div`,{children:[(0,u.jsx)(`div`,{className:`text-[12px] uppercase tracking-wider`,style:{color:`var(--accent-color)`},children:`Personality (Big Five)`}),(0,u.jsx)(`div`,{className:`text-[10px] mt-0.5`,style:{color:`rgba(253,251,245,0.4)`},children:f?`Required • Completed`:`Required for Wave/Sword modes`})]}),f&&(0,u.jsxs)(`div`,{className:`text-[9px] uppercase px-2 py-1 rounded-full`,style:{background:`var(--accent-10)`,color:`var(--accent-color)`},children:[f.reliability,` reliability`]})]}),f?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(`div`,{className:`space-y-2 mb-4`,children:Object.entries(f.scores).map(([e,t])=>(0,u.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,u.jsx)(`div`,{className:`w-24 text-[10px] uppercase tracking-wider`,style:{color:`rgba(253,251,245,0.6)`},children:e.slice(0,1).toUpperCase()}),(0,u.jsx)(`div`,{className:`flex-1 h-1.5 rounded-full overflow-hidden`,style:{background:`rgba(255,255,255,0.1)`},children:(0,u.jsx)(`div`,{className:`h-full rounded-full`,style:{width:`${t*100}%`,background:`var(--accent-color)`}})}),(0,u.jsxs)(`div`,{className:`w-8 text-[10px] text-right`,style:{color:`rgba(253,251,245,0.5)`},children:[(t*100).toFixed(0),`%`]})]},e))}),_&&_.length>0&&(0,u.jsx)(`div`,{className:`flex flex-wrap gap-1.5`,children:_.map((e,t)=>(0,u.jsx)(`span`,{className:`px-2 py-0.5 rounded-full text-[10px]`,style:{background:`var(--accent-10)`,color:`rgba(253,251,245,0.7)`},children:e},t))}),(0,u.jsx)(`button`,{onClick:()=>{r(`bigFive`),t(!0)},className:`mt-3 text-[11px] uppercase tracking-wider`,style:{color:`var(--accent-60)`},children:`Retake Assessment →`})]}):(0,u.jsx)(`button`,{onClick:()=>{r(`bigFive`),t(!0)},className:`w-full py-3 rounded-xl text-[12px] uppercase tracking-wider transition-all`,style:{background:`linear-gradient(135deg, rgba(251, 191, 36, 0.2) 0%, rgba(251, 191, 36, 0.1) 100%)`,border:`1px solid rgba(251, 191, 36, 0.3)`,color:`#fbbf24`},children:`Begin Assessment (~3 min)`})]}),(0,u.jsxs)(`div`,{className:`space-y-3`,children:[(0,u.jsx)(`div`,{className:`text-[11px] uppercase tracking-wider`,style:{color:`rgba(253,251,245,0.4)`},children:`Optional Assessments`}),(0,u.jsxs)(`div`,{className:`p-4 rounded-xl flex items-center justify-between`,style:{background:`rgba(0,0,0,0.2)`,border:`1px solid var(--accent-10)`,opacity:.6},children:[(0,u.jsxs)(`div`,{children:[(0,u.jsx)(`div`,{className:`text-[12px]`,style:{color:`rgba(253,251,245,0.7)`},children:`Character Strengths (VIA)`}),(0,u.jsx)(`div`,{className:`text-[10px]`,style:{color:`rgba(253,251,245,0.4)`},children:`Coming soon`})]}),(0,u.jsx)(`span`,{style:{color:`rgba(253,251,245,0.3)`},children:`○`})]}),(0,u.jsxs)(`div`,{className:`p-4 rounded-xl flex items-center justify-between`,style:{background:`rgba(0,0,0,0.2)`,border:`1px solid var(--accent-10)`,opacity:.6},children:[(0,u.jsxs)(`div`,{children:[(0,u.jsx)(`div`,{className:`text-[12px]`,style:{color:`rgba(253,251,245,0.7)`},children:`Enneagram Type`}),(0,u.jsx)(`div`,{className:`text-[10px]`,style:{color:`rgba(253,251,245,0.4)`},children:`Coming soon`})]}),(0,u.jsx)(`span`,{style:{color:`rgba(253,251,245,0.3)`},children:`○`})]})]}),(0,u.jsxs)(`div`,{className:`p-4 rounded-xl`,style:{background:`rgba(0,0,0,0.2)`,border:`1px solid var(--accent-15)`},children:[(0,u.jsx)(`div`,{className:`text-[11px] uppercase tracking-wider mb-3`,style:{color:`var(--accent-color)`},children:`Self-Described Patterns`}),(0,u.jsx)(`div`,{className:`text-[10px] mb-3`,style:{color:`rgba(253,251,245,0.4)`},children:`Add tags that describe your tendencies (e.g., "conflict-averse", "values-honesty")`}),p.length>0&&(0,u.jsx)(`div`,{className:`flex flex-wrap gap-3 mb-6`,children:p.map((e,t)=>(0,u.jsxs)(`div`,{className:`relative px-4 py-2 text-[11px] group overflow-hidden`,style:{borderRadius:`12px 24px 18px 28px`,background:`linear-gradient(145deg, rgba(40,35,50,0.8), rgba(25,20,35,0.9))`,border:`1px solid rgba(200,180,255,0.15)`,boxShadow:`inset 2px 2px 10px rgba(0,0,0,0.4), 0 4px 12px rgba(0,0,0,0.3)`,transform:`rotate(${(t%2==0?1:-1)*(t%3)}deg)`,fontFamily:`var(--font-body)`},children:[(0,u.jsx)(`div`,{className:`absolute inset-0 opacity-10 pointer-events-none`,style:{backgroundImage:`radial-gradient(circle at 50% 50%, #fff 1px, transparent 1px)`,backgroundSize:`4px 4px`}}),(0,u.jsxs)(`div`,{className:`relative z-10 flex items-center gap-2`,children:[(0,u.jsx)(`span`,{style:{color:`rgba(253,251,245,0.85)`,letterSpacing:`0.05em`},children:e}),(0,u.jsx)(`button`,{onClick:()=>g(e),className:`hover:text-red-400 transition-colors`,style:{color:`rgba(253,251,245,0.3)`},children:`✕`})]})]},t))}),(0,u.jsxs)(`div`,{className:`flex gap-2`,children:[(0,u.jsx)(`input`,{type:`text`,value:c,onChange:e=>d(e.target.value),onKeyPress:e=>e.key===`Enter`&&h(),placeholder:`Add a tag...`,maxLength:30,className:`flex-1 px-3 py-2 rounded-lg text-[12px]`,style:{background:`rgba(0,0,0,0.3)`,border:`1px solid var(--accent-10)`,color:`rgba(253,251,245,0.9)`}}),(0,u.jsx)(`button`,{onClick:h,className:`px-3 py-2 rounded-lg text-[12px]`,style:{background:`var(--accent-10)`,color:`var(--accent-color)`,opacity:c.trim()?1:.5},disabled:!c.trim(),children:`Add`})]}),(0,u.jsxs)(`div`,{className:`text-[9px] mt-2 text-right`,style:{color:`rgba(253,251,245,0.3)`},children:[p.length,`/10 tags`]})]})]})}function I({chapter:e,isOpen:t,onClose:n,onBookmark:r,isBookmarked:o,allChapters:s,onNavigate:d,timeBudgetMin:f}){let{mode:p}=a(),[m,h]=(0,l.useState)(0),[g,v]=(0,l.useState)(!1),y=(0,l.useRef)(null),b=(0,l.useRef)(null),x=(0,l.useRef)(null),S=(0,l.useRef)(null),C=(0,l.useRef)(0),{recordReadingSession:w,markSectionCompleted:T}=c(),E=s.findIndex(t=>t.id===e?.id),D=E>0,O=E<s.length-1,k=m>85;if((0,l.useEffect)(()=>{let t=()=>{if(!y.current)return;let{scrollTop:t,scrollHeight:n,clientHeight:r}=y.current,i=t/(n-r)*100,a=Math.min(100,Math.max(0,i));C.current=a,h(a),e&&a>=85&&T?.(e.id,{source:`scroll`,scrollDepth:a/100}),v(!0),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{v(!1)},2e3),e&&localStorage.setItem(`treatise_progress_${e.id}`,t.toString())},n=y.current;if(n)return n.addEventListener(`scroll`,t),()=>{n.removeEventListener(`scroll`,t),b.current&&clearTimeout(b.current)}},[t,e]),(0,l.useEffect)(()=>{if(!(!t||!e))return S.current=performance.now(),C.current=C.current||0,()=>{let t=S.current;if(S.current=null,!e?.id||!t)return;let n=Math.max(0,Math.round((performance.now()-t)/1e3));if(n<3)return;let r=Math.max(0,Math.min(1,(C.current||0)/100));w?.({sectionId:e.id,timeSpent:n,scrollDepth:r}),r>=.85&&T?.(e.id,{source:`read`,scrollDepth:r})}},[t,e?.id,w,T]),(0,l.useEffect)(()=>{if(!t)return;let e=()=>{v(!1),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{v(!0)},3e3)};return document.addEventListener(`mousemove`,e),()=>{document.removeEventListener(`mousemove`,e),x.current&&clearTimeout(x.current)}},[t]),(0,l.useEffect)(()=>{if(!t||!e||!y.current)return;let n=localStorage.getItem(`treatise_progress_${e.id}`);if(n){let e=parseInt(n,10);setTimeout(()=>{y.current&&(y.current.scrollTop=e)},100)}},[t,e]),(0,l.useEffect)(()=>{let e=e=>{e.key===`Escape`&&n(),e.key===`ArrowLeft`&&D&&d(s[E-1]),e.key===`ArrowRight`&&O&&d(s[E+1])};if(t)return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[t,n,D,O,E,s,d]),!t||!e)return null;let A=_(e.title||``),j=_(e.subtitle||``),M=_(e.excerpt||``),N=_(e.body||``);return(0,u.jsxs)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4`,onClick:e=>{e.target===e.currentTarget&&n()},style:{animation:`fadeIn 300ms ease-out`},children:[(0,u.jsxs)(`div`,{className:`bg-[#0a0a12] border border-[var(--accent-20)] rounded-3xl w-full max-h-[90vh] overflow-hidden flex flex-col shadow-[0_20px_80px_rgba(0,0,0,0.8)] relative im-card`,"data-card":`true`,"data-card-id":`chapter-modal`,style:{animation:`scaleIn 300ms cubic-bezier(0.4, 0, 0.2, 1)`,maxWidth:`var(--ui-rail-max, min(430px, 94vw))`},children:[(0,u.jsx)(`div`,{className:`absolute right-0 top-0 bottom-0 w-[3px] pointer-events-none z-20`,style:{background:`rgba(198, 90, 255, 0.08)`},children:(0,u.jsx)(`div`,{className:`absolute right-0 w-[8px] h-[8px] rounded-full transition-all duration-150`,style:{top:`${m}%`,transform:`translateX(50%) translateY(-50%)`,background:`var(--accent-color)`,boxShadow:`0 0 8px var(--accent-color)`}})}),(0,u.jsx)(`div`,{className:`absolute top-0 left-0 h-[3px] transition-all duration-150 z-10`,style:{width:`${m}% `,background:`var(--accent-color)`,boxShadow:`0 0 12px var(--accent-color)`}}),(0,u.jsxs)(`div`,{className:`border-b border-[var(--accent-15)] py-5 flex items-center justify-between gap-4 flex-shrink-0 transition-opacity duration-500`,style:{opacity:g?.3:1,paddingLeft:p===`hearth`?`20px`:`32px`,paddingRight:p===`hearth`?`20px`:`32px`},children:[(0,u.jsxs)(`div`,{className:`text-[11px] uppercase tracking-[0.2em]`,style:{color:`rgba(253,251,245,0.5)`},children:[`Chapter `,E+1,` of `,s.length]}),(0,u.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,u.jsx)(`button`,{onClick:()=>r(e.id),className:`text-lg transition-all`,style:{color:o?`var(--accent-color)`:`rgba(253,251,245,0.4)`},children:o?`â˜…`:`â˜†`}),(0,u.jsx)(`button`,{onClick:n,className:`text-xl w-9 h-9 flex items-center justify-center rounded-full transition-all`,style:{color:`rgba(253,251,245,0.5)`},children:`âœ•`})]})]}),(0,u.jsxs)(`div`,{className:`pt-[100px] pb-[80px] text-center`,style:{paddingLeft:p===`hearth`?`24px`:`48px`,paddingRight:p===`hearth`?`24px`:`48px`},children:[(0,u.jsx)(`h2`,{className:`text-2xl font-semibold mb-2`,style:{fontFamily:`var(--font-display)`,color:`var(--accent-color)`,letterSpacing:`var(--tracking-tight)`,textShadow:`0 1px 4px rgba(0,0,0,0.65)`},children:A}),j&&(0,u.jsx)(`p`,{className:`text-sm italic`,style:{color:`rgba(253,251,245,0.6)`,fontFamily:`var(--font-body)`},children:j}),typeof f==`number`&&(0,u.jsxs)(`div`,{className:`mt-3 text-[10px] uppercase tracking-[0.24em]`,style:{color:`rgba(253,251,245,0.55)`,fontFamily:`var(--font-ui)`},children:[`Suggested time: `,f,` min`]}),(0,u.jsx)(`div`,{className:`mt-8 mx-auto`,style:{width:`60%`,height:`0.5px`,background:`linear-gradient(90deg, transparent, var(--accent-color), transparent)`,opacity:.3}})]}),(0,u.jsxs)(`div`,{ref:y,className:`py-8 prose-content`,style:{fontFamily:`var(--font-body)`,fontSize:p===`hearth`?`15px`:`17px`,lineHeight:`1.7`,color:`rgba(253,251,245,0.92)`,maxWidth:`65ch`,margin:`0 auto`,paddingLeft:p===`hearth`?`24px`:`48px`,paddingRight:p===`hearth`?`24px`:`48px`},children:[M&&(0,u.jsx)(`blockquote`,{className:`border-l-2 pl-6 py-4 my-6 italic mechanism-text`,style:{borderColor:`var(--accent-40)`,backgroundColor:`var(--accent-10)`,borderRadius:`0 8px 8px 0`,fontSize:`16px`,opacity:.9},children:(0,u.jsx)(i,{children:M})}),N?(0,u.jsxs)(`div`,{className:`markdown-content`,children:[(0,u.jsx)(`div`,{style:{opacity:.85,marginBottom:`1.5em`},children:(0,u.jsx)(i,{children:N.split(`

`)[0]})}),(0,u.jsx)(i,{children:N.split(`

`).slice(1).join(`

`)})]}):(0,u.jsx)(`div`,{className:`text-center py-12`,style:{color:`rgba(253,251,245,0.4)`},children:`No content available.`})]}),(0,u.jsxs)(`div`,{className:`border-t border-[var(--accent-15)] py-4 flex items-center justify-between flex-shrink-0 transition-all duration-500`,style:{opacity:g&&!k?.2:1,transform:g&&!k?`translateY(4px)`:`translateY(0)`,paddingLeft:p===`hearth`?`20px`:`32px`,paddingRight:p===`hearth`?`20px`:`32px`},children:[(0,u.jsx)(`button`,{onClick:()=>D&&d(s[E-1]),className:`px-4 py-2 rounded-full text-sm transition-all`,style:{opacity:D?1:.3,cursor:D?`pointer`:`default`,border:`1px solid var(--accent-20)`,color:`rgba(253,251,245,0.7)`},disabled:!D,children:`â† Previous`}),(0,u.jsx)(`div`,{className:`text-[10px] uppercase tracking-[0.15em]`,style:{color:`rgba(253,251,245,0.4)`},children:`Press â† â†’ to navigate â€¢ Esc to close`}),(0,u.jsx)(`button`,{onClick:()=>O&&d(s[E+1]),className:`px-4 py-2 rounded-full text-sm transition-all`,style:{opacity:O?1:.3,cursor:O?`pointer`:`default`,border:`1px solid var(--accent-20)`,color:`rgba(253,251,245,0.7)`},disabled:!O,children:`Next â†’`})]})]}),(0,u.jsx)(`style`,{children:`
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes scaleIn { from { opacity: 0; transform: scale(0.96); } to { opacity: 1; transform: scale(1); } }

/* Enhanced markdown styling with custom dividers and list styles */
.markdown-content h1, .markdown-content h2, .markdown-content h3 {
  font-family: var(--font-display);
  color: var(--accent-color);
  margin-top: 2.5em;
  margin-bottom: 0.9em;
}

.markdown-content h2 { 
  font-size: 1.5em; 
  border-bottom: none;
  padding-bottom: 0.4em; 
}

/* Horizontal dividers as breath pauses */
.markdown-content hr {
  width: 60%;
  height: 0.5px;
  margin: 3em auto;
  border: none;
  background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
  opacity: 0.3;
}

.markdown-content p { 
  margin: 1em 0; 
}

/* First paragraph styling - already handled inline but keeping for fallback */
.markdown-content > p:first-of-type {
  opacity: 0.85;
}

/* Mechanism/secondary text styling (blockquotes as proxy) */
.markdown-content blockquote,
.mechanism-text {
  border-left: 2px solid var(--accent-40);
  background: var(--accent-10);
  padding: 1em 1.5em;
  margin: 1.5em 0;
  border-radius: 0 8px 8px 0;
  font-style: italic;
  font-size: 0.92em;
  line-height: 1.5;
  opacity: 0.9;
}

/* Custom list styling with subtle visual anchors */
.markdown-content ul {
  list-style: none;
  padding-left: 1.5em;
}

.markdown-content ul li {
  position: relative;
  margin: 0.8em 0;
  padding-left: 1em;
}

.markdown-content ul li::before {
  content: "~";
  position: absolute;
  left: -0.3em;
  color: var(--accent-color);
  font-size: 0.8em;
  opacity: 0.5;
}

.markdown-content ol {
  padding-left: 1.8em;
}

.markdown-content ol li {
  margin: 0.8em 0;
}

/* Scrollbar styling */
.prose-content::-webkit-scrollbar { 
  width: 6px; 
}

.prose-content::-webkit-scrollbar-track { 
  background: rgba(0, 0, 0, 0.2); 
  border-radius: 3px; 
}

.prose-content::-webkit-scrollbar-thumb { 
  background: var(--accent-20); 
  border-radius: 3px; 
  transition: background 0.3s;
}

.prose-content::-webkit-scrollbar-thumb:hover { 
  background: var(--accent-30); 
}
`})]})}function L({part:e,chapters:t,isExpanded:n,onToggle:r,onChapterClick:i,bookmarkedIds:a,onBookmark:o}){let s=t.length,c=e.chapterRange?`Ch ${e.chapterRange[0]}â€“${e.chapterRange[1]} `:``;return(0,u.jsxs)(`div`,{className:`border-b border-[var(--accent-10)]`,children:[(0,u.jsxs)(`button`,{onClick:s>0?r:void 0,disabled:s===0,className:`w-full px-5 py-4 flex items-center justify-between text-left transition-all hover:bg-[var(--accent-05)]`,style:{background:n?`var(--accent-05)`:`transparent`,cursor:s===0?`default`:`pointer`,opacity:s===0?.5:1},children:[(0,u.jsxs)(`div`,{className:`flex items-center gap-3`,children:[s>0&&(0,u.jsx)(`span`,{className:`text-[11px] transition-transform`,style:{color:`var(--accent-color)`,transform:n?`rotate(90deg)`:`rotate(0deg)`},children:`â€º`}),(0,u.jsxs)(`div`,{children:[(0,u.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e.number&&(0,u.jsxs)(`span`,{className:`text-[10px] uppercase tracking-[0.2em]`,style:{color:`var(--accent-color)`,opacity:.5},children:[`Part `,e.number]}),(0,u.jsx)(`span`,{className:`text-[13px] font-medium line-clamp-2`,style:{fontFamily:`var(--font-display)`,color:`rgba(253,251,245,0.9)`},children:e.title})]}),e.subtitle&&(0,u.jsx)(`div`,{className:`text-[11px] mt-0.5`,style:{color:`rgba(253,251,245,0.5)`,fontFamily:`var(--font-body)`},children:e.subtitle})]})]}),(0,u.jsx)(`div`,{className:`text-[10px] uppercase tracking-[0.15em]`,style:{color:`rgba(253,251,245,0.4)`},children:s===0?`Coming soon`:c||`${s} items`})]}),n&&(0,u.jsx)(`div`,{className:`px-5 pb-4 space-y-3`,style:{animation:`slideDown 200ms ease-out`},children:t.map(e=>{let t=a.includes(e.id);return(0,u.jsx)(`button`,{onClick:()=>i(e),className:`w-full text-left px-4 py-3 rounded-xl border transition-all group`,style:{background:`rgba(0,0,0,0.18)`,border:`1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.08)`},children:(0,u.jsxs)(`div`,{className:`flex items-start justify-between gap-3`,children:[(0,u.jsxs)(`div`,{className:`flex-1`,children:[(0,u.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,u.jsx)(`span`,{className:`text-[11px]`,style:{color:`hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.7)`},children:(e.order,e.order)}),(0,u.jsx)(`span`,{className:`text-[13px] font-medium group-hover:text-white transition-colors line-clamp-2`,style:{color:`rgba(253,251,245,0.85)`,fontFamily:`var(--font-body)`},children:_(e.title)})]}),e.subtitle&&(0,u.jsx)(`div`,{className:`text-[11px] mt-1 ml-6`,style:{color:`rgba(253,251,245,0.5)`},children:_(e.subtitle)})]}),(0,u.jsx)(`button`,{onClick:t=>{t.stopPropagation(),o(e.id)},className:`text-sm transition-all flex-shrink-0`,style:{color:t?`var(--accent-color)`:`rgba(253,251,245,0.3)`},children:t?`â˜…`:`â˜†`})]})},e.id)})}),(0,u.jsx)(`style`,{children:`
@keyframes slideDown {
          from { opacity: 0; transform: translateY(-8px); }
          to { opacity: 1; transform: translateY(0); }
}
`})]})}function R(){let t=a(e=>e.colorScheme)===`light`,[n,r]=(0,l.useState)(`Recommendations`),[i,s]=(0,l.useState)(null),[d,v]=(0,l.useState)(null),[y,b]=(0,l.useState)(``),[x,S]=(0,l.useState)(null),[C,w]=(0,l.useState)(!1),[E,D]=(0,l.useState)(null),[O,k]=(0,l.useState)(!1),[A,j]=(0,l.useState)(null),[M,N]=(0,l.useState)(null),{bookmarks:P,addBookmark:R,removeBookmark:z}=c(),B=P.map(e=>e.sectionId),V=e(e=>e.contentLaunchContext),H=e(e=>e.clearContentLaunchContext),U=t?{containerBg:`rgba(255, 250, 240, 0.95)`,cardBg:`rgba(255, 250, 240, 0.6)`,textMain:`rgba(80, 60, 40, 0.95)`,textSub:`rgba(80, 60, 40, 0.7)`,border:`var(--accent-20)`,searchBg:`rgba(255, 250, 240, 0.8)`,searchText:`rgba(80, 60, 40, 0.9)`,searchPlaceholder:`rgba(80, 60, 40, 0.4)`}:{containerBg:`rgba(10, 10, 15, 0.95)`,cardBg:`rgba(26, 15, 28, 0.92)`,textMain:`rgba(253, 251, 245, 0.9)`,textSub:`rgba(253, 251, 245, 0.5)`,border:`var(--accent-15)`,searchBg:`rgba(0, 0, 0, 0.2)`,searchText:`rgba(253, 251, 245, 0.9)`,searchPlaceholder:`rgba(255, 255, 255, 0.4)`},W=e=>{P.some(t=>t.sectionId===e)?z(e):R({sectionId:e})},G=(e,t={})=>{S(e),D(typeof t.durationMin==`number`?t.durationMin:null),w(!0)},K=e=>o.find(t=>t.id===e);(0,l.useEffect)(()=>{if(V)try{if(V.target===`chapter`&&V.chapterId){let e=K(V.chapterId);e&&(r(`Treatise`),G(e,{durationMin:V.durationMin}))}else V.target===`video`&&V.videoId&&(r(`Videos`),j(V.videoId),N(typeof V.durationMin==`number`?V.durationMin:null))}finally{H?.()}},[V,H]);let q=()=>{let e=i?h[i]:null;return e?(0,u.jsxs)(`div`,{className:`space-y-5 im-card`,"data-card-id":`wisdom:recommendationsPanel`,children:[(0,u.jsxs)(`button`,{onClick:()=>s(null),className:`flex items-center gap-2 text-sm transition-all`,style:{color:`var(--accent-color)`},children:[(0,u.jsx)(`span`,{children:`â—€`}),(0,u.jsx)(`span`,{className:`uppercase tracking-[0.15em]`,children:e.label})]}),(0,u.jsx)(`div`,{className:`text-[14px] italic leading-relaxed`,style:{color:U.textSub,fontFamily:`var(--font-body)`},children:e.description}),(0,u.jsx)(`div`,{className:`border-t border-[var(--accent-15)] pt-5 space-y-4`,children:e.chapters.map((e,t)=>{let n=K(e.chapterRef),r=n&&B.includes(n.id);return(0,u.jsxs)(`div`,{"data-card":`true`,"data-card-id":`wisdomRec:${n?.id??t}`,className:`p-5 rounded-2xl border cursor-pointer transition-all group`,style:{background:U.cardBg,border:`1px solid ${U.border}`,borderLeft:`3px solid var(--accent-30)`},onClick:()=>n&&G(n),children:[(0,u.jsxs)(`div`,{className:`flex items-start justify-between gap-3 mb-3`,children:[(0,u.jsx)(`h3`,{className:`text-[15px] font-semibold group-hover:text-white transition-colors`,style:{fontFamily:`var(--font-body)`,color:U.textMain},children:_(e.title)}),n&&(0,u.jsx)(`button`,{onClick:e=>{e.stopPropagation(),W(n.id)},style:{color:r?`var(--accent-color)`:`rgba(253,251,245,0.3)`},children:r?`â˜…`:`â˜†`})]}),(0,u.jsxs)(`div`,{className:`text-[13px] leading-relaxed`,style:{color:U.textSub},children:[(0,u.jsx)(`span`,{style:{color:`var(--accent-color)`},children:`Why: `}),_(e.reasoning)]}),(0,u.jsx)(`div`,{className:`mt-3 text-right`,children:(0,u.jsx)(`span`,{className:`text-[11px] uppercase tracking-[0.15em]`,style:{color:`var(--accent-color)`},children:`Read Chapter â†’`})})]},t)})})]}):J()},J=()=>{let e=g(),n={"focus-presence":`/Immanence/icons/compass/eye.webp`,"emotional-regulation":`/Immanence/icons/compass/balance.webp`,"shadow-integration":`/Immanence/icons/compass/moon.webp`,"heart-connection":`/Immanence/icons/compass/heart.webp`,"grounding-safety":`/Immanence/icons/compass/mountain.webp`,"expression-voice":`/Immanence/icons/compass/wave.webp`,"resonance-alignment":`/Immanence/icons/compass/star.webp`,"self-knowledge":`/Immanence/icons/compass/fire.webp`},r=320*.42,i=38.4;return(0,u.jsxs)(`div`,{className:`space-y-6 im-card`,"data-card-id":`wisdom:recommendationsPanel`,children:[(0,u.jsx)(`div`,{className:`text-center mb-2`,children:(0,u.jsx)(`h2`,{className:`text-[15px] uppercase tracking-[0.28em]`,style:{color:`rgba(253,251,245,0.62)`,letterSpacing:`0.28em`},children:`What Do You Seek?`})}),(0,u.jsxs)(`div`,{className:`relative mx-auto rounded-full w-full`,style:{width:`320px`,height:`320px`,maxWidth:`min(320px, 100vw)`,background:t?`radial-gradient(circle, rgba(250, 245, 235, 0.95) 0%, rgba(240, 230, 220, 0.98) 70%, rgba(230, 220, 210, 1) 100%)`:`radial-gradient(circle, rgba(15,10,25,0.9) 0%, rgba(5,2,10,0.95) 70%, rgba(0,0,0,0.98) 100%)`,border:t?`1px solid rgba(180, 140, 100, 0.3)`:`1px solid rgba(100,80,150,0.2)`,boxShadow:t?`0 0 60px rgba(180, 140, 100, 0.2), inset 0 0 40px rgba(255, 255, 255, 0.3)`:`0 0 60px rgba(100,80,150,0.1), inset 0 0 40px rgba(0,0,0,0.3)`},children:[(0,u.jsx)(`div`,{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full`,style:{background:`radial-gradient(circle, rgba(var(--accent-color-rgb),0.3) 0%, transparent 70%)`,border:`1px solid rgba(200,180,255,0.2)`},children:(0,u.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center text-xs`,style:{color:`rgba(200,180,255,0.5)`},children:`âœ§`})}),(0,u.jsxs)(`svg`,{className:`absolute inset-0 w-full h-full pointer-events-none`,style:{zIndex:0},children:[[0,45,90,135].map(e=>(0,u.jsx)(`line`,{x1:`50%`,y1:`10%`,x2:`50%`,y2:`90%`,stroke:`var(--accent-30)`,strokeWidth:`1`,transform:`rotate(${e} 160 160)`},e)),(0,u.jsx)(`circle`,{cx:`50%`,cy:`50%`,r:`35%`,fill:`none`,stroke:`var(--accent-20)`,strokeWidth:`1`}),(0,u.jsx)(`circle`,{cx:`50%`,cy:`50%`,r:`25%`,fill:`none`,stroke:`var(--accent-15)`,strokeWidth:`1`})]}),e.map((t,a)=>{let o=a/e.length*2*Math.PI-Math.PI/2,c=Math.cos(o)*r+160,l=Math.sin(o)*r+160,d=n[t.key]||`â—†`;return(0,u.jsxs)(`button`,{onClick:()=>s(t.key),"data-card":`true`,"data-card-id":`wisdomNode:${t.key}`,className:`absolute flex flex-col items-center justify-center transition-all hover:scale-110 group`,style:{width:`${i}px`,height:`${i}px`,left:c-i/2+`px`,top:l-i/2+`px`,zIndex:10},children:[(0,u.jsx)(`div`,{className:`w-full h-full rounded-full flex items-center justify-center mb-1 transition-all group-hover:shadow-lg overflow-hidden`,style:{background:`radial-gradient(circle, rgba(30,20,50,0.9) 0%, rgba(15,10,25,1) 100%)`,border:`1px solid var(--accent-30)`,boxShadow:`0 0 15px var(--accent-10)`},children:(0,u.jsx)(`img`,{src:d,alt:t.label,className:`w-3/4 h-3/4 object-contain transition-transform group-hover:scale-110`,style:{filter:`drop-shadow(0 0 4px var(--accent-glow))`}})}),(0,u.jsx)(`span`,{className:`absolute -bottom-5 text-[9px] uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap`,style:{color:`rgba(200,180,255,0.7)`},children:t.label.split(` `)[0]})]},t.key)})]}),(0,u.jsx)(`div`,{className:`text-center text-[11px]`,style:{color:`rgba(253,251,245,0.4)`},children:`Tap a symbol to explore its wisdom`})]})},Y=()=>{let e=y.trim().toLowerCase(),t=e?o.filter(t=>(t.title+` `+(t.subtitle||``)+` `+(t.excerpt||``)).toLowerCase().includes(e)):null;return t?(0,u.jsxs)(`div`,{className:`space-y-5 im-card`,"data-card":`true`,"data-card-id":`wisdom:treatisePanel`,children:[(0,u.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,u.jsx)(`div`,{className:`flex-1 relative`,children:(0,u.jsx)(`input`,{type:`text`,value:y,onChange:e=>b(e.target.value),placeholder:`Search treatise...`,className:`wisdom-search w-full px-4 py-3 text-[13px]`,style:{color:U.searchText,background:U.searchBg,border:`1px solid ${U.border}`}})}),(0,u.jsx)(`button`,{onClick:()=>b(``),className:`px-4 py-3 rounded-xl text-[12px] border transition-all`,style:{border:`1px solid var(--accent-20)`,color:`rgba(253,251,245,0.6)`},children:`Clear`})]}),(0,u.jsxs)(`div`,{className:`text-[11px]`,style:{color:`rgba(253,251,245,0.5)`},children:[t.length,` result`,t.length===1?``:`s`,` for "`,y,`"`]}),(0,u.jsx)(`div`,{className:`space-y-3`,children:t.map(e=>(0,u.jsxs)(`button`,{onClick:()=>G(e),className:`w-full text-left px-4 py-3 rounded-xl border transition-all`,style:{background:`rgba(0,0,0,0.18)`,border:`1px solid hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.08)`},children:[(0,u.jsx)(`div`,{className:`text-[13px] font-medium`,style:{color:`rgba(253,251,245,0.85)`},children:_(e.title)}),e.subtitle&&(0,u.jsx)(`div`,{className:`text-[11px] mt-1`,style:{color:`rgba(253,251,245,0.5)`},children:_(e.subtitle)})]},e.id))})]}):(0,u.jsxs)(`div`,{className:`space-y-5 im-card`,"data-card":`true`,"data-card-id":`wisdom:treatisePanel`,children:[(0,u.jsxs)(`div`,{className:`text-center pb-5 border-b border-[var(--accent-10)]`,children:[(0,u.jsx)(`h2`,{className:`text-[16px] uppercase mb-1`,style:{fontFamily:`var(--font-display)`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`,color:`var(--accent-color)`},children:`The Treatise`}),(0,u.jsx)(`p`,{className:`text-[12px] italic`,style:{color:`rgba(253,251,245,0.5)`},children:`A Map of Conscious Living`})]}),(0,u.jsx)(`div`,{className:`relative`,children:(0,u.jsx)(`input`,{type:`text`,value:y,onChange:e=>b(e.target.value),placeholder:`Search chapters...`,className:`wisdom-search w-full px-4 py-3 text-[13px]`,style:{color:U.searchText,background:U.searchBg,border:`1px solid ${U.border}`}})}),(0,u.jsx)(`div`,{className:`border border-[var(--accent-15)] rounded-2xl`,children:p.map(e=>(0,u.jsx)(L,{part:e,chapters:m(e.id,o),isExpanded:d===e.id,onToggle:()=>v(d===e.id?null:e.id),onChapterClick:G,bookmarkedIds:B,onBookmark:W},e.id))})]})},X=()=>{let e=o.filter(e=>B.includes(e.id));return e.length===0?(0,u.jsxs)(`div`,{className:`relative min-h-[300px] flex flex-col items-center justify-center rounded-2xl overflow-hidden im-card`,"data-card":`true`,"data-card-id":`wisdom:bookmarksPanel`,style:{background:`radial-gradient(ellipse at center, rgba(10,5,20,0.95) 0%, rgba(5,2,10,1) 100%)`,border:`1px solid rgba(100,80,150,0.15)`},children:[(0,u.jsx)(`div`,{className:`absolute inset-0 pointer-events-none`,children:[...Array(30)].map((e,t)=>(0,u.jsx)(`div`,{className:`absolute rounded-full`,style:{width:Math.random()*2+1+`px`,height:Math.random()*2+1+`px`,left:Math.random()*100+`%`,top:Math.random()*100+`%`,background:`rgba(255,255,255,0.3)`,animation:`twinkle ${2+Math.random()*3}s ease-in-out infinite`,animationDelay:Math.random()*2+`s`}},t))}),(0,u.jsxs)(`div`,{className:`relative z-10 text-center`,children:[(0,u.jsx)(`div`,{className:`text-4xl mb-4`,style:{filter:`drop-shadow(0 0 8px rgba(200,180,255,0.4))`,animation:`pulse 3s ease-in-out infinite`},children:`âœ§`}),(0,u.jsx)(`div`,{className:`text-[14px] italic mb-2`,style:{fontFamily:`var(--font-body)`,color:`rgba(200,180,255,0.7)`,letterSpacing:`0.05em`},children:`The sky is waiting for your stars`}),(0,u.jsx)(`div`,{className:`text-[11px]`,style:{color:`rgba(253,251,245,0.4)`},children:`Bookmark chapters to build your constellation`})]}),(0,u.jsx)(`style`,{children:`
            @keyframes twinkle {
              0%, 100% { opacity: 0.3; }
              50% { opacity: 0.8; }
            }
          `})]}):(0,u.jsxs)(`div`,{className:`relative min-h-[350px] rounded-2xl p-6 overflow-hidden im-card`,"data-card":`true`,"data-card-id":`wisdom:bookmarksPanel`,style:{background:`radial-gradient(ellipse at center top, rgba(15,10,30,0.95) 0%, rgba(5,2,10,1) 100%)`,border:`1px solid rgba(100,80,150,0.2)`},children:[(0,u.jsx)(`div`,{className:`absolute inset-0 pointer-events-none`,children:[...Array(20)].map((e,t)=>(0,u.jsx)(`div`,{className:`absolute rounded-full`,style:{width:Math.random()*1.5+.5+`px`,height:Math.random()*1.5+.5+`px`,left:Math.random()*100+`%`,top:Math.random()*100+`%`,background:`rgba(255,255,255,0.2)`}},t))}),e.length>1&&(0,u.jsxs)(`svg`,{className:`absolute inset-0 w-full h-full pointer-events-none`,style:{zIndex:1},children:[(0,u.jsx)(`defs`,{children:(0,u.jsxs)(`linearGradient`,{id:`constellationLine`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`0%`,children:[(0,u.jsx)(`stop`,{offset:`0%`,stopColor:`rgba(200,180,255,0.1)`}),(0,u.jsx)(`stop`,{offset:`50%`,stopColor:`rgba(200,180,255,0.3)`}),(0,u.jsx)(`stop`,{offset:`100%`,stopColor:`rgba(200,180,255,0.1)`})]})}),e.slice(0,-1).map((e,t)=>{let n=60+t*70,r=60+(t+1)*70,i=20+t%2*15,a=20+(t+1)%2*15;return(0,u.jsx)(`line`,{x1:`${i}%`,y1:n,x2:`${a}%`,y2:r,stroke:`url(#constellationLine)`,strokeWidth:`1`,strokeDasharray:`4 4`},t)})]}),(0,u.jsx)(`div`,{className:`relative z-10 space-y-4`,children:e.map((e,t)=>(0,u.jsxs)(`button`,{onClick:()=>G(e),className:`w-full text-left px-4 py-3 rounded-xl transition-all group relative`,style:{background:`rgba(20,15,40,0.6)`,border:`1px solid rgba(200,180,255,0.15)`,marginLeft:t%2*20+`px`,maxWidth:`calc(100% - 20px)`},children:[(0,u.jsx)(`div`,{className:`absolute -left-3 top-1/2 -translate-y-1/2 text-lg`,style:{color:`var(--accent-color)`,filter:`drop-shadow(0 0 6px var(--accent-glow))`},children:`â˜…`}),(0,u.jsxs)(`div`,{className:`flex items-start justify-between gap-3 pl-4`,children:[(0,u.jsxs)(`div`,{children:[(0,u.jsx)(`div`,{className:`text-[13px] font-medium group-hover:text-white transition-colors`,style:{color:`rgba(253,251,245,0.85)`},children:_(e.title)}),e.subtitle&&(0,u.jsx)(`div`,{className:`text-[11px] mt-1`,style:{color:`rgba(253,251,245,0.5)`},children:_(e.subtitle)})]}),(0,u.jsx)(`button`,{onClick:t=>{t.stopPropagation(),W(e.id)},className:`text-sm transition-opacity hover:opacity-70`,style:{color:`rgba(255,200,200,0.8)`},title:`Remove from constellation`,children:`âœ•`})]})]},e.id))}),(0,u.jsxs)(`div`,{className:`absolute bottom-4 right-4 text-[10px] uppercase tracking-wider`,style:{color:`rgba(200,180,255,0.4)`},children:[e.length,` star`,e.length===1?``:`s`,` in your sky`]})]})},Z=()=>(0,u.jsx)(`div`,{className:`im-card`,"data-card-id":`wisdom:videosPanel`,children:(0,u.jsx)(T,{initialVideoId:A,initialVideoBudgetMin:M})});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(I,{chapter:x,isOpen:C,onClose:()=>{w(!1),D(null)},onBookmark:W,isBookmarked:x&&B.includes(x.id),allChapters:o,onNavigate:e=>{S(e),D(null)},timeBudgetMin:E}),(0,u.jsx)(`div`,{"data-tutorial":`wisdom-root`,className:`w-full max-w-5xl mx-auto`,children:(0,u.jsxs)(`div`,{className:`border border-[var(--accent-15)] backdrop-blur-xl px-7 pt-8 pb-9 space-y-5 relative`,style:{background:`rgba(20, 10, 15, 0.78)`,borderRadius:`var(--radius-panel)`,boxShadow:`var(--shadow-panel)`},children:[(0,u.jsx)(`div`,{className:`absolute inset-0 pointer-events-none`,style:{backgroundImage:`url(/wisdom - scroll.webp)`,backgroundSize:`contain`,backgroundPosition:`center center`,backgroundRepeat:`no-repeat`,opacity:.17,zIndex:0,borderRadius:`var(--radius-panel)`}}),(0,u.jsxs)(`div`,{className:`mb-6`,style:{display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`12px`},children:[(0,u.jsx)(`div`,{style:{fontFamily:`var(--font-display)`,fontSize:`11px`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`,color:`rgba(253,251,245,0.5)`,textTransform:`uppercase`},children:`What do you need?`}),(0,u.jsxs)(`button`,{onClick:()=>k(!0),className:`px-6 py-3 rounded-full im-nav-btn`,style:{fontFamily:`var(--font-display)`,fontSize:`13px`,fontWeight:600,letterSpacing:`var(--tracking-mythic)`,color:`var(--accent-color)`,display:`flex`,alignItems:`center`,gap:`12px`,background:`linear-gradient(135deg, rgba(255,255,255,0.08) 0%, transparent 100%)`,border:`1px solid var(--accent-30)`,boxShadow:`0 0 25px var(--accent-15), inset 0 0 20px var(--accent-08)`,transform:O?`scale(1.06)`:`scale(1)`,transition:`transform 300ms ease-out, background 300ms ease-out, box-shadow 300ms ease-out`},children:[(0,u.jsxs)(`span`,{children:[n,n===`Bookmarks`&&B.length>0?` (${B.length})`:``]}),(0,u.jsx)(`span`,{style:{fontSize:`10px`,transform:O?`rotate(180deg)`:`rotate(0deg)`,transition:`transform 200ms ease-out`},children:`â–¼`})]})]}),(0,u.jsxs)(`section`,{className:`min-h-[400px] relative z-10`,children:[n===`Recommendations`&&q(),n===`Treatise`&&Y(),n===`Bookmarks`&&X(),n===`Videos`&&Z(),n===`Self-Knowledge`&&(0,u.jsx)(F,{})]})]})}),(0,u.jsx)(f,{isOpen:O,onClose:()=>k(!1),currentTab:n,onSelectTab:r,bookmarksCount:B.length})]})}export{R as WisdomSection};